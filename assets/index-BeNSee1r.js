var l8e=Object.defineProperty;var c8e=(e,t,n)=>t in e?l8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f8e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hu=(e,t,n)=>(c8e(e,typeof t!="symbol"?t+"":t,n),n);var wun=f8e((Nln,Aie)=>{function d8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h8e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Iye={exports:{}},oL={},kye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rk=Symbol.for("react.element"),p8e=Symbol.for("react.portal"),m8e=Symbol.for("react.fragment"),g8e=Symbol.for("react.strict_mode"),y8e=Symbol.for("react.profiler"),v8e=Symbol.for("react.provider"),b8e=Symbol.for("react.context"),_8e=Symbol.for("react.forward_ref"),w8e=Symbol.for("react.suspense"),E8e=Symbol.for("react.memo"),x8e=Symbol.for("react.lazy"),Qie=Symbol.iterator;function S8e(e){return e===null||typeof e!="object"?null:(e=Qie&&e[Qie]||e["@@iterator"],typeof e=="function"?e:null)}var Rye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nye=Object.assign,Pye={};function Gx(e,t,n){this.props=e,this.context=t,this.refs=Pye,this.updater=n||Rye}Gx.prototype.isReactComponent={};Gx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dye(){}Dye.prototype=Gx.prototype;function zq(e,t,n){this.props=e,this.context=t,this.refs=Pye,this.updater=n||Rye}var Vq=zq.prototype=new Dye;Vq.constructor=zq;Nye(Vq,Gx.prototype);Vq.isPureReactComponent=!0;var Jie=Array.isArray,Oye=Object.prototype.hasOwnProperty,Hq={current:null},$ye={key:!0,ref:!0,__self:!0,__source:!0};function Mye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Oye.call(t,r)&&!$ye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rk,type:e,key:s,ref:o,props:i,_owner:Hq.current}}function T8e(e,t){return{$$typeof:rk,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qq(e){return typeof e=="object"&&e!==null&&e.$$typeof===rk}function C8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zie=/\/+/g;function nj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?C8e(""+e.key):t.toString(36)}function ZP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case rk:case p8e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+nj(o,0):r,Jie(i)?(n="",e!=null&&(n=e.replace(Zie,"$&/")+"/"),ZP(i,t,n,"",function(l){return l})):i!=null&&(qq(i)&&(i=T8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Jie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+nj(s,a);o+=ZP(s,t,n,u,i)}else if(u=S8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+nj(s,a++),o+=ZP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cN(e,t,n){if(e==null)return e;var r=[],i=0;return ZP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function A8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var iu={current:null},eD={transition:null},I8e={ReactCurrentDispatcher:iu,ReactCurrentBatchConfig:eD,ReactCurrentOwner:Hq};function Lye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:cN,forEach:function(e,t,n){cN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cN(e,function(){t++}),t},toArray:function(e){return cN(e,function(t){return t})||[]},only:function(e){if(!qq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Gx;Mn.Fragment=m8e;Mn.Profiler=y8e;Mn.PureComponent=zq;Mn.StrictMode=g8e;Mn.Suspense=w8e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I8e;Mn.act=Lye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Hq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Oye.call(t,u)&&!$ye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:rk,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:b8e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:v8e,_context:e},e.Consumer=e};Mn.createElement=Mye;Mn.createFactory=function(e){var t=Mye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:_8e,render:e}};Mn.isValidElement=qq;Mn.lazy=function(e){return{$$typeof:x8e,_payload:{_status:-1,_result:e},_init:A8e}};Mn.memo=function(e,t){return{$$typeof:E8e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=eD.transition;eD.transition={};try{e()}finally{eD.transition=t}};Mn.unstable_act=Lye;Mn.useCallback=function(e,t){return iu.current.useCallback(e,t)};Mn.useContext=function(e){return iu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return iu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return iu.current.useEffect(e,t)};Mn.useId=function(){return iu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return iu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return iu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return iu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return iu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return iu.current.useReducer(e,t,n)};Mn.useRef=function(e){return iu.current.useRef(e)};Mn.useState=function(e){return iu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return iu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return iu.current.useTransition()};Mn.version="18.3.1";kye.exports=Mn;var I=kye.exports;const _r=Kl(I),vO=d8e({__proto__:null,default:_r},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k8e=I,R8e=Symbol.for("react.element"),N8e=Symbol.for("react.fragment"),P8e=Object.prototype.hasOwnProperty,D8e=k8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O8e={key:!0,ref:!0,__self:!0,__source:!0};function Fye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)P8e.call(t,r)&&!O8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:R8e,type:e,key:s,ref:o,props:i,_owner:D8e.current}}oL.Fragment=N8e;oL.jsx=Fye;oL.jsxs=Fye;Iye.exports=oL;var b=Iye.exports,tU={},jye={exports:{}},Xl={},Bye={exports:{}},Uye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var P=U.length;U.push(H);e:for(;0<P;){var z=P-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[P]=W,P=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],P=U.pop();if(P!==H){U[0]=P;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,P))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=P,z=ne):(U[z]=G,U[q]=P,z=q);else if(ne<W&&0>i(ce,P))U[z]=ce,U[ne]=P,z=ne;else break e}}return H}function i(U,H){var P=U.sortIndex-H.sortIndex;return P!==0?P:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,_(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var x=!1,S=null,C=-1,A=5,k=-1;function N(){return!(e.unstable_now()-k<A)}function O(){if(S!==null){var U=e.unstable_now();k=U;var H=!0;try{H=S(!0,U)}finally{H?D():(x=!1,S=null)}}else x=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function M(U){S=U,x||(x=!0,D())}function B(U,H){C=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(U,H,P){var z=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?z+P:z):P=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:H,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>z?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,P-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var P=d;d=H;try{return U.apply(this,arguments)}finally{d=P}}}})(Uye);Bye.exports=Uye;var $8e=Bye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M8e=I,$l=$8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zye=new Set,cA={};function Rb(e,t){IE(e,t),IE(e+"Capture",t)}function IE(e,t){for(cA[e]=t,e=0;e<t.length;e++)zye.add(t[e])}var mm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nU=Object.prototype.hasOwnProperty,L8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ese={},tse={};function F8e(e){return nU.call(tse,e)?!0:nU.call(ese,e)?!1:L8e.test(e)?tse[e]=!0:(ese[e]=!0,!1)}function j8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B8e(e,t,n,r){if(t===null||typeof t>"u"||j8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function su(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new su(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new su(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new su(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new su(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new su(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new su(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new su(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new su(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new su(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wq=/[\-:]([a-z])/g;function Gq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wq,Gq);Lo[t]=new su(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wq,Gq);Lo[t]=new su(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wq,Gq);Lo[t]=new su(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new su(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new su("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new su(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yq(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B8e(t,n,i,r)&&(n=null),r||i===null?F8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vm=M8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fN=Symbol.for("react.element"),gw=Symbol.for("react.portal"),yw=Symbol.for("react.fragment"),Kq=Symbol.for("react.strict_mode"),rU=Symbol.for("react.profiler"),Vye=Symbol.for("react.provider"),Hye=Symbol.for("react.context"),Xq=Symbol.for("react.forward_ref"),iU=Symbol.for("react.suspense"),sU=Symbol.for("react.suspense_list"),Qq=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),qye=Symbol.for("react.offscreen"),nse=Symbol.iterator;function mT(e){return e===null||typeof e!="object"?null:(e=nse&&e[nse]||e["@@iterator"],typeof e=="function"?e:null)}var Di=Object.assign,rj;function y2(e){if(rj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rj=t&&t[1]||""}return`
`+rj+e}var ij=!1;function sj(e,t){if(!e||ij)return"";ij=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{ij=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?y2(e):""}function U8e(e){switch(e.tag){case 5:return y2(e.type);case 16:return y2("Lazy");case 13:return y2("Suspense");case 19:return y2("SuspenseList");case 0:case 2:case 15:return e=sj(e.type,!1),e;case 11:return e=sj(e.type.render,!1),e;case 1:return e=sj(e.type,!0),e;default:return""}}function oU(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yw:return"Fragment";case gw:return"Portal";case rU:return"Profiler";case Kq:return"StrictMode";case iU:return"Suspense";case sU:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hye:return(e.displayName||"Context")+".Consumer";case Vye:return(e._context.displayName||"Context")+".Provider";case Xq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qq:return t=e.displayName||null,t!==null?t:oU(e.type)||"Memo";case Rg:t=e._payload,e=e._init;try{return oU(e(t))}catch{}}return null}function z8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oU(t);case 8:return t===Kq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function F0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function V8e(e){var t=Wye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dN(e){e._valueTracker||(e._valueTracker=V8e(e))}function Gye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Wye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function bO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function aU(e,t){var n=t.checked;return Di({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rse(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=F0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yye(e,t){t=t.checked,t!=null&&Yq(e,"checked",t,!1)}function uU(e,t){Yye(e,t);var n=F0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lU(e,t.type,n):t.hasOwnProperty("defaultValue")&&lU(e,t.type,F0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ise(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function lU(e,t,n){(t!=="number"||bO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var v2=Array.isArray;function zw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+F0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cU(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Di({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sse(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(v2(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:F0(n)}}function Kye(e,t){var n=F0(t.value),r=F0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ose(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fU(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hN,Qye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hN=hN||document.createElement("div"),hN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H8e=["Webkit","ms","Moz","O"];Object.keys(cC).forEach(function(e){H8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cC[t]=cC[e]})});function Jye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cC.hasOwnProperty(e)&&cC[e]?(""+t).trim():t+"px"}function Zye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var q8e=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dU(e,t){if(t){if(q8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function hU(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pU=null;function Jq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mU=null,Vw=null,Hw=null;function ase(e){if(e=ok(e)){if(typeof mU!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=fL(t),mU(e.stateNode,e.type,t))}}function e1e(e){Vw?Hw?Hw.push(e):Hw=[e]:Vw=e}function t1e(){if(Vw){var e=Vw,t=Hw;if(Hw=Vw=null,ase(e),t)for(e=0;e<t.length;e++)ase(t[e])}}function n1e(e,t){return e(t)}function r1e(){}var oj=!1;function i1e(e,t,n){if(oj)return e(t,n);oj=!0;try{return n1e(e,t,n)}finally{oj=!1,(Vw!==null||Hw!==null)&&(r1e(),t1e())}}function dA(e,t){var n=e.stateNode;if(n===null)return null;var r=fL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var gU=!1;if(mm)try{var gT={};Object.defineProperty(gT,"passive",{get:function(){gU=!0}}),window.addEventListener("test",gT,gT),window.removeEventListener("test",gT,gT)}catch{gU=!1}function W8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var fC=!1,_O=null,wO=!1,yU=null,G8e={onError:function(e){fC=!0,_O=e}};function Y8e(e,t,n,r,i,s,o,a,u){fC=!1,_O=null,W8e.apply(G8e,arguments)}function K8e(e,t,n,r,i,s,o,a,u){if(Y8e.apply(this,arguments),fC){if(fC){var l=_O;fC=!1,_O=null}else throw Error(tt(198));wO||(wO=!0,yU=l)}}function Nb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s1e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function use(e){if(Nb(e)!==e)throw Error(tt(188))}function X8e(e){var t=e.alternate;if(!t){if(t=Nb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return use(i),e;if(s===r)return use(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function o1e(e){return e=X8e(e),e!==null?a1e(e):null}function a1e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=a1e(e);if(t!==null)return t;e=e.sibling}return null}var u1e=$l.unstable_scheduleCallback,lse=$l.unstable_cancelCallback,Q8e=$l.unstable_shouldYield,J8e=$l.unstable_requestPaint,ss=$l.unstable_now,Z8e=$l.unstable_getCurrentPriorityLevel,Zq=$l.unstable_ImmediatePriority,l1e=$l.unstable_UserBlockingPriority,EO=$l.unstable_NormalPriority,eBe=$l.unstable_LowPriority,c1e=$l.unstable_IdlePriority,aL=null,ah=null;function tBe(e){if(ah&&typeof ah.onCommitFiberRoot=="function")try{ah.onCommitFiberRoot(aL,e,void 0,(e.current.flags&128)===128)}catch{}}var Ff=Math.clz32?Math.clz32:iBe,nBe=Math.log,rBe=Math.LN2;function iBe(e){return e>>>=0,e===0?32:31-(nBe(e)/rBe|0)|0}var pN=64,mN=4194304;function b2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=b2(a):(s&=o,s!==0&&(r=b2(s)))}else o=n&~i,o!==0?r=b2(o):s!==0&&(r=b2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ff(t),i=1<<n,r|=e[n],t&=~i;return r}function sBe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oBe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ff(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=sBe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function vU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function f1e(){var e=pN;return pN<<=1,!(pN&4194240)&&(pN=64),e}function aj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ik(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ff(t),e[t]=n}function aBe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ff(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function eW(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ff(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Or=0;function d1e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var h1e,tW,p1e,m1e,g1e,bU=!1,gN=[],d0=null,h0=null,p0=null,hA=new Map,pA=new Map,Bg=[],uBe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cse(e,t){switch(e){case"focusin":case"focusout":d0=null;break;case"dragenter":case"dragleave":h0=null;break;case"mouseover":case"mouseout":p0=null;break;case"pointerover":case"pointerout":hA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pA.delete(t.pointerId)}}function yT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ok(t),t!==null&&tW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function lBe(e,t,n,r,i){switch(t){case"focusin":return d0=yT(d0,e,t,n,r,i),!0;case"dragenter":return h0=yT(h0,e,t,n,r,i),!0;case"mouseover":return p0=yT(p0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return hA.set(s,yT(hA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pA.set(s,yT(pA.get(s)||null,e,t,n,r,i)),!0}return!1}function y1e(e){var t=tv(e.target);if(t!==null){var n=Nb(t);if(n!==null){if(t=n.tag,t===13){if(t=s1e(n),t!==null){e.blockedOn=t,g1e(e.priority,function(){p1e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tD(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_U(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);pU=r,n.target.dispatchEvent(r),pU=null}else return t=ok(n),t!==null&&tW(t),e.blockedOn=n,!1;t.shift()}return!0}function fse(e,t,n){tD(e)&&n.delete(t)}function cBe(){bU=!1,d0!==null&&tD(d0)&&(d0=null),h0!==null&&tD(h0)&&(h0=null),p0!==null&&tD(p0)&&(p0=null),hA.forEach(fse),pA.forEach(fse)}function vT(e,t){e.blockedOn===t&&(e.blockedOn=null,bU||(bU=!0,$l.unstable_scheduleCallback($l.unstable_NormalPriority,cBe)))}function mA(e){function t(i){return vT(i,e)}if(0<gN.length){vT(gN[0],e);for(var n=1;n<gN.length;n++){var r=gN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(d0!==null&&vT(d0,e),h0!==null&&vT(h0,e),p0!==null&&vT(p0,e),hA.forEach(t),pA.forEach(t),n=0;n<Bg.length;n++)r=Bg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bg.length&&(n=Bg[0],n.blockedOn===null);)y1e(n),n.blockedOn===null&&Bg.shift()}var qw=Vm.ReactCurrentBatchConfig,SO=!0;function fBe(e,t,n,r){var i=Or,s=qw.transition;qw.transition=null;try{Or=1,nW(e,t,n,r)}finally{Or=i,qw.transition=s}}function dBe(e,t,n,r){var i=Or,s=qw.transition;qw.transition=null;try{Or=4,nW(e,t,n,r)}finally{Or=i,qw.transition=s}}function nW(e,t,n,r){if(SO){var i=_U(e,t,n,r);if(i===null)yj(e,t,r,TO,n),cse(e,r);else if(lBe(i,e,t,n,r))r.stopPropagation();else if(cse(e,r),t&4&&-1<uBe.indexOf(e)){for(;i!==null;){var s=ok(i);if(s!==null&&h1e(s),s=_U(e,t,n,r),s===null&&yj(e,t,r,TO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yj(e,t,r,null,n)}}var TO=null;function _U(e,t,n,r){if(TO=null,e=Jq(r),e=tv(e),e!==null)if(t=Nb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=s1e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return TO=e,null}function v1e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z8e()){case Zq:return 1;case l1e:return 4;case EO:case eBe:return 16;case c1e:return 536870912;default:return 16}default:return 16}}var Xg=null,rW=null,nD=null;function b1e(){if(nD)return nD;var e,t=rW,n=t.length,r,i="value"in Xg?Xg.value:Xg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return nD=i.slice(e,1<r?1-r:void 0)}function rD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yN(){return!0}function dse(){return!1}function Ql(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yN:dse,this.isPropagationStopped=dse,this}return Di(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yN)},persist:function(){},isPersistent:yN}),t}var Yx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iW=Ql(Yx),sk=Di({},Yx,{view:0,detail:0}),hBe=Ql(sk),uj,lj,bT,uL=Di({},sk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bT&&(bT&&e.type==="mousemove"?(uj=e.screenX-bT.screenX,lj=e.screenY-bT.screenY):lj=uj=0,bT=e),uj)},movementY:function(e){return"movementY"in e?e.movementY:lj}}),hse=Ql(uL),pBe=Di({},uL,{dataTransfer:0}),mBe=Ql(pBe),gBe=Di({},sk,{relatedTarget:0}),cj=Ql(gBe),yBe=Di({},Yx,{animationName:0,elapsedTime:0,pseudoElement:0}),vBe=Ql(yBe),bBe=Di({},Yx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_Be=Ql(bBe),wBe=Di({},Yx,{data:0}),pse=Ql(wBe),EBe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xBe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SBe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TBe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SBe[e])?!!t[e]:!1}function sW(){return TBe}var CBe=Di({},sk,{key:function(e){if(e.key){var t=EBe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xBe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sW,charCode:function(e){return e.type==="keypress"?rD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ABe=Ql(CBe),IBe=Di({},uL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mse=Ql(IBe),kBe=Di({},sk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sW}),RBe=Ql(kBe),NBe=Di({},Yx,{propertyName:0,elapsedTime:0,pseudoElement:0}),PBe=Ql(NBe),DBe=Di({},uL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OBe=Ql(DBe),$Be=[9,13,27,32],oW=mm&&"CompositionEvent"in window,dC=null;mm&&"documentMode"in document&&(dC=document.documentMode);var MBe=mm&&"TextEvent"in window&&!dC,_1e=mm&&(!oW||dC&&8<dC&&11>=dC),gse=" ",yse=!1;function w1e(e,t){switch(e){case"keyup":return $Be.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E1e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vw=!1;function LBe(e,t){switch(e){case"compositionend":return E1e(t);case"keypress":return t.which!==32?null:(yse=!0,gse);case"textInput":return e=t.data,e===gse&&yse?null:e;default:return null}}function FBe(e,t){if(vw)return e==="compositionend"||!oW&&w1e(e,t)?(e=b1e(),nD=rW=Xg=null,vw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _1e&&t.locale!=="ko"?null:t.data;default:return null}}var jBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jBe[e.type]:t==="textarea"}function x1e(e,t,n,r){e1e(r),t=CO(t,"onChange"),0<t.length&&(n=new iW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var hC=null,gA=null;function BBe(e){O1e(e,0)}function lL(e){var t=ww(e);if(Gye(t))return e}function UBe(e,t){if(e==="change")return t}var S1e=!1;if(mm){var fj;if(mm){var dj="oninput"in document;if(!dj){var bse=document.createElement("div");bse.setAttribute("oninput","return;"),dj=typeof bse.oninput=="function"}fj=dj}else fj=!1;S1e=fj&&(!document.documentMode||9<document.documentMode)}function _se(){hC&&(hC.detachEvent("onpropertychange",T1e),gA=hC=null)}function T1e(e){if(e.propertyName==="value"&&lL(gA)){var t=[];x1e(t,gA,e,Jq(e)),i1e(BBe,t)}}function zBe(e,t,n){e==="focusin"?(_se(),hC=t,gA=n,hC.attachEvent("onpropertychange",T1e)):e==="focusout"&&_se()}function VBe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lL(gA)}function HBe(e,t){if(e==="click")return lL(t)}function qBe(e,t){if(e==="input"||e==="change")return lL(t)}function WBe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gf=typeof Object.is=="function"?Object.is:WBe;function yA(e,t){if(Gf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nU.call(t,i)||!Gf(e[i],t[i]))return!1}return!0}function wse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ese(e,t){var n=wse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wse(n)}}function C1e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?C1e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function A1e(){for(var e=window,t=bO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bO(e.document)}return t}function aW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GBe(e){var t=A1e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&C1e(n.ownerDocument.documentElement,n)){if(r!==null&&aW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ese(n,s);var o=Ese(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var YBe=mm&&"documentMode"in document&&11>=document.documentMode,bw=null,wU=null,pC=null,EU=!1;function xse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;EU||bw==null||bw!==bO(r)||(r=bw,"selectionStart"in r&&aW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pC&&yA(pC,r)||(pC=r,r=CO(wU,"onSelect"),0<r.length&&(t=new iW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bw)))}function vN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _w={animationend:vN("Animation","AnimationEnd"),animationiteration:vN("Animation","AnimationIteration"),animationstart:vN("Animation","AnimationStart"),transitionend:vN("Transition","TransitionEnd")},hj={},I1e={};mm&&(I1e=document.createElement("div").style,"AnimationEvent"in window||(delete _w.animationend.animation,delete _w.animationiteration.animation,delete _w.animationstart.animation),"TransitionEvent"in window||delete _w.transitionend.transition);function cL(e){if(hj[e])return hj[e];if(!_w[e])return e;var t=_w[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in I1e)return hj[e]=t[n];return e}var k1e=cL("animationend"),R1e=cL("animationiteration"),N1e=cL("animationstart"),P1e=cL("transitionend"),D1e=new Map,Sse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ty(e,t){D1e.set(e,t),Rb(t,[e])}for(var pj=0;pj<Sse.length;pj++){var mj=Sse[pj],KBe=mj.toLowerCase(),XBe=mj[0].toUpperCase()+mj.slice(1);Ty(KBe,"on"+XBe)}Ty(k1e,"onAnimationEnd");Ty(R1e,"onAnimationIteration");Ty(N1e,"onAnimationStart");Ty("dblclick","onDoubleClick");Ty("focusin","onFocus");Ty("focusout","onBlur");Ty(P1e,"onTransitionEnd");IE("onMouseEnter",["mouseout","mouseover"]);IE("onMouseLeave",["mouseout","mouseover"]);IE("onPointerEnter",["pointerout","pointerover"]);IE("onPointerLeave",["pointerout","pointerover"]);Rb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(_2));function Tse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,K8e(r,t,void 0,e),e.currentTarget=null}function O1e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Tse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Tse(i,a,l),s=u}}}if(wO)throw e=yU,wO=!1,yU=null,e}function oi(e,t){var n=t[AU];n===void 0&&(n=t[AU]=new Set);var r=e+"__bubble";n.has(r)||($1e(t,e,2,!1),n.add(r))}function gj(e,t,n){var r=0;t&&(r|=4),$1e(n,e,r,t)}var bN="_reactListening"+Math.random().toString(36).slice(2);function vA(e){if(!e[bN]){e[bN]=!0,zye.forEach(function(n){n!=="selectionchange"&&(QBe.has(n)||gj(n,!1,e),gj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bN]||(t[bN]=!0,gj("selectionchange",!1,t))}}function $1e(e,t,n,r){switch(v1e(t)){case 1:var i=fBe;break;case 4:i=dBe;break;default:i=nW}n=i.bind(null,t,n,e),i=void 0,!gU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function yj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}i1e(function(){var l=s,c=Jq(n),f=[];e:{var d=D1e.get(e);if(d!==void 0){var h=iW,p=e;switch(e){case"keypress":if(rD(n)===0)break e;case"keydown":case"keyup":h=ABe;break;case"focusin":p="focus",h=cj;break;case"focusout":p="blur",h=cj;break;case"beforeblur":case"afterblur":h=cj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=hse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=mBe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=RBe;break;case k1e:case R1e:case N1e:h=vBe;break;case P1e:h=PBe;break;case"scroll":h=hBe;break;case"wheel":h=OBe;break;case"copy":case"cut":case"paste":h=_Be;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=mse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=dA(v,y),w!=null&&m.push(bA(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==pU&&(p=n.relatedTarget||n.fromElement)&&(tv(p)||p[gm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?tv(p):null,p!==null&&(g=Nb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=hse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=mse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:ww(h),_=p==null?d:ww(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,tv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=T_(_))v++;for(_=0,w=y;w;w=T_(w))_++;for(;0<v-_;)m=T_(m),v--;for(;0<_-v;)y=T_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=T_(m),y=T_(y)}m=null}else m=null;h!==null&&Cse(f,d,h,m,!1),p!==null&&g!==null&&Cse(f,g,p,m,!0)}}e:{if(d=l?ww(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=UBe;else if(vse(d))if(S1e)E=qBe;else{E=VBe;var x=zBe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=HBe);if(E&&(E=E(e,l))){x1e(f,E,n,c);break e}x&&x(e,d,l),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&lU(d,"number",d.value)}switch(x=l?ww(l):window,e){case"focusin":(vse(x)||x.contentEditable==="true")&&(bw=x,wU=l,pC=null);break;case"focusout":pC=wU=bw=null;break;case"mousedown":EU=!0;break;case"contextmenu":case"mouseup":case"dragend":EU=!1,xse(f,n,c);break;case"selectionchange":if(YBe)break;case"keydown":case"keyup":xse(f,n,c)}var S;if(oW)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else vw?w1e(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(_1e&&n.locale!=="ko"&&(vw||C!=="onCompositionStart"?C==="onCompositionEnd"&&vw&&(S=b1e()):(Xg=c,rW="value"in Xg?Xg.value:Xg.textContent,vw=!0)),x=CO(l,C),0<x.length&&(C=new pse(C,e,null,n,c),f.push({event:C,listeners:x}),S?C.data=S:(S=E1e(n),S!==null&&(C.data=S)))),(S=MBe?LBe(e,n):FBe(e,n))&&(l=CO(l,"onBeforeInput"),0<l.length&&(c=new pse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}O1e(f,t)})}function bA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function CO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=dA(e,n),s!=null&&r.unshift(bA(e,s,i)),s=dA(e,t),s!=null&&r.push(bA(e,s,i))),e=e.return}return r}function T_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=dA(n,s),u!=null&&o.unshift(bA(n,u,a))):i||(u=dA(n,s),u!=null&&o.push(bA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var JBe=/\r\n?/g,ZBe=/\u0000|\uFFFD/g;function Ase(e){return(typeof e=="string"?e:""+e).replace(JBe,`
`).replace(ZBe,"")}function _N(e,t,n){if(t=Ase(t),Ase(e)!==t&&n)throw Error(tt(425))}function AO(){}var xU=null,SU=null;function TU(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var CU=typeof setTimeout=="function"?setTimeout:void 0,e9e=typeof clearTimeout=="function"?clearTimeout:void 0,Ise=typeof Promise=="function"?Promise:void 0,t9e=typeof queueMicrotask=="function"?queueMicrotask:typeof Ise<"u"?function(e){return Ise.resolve(null).then(e).catch(n9e)}:CU;function n9e(e){setTimeout(function(){throw e})}function vj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),mA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mA(t)}function m0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kx=Math.random().toString(36).slice(2),Bd="__reactFiber$"+Kx,_A="__reactProps$"+Kx,gm="__reactContainer$"+Kx,AU="__reactEvents$"+Kx,r9e="__reactListeners$"+Kx,i9e="__reactHandles$"+Kx;function tv(e){var t=e[Bd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gm]||n[Bd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kse(e);e!==null;){if(n=e[Bd])return n;e=kse(e)}return t}e=n,n=e.parentNode}return null}function ok(e){return e=e[Bd]||e[gm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ww(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function fL(e){return e[_A]||null}var IU=[],Ew=-1;function Cy(e){return{current:e}}function hi(e){0>Ew||(e.current=IU[Ew],IU[Ew]=null,Ew--)}function ti(e,t){Ew++,IU[Ew]=e.current,e.current=t}var j0={},_a=Cy(j0),ju=Cy(!1),Fv=j0;function kE(e,t){var n=e.type.contextTypes;if(!n)return j0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bu(e){return e=e.childContextTypes,e!=null}function IO(){hi(ju),hi(_a)}function Rse(e,t,n){if(_a.current!==j0)throw Error(tt(168));ti(_a,t),ti(ju,n)}function M1e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,z8e(e)||"Unknown",i));return Di({},n,r)}function kO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||j0,Fv=_a.current,ti(_a,e),ti(ju,ju.current),!0}function Nse(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=M1e(e,t,Fv),r.__reactInternalMemoizedMergedChildContext=e,hi(ju),hi(_a),ti(_a,e)):hi(ju),ti(ju,n)}var Dp=null,dL=!1,bj=!1;function L1e(e){Dp===null?Dp=[e]:Dp.push(e)}function s9e(e){dL=!0,L1e(e)}function Ay(){if(!bj&&Dp!==null){bj=!0;var e=0,t=Or;try{var n=Dp;for(Or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dp=null,dL=!1}catch(i){throw Dp!==null&&(Dp=Dp.slice(e+1)),u1e(Zq,Ay),i}finally{Or=t,bj=!1}}return null}var xw=[],Sw=0,RO=null,NO=0,hc=[],pc=0,jv=null,qp=1,Wp="";function S1(e,t){xw[Sw++]=NO,xw[Sw++]=RO,RO=e,NO=t}function F1e(e,t,n){hc[pc++]=qp,hc[pc++]=Wp,hc[pc++]=jv,jv=e;var r=qp;e=Wp;var i=32-Ff(r)-1;r&=~(1<<i),n+=1;var s=32-Ff(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qp=1<<32-Ff(t)+i|n<<i|r,Wp=s+e}else qp=1<<s|n<<i|r,Wp=e}function uW(e){e.return!==null&&(S1(e,1),F1e(e,1,0))}function lW(e){for(;e===RO;)RO=xw[--Sw],xw[Sw]=null,NO=xw[--Sw],xw[Sw]=null;for(;e===jv;)jv=hc[--pc],hc[pc]=null,Wp=hc[--pc],hc[pc]=null,qp=hc[--pc],hc[pc]=null}var Rl=null,El=null,xi=!1,_f=null;function j1e(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Pse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rl=e,El=m0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rl=e,El=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jv!==null?{id:qp,overflow:Wp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ec(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rl=e,El=null,!0):!1;default:return!1}}function kU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function RU(e){if(xi){var t=El;if(t){var n=t;if(!Pse(e,t)){if(kU(e))throw Error(tt(418));t=m0(n.nextSibling);var r=Rl;t&&Pse(e,t)?j1e(r,n):(e.flags=e.flags&-4097|2,xi=!1,Rl=e)}}else{if(kU(e))throw Error(tt(418));e.flags=e.flags&-4097|2,xi=!1,Rl=e}}}function Dse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rl=e}function wN(e){if(e!==Rl)return!1;if(!xi)return Dse(e),xi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!TU(e.type,e.memoizedProps)),t&&(t=El)){if(kU(e))throw B1e(),Error(tt(418));for(;t;)j1e(e,t),t=m0(t.nextSibling)}if(Dse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){El=m0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}El=null}}else El=Rl?m0(e.stateNode.nextSibling):null;return!0}function B1e(){for(var e=El;e;)e=m0(e.nextSibling)}function RE(){El=Rl=null,xi=!1}function cW(e){_f===null?_f=[e]:_f.push(e)}var o9e=Vm.ReactCurrentBatchConfig;function _T(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function EN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ose(e){var t=e._init;return t(e._payload)}function U1e(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=b0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=Cj(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var E=_.type;return E===yw?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rg&&Ose(E)===v.type)?(w=i(v,_.props),w.ref=_T(y,v,_),w.return=y,w):(w=cD(_.type,_.key,_.props,null,y.mode,w),w.ref=_T(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Aj(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,E){return v===null||v.tag!==7?(v=xv(_,y.mode,w,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fN:return _=cD(v.type,v.key,v.props,null,y.mode,_),_.ref=_T(y,null,v),_.return=y,_;case gw:return v=Aj(v,y.mode,_),v.return=y,v;case Rg:var w=v._init;return f(y,w(v._payload),_)}if(v2(v)||mT(v))return v=xv(v,y.mode,_,null),v.return=y,v;EN(y,v)}return null}function d(y,v,_,w){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fN:return _.key===E?u(y,v,_,w):null;case gw:return _.key===E?l(y,v,_,w):null;case Rg:return E=_._init,d(y,v,E(_._payload),w)}if(v2(_)||mT(_))return E!==null?null:c(y,v,_,w,null);EN(y,_)}return null}function h(y,v,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fN:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,E);case gw:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,E);case Rg:var x=w._init;return h(y,v,_,x(w._payload),E)}if(v2(w)||mT(w))return y=y.get(_)||null,c(v,y,w,E,null);EN(v,w)}return null}function p(y,v,_,w){for(var E=null,x=null,S=v,C=v=0,A=null;S!==null&&C<_.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var k=d(y,S,_[C],w);if(k===null){S===null&&(S=A);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k,S=A}if(C===_.length)return n(y,S),xi&&S1(y,C),E;if(S===null){for(;C<_.length;C++)S=f(y,_[C],w),S!==null&&(v=s(S,v,C),x===null?E=S:x.sibling=S,x=S);return xi&&S1(y,C),E}for(S=r(y,S);C<_.length;C++)A=h(S,y,C,_[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=s(A,v,C),x===null?E=A:x.sibling=A,x=A);return e&&S.forEach(function(N){return t(y,N)}),xi&&S1(y,C),E}function m(y,v,_,w){var E=mT(_);if(typeof E!="function")throw Error(tt(150));if(_=E.call(_),_==null)throw Error(tt(151));for(var x=E=null,S=v,C=v=0,A=null,k=_.next();S!==null&&!k.done;C++,k=_.next()){S.index>C?(A=S,S=null):A=S.sibling;var N=d(y,S,k.value,w);if(N===null){S===null&&(S=A);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,C),x===null?E=N:x.sibling=N,x=N,S=A}if(k.done)return n(y,S),xi&&S1(y,C),E;if(S===null){for(;!k.done;C++,k=_.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return xi&&S1(y,C),E}for(S=r(y,S);!k.done;C++,k=_.next())k=h(S,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?C:k.key),v=s(k,v,C),x===null?E=k:x.sibling=k,x=k);return e&&S.forEach(function(O){return t(y,O)}),xi&&S1(y,C),E}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===yw&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case fN:e:{for(var E=_.key,x=v;x!==null;){if(x.key===E){if(E=_.type,E===yw){if(x.tag===7){n(y,x.sibling),v=i(x,_.props.children),v.return=y,y=v;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rg&&Ose(E)===x.type){n(y,x.sibling),v=i(x,_.props),v.ref=_T(y,x,_),v.return=y,y=v;break e}n(y,x);break}else t(y,x);x=x.sibling}_.type===yw?(v=xv(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=cD(_.type,_.key,_.props,null,y.mode,w),w.ref=_T(y,v,_),w.return=y,y=w)}return o(y);case gw:e:{for(x=_.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Aj(_,y.mode,w),v.return=y,y=v}return o(y);case Rg:return x=_._init,g(y,v,x(_._payload),w)}if(v2(_))return p(y,v,_,w);if(mT(_))return m(y,v,_,w);EN(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=Cj(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var NE=U1e(!0),z1e=U1e(!1),PO=Cy(null),DO=null,Tw=null,fW=null;function dW(){fW=Tw=DO=null}function hW(e){var t=PO.current;hi(PO),e._currentValue=t}function NU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ww(e,t){DO=e,fW=Tw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Du=!0),e.firstContext=null)}function Rc(e){var t=e._currentValue;if(fW!==e)if(e={context:e,memoizedValue:t,next:null},Tw===null){if(DO===null)throw Error(tt(308));Tw=e,DO.dependencies={lanes:0,firstContext:e}}else Tw=Tw.next=e;return t}var nv=null;function pW(e){nv===null?nv=[e]:nv.push(e)}function V1e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,pW(t)):(n.next=i.next,i.next=n),t.interleaved=n,ym(e,r)}function ym(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ng=!1;function mW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H1e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function g0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ym(e,n)}return i=r.interleaved,i===null?(t.next=t,pW(r)):(t.next=i.next,i.next=t),r.interleaved=t,ym(e,n)}function iD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eW(e,n)}}function $se(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function OO(e,t,n,r){var i=e.updateQueue;Ng=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Di({},f,d);break e;case 2:Ng=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Uv|=o,e.lanes=o,e.memoizedState=f}}function Mse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var ak={},uh=Cy(ak),wA=Cy(ak),EA=Cy(ak);function rv(e){if(e===ak)throw Error(tt(174));return e}function gW(e,t){switch(ti(EA,t),ti(wA,e),ti(uh,ak),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fU(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fU(t,e)}hi(uh),ti(uh,t)}function PE(){hi(uh),hi(wA),hi(EA)}function q1e(e){rv(EA.current);var t=rv(uh.current),n=fU(t,e.type);t!==n&&(ti(wA,e),ti(uh,n))}function yW(e){wA.current===e&&(hi(uh),hi(wA))}var Ni=Cy(0);function $O(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _j=[];function vW(){for(var e=0;e<_j.length;e++)_j[e]._workInProgressVersionPrimary=null;_j.length=0}var sD=Vm.ReactCurrentDispatcher,wj=Vm.ReactCurrentBatchConfig,Bv=0,Pi=null,Is=null,Xs=null,MO=!1,mC=!1,xA=0,a9e=0;function Yo(){throw Error(tt(321))}function bW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gf(e[n],t[n]))return!1;return!0}function _W(e,t,n,r,i,s){if(Bv=s,Pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sD.current=e===null||e.memoizedState===null?f9e:d9e,e=n(r,i),mC){s=0;do{if(mC=!1,xA=0,25<=s)throw Error(tt(301));s+=1,Xs=Is=null,t.updateQueue=null,sD.current=h9e,e=n(r,i)}while(mC)}if(sD.current=LO,t=Is!==null&&Is.next!==null,Bv=0,Xs=Is=Pi=null,MO=!1,t)throw Error(tt(300));return e}function wW(){var e=xA!==0;return xA=0,e}function Rd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function Nc(){if(Is===null){var e=Pi.alternate;e=e!==null?e.memoizedState:null}else e=Is.next;var t=Xs===null?Pi.memoizedState:Xs.next;if(t!==null)Xs=t,Is=e;else{if(e===null)throw Error(tt(310));Is=e,e={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function SA(e,t){return typeof t=="function"?t(e):t}function Ej(e){var t=Nc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Is,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Bv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Pi.lanes|=c,Uv|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Gf(r,t.memoizedState)||(Du=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pi.lanes|=s,Uv|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xj(e){var t=Nc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Gf(s,t.memoizedState)||(Du=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function W1e(){}function G1e(e,t){var n=Pi,r=Nc(),i=t(),s=!Gf(r.memoizedState,i);if(s&&(r.memoizedState=i,Du=!0),r=r.queue,EW(X1e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,TA(9,K1e.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(tt(349));Bv&30||Y1e(n,t,i)}return i}function Y1e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function K1e(e,t,n,r){t.value=n,t.getSnapshot=r,Q1e(t)&&J1e(e)}function X1e(e,t,n){return n(function(){Q1e(t)&&J1e(e)})}function Q1e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gf(e,n)}catch{return!0}}function J1e(e){var t=ym(e,1);t!==null&&jf(t,e,1,-1)}function Lse(e){var t=Rd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:SA,lastRenderedState:e},t.queue=e,e=e.dispatch=c9e.bind(null,Pi,e),[t.memoizedState,e]}function TA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Z1e(){return Nc().memoizedState}function oD(e,t,n,r){var i=Rd();Pi.flags|=e,i.memoizedState=TA(1|t,n,void 0,r===void 0?null:r)}function hL(e,t,n,r){var i=Nc();r=r===void 0?null:r;var s=void 0;if(Is!==null){var o=Is.memoizedState;if(s=o.destroy,r!==null&&bW(r,o.deps)){i.memoizedState=TA(t,n,s,r);return}}Pi.flags|=e,i.memoizedState=TA(1|t,n,s,r)}function Fse(e,t){return oD(8390656,8,e,t)}function EW(e,t){return hL(2048,8,e,t)}function eve(e,t){return hL(4,2,e,t)}function tve(e,t){return hL(4,4,e,t)}function nve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rve(e,t,n){return n=n!=null?n.concat([e]):null,hL(4,4,nve.bind(null,t,e),n)}function xW(){}function ive(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sve(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ove(e,t,n){return Bv&21?(Gf(n,t)||(n=f1e(),Pi.lanes|=n,Uv|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Du=!0),e.memoizedState=n)}function u9e(e,t){var n=Or;Or=n!==0&&4>n?n:4,e(!0);var r=wj.transition;wj.transition={};try{e(!1),t()}finally{Or=n,wj.transition=r}}function ave(){return Nc().memoizedState}function l9e(e,t,n){var r=v0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uve(e))lve(t,n);else if(n=V1e(e,t,n,r),n!==null){var i=Ga();jf(n,e,r,i),cve(n,t,r)}}function c9e(e,t,n){var r=v0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uve(e))lve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gf(a,o)){var u=t.interleaved;u===null?(i.next=i,pW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=V1e(e,t,i,r),n!==null&&(i=Ga(),jf(n,e,r,i),cve(n,t,r))}}function uve(e){var t=e.alternate;return e===Pi||t!==null&&t===Pi}function lve(e,t){mC=MO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cve(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eW(e,n)}}var LO={readContext:Rc,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},f9e={readContext:Rc,useCallback:function(e,t){return Rd().memoizedState=[e,t===void 0?null:t],e},useContext:Rc,useEffect:Fse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oD(4194308,4,nve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oD(4194308,4,e,t)},useInsertionEffect:function(e,t){return oD(4,2,e,t)},useMemo:function(e,t){var n=Rd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=l9e.bind(null,Pi,e),[r.memoizedState,e]},useRef:function(e){var t=Rd();return e={current:e},t.memoizedState=e},useState:Lse,useDebugValue:xW,useDeferredValue:function(e){return Rd().memoizedState=e},useTransition:function(){var e=Lse(!1),t=e[0];return e=u9e.bind(null,e[1]),Rd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pi,i=Rd();if(xi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),ao===null)throw Error(tt(349));Bv&30||Y1e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fse(X1e.bind(null,r,s,e),[e]),r.flags|=2048,TA(9,K1e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rd(),t=ao.identifierPrefix;if(xi){var n=Wp,r=qp;n=(r&~(1<<32-Ff(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=a9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d9e={readContext:Rc,useCallback:ive,useContext:Rc,useEffect:EW,useImperativeHandle:rve,useInsertionEffect:eve,useLayoutEffect:tve,useMemo:sve,useReducer:Ej,useRef:Z1e,useState:function(){return Ej(SA)},useDebugValue:xW,useDeferredValue:function(e){var t=Nc();return ove(t,Is.memoizedState,e)},useTransition:function(){var e=Ej(SA)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:W1e,useSyncExternalStore:G1e,useId:ave,unstable_isNewReconciler:!1},h9e={readContext:Rc,useCallback:ive,useContext:Rc,useEffect:EW,useImperativeHandle:rve,useInsertionEffect:eve,useLayoutEffect:tve,useMemo:sve,useReducer:xj,useRef:Z1e,useState:function(){return xj(SA)},useDebugValue:xW,useDeferredValue:function(e){var t=Nc();return Is===null?t.memoizedState=e:ove(t,Is.memoizedState,e)},useTransition:function(){var e=xj(SA)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:W1e,useSyncExternalStore:G1e,useId:ave,unstable_isNewReconciler:!1};function pf(e,t){if(e&&e.defaultProps){t=Di({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function PU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Di({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pL={isMounted:function(e){return(e=e._reactInternals)?Nb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=v0(e),s=rm(r,i);s.payload=t,n!=null&&(s.callback=n),t=g0(e,s,i),t!==null&&(jf(t,e,i,r),iD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=v0(e),s=rm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=g0(e,s,i),t!==null&&(jf(t,e,i,r),iD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ga(),r=v0(e),i=rm(n,r);i.tag=2,t!=null&&(i.callback=t),t=g0(e,i,r),t!==null&&(jf(t,e,r,n),iD(t,e,r))}};function jse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!yA(n,r)||!yA(i,s):!0}function fve(e,t,n){var r=!1,i=j0,s=t.contextType;return typeof s=="object"&&s!==null?s=Rc(s):(i=Bu(t)?Fv:_a.current,r=t.contextTypes,s=(r=r!=null)?kE(e,i):j0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Bse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pL.enqueueReplaceState(t,t.state,null)}function DU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},mW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Rc(s):(s=Bu(t)?Fv:_a.current,i.context=kE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(PU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pL.enqueueReplaceState(i,i.state,null),OO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function DE(e,t){try{var n="",r=t;do n+=U8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Sj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function OU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var p9e=typeof WeakMap=="function"?WeakMap:Map;function dve(e,t,n){n=rm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jO||(jO=!0,HU=r),OU(e,t)},n}function hve(e,t,n){n=rm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){OU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){OU(e,t),typeof r!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Use(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new p9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=I9e.bind(null,e,t,n),t.then(e,e))}function zse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rm(-1,1),t.tag=2,g0(n,t,1))),n.lanes|=1),e)}var m9e=Vm.ReactCurrentOwner,Du=!1;function Ma(e,t,n,r){t.child=e===null?z1e(t,null,n,r):NE(t,e.child,n,r)}function Hse(e,t,n,r,i){n=n.render;var s=t.ref;return Ww(t,i),r=_W(e,t,n,r,s,i),n=wW(),e!==null&&!Du?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(xi&&n&&uW(t),t.flags|=1,Ma(e,t,r,i),t.child)}function qse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!NW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,pve(e,t,s,r,i)):(e=cD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yA,n(o,r)&&e.ref===t.ref)return vm(e,t,i)}return t.flags|=1,e=b0(s,r),e.ref=t.ref,e.return=t,t.child=e}function pve(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(yA(s,r)&&e.ref===t.ref)if(Du=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Du=!0);else return t.lanes=e.lanes,vm(e,t,i)}return $U(e,t,n,r,i)}function mve(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(Aw,ml),ml|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(Aw,ml),ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(Aw,ml),ml|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(Aw,ml),ml|=r;return Ma(e,t,i,n),t.child}function gve(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $U(e,t,n,r,i){var s=Bu(n)?Fv:_a.current;return s=kE(t,s),Ww(t,i),n=_W(e,t,n,r,s,i),r=wW(),e!==null&&!Du?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(xi&&r&&uW(t),t.flags|=1,Ma(e,t,n,i),t.child)}function Wse(e,t,n,r,i){if(Bu(n)){var s=!0;kO(t)}else s=!1;if(Ww(t,i),t.stateNode===null)aD(e,t),fve(t,n,r),DU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rc(l):(l=Bu(n)?Fv:_a.current,l=kE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Bse(t,o,r,l),Ng=!1;var d=t.memoizedState;o.state=d,OO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||ju.current||Ng?(typeof c=="function"&&(PU(t,n,c,r),u=t.memoizedState),(a=Ng||jse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,H1e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:pf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rc(u):(u=Bu(n)?Fv:_a.current,u=kE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Bse(t,o,r,u),Ng=!1,d=t.memoizedState,o.state=d,OO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||ju.current||Ng?(typeof h=="function"&&(PU(t,n,h,r),p=t.memoizedState),(l=Ng||jse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return MU(e,t,n,r,s,i)}function MU(e,t,n,r,i,s){gve(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Nse(t,n,!1),vm(e,t,s);r=t.stateNode,m9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=NE(t,e.child,null,s),t.child=NE(t,null,a,s)):Ma(e,t,a,s),t.memoizedState=r.state,i&&Nse(t,n,!0),t.child}function yve(e){var t=e.stateNode;t.pendingContext?Rse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rse(e,t.context,!1),gW(e,t.containerInfo)}function Gse(e,t,n,r,i){return RE(),cW(i),t.flags|=256,Ma(e,t,n,r),t.child}var LU={dehydrated:null,treeContext:null,retryLane:0};function FU(e){return{baseLanes:e,cachePool:null,transitions:null}}function vve(e,t,n){var r=t.pendingProps,i=Ni.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ni,i&1),e===null)return RU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yL(o,r,0,null),e=xv(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=FU(n),t.memoizedState=LU,e):SW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return g9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=b0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=b0(a,s):(s=xv(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?FU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=LU,r}return s=e.child,e=s.sibling,r=b0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function SW(e,t){return t=yL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xN(e,t,n,r){return r!==null&&cW(r),NE(t,e.child,null,n),e=SW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Sj(Error(tt(422))),xN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=yL({mode:"visible",children:r.children},i,0,null),s=xv(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&NE(t,e.child,null,o),t.child.memoizedState=FU(o),t.memoizedState=LU,s);if(!(t.mode&1))return xN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=Sj(s,r,void 0),xN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Du||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ym(e,i),jf(r,e,i,-1))}return RW(),r=Sj(Error(tt(421))),xN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=k9e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,El=m0(i.nextSibling),Rl=t,xi=!0,_f=null,e!==null&&(hc[pc++]=qp,hc[pc++]=Wp,hc[pc++]=jv,qp=e.id,Wp=e.overflow,jv=t),t=SW(t,r.children),t.flags|=4096,t)}function Yse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),NU(e.return,t,n)}function Tj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bve(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ma(e,t,r.children,n),r=Ni.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yse(e,n,t);else if(e.tag===19)Yse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ni,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&$O(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$O(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tj(t,!0,n,null,s);break;case"together":Tj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Uv|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=b0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=b0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function y9e(e,t,n){switch(t.tag){case 3:yve(t),RE();break;case 5:q1e(t);break;case 1:Bu(t.type)&&kO(t);break;case 4:gW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(PO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ni,Ni.current&1),t.flags|=128,null):n&t.child.childLanes?vve(e,t,n):(ti(Ni,Ni.current&1),e=vm(e,t,n),e!==null?e.sibling:null);ti(Ni,Ni.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bve(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,mve(e,t,n)}return vm(e,t,n)}var _ve,jU,wve,Eve;_ve=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jU=function(){};wve=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rv(uh.current);var s=null;switch(n){case"input":i=aU(e,i),r=aU(e,r),s=[];break;case"select":i=Di({},i,{value:void 0}),r=Di({},r,{value:void 0}),s=[];break;case"textarea":i=cU(e,i),r=cU(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=AO)}dU(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(cA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(cA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&oi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Eve=function(e,t,n,r){n!==r&&(t.flags|=4)};function wT(e,t){if(!xi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function v9e(e,t,n){var r=t.pendingProps;switch(lW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:return Bu(t.type)&&IO(),Ko(t),null;case 3:return r=t.stateNode,PE(),hi(ju),hi(_a),vW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_f!==null&&(GU(_f),_f=null))),jU(e,t),Ko(t),null;case 5:yW(t);var i=rv(EA.current);if(n=t.type,e!==null&&t.stateNode!=null)wve(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Ko(t),null}if(e=rv(uh.current),wN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Bd]=t,r[_A]=s,e=(t.mode&1)!==0,n){case"dialog":oi("cancel",r),oi("close",r);break;case"iframe":case"object":case"embed":oi("load",r);break;case"video":case"audio":for(i=0;i<_2.length;i++)oi(_2[i],r);break;case"source":oi("error",r);break;case"img":case"image":case"link":oi("error",r),oi("load",r);break;case"details":oi("toggle",r);break;case"input":rse(r,s),oi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oi("invalid",r);break;case"textarea":sse(r,s),oi("invalid",r)}dU(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_N(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_N(r.textContent,a,e),i=["children",""+a]):cA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oi("scroll",r)}switch(n){case"input":dN(r),ise(r,s,!0);break;case"textarea":dN(r),ose(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=AO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Bd]=t,e[_A]=r,_ve(e,t,!1,!1),t.stateNode=e;e:{switch(o=hU(n,r),n){case"dialog":oi("cancel",e),oi("close",e),i=r;break;case"iframe":case"object":case"embed":oi("load",e),i=r;break;case"video":case"audio":for(i=0;i<_2.length;i++)oi(_2[i],e);i=r;break;case"source":oi("error",e),i=r;break;case"img":case"image":case"link":oi("error",e),oi("load",e),i=r;break;case"details":oi("toggle",e),i=r;break;case"input":rse(e,r),i=aU(e,r),oi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Di({},r,{value:void 0}),oi("invalid",e);break;case"textarea":sse(e,r),i=cU(e,r),oi("invalid",e);break;default:i=r}dU(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Zye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Qye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fA(e,u):typeof u=="number"&&fA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(cA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&oi("scroll",e):u!=null&&Yq(e,s,u,o))}switch(n){case"input":dN(e),ise(e,r,!1);break;case"textarea":dN(e),ose(e);break;case"option":r.value!=null&&e.setAttribute("value",""+F0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?zw(e,!!r.multiple,s,!1):r.defaultValue!=null&&zw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=AO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&t.stateNode!=null)Eve(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=rv(EA.current),rv(uh.current),wN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bd]=t,(s=r.nodeValue!==n)&&(e=Rl,e!==null))switch(e.tag){case 3:_N(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_N(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bd]=t,t.stateNode=r}return Ko(t),null;case 13:if(hi(Ni),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xi&&El!==null&&t.mode&1&&!(t.flags&128))B1e(),RE(),t.flags|=98560,s=!1;else if(s=wN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Bd]=t}else RE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else _f!==null&&(GU(_f),_f=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ni.current&1?Os===0&&(Os=3):RW())),t.updateQueue!==null&&(t.flags|=4),Ko(t),null);case 4:return PE(),jU(e,t),e===null&&vA(t.stateNode.containerInfo),Ko(t),null;case 10:return hW(t.type._context),Ko(t),null;case 17:return Bu(t.type)&&IO(),Ko(t),null;case 19:if(hi(Ni),s=t.memoizedState,s===null)return Ko(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)wT(s,!1);else{if(Os!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=$O(e),o!==null){for(t.flags|=128,wT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ni,Ni.current&1|2),t.child}e=e.sibling}s.tail!==null&&ss()>OE&&(t.flags|=128,r=!0,wT(s,!1),t.lanes=4194304)}else{if(!r)if(e=$O(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xi)return Ko(t),null}else 2*ss()-s.renderingStartTime>OE&&n!==1073741824&&(t.flags|=128,r=!0,wT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ss(),t.sibling=null,n=Ni.current,ti(Ni,r?n&1|2:n&1),t):(Ko(t),null);case 22:case 23:return kW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ml&1073741824&&(Ko(t),t.subtreeFlags&6&&(t.flags|=8192)):Ko(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function b9e(e,t){switch(lW(t),t.tag){case 1:return Bu(t.type)&&IO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return PE(),hi(ju),hi(_a),vW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yW(t),null;case 13:if(hi(Ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));RE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(Ni),null;case 4:return PE(),null;case 10:return hW(t.type._context),null;case 22:case 23:return kW(),null;case 24:return null;default:return null}}var SN=!1,ua=!1,_9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Cw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function BU(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Kse=!1;function w9e(e,t){if(xU=SO,e=A1e(),aW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(SU={focusedElem:e,selectionRange:n},SO=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:pf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Kse,Kse=!1,p}function gC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&BU(t,n,s)}i=i.next}while(i!==r)}}function mL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function UU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xve(e){var t=e.alternate;t!==null&&(e.alternate=null,xve(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bd],delete t[_A],delete t[AU],delete t[r9e],delete t[i9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sve(e){return e.tag===5||e.tag===3||e.tag===4}function Xse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sve(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=AO));else if(r!==4&&(e=e.child,e!==null))for(zU(e,t,n),e=e.sibling;e!==null;)zU(e,t,n),e=e.sibling}function VU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(VU(e,t,n),e=e.sibling;e!==null;)VU(e,t,n),e=e.sibling}var xo=null,gf=!1;function yg(e,t,n){for(n=n.child;n!==null;)Tve(e,t,n),n=n.sibling}function Tve(e,t,n){if(ah&&typeof ah.onCommitFiberUnmount=="function")try{ah.onCommitFiberUnmount(aL,n)}catch{}switch(n.tag){case 5:ua||Cw(n,t);case 6:var r=xo,i=gf;xo=null,yg(e,t,n),xo=r,gf=i,xo!==null&&(gf?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(gf?(e=xo,n=n.stateNode,e.nodeType===8?vj(e.parentNode,n):e.nodeType===1&&vj(e,n),mA(e)):vj(xo,n.stateNode));break;case 4:r=xo,i=gf,xo=n.stateNode.containerInfo,gf=!0,yg(e,t,n),xo=r,gf=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&BU(n,t,o),i=i.next}while(i!==r)}yg(e,t,n);break;case 1:if(!ua&&(Cw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}yg(e,t,n);break;case 21:yg(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,yg(e,t,n),ua=r):yg(e,t,n);break;default:yg(e,t,n)}}function Qse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _9e),t.forEach(function(r){var i=R9e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,gf=!1;break e;case 3:xo=a.stateNode.containerInfo,gf=!0;break e;case 4:xo=a.stateNode.containerInfo,gf=!0;break e}a=a.return}if(xo===null)throw Error(tt(160));Tve(s,o,i),xo=null,gf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cve(t,e),t=t.sibling}function Cve(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tf(t,e),xd(e),r&4){try{gC(3,e,e.return),mL(3,e)}catch(m){zi(e,e.return,m)}try{gC(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:tf(t,e),xd(e),r&512&&n!==null&&Cw(n,n.return);break;case 5:if(tf(t,e),xd(e),r&512&&n!==null&&Cw(n,n.return),e.flags&32){var i=e.stateNode;try{fA(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Yye(i,s),hU(a,o);var l=hU(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Zye(i,f):c==="dangerouslySetInnerHTML"?Qye(i,f):c==="children"?fA(i,f):Yq(i,c,f,l)}switch(a){case"input":uU(i,s);break;case"textarea":Kye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?zw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?zw(i,!!s.multiple,s.defaultValue,!0):zw(i,!!s.multiple,s.multiple?[]:"",!1))}i[_A]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(tf(t,e),xd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(tf(t,e),xd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mA(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:tf(t,e),xd(e);break;case 13:tf(t,e),xd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(AW=ss())),r&4&&Qse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(l=ua)||c,tf(t,e),ua=l):tf(t,e),xd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:gC(4,d,d.return);break;case 1:Cw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:Cw(d,d.return);break;case 22:if(d.memoizedState!==null){Zse(f);continue}}h!==null?(h.return=d,xt=h):Zse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Jye("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tf(t,e),xd(e),r&4&&Qse(e);break;case 21:break;default:tf(t,e),xd(e)}}function xd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sve(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fA(i,""),r.flags&=-33);var s=Xse(e);VU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xse(e);zU(e,a,o);break;default:throw Error(tt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function E9e(e,t,n){xt=e,Ave(e)}function Ave(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||SN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ua;a=SN;var l=ua;if(SN=o,(ua=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?eoe(i):u!==null?(u.return=o,xt=u):eoe(i);for(;s!==null;)xt=s,Ave(s),s=s.sibling;xt=i,SN=a,ua=l}Jse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Jse(e)}}function Jse(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||mL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Mse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&mA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ua||t.flags&512&&UU(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Zse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function eoe(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mL(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{UU(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{UU(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var x9e=Math.ceil,FO=Vm.ReactCurrentDispatcher,TW=Vm.ReactCurrentOwner,Ac=Vm.ReactCurrentBatchConfig,ur=0,ao=null,ws=null,No=0,ml=0,Aw=Cy(0),Os=0,CA=null,Uv=0,gL=0,CW=0,yC=null,Tu=null,AW=0,OE=1/0,Ip=null,jO=!1,HU=null,y0=null,TN=!1,Qg=null,BO=0,vC=0,qU=null,uD=-1,lD=0;function Ga(){return ur&6?ss():uD!==-1?uD:uD=ss()}function v0(e){return e.mode&1?ur&2&&No!==0?No&-No:o9e.transition!==null?(lD===0&&(lD=f1e()),lD):(e=Or,e!==0||(e=window.event,e=e===void 0?16:v1e(e.type)),e):1}function jf(e,t,n,r){if(50<vC)throw vC=0,qU=null,Error(tt(185));ik(e,n,r),(!(ur&2)||e!==ao)&&(e===ao&&(!(ur&2)&&(gL|=n),Os===4&&Ug(e,No)),Uu(e,r),n===1&&ur===0&&!(t.mode&1)&&(OE=ss()+500,dL&&Ay()))}function Uu(e,t){var n=e.callbackNode;oBe(e,t);var r=xO(e,e===ao?No:0);if(r===0)n!==null&&lse(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lse(n),t===1)e.tag===0?s9e(toe.bind(null,e)):L1e(toe.bind(null,e)),t9e(function(){!(ur&6)&&Ay()}),n=null;else{switch(d1e(r)){case 1:n=Zq;break;case 4:n=l1e;break;case 16:n=EO;break;case 536870912:n=c1e;break;default:n=EO}n=$ve(n,Ive.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ive(e,t){if(uD=-1,lD=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(Gw()&&e.callbackNode!==n)return null;var r=xO(e,e===ao?No:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=UO(e,r);else{t=r;var i=ur;ur|=2;var s=Rve();(ao!==e||No!==t)&&(Ip=null,OE=ss()+500,Ev(e,t));do try{C9e();break}catch(a){kve(e,a)}while(!0);dW(),FO.current=s,ur=i,ws!==null?t=0:(ao=null,No=0,t=Os)}if(t!==0){if(t===2&&(i=vU(e),i!==0&&(r=i,t=WU(e,i))),t===1)throw n=CA,Ev(e,0),Ug(e,r),Uu(e,ss()),n;if(t===6)Ug(e,r);else{if(i=e.current.alternate,!(r&30)&&!S9e(i)&&(t=UO(e,r),t===2&&(s=vU(e),s!==0&&(r=s,t=WU(e,s))),t===1))throw n=CA,Ev(e,0),Ug(e,r),Uu(e,ss()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:T1(e,Tu,Ip);break;case 3:if(Ug(e,r),(r&130023424)===r&&(t=AW+500-ss(),10<t)){if(xO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ga(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=CU(T1.bind(null,e,Tu,Ip),t);break}T1(e,Tu,Ip);break;case 4:if(Ug(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ff(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x9e(r/1960))-r,10<r){e.timeoutHandle=CU(T1.bind(null,e,Tu,Ip),r);break}T1(e,Tu,Ip);break;case 5:T1(e,Tu,Ip);break;default:throw Error(tt(329))}}}return Uu(e,ss()),e.callbackNode===n?Ive.bind(null,e):null}function WU(e,t){var n=yC;return e.current.memoizedState.isDehydrated&&(Ev(e,t).flags|=256),e=UO(e,t),e!==2&&(t=Tu,Tu=n,t!==null&&GU(t)),e}function GU(e){Tu===null?Tu=e:Tu.push.apply(Tu,e)}function S9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ug(e,t){for(t&=~CW,t&=~gL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ff(t),r=1<<n;e[n]=-1,t&=~r}}function toe(e){if(ur&6)throw Error(tt(327));Gw();var t=xO(e,0);if(!(t&1))return Uu(e,ss()),null;var n=UO(e,t);if(e.tag!==0&&n===2){var r=vU(e);r!==0&&(t=r,n=WU(e,r))}if(n===1)throw n=CA,Ev(e,0),Ug(e,t),Uu(e,ss()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,T1(e,Tu,Ip),Uu(e,ss()),null}function IW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(OE=ss()+500,dL&&Ay())}}function zv(e){Qg!==null&&Qg.tag===0&&!(ur&6)&&Gw();var t=ur;ur|=1;var n=Ac.transition,r=Or;try{if(Ac.transition=null,Or=1,e)return e()}finally{Or=r,Ac.transition=n,ur=t,!(ur&6)&&Ay()}}function kW(){ml=Aw.current,hi(Aw)}function Ev(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,e9e(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(lW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&IO();break;case 3:PE(),hi(ju),hi(_a),vW();break;case 5:yW(r);break;case 4:PE();break;case 13:hi(Ni);break;case 19:hi(Ni);break;case 10:hW(r.type._context);break;case 22:case 23:kW()}n=n.return}if(ao=e,ws=e=b0(e.current,null),No=ml=t,Os=0,CA=null,CW=gL=Uv=0,Tu=yC=null,nv!==null){for(t=0;t<nv.length;t++)if(n=nv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}nv=null}return e}function kve(e,t){do{var n=ws;try{if(dW(),sD.current=LO,MO){for(var r=Pi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}MO=!1}if(Bv=0,Xs=Is=Pi=null,mC=!1,xA=0,TW.current=null,n===null||n.return===null){Os=1,CA=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=No,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=zse(o);if(h!==null){h.flags&=-257,Vse(h,o,a,s,t),h.mode&1&&Use(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Use(s,l,t),RW();break e}u=Error(tt(426))}}else if(xi&&a.mode&1){var g=zse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Vse(g,o,a,s,t),cW(DE(u,a));break e}}s=u=DE(u,a),Os!==4&&(Os=2),yC===null?yC=[s]:yC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=dve(s,u,t);$se(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(y0===null||!y0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=hve(s,a,t);$se(s,w);break e}}s=s.return}while(s!==null)}Pve(n)}catch(E){t=E,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function Rve(){var e=FO.current;return FO.current=LO,e===null?LO:e}function RW(){(Os===0||Os===3||Os===2)&&(Os=4),ao===null||!(Uv&268435455)&&!(gL&268435455)||Ug(ao,No)}function UO(e,t){var n=ur;ur|=2;var r=Rve();(ao!==e||No!==t)&&(Ip=null,Ev(e,t));do try{T9e();break}catch(i){kve(e,i)}while(!0);if(dW(),ur=n,FO.current=r,ws!==null)throw Error(tt(261));return ao=null,No=0,Os}function T9e(){for(;ws!==null;)Nve(ws)}function C9e(){for(;ws!==null&&!Q8e();)Nve(ws)}function Nve(e){var t=Ove(e.alternate,e,ml);e.memoizedProps=e.pendingProps,t===null?Pve(e):ws=t,TW.current=null}function Pve(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=b9e(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Os=6,ws=null;return}}else if(n=v9e(n,t,ml),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Os===0&&(Os=5)}function T1(e,t,n){var r=Or,i=Ac.transition;try{Ac.transition=null,Or=1,A9e(e,t,n,r)}finally{Ac.transition=i,Or=r}return null}function A9e(e,t,n,r){do Gw();while(Qg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(aBe(e,s),e===ao&&(ws=ao=null,No=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||TN||(TN=!0,$ve(EO,function(){return Gw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ac.transition,Ac.transition=null;var o=Or;Or=1;var a=ur;ur|=4,TW.current=null,w9e(e,n),Cve(n,e),GBe(SU),SO=!!xU,SU=xU=null,e.current=n,E9e(n),J8e(),ur=a,Or=o,Ac.transition=s}else e.current=n;if(TN&&(TN=!1,Qg=e,BO=i),s=e.pendingLanes,s===0&&(y0=null),tBe(n.stateNode),Uu(e,ss()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jO)throw jO=!1,e=HU,HU=null,e;return BO&1&&e.tag!==0&&Gw(),s=e.pendingLanes,s&1?e===qU?vC++:(vC=0,qU=e):vC=0,Ay(),null}function Gw(){if(Qg!==null){var e=d1e(BO),t=Ac.transition,n=Or;try{if(Ac.transition=null,Or=16>e?16:e,Qg===null)var r=!1;else{if(e=Qg,Qg=null,BO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:gC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(xve(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xt=_;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mL(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,Ay(),ah&&typeof ah.onPostCommitFiberRoot=="function")try{ah.onPostCommitFiberRoot(aL,e)}catch{}r=!0}return r}finally{Or=n,Ac.transition=t}}return!1}function noe(e,t,n){t=DE(n,t),t=dve(e,t,1),e=g0(e,t,1),t=Ga(),e!==null&&(ik(e,1,t),Uu(e,t))}function zi(e,t,n){if(e.tag===3)noe(e,e,n);else for(;t!==null;){if(t.tag===3){noe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(y0===null||!y0.has(r))){e=DE(n,e),e=hve(t,e,1),t=g0(t,e,1),e=Ga(),t!==null&&(ik(t,1,e),Uu(t,e));break}}t=t.return}}function I9e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ga(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(No&n)===n&&(Os===4||Os===3&&(No&130023424)===No&&500>ss()-AW?Ev(e,0):CW|=n),Uu(e,t)}function Dve(e,t){t===0&&(e.mode&1?(t=mN,mN<<=1,!(mN&130023424)&&(mN=4194304)):t=1);var n=Ga();e=ym(e,t),e!==null&&(ik(e,t,n),Uu(e,n))}function k9e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dve(e,n)}function R9e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),Dve(e,n)}var Ove;Ove=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ju.current)Du=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Du=!1,y9e(e,t,n);Du=!!(e.flags&131072)}else Du=!1,xi&&t.flags&1048576&&F1e(t,NO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;aD(e,t),e=t.pendingProps;var i=kE(t,_a.current);Ww(t,n),i=_W(null,t,r,e,i,n);var s=wW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bu(r)?(s=!0,kO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mW(t),i.updater=pL,t.stateNode=i,i._reactInternals=t,DU(t,r,e,n),t=MU(null,t,r,!0,s,n)):(t.tag=0,xi&&s&&uW(t),Ma(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(aD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=P9e(r),e=pf(r,e),i){case 0:t=$U(null,t,r,e,n);break e;case 1:t=Wse(null,t,r,e,n);break e;case 11:t=Hse(null,t,r,e,n);break e;case 14:t=qse(null,t,r,pf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),$U(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),Wse(e,t,r,i,n);case 3:e:{if(yve(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,H1e(e,t),OO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=DE(Error(tt(423)),t),t=Gse(e,t,r,n,i);break e}else if(r!==i){i=DE(Error(tt(424)),t),t=Gse(e,t,r,n,i);break e}else for(El=m0(t.stateNode.containerInfo.firstChild),Rl=t,xi=!0,_f=null,n=z1e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(RE(),r===i){t=vm(e,t,n);break e}Ma(e,t,r,n)}t=t.child}return t;case 5:return q1e(t),e===null&&RU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,TU(r,i)?o=null:s!==null&&TU(r,s)&&(t.flags|=32),gve(e,t),Ma(e,t,o,n),t.child;case 6:return e===null&&RU(t),null;case 13:return vve(e,t,n);case 4:return gW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=NE(t,null,r,n):Ma(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),Hse(e,t,r,i,n);case 7:return Ma(e,t,t.pendingProps,n),t.child;case 8:return Ma(e,t,t.pendingProps.children,n),t.child;case 12:return Ma(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(PO,r._currentValue),r._currentValue=o,s!==null)if(Gf(s.value,o)){if(s.children===i.children&&!ju.current){t=vm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=rm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),NU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),NU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ma(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ww(t,n),i=Rc(i),r=r(i),t.flags|=1,Ma(e,t,r,n),t.child;case 14:return r=t.type,i=pf(r,t.pendingProps),i=pf(r.type,i),qse(e,t,r,i,n);case 15:return pve(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),aD(e,t),t.tag=1,Bu(r)?(e=!0,kO(t)):e=!1,Ww(t,n),fve(t,r,i),DU(t,r,i,n),MU(null,t,r,!0,e,n);case 19:return bve(e,t,n);case 22:return mve(e,t,n)}throw Error(tt(156,t.tag))};function $ve(e,t){return u1e(e,t)}function N9e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,r){return new N9e(e,t,n,r)}function NW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P9e(e){if(typeof e=="function")return NW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xq)return 11;if(e===Qq)return 14}return 2}function b0(e,t){var n=e.alternate;return n===null?(n=Ec(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")NW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case yw:return xv(n.children,i,s,t);case Kq:o=8,i|=8;break;case rU:return e=Ec(12,n,t,i|2),e.elementType=rU,e.lanes=s,e;case iU:return e=Ec(13,n,t,i),e.elementType=iU,e.lanes=s,e;case sU:return e=Ec(19,n,t,i),e.elementType=sU,e.lanes=s,e;case qye:return yL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vye:o=10;break e;case Hye:o=9;break e;case Xq:o=11;break e;case Qq:o=14;break e;case Rg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Ec(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function xv(e,t,n,r){return e=Ec(7,e,r,t),e.lanes=n,e}function yL(e,t,n,r){return e=Ec(22,e,r,t),e.elementType=qye,e.lanes=n,e.stateNode={isHidden:!1},e}function Cj(e,t,n){return e=Ec(6,e,null,t),e.lanes=n,e}function Aj(e,t,n){return t=Ec(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D9e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aj(0),this.expirationTimes=aj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function PW(e,t,n,r,i,s,o,a,u){return e=new D9e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ec(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mW(s),e}function O9e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mve(e){if(!e)return j0;e=e._reactInternals;e:{if(Nb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Bu(n))return M1e(e,n,t)}return t}function Lve(e,t,n,r,i,s,o,a,u){return e=PW(n,r,!0,e,i,s,o,a,u),e.context=Mve(null),n=e.current,r=Ga(),i=v0(n),s=rm(r,i),s.callback=t??null,g0(n,s,i),e.current.lanes=i,ik(e,i,r),Uu(e,r),e}function vL(e,t,n,r){var i=t.current,s=Ga(),o=v0(i);return n=Mve(n),t.context===null?t.context=n:t.pendingContext=n,t=rm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=g0(i,t,o),e!==null&&(jf(e,i,o,s),iD(e,i,o)),o}function zO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function roe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function DW(e,t){roe(e,t),(e=e.alternate)&&roe(e,t)}function $9e(){return null}var Fve=typeof reportError=="function"?reportError:function(e){console.error(e)};function OW(e){this._internalRoot=e}bL.prototype.render=OW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));vL(e,t,null,null)};bL.prototype.unmount=OW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zv(function(){vL(null,e,null,null)}),t[gm]=null}};function bL(e){this._internalRoot=e}bL.prototype.unstable_scheduleHydration=function(e){if(e){var t=m1e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bg.length&&t!==0&&t<Bg[n].priority;n++);Bg.splice(n,0,e),n===0&&y1e(e)}};function $W(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _L(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ioe(){}function M9e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=zO(o);s.call(l)}}var o=Lve(t,r,e,0,null,!1,!1,"",ioe);return e._reactRootContainer=o,e[gm]=o.current,vA(e.nodeType===8?e.parentNode:e),zv(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=zO(u);a.call(l)}}var u=PW(e,0,!1,null,null,!1,!1,"",ioe);return e._reactRootContainer=u,e[gm]=u.current,vA(e.nodeType===8?e.parentNode:e),zv(function(){vL(t,u,n,r)}),u}function wL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=zO(o);a.call(u)}}vL(t,o,e,i)}else o=M9e(n,t,e,i,r);return zO(o)}h1e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=b2(t.pendingLanes);n!==0&&(eW(t,n|1),Uu(t,ss()),!(ur&6)&&(OE=ss()+500,Ay()))}break;case 13:zv(function(){var r=ym(e,1);if(r!==null){var i=Ga();jf(r,e,1,i)}}),DW(e,1)}};tW=function(e){if(e.tag===13){var t=ym(e,134217728);if(t!==null){var n=Ga();jf(t,e,134217728,n)}DW(e,134217728)}};p1e=function(e){if(e.tag===13){var t=v0(e),n=ym(e,t);if(n!==null){var r=Ga();jf(n,e,t,r)}DW(e,t)}};m1e=function(){return Or};g1e=function(e,t){var n=Or;try{return Or=e,t()}finally{Or=n}};mU=function(e,t,n){switch(t){case"input":if(uU(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fL(r);if(!i)throw Error(tt(90));Gye(r),uU(r,i)}}}break;case"textarea":Kye(e,n);break;case"select":t=n.value,t!=null&&zw(e,!!n.multiple,t,!1)}};n1e=IW;r1e=zv;var L9e={usingClientEntryPoint:!1,Events:[ok,ww,fL,e1e,t1e,IW]},ET={findFiberByHostInstance:tv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F9e={bundleType:ET.bundleType,version:ET.version,rendererPackageName:ET.rendererPackageName,rendererConfig:ET.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=o1e(e),e===null?null:e.stateNode},findFiberByHostInstance:ET.findFiberByHostInstance||$9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CN.isDisabled&&CN.supportsFiber)try{aL=CN.inject(F9e),ah=CN}catch{}}Xl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L9e;Xl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$W(t))throw Error(tt(200));return O9e(e,t,null,n)};Xl.createRoot=function(e,t){if(!$W(e))throw Error(tt(299));var n=!1,r="",i=Fve;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=PW(e,1,!1,null,null,n,!1,r,i),e[gm]=t.current,vA(e.nodeType===8?e.parentNode:e),new OW(t)};Xl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=o1e(t),e=e===null?null:e.stateNode,e};Xl.flushSync=function(e){return zv(e)};Xl.hydrate=function(e,t,n){if(!_L(t))throw Error(tt(200));return wL(null,e,t,!0,n)};Xl.hydrateRoot=function(e,t,n){if(!$W(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Fve;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Lve(t,null,e,1,n??null,i,!1,s,o),e[gm]=t.current,vA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bL(t)};Xl.render=function(e,t,n){if(!_L(t))throw Error(tt(200));return wL(null,e,t,!1,n)};Xl.unmountComponentAtNode=function(e){if(!_L(e))throw Error(tt(40));return e._reactRootContainer?(zv(function(){wL(null,null,e,!1,function(){e._reactRootContainer=null,e[gm]=null})}),!0):!1};Xl.unstable_batchedUpdates=IW;Xl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_L(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return wL(e,t,n,!1,r)};Xl.version="18.3.1-next-f1338f8080-20240426";function jve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jve)}catch(e){console.error(e)}}jve(),jye.exports=Xl;var uk=jye.exports;const w2=Kl(uk);var soe=uk;tU.createRoot=soe.createRoot,tU.hydrateRoot=soe.hydrateRoot;var Ud=function(){return Ud=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ud.apply(this,arguments)};function lk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Fp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function ooe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function j9e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function iv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Ij(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function bC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ooe=="function"?ooe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var fD="right-scroll-bar-position",dD="width-before-scroll-bar",B9e="with-scroll-bars-hidden",U9e="--removed-body-scroll-bar-size";function kj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function z9e(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var V9e=typeof window<"u"?I.useLayoutEffect:I.useEffect,aoe=new WeakMap;function H9e(e,t){var n=z9e(null,function(r){return e.forEach(function(i){return kj(i,r)})});return V9e(function(){var r=aoe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||kj(a,null)}),s.forEach(function(a){i.has(a)||kj(a,o)})}aoe.set(n,e)},[e]),n}function q9e(e){return e}function W9e(e,t){t===void 0&&(t=q9e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function G9e(e){e===void 0&&(e={});var t=W9e(null);return t.options=Ud({async:!0,ssr:!1},e),t}var Bve=function(e){var t=e.sideCar,n=lk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Ud({},n))};Bve.isSideCarExport=!0;function Y9e(e,t){return e.useMedium(t),Bve}var Uve=G9e(),Rj=function(){},EL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:Rj,onWheelCapture:Rj,onTouchMoveCapture:Rj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=lk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=H9e([n,t]),x=Ud(Ud({},_),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:Uve,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Ud(Ud({},x),{ref:E})):I.createElement(y,Ud({},x,{className:u,ref:E}),a))});EL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};EL.classNames={fullWidth:dD,zeroRight:fD};var K9e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X9e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=K9e();return t&&e.setAttribute("nonce",t),e}function Q9e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function J9e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Z9e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=X9e())&&(Q9e(t,n),J9e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eUe=function(){var e=Z9e();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},zve=function(){var e=eUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},tUe={left:0,top:0,right:0,gap:0},Nj=function(e){return parseInt(e||"",10)||0},nUe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Nj(n),Nj(r),Nj(i)]},rUe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tUe;var t=nUe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},iUe=zve(),Yw="data-scroll-locked",sUe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(B9e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Yw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(fD," .").concat(fD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dD," .").concat(dD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yw,`] {
    `).concat(U9e,": ").concat(a,`px;
  }
`)},uoe=function(){var e=parseInt(document.body.getAttribute(Yw)||"0",10);return isFinite(e)?e:0},oUe=function(){I.useEffect(function(){return document.body.setAttribute(Yw,(uoe()+1).toString()),function(){var e=uoe()-1;e<=0?document.body.removeAttribute(Yw):document.body.setAttribute(Yw,e.toString())}},[])},aUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;oUe();var s=I.useMemo(function(){return rUe(i)},[i]);return I.createElement(iUe,{styles:sUe(s,!t,i,n?"":"!important")})},YU=!1;if(typeof window<"u")try{var AN=Object.defineProperty({},"passive",{get:function(){return YU=!0,!0}});window.addEventListener("test",AN,AN),window.removeEventListener("test",AN,AN)}catch{YU=!1}var C_=YU?{passive:!1}:!1,uUe=function(e){return e.tagName==="TEXTAREA"},Vve=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!uUe(e)&&n[t]==="visible")},lUe=function(e){return Vve(e,"overflowY")},cUe=function(e){return Vve(e,"overflowX")},loe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Hve(e,r);if(i){var s=qve(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},fUe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},dUe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Hve=function(e,t){return e==="v"?lUe(t):cUe(t)},qve=function(e,t){return e==="v"?fUe(t):dUe(t)},hUe=function(e,t){return e==="h"&&t==="rtl"?-1:1},pUe=function(e,t,n,r,i){var s=hUe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=qve(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Hve(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},IN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},coe=function(e){return[e.deltaX,e.deltaY]},foe=function(e){return e&&"current"in e?e.current:e},mUe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gUe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yUe=0,A_=[];function vUe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(yUe++)[0],s=I.useState(zve)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=j9e([e.lockRef.current],(e.shards||[]).map(foe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=IN(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,x=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&x.type==="range")return!1;var C=loe(S,x);if(!C)return!0;if(C?E=S:(E=S==="v"?"h":"v",C=loe(S,x)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=E),!E)return!0;var A=r.current||E;return pUe(A,g,m,A==="h"?_:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!A_.length||A_[A_.length-1]!==s)){var y="deltaY"in g?coe(g):IN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&mUe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(foe).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=_.length>0?a(g,_[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:bUe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=I.useCallback(function(m){n.current=IN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,coe(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,IN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return A_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,C_),document.addEventListener("touchmove",u,C_),document.addEventListener("touchstart",c,C_),function(){A_=A_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,C_),document.removeEventListener("touchmove",u,C_),document.removeEventListener("touchstart",c,C_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:gUe(i)}):null,h?I.createElement(aUe,{gapMode:e.gapMode}):null)}function bUe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _Ue=Y9e(Uve,vUe);var xL=I.forwardRef(function(e,t){return I.createElement(EL,Ud({},e,{ref:t,sideCar:_Ue}))});xL.classNames=EL.classNames;function Xr(e){return Object.keys(e)}function Pj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function MW(e,t){const n={...e},r=t;return Pj(e)&&Pj(t)&&Object.keys(t).forEach(i=>{Pj(r[i])&&i in e?n[i]=MW(n[i],r[i]):n[i]=r[i]}),n}function wUe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function EUe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function AA(e){const t=EUe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Dj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Wve(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Dj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Dj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Dj(s):s}}return r}return n}const Se=Wve("rem",{shouldScale:!0}),VO=Wve("em");function Iy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Gve(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function ky(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function fo(e){const t=I.createContext(null);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Xx(e=null){const t=I.createContext(e);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function HO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function qO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function xUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function SUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function TUe(e,t,n){return qO(e,n)===qO(t,n)}function LW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=qO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>TUe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=SUe(l,u,r),f=xUe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const CUe={app:100,modal:200,popover:300,overlay:400,max:9999};function Jl(e){return CUe[e]}const AUe=()=>{};function IUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||AUe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tn(e,t="size",n=!0){if(e!==void 0)return Gve(e)?n?Se(e):e:`var(--${t}-${e})`}function as(e){return tn(e,"mantine-spacing")}function Ur(e){return e===void 0?"var(--mantine-radius-default)":tn(e,"mantine-radius")}function uo(e){return tn(e,"mantine-font-size")}function Yve(e){return tn(e,"mantine-line-height",!1)}function FW(e){if(e)return tn(e,"mantine-shadow",!1)}function Gp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function jW(e,t){return e in t.breakpoints?AA(t.breakpoints[e]):AA(e)}function IA(e,t){const n=e.map(r=>({value:r,px:jW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function kf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function kUe(e,t,n){var r;return n?Array.from(((r=qO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function RUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function eh(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Kw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function U1(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function SL(e,t){const n=U1(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const doe=["mousedown","touchstart"];function NUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||doe).forEach(s=>document.addEventListener(s,i)),()=>{(t||doe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function PUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function DUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function OUe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:DUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),PUe(s.current,o=>i(o.matches))},[e]),r}const Pb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Th(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Kve({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Th(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function $Ue(e,t="body > :not(script)"){const n=Kw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const MUe=/input|select|textarea|button|object/,Xve="a, input, select, textarea, button, object, [tabindex]";function LUe(e){return e.style.display==="none"}function FUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(LUe(n))return!1;n=n.parentNode}return!0}function Qve(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function KU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Qve(e));return(MUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&FUe(e)}function Jve(e){const t=Qve(e);return(Number.isNaN(t)||t>=0)&&KU(e)}function jUe(e){return Array.from(e.querySelectorAll(Xve)).filter(Jve)}function BUe(e,t){const n=jUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function UUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Xve));o=a.find(Jve)||a.find(KU)||null,!o&&KU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=$Ue(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&BUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const zUe=e=>(e+1)%1e6;function VUe(){const[,e]=I.useReducer(zUe,0);return e}const HUe=_r.useId||(()=>{});function qUe(){const e=HUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ta(e){const t=qUe(),[n,r]=I.useState(t);return Pb(()=>{r(Kw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Zve(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function BW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function ebe(...e){return t=>{e.forEach(n=>BW(n,t))}}function hs(...e){return I.useCallback(ebe(...e),e)}function tbe(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,_;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const x=r.current.getBoundingClientRect();if(x.width&&x.height){const S=eh((w-x.left)/x.width,0,1);e({x:n==="ltr"?S:1-S,y:eh((E-x.top)/x.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ss({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function TL(e,t){return OUe("(prefers-reduced-motion: reduce)",e,t)}const WUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Sv(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(WUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function GUe(e){const[t,{width:n,height:r}]=Sv(e);return{ref:t,width:n,height:r}}function YUe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function KUe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function XUe(e){return t=>KUe(YUe(e),t)}function QUe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{XUe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function CL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function JUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function ZUe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function e7e(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function t7e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function n7e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Pb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>t7e(`${e}:${String(r)}`,i[0])}return[t,n]}var r7e={};function nbe(){return typeof process<"u"&&r7e?"production":"development"}function rbe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=rbe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=rbe(e))&&(r&&(r+=" "),r+=t);return r}const i7e={};function s7e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Xi(t[r],i):t[r]=i})}),t}function AL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||i7e);return s7e(s)}function WO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const ibe=I.createContext(null);function Ry(){const e=I.useContext(ibe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function o7e(){return Ry().cssVariablesResolver}function a7e(){return Ry().classNamesPrefix}function UW(){return Ry().getStyleNonce}function u7e(){return Ry().withStaticClasses}function l7e(){return Ry().headless}function c7e(){var e;return(e=Ry().stylesTransform)==null?void 0:e.sx}function f7e(){var e;return(e=Ry().stylesTransform)==null?void 0:e.styles}function d7e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function h7e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function p7e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function m7e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function zW(e){return d7e(e)?h7e(e):e.startsWith("rgb")?p7e(e):e.startsWith("hsl")?m7e(e):{r:0,g:0,b:0,a:1}}function kN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=zW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function kA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Oj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function g7e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function y7e(e){if(e.startsWith("oklch("))return(g7e(e)||0)/100;const{r:t,g:n,b:r}=zW(e),i=t/255,s=n/255,o=r/255,a=Oj(i),u=Oj(s),l=Oj(o);return .2126*a+.7152*u+.0722*l}function xT(e,t=.179){return e.startsWith("var(")?!1:y7e(e)>t}function Hh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:xT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:xT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:xT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][kA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:xT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:xT(e,t.luminanceThreshold),shade:s,variable:void 0}}function $r(e,t){const n=Hh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function XU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$r(n.from,t),i=$r(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Nd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=zW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const I_=Nd,v7e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Hh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Se(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Se(1)} solid transparent`}:{background:e,hover:kN(e,.1),color:a,border:`${Se(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Nd(a,.1),hover:Nd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:Nd(e,.1),hover:Nd(e,.12),color:e,border:`${Se(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Se(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Nd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Nd(e,.05),color:e,border:`${Se(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Nd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:"transparent",hover:Nd(e,.12),color:e,border:`${Se(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Se(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:kN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kN(t.white,.01),color:e,border:`${Se(1)} solid transparent`}:n==="gradient"?{background:XU(r,t),hover:XU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Se(1)} solid var(--mantine-color-default-border)`}:{}},b7e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},hoe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",VW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:b7e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:v7e,autoContrast:!1,luminanceThreshold:.3,fontFamily:hoe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:hoe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Se(34),lineHeight:"1.3"},h2:{fontSize:Se(26),lineHeight:"1.35"},h3:{fontSize:Se(22),lineHeight:"1.4"},h4:{fontSize:Se(18),lineHeight:"1.45"},h5:{fontSize:Se(16),lineHeight:"1.5"},h6:{fontSize:Se(14),lineHeight:"1.5"}}},fontSizes:{xs:Se(12),sm:Se(14),md:Se(16),lg:Se(18),xl:Se(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Se(2),sm:Se(4),md:Se(8),lg:Se(16),xl:Se(32)},spacing:{xs:Se(10),sm:Se(12),md:Se(16),lg:Se(20),xl:Se(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), 0 ${Se(1)} ${Se(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(10)} ${Se(15)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(7)} ${Se(7)} ${Se(-5)}`,md:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(20)} ${Se(25)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(10)} ${Se(10)} ${Se(-5)}`,lg:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(28)} ${Se(23)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(12)} ${Se(12)} ${Se(-7)}`,xl:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(36)} ${Se(28)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(17)} ${Se(17)} ${Se(-7)}`},other:{},components:{}};function poe(e){return e==="auto"||e==="dark"||e==="light"}function _7e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return poe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&poe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const w7e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",moe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function $j(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function goe(e){if(!(e.primaryColor in e.colors))throw new Error(w7e);if(typeof e.primaryShade=="object"&&(!$j(e.primaryShade.dark)||!$j(e.primaryShade.light)))throw new Error(moe);if(typeof e.primaryShade=="number"&&!$j(e.primaryShade))throw new Error(moe)}function E7e(e,t){var r;if(!t)return goe(e),e;const n=MW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),goe(n),n}const HW=I.createContext(null),x7e=()=>I.useContext(HW)||VW;function ps(){const e=I.useContext(HW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function sbe({theme:e,children:t,inherit:n=!0}){const r=x7e(),i=I.useMemo(()=>E7e(n?r:VW,e),[e,r,n]);return b.jsx(HW.Provider,{value:i,children:t})}sbe.displayName="@mantine/core/MantineThemeProvider";function S7e(){const e=ps(),t=UW(),n=Xr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=AA(e.breakpoints[i]),a=s?`${o-.1}px`:VO(o-.1),u=s?`${o}px`:VO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Mj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Lj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function T7e(e,t){const n=Mj(e.variables),r=n?Lj(t,n):"",i=Mj(e.dark),s=i?Lj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Mj(e.light),a=o?Lj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Ny({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Hh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function yoe(e,t){return Ny({color:e.colors[e.primaryColor][kA(e,t)],theme:e,autoContrast:null})}function RN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=kA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:I_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:I_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:I_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=kA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:I_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:I_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:I_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function C7e(e){return Array.isArray(e)?e:Array(10).fill(e)}function A7e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function k_(e,t,n){Xr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const obe=e=>{const t=kA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Se(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":yoe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":yoe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};k_(r.variables,e.breakpoints,"breakpoint"),k_(r.variables,e.spacing,"spacing"),k_(r.variables,e.fontSizes,"font-size"),k_(r.variables,e.lineHeights,"line-height"),k_(r.variables,e.shadows,"shadow"),k_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Xr(e.colors).forEach(s=>{const o=e.colors[s];if(A7e(o)){Object.assign(r.light,RN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,RN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,RN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,RN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Xr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function I7e({theme:e,generator:t}){const n=obe(e),r=t==null?void 0:t(e);return r?MW(n,r):n}const Fj=obe(VW);function k7e(e){const t={variables:{},light:{},dark:{}};return Xr(e.variables).forEach(n=>{Fj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Xr(e.light).forEach(n=>{Fj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Xr(e.dark).forEach(n=>{Fj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function R7e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function abe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ps(),r=UW(),i=o7e(),s=I7e({theme:n,generator:i}),o=e===":root"&&t,a=o?k7e(s):s,u=T7e(a,e);return u?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":R7e(e)}`}}):null}abe.displayName="@mantine/CssVariables";function N7e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function R_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function P7e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(R_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),R_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Pb(()=>{R_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return R_(r,n),()=>{};r===void 0&&R_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&R_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function D7e({respectReducedMotion:e,getRootElement:t}){Pb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}N7e();function ube({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=_7e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=P7e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return D7e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),b.jsx(ibe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(sbe,{theme:e,children:[o&&b.jsx(abe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&b.jsx(S7e,{}),t]})})}ube.displayName="@mantine/core/MantineProvider";function Hm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ps();return{resolvedClassNames:AL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:WO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const O7e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function $7e({theme:e,options:t,unstyled:n}){return Xi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||O7e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function M7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return AL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function voe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return AL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function L7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function F7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function j7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function B7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=AL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function U7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function z7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Xi($7e({theme:e,options:t,unstyled:a||h}),B7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),U7e({options:t,classes:o,selector:r,unstyled:a}),voe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),voe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),M7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),L7e({rootSelector:l,selector:r,className:u}),F7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&j7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function V7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return WO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function QU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...QU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function H7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Iy(n[r])}}),t),{})}function q7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=H7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function W7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&V7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&WO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&WO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...q7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?QU({style:u,theme:e}):null,...QU({style:r==null?void 0:r.style,theme:e})}}function G7e({props:e,stylesCtx:t,themeName:n}){var o;const r=ps(),i=(o=f7e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ps(),h=a7e(),p=u7e(),m=l7e(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=G7e({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:z7e({theme:d,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:W7e({theme:d,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Qx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=ps(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Iy(n)}}function jj(e){return Xr(e).reduce((t,n)=>e[n]!==void 0?`${t}${wUe(n)}:${e[n]};`:t,"").trim()}function Y7e({selector:e,styles:t,media:n,container:r}){const i=t?jj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${jj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${jj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Db(e){const t=UW();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Y7e(e)}})}function Ob(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:x,ff:S,fz:C,fw:A,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:Iy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:x,ff:S,fz:C,fw:A,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const K7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function qW(e,t){const n=Hh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function X7e(e,t){const n=Hh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:qW(e,t)}function Q7e(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Se(n)}`;return r&&(s+=` ${r}`),C7e.length>0&&(s+=` ${qW(i.join(" "),t)}`),s.trim()}return e}const boe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function J7e(e){return typeof e=="string"&&e in boe?boe[e]:e}const Z7e=["h1","h2","h3","h4","h5","h6"];function eze(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Z7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Se(e):e}function tze(e){return e}const nze=["h1","h2","h3","h4","h5","h6"];function rze(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&nze.includes(e)?`var(--mantine-${e}-line-height)`:e}function ize(e){return typeof e=="number"?Se(e):e}function sze(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Se(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Bj={color:qW,textColor:X7e,fontSize:eze,spacing:sze,identity:tze,size:ize,lineHeight:rze,fontFamily:J7e,border:Q7e};function _oe(e){return e.replace("(min-width: ","").replace("em)","")}function oze({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(_oe(i))-Number(_oe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function aze(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function uze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function lze(e){return typeof e=="object"&&e!==null?Xr(e).filter(t=>t!=="base"):[]}function cze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function lbe({styleProps:e,data:t,theme:n}){return oze(Xr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=uze(e[i]);if(!aze(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Bj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=lze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Bj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Bj[s.type](cze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function ck(){return`__m__-${I.useId().replace(/:/g,"")}`}function WW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...WW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function cbe(e){return e.startsWith("data-")?e:`data-${e}`}function fze(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[cbe(n)]=e[n]),t},{})}function fbe(e){return e?typeof e=="string"?{[cbe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...fbe(n)}),{}):fze(e):null}function JU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...JU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function dze({theme:e,style:t,vars:n,styleProps:r}){const i=JU(t,e),s=JU(n,e);return{...i,...s,...r}}const dbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=ps(),g=e||"div",{styleProps:y,rest:v}=Ob(h),_=c7e(),w=(C=_==null?void 0:_())==null?void 0:C(y.sx),E=ck(),x=lbe({styleProps:y,theme:m,data:K7e}),S={ref:p,style:dze({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:Xi(r,w,{[E]:x.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Gve(o)?void 0:o||void 0,size:d,...fbe(s),...v};return b.jsxs(b.Fragment,{children:[x.hasResponsiveStyles&&b.jsx(Db,{selector:`.${E}`,styles:x.styles,media:x.media}),typeof f=="function"?f(S):b.jsx(g,{...S})]})});dbe.displayName="@mantine/core/Box";const pe=dbe;function hbe(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=hbe,t}function Us(e){const t=I.forwardRef(e);return t.extend=hbe,t}const hze=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function qh(){return I.useContext(hze)}function pze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Uj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const ST=typeof window<"u"&&window.requestAnimationFrame;function mze({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{uk.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||pze(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Th(()=>{typeof ST=="function"&&ST(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),ST(()=>{const p=Uj(i);c({...f(p),height:p})})}:()=>{const p=Uj(i);c({...f(p),willChange:"height",height:p}),ST(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Uj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:ebe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const gze={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},IL=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",gze,e),c=ps(),f=TL(),h=(c.respectReducedMotion?f:!1)?0:i,p=mze({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?b.jsx(pe,{...l,children:n}):null:b.jsx(pe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...WW(o,c)},ref:t,...l}),children:n})});IL.displayName="@mantine/core/Collapse";const[yze,Vc]=fo("ScrollArea.Root component was not found in tree");function $E(e,t){const n=U1(t);Pb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const vze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Vc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return $E(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),$E(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?b.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),bze=I.forwardRef((e,t)=>{const n=Vc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(vze,{...e,ref:t}):null}),_ze={scrollHideDelay:1e3,type:"hover"},pbe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",_ze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[_,w]=I.useState(0),[E,x]=I.useState(!1),[S,C]=I.useState(!1),A=hs(t,k=>u(k));return b.jsx(yze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:b.jsx(pe,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});pbe.displayName="@mantine/core/ScrollAreaRoot";function mbe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function kL(e){const t=mbe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function gbe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function wze(e,[t,n]){return Math.min(n,Math.max(t,e))}function woe(e,t,n="ltr"){const r=kL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=wze(e,u);return gbe([0,o],[0,a])(l)}function Eze(e,t,n,r="ltr"){const i=kL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return gbe([u,l],f)(e)}function ybe(e,t){return e>0&&e<t}function GO(e){return e?parseInt(e,10):0}function Tv(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[xze,vbe]=fo("ScrollAreaScrollbar was not found in tree"),bbe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Vc(),[h,p]=I.useState(null),m=hs(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,_=n.content-n.viewport,w=U1(l),E=U1(a),x=SL(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const C=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&w(A,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,_,w]),I.useEffect(E,[n,E]),$E(h,x),$E(d.content,x),b.jsx(xze,{value:{scrollbar:h,hasThumb:r,onThumbChange:U1(i),onThumbPointerUp:U1(s),onThumbPositionChange:E,onThumbPointerDown:U1(o)},children:b.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Tv(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:Tv(e.onPointerMove,S),onPointerUp:Tv(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Sze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Vc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),b.jsx(bbe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${kL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ybe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:GO(a.paddingLeft),paddingEnd:GO(a.paddingRight)}})}})}),Tze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Vc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),b.jsx(bbe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${kL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ybe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:GO(a.paddingTop),paddingEnd:GO(a.paddingBottom)}})}})}),GW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=qh(),s=Vc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=mbe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Eze(h,a.current,u,p);return n==="horizontal"?b.jsx(Sze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=woe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?b.jsx(Tze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=woe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),_be=I.forwardRef((e,t)=>{const n=Vc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=SL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return $E(n.viewport,u),$E(n.content,u),r||s?b.jsx(GW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Cze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?b.jsx(_be,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Aze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=SL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?b.jsx(GW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Tv(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Tv(e.onPointerLeave,()=>a("idle"))}):null}),Eoe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(Cze,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(Aze,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(_be,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(GW,{...r,ref:t}):null});function Ize(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const kze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Vc(),s=vbe(),{onThumbPositionChange:o}=s,a=hs(t,c=>s.onThumbChange(c)),u=I.useRef(),l=SL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Ize(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),b.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Tv(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Tv(e.onPointerUp,s.onThumbPointerUp)})}),xoe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vbe();return n||i.hasThumb?b.jsx(kze,{ref:t,...r}):null}),wbe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Vc(),s=hs(r,i.onViewportChange);return b.jsx(pe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});wbe.displayName="@mantine/core/ScrollAreaViewport";var YW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Ebe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Rze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Se(t)}}),bm=Me((e,t)=>{const n=xe("ScrollArea",Ebe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[_,w]=I.useState(!1),E=dt({name:"ScrollArea",props:n,classes:YW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Rze});return b.jsxs(pbe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[b.jsx(wbe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:x=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,x),p==null||p({x:x.currentTarget.scrollLeft,y:x.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&b.jsx(Eoe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(xoe,{...E("thumb")})}),(y==="xy"||y==="y")&&b.jsx(Eoe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(xoe,{...E("thumb")})}),b.jsx(bze,{...E("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});bm.displayName="@mantine/core/ScrollArea";const KW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",Ebe,e);return b.jsx(pe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(pe,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(bm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});bm.classes=YW;KW.displayName="@mantine/core/ScrollAreaAutosize";KW.classes=YW;bm.Autosize=KW;var xbe={root:"m_87cf2631"};const Nze={__staticSelector:"UnstyledButton"},xs=Us((e,t)=>{const n=xe("UnstyledButton",Nze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:xbe,className:r,style:l,classNames:a,styles:u,unstyled:o});return b.jsx(pe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});xs.classes=xbe;xs.displayName="@mantine/core/UnstyledButton";var Sbe={root:"m_515a97f8"};const Pze={},XW=Me((e,t)=>{const n=xe("VisuallyHidden",Pze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:Sbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return b.jsx(pe,{component:"span",ref:t,...c("root"),...l})});XW.classes=Sbe;XW.displayName="@mantine/core/VisuallyHidden";var Tbe={root:"m_1b7284a3"};const Dze={},Oze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ur(t),"--paper-shadow":FW(n)}}),$b=Us((e,t)=>{const n=xe("Paper",Dze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:Tbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Oze});return b.jsx(pe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});$b.classes=Tbe;$b.displayName="@mantine/core/Paper";function Jx(e){return Cbe(e)?(e.nodeName||"").toLowerCase():"#document"}function zu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qm(e){var t;return(t=(Cbe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cbe(e){return e instanceof Node||e instanceof zu(e).Node}function Si(e){return e instanceof Element||e instanceof zu(e).Element}function Ml(e){return e instanceof HTMLElement||e instanceof zu(e).HTMLElement}function ZU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zu(e).ShadowRoot}function fk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Pc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $ze(e){return["table","td","th"].includes(Jx(e))}function QW(e){const t=JW(),n=Pc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Mze(e){let t=_m(e);for(;Ml(t)&&!B0(t);){if(QW(t))return t;t=_m(t)}return null}function JW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function B0(e){return["html","body","#document"].includes(Jx(e))}function Pc(e){return zu(e).getComputedStyle(e)}function RL(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _m(e){if(Jx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ZU(e)&&e.host||qm(e);return ZU(t)?t.host:t}function Abe(e){const t=_m(e);return B0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ml(t)&&fk(t)?t:Abe(t)}function im(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Abe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=zu(i);return s?t.concat(o,o.visualViewport||[],fk(i)?i:[],o.frameElement&&n?im(o.frameElement):[]):t.concat(i,im(i,[],n))}function Soe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function RA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ZU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ibe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function kbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Lze(e){return Bze()?!1:!Toe()&&e.width===0&&e.height===0||Toe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Fze(){return/apple/i.test(navigator.vendor)}function Toe(){const e=/android/i;return e.test(Ibe())||e.test(kbe())}function jze(){return Ibe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Bze(){return kbe().includes("jsdom/")}function e7(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Uze(e){return"nativeEvent"in e}function zze(e){return e.matches("html,body")}function sv(e){return(e==null?void 0:e.ownerDocument)||document}function zj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function nw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Vze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Hze(e){return Ml(e)&&e.matches(Vze)}const xl=Math.min,la=Math.max,YO=Math.round,NN=Math.floor,U0=e=>({x:e,y:e}),qze={left:"right",right:"left",bottom:"top",top:"bottom"},Wze={start:"end",end:"start"};function t7(e,t,n){return la(e,xl(t,n))}function wm(e,t){return typeof e=="function"?e(t):e}function Yf(e){return e.split("-")[0]}function Zx(e){return e.split("-")[1]}function ZW(e){return e==="x"?"y":"x"}function eG(e){return e==="y"?"height":"width"}function Mb(e){return["top","bottom"].includes(Yf(e))?"y":"x"}function tG(e){return ZW(Mb(e))}function Gze(e,t,n){n===void 0&&(n=!1);const r=Zx(e),i=tG(e),s=eG(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=KO(o)),[o,KO(o)]}function Yze(e){const t=KO(e);return[n7(e),t,n7(t)]}function n7(e){return e.replace(/start|end/g,t=>Wze[t])}function Kze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Xze(e,t,n,r){const i=Zx(e);let s=Kze(Yf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(n7)))),s}function KO(e){return e.replace(/left|right|bottom|top/g,t=>qze[t])}function Qze(e){return{top:0,right:0,bottom:0,left:0,...e}}function nG(e){return typeof e!="number"?Qze(e):{top:e,right:e,bottom:e,left:e}}function ME(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Coe(e,t,n){let{reference:r,floating:i}=e;const s=Mb(t),o=tG(t),a=eG(o),u=Yf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Zx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Jze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Coe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Coe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function rG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=wm(t,e),p=nG(h),g=a[d?f==="floating"?"reference":"floating":f],y=ME(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=ME(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const Zze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=wm(e,t)||{};if(l==null)return{};const f=nG(c),d={x:n,y:r},h=tG(i),p=eG(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=x?x[_]:0;(!S||!await(o.isElement==null?void 0:o.isElement(x)))&&(S=a.floating[_]||s.floating[p]);const C=w/2-E/2,A=S/2-m[p]/2-1,k=xl(f[y],A),N=xl(f[v],A),O=k,D=S-m[p]-N,$=S/2-m[p]/2+C,F=t7(O,$,D),M=!u.arrow&&Zx(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:N)-m[p]/2<0,B=M?$<O?$-O:$-D:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),eVe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=wm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Yf(i),v=Yf(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[KO(a)]:Yze(a));!d&&p!=="none"&&w.push(...Xze(a,m,p,_));const E=[a,...w],x=await rG(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(x[y]),f){const O=Gze(i,o,_);S.push(x[O[0]],x[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var A,k;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,D=E[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let $=(k=C.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=C.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function Rbe(e){const t=xl(...e.map(s=>s.left)),n=xl(...e.map(s=>s.top)),r=la(...e.map(s=>s.right)),i=la(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function tVe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>ME(Rbe(i)))}const nVe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=wm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=tVe(c),d=ME(Rbe(c)),h=nG(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Mb(n)==="y"){const k=f[0],N=f[f.length-1],O=Yf(n)==="top",D=k.top,$=N.bottom,F=O?k.left:N.left,M=O?k.right:N.right,B=M-F,U=$-D;return{top:D,bottom:$,left:F,right:M,width:B,height:U,x:F,y:D}}const g=Yf(n)==="left",y=la(...f.map(k=>k.right)),v=xl(...f.map(k=>k.left)),_=f.filter(k=>g?k.left===v:k.right===y),w=_[0].top,E=_[_.length-1].bottom,x=v,S=y,C=S-x,A=E-w;return{top:w,bottom:E,left:x,right:S,width:C,height:A,x,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function rVe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yf(n),a=Zx(n),u=Mb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=wm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const iVe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await rVe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},sVe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=wm(e,t),l={x:n,y:r},c=await rG(t,u),f=Mb(Yf(i)),d=ZW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=t7(v,h,_)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=t7(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},oVe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=wm(e,t),c={x:n,y:r},f=Mb(i),d=ZW(f);let h=c[d],p=c[f];const m=wm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",w=s.reference[d]-s.floating[_]+g.mainAxis,E=s.reference[d]+s.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const _=d==="y"?"width":"height",w=["top","left"].includes(Yf(i)),E=s.reference[f]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),x=s.reference[f]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>x&&(p=x)}return{[d]:h,[f]:p}}}},aVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=wm(e,t),u=await rG(t,a),l=Yf(n),c=Zx(n),f=Mb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=xl(h-u[p],g),_=xl(d-u[m],y),w=!t.middlewareData.shift;let E=v,x=_;if(f?x=c||w?xl(_,y):y:E=c||w?xl(v,g):g,w&&!c){const C=la(u.left,0),A=la(u.right,0),k=la(u.top,0),N=la(u.bottom,0);f?x=d-2*(C!==0||A!==0?C+A:la(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:la(u.top,u.bottom))}await o({...t,availableWidth:x,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Nbe(e){const t=Pc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ml(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=YO(n)!==s||YO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function iG(e){return Si(e)?e:e.contextElement}function Xw(e){const t=iG(e);if(!Ml(t))return U0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Nbe(t);let o=(s?YO(n.width):n.width)/r,a=(s?YO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const uVe=U0(0);function Pbe(e){const t=zu(e);return!JW()||!t.visualViewport?uVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==zu(e)?!1:t}function Vv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=iG(e);let o=U0(1);t&&(r?Si(r)&&(o=Xw(r)):o=Xw(e));const a=lVe(s,n,r)?Pbe(s):U0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=zu(s),h=r&&Si(r)?zu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Xw(m),y=m.getBoundingClientRect(),v=Pc(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=w,p=zu(m),m=p.frameElement}}return ME({width:c,height:f,x:u,y:l})}const cVe=[":popover-open",":modal"];function sG(e){return cVe.some(t=>{try{return e.matches(t)}catch{return!1}})}function fVe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=qm(r),a=t?sG(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=U0(1);const c=U0(0),f=Ml(r);if((f||!f&&!s)&&((Jx(r)!=="body"||fk(o))&&(u=RL(r)),Ml(r))){const d=Vv(r);l=Xw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function dVe(e){return Array.from(e.getClientRects())}function Dbe(e){return Vv(qm(e)).left+RL(e).scrollLeft}function hVe(e){const t=qm(e),n=RL(e),r=e.ownerDocument.body,i=la(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=la(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Dbe(e);const a=-n.scrollTop;return Pc(r).direction==="rtl"&&(o+=la(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function pVe(e,t){const n=zu(e),r=qm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=JW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function mVe(e,t){const n=Vv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ml(e)?Xw(e):U0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Aoe(e,t,n){let r;if(t==="viewport")r=pVe(e,n);else if(t==="document")r=hVe(qm(e));else if(Si(t))r=mVe(t,n);else{const i=Pbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return ME(r)}function Obe(e,t){const n=_m(e);return n===t||!Si(n)||B0(n)?!1:Pc(n).position==="fixed"||Obe(n,t)}function gVe(e,t){const n=t.get(e);if(n)return n;let r=im(e,[],!1).filter(a=>Si(a)&&Jx(a)!=="body"),i=null;const s=Pc(e).position==="fixed";let o=s?_m(e):e;for(;Si(o)&&!B0(o);){const a=Pc(o),u=QW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||fk(o)&&!u&&Obe(e,o))?r=r.filter(c=>c!==o):i=a,o=_m(o)}return t.set(e,r),r}function yVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?sG(t)?[]:gVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Aoe(t,c,i);return l.top=la(f.top,l.top),l.right=xl(f.right,l.right),l.bottom=xl(f.bottom,l.bottom),l.left=la(f.left,l.left),l},Aoe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function vVe(e){const{width:t,height:n}=Nbe(e);return{width:t,height:n}}function bVe(e,t,n){const r=Ml(t),i=qm(t),s=n==="fixed",o=Vv(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=U0(0);if(r||!r&&!s)if((Jx(t)!=="body"||fk(i))&&(a=RL(t)),r){const f=Vv(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Dbe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Vj(e){return Pc(e).position==="static"}function Ioe(e,t){return!Ml(e)||Pc(e).position==="fixed"?null:t?t(e):e.offsetParent}function $be(e,t){const n=zu(e);if(sG(e))return n;if(!Ml(e)){let i=_m(e);for(;i&&!B0(i);){if(Si(i)&&!Vj(i))return i;i=_m(i)}return n}let r=Ioe(e,t);for(;r&&$ze(r)&&Vj(r);)r=Ioe(r,t);return r&&B0(r)&&Vj(r)&&!QW(r)?n:r||Mze(e)||n}const _Ve=async function(e){const t=this.getOffsetParent||$be,n=this.getDimensions,r=await n(e.floating);return{reference:bVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wVe(e){return Pc(e).direction==="rtl"}const EVe={convertOffsetParentRelativeRectToViewportRelativeRect:fVe,getDocumentElement:qm,getClippingRect:yVe,getOffsetParent:$be,getElementRects:_Ve,getClientRects:dVe,getDimensions:vVe,getScale:Xw,isElement:Si,isRTL:wVe};function xVe(e,t){let n=null,r;const i=qm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=NN(c),p=NN(i.clientWidth-(l+f)),m=NN(i.clientHeight-(c+d)),g=NN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:la(0,xl(1,u))||1};let _=!0;function w(E){const x=E[0].intersectionRatio;if(x!==u){if(!_)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function SVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=iG(e),c=i||s?[...l?im(l):[],...im(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?xVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Vv(e):null;u&&g();function g(){const y=Vv(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const TVe=iVe,CVe=sVe,AVe=eVe,IVe=aVe,koe=Zze,kVe=nVe,RVe=oVe,NVe=(e,t,n)=>{const r=new Map,i={platform:EVe,...n},s={...i.platform,_c:r};return Jze(e,t,{...i,platform:s})};var hD=typeof document<"u"?I.useLayoutEffect:I.useEffect;function XO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!XO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!XO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Mbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Roe(e,t){const n=Mbe(e);return Math.round(t*n)/n}function Noe(e){const t=I.useRef(e);return hD(()=>{t.current=e}),t}function PVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);XO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==x.current&&(x.current=B,m(B))},[]),_=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,x=I.useRef(null),S=I.useRef(null),C=I.useRef(c),A=u!=null,k=Noe(u),N=Noe(i),O=I.useCallback(()=>{if(!x.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),NVe(x.current,S.current,B).then(U=>{const H={...U,isPositioned:!0};D.current&&!XO(C.current,H)&&(C.current=H,uk.flushSync(()=>{f(H)}))})},[d,t,n,N]);hD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=I.useRef(!1);hD(()=>(D.current=!0,()=>{D.current=!1}),[]),hD(()=>{if(w&&(x.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,A]);const $=I.useMemo(()=>({reference:x,floating:S,setReference:v,setFloating:_}),[v,_]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Roe(F.floating,c.x),H=Roe(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Mbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const DVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?koe({element:r.current,padding:i}).fn(n):{}:r?koe({element:r,padding:i}).fn(n):{}}}},Lbe=(e,t)=>({...TVe(e),options:[e,t]}),oG=(e,t)=>({...CVe(e),options:[e,t]}),Poe=(e,t)=>({...RVe(e),options:[e,t]}),r7=(e,t)=>({...AVe(e),options:[e,t]}),OVe=(e,t)=>({...IVe(e),options:[e,t]}),i7=(e,t)=>({...kVe(e),options:[e,t]}),Fbe=(e,t)=>({...DVe(e),options:[e,t]}),jbe={...vO},$Ve=jbe.useInsertionEffect,MVe=$Ve||(e=>e());function zg(e){const t=I.useRef(()=>{});return MVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var lh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Doe=!1,LVe=0;const Ooe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+LVe++;function FVe(){const[e,t]=I.useState(()=>Doe?Ooe():void 0);return lh(()=>{e==null&&t(Ooe())},[]),I.useEffect(()=>{Doe=!0},[]),e}const jVe=jbe.useId,Bbe=jVe||FVe;function BVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const UVe=I.createContext(null),zVe=I.createContext(null),aG=()=>{var e;return((e=I.useContext(UVe))==null?void 0:e.id)||null},uG=()=>I.useContext(zVe);function lG(e){return"data-floating-ui-"+e}function $oe(e){const t=I.useRef(e);return lh(()=>{t.current=e}),t}const Moe=lG("safe-polygon");function pD(e,t,n){return n&&!e7(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function VVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=uG(),m=aG(),g=$oe(c),y=$oe(l),v=I.useRef(),_=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),x=I.useRef(!0),S=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function D($){let{open:F}=$;F||(clearTimeout(_.current),clearTimeout(E.current),x.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){A()&&r(!1,F,"hover")}const $=sv(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const k=I.useCallback(function(D,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=pD(y.current,"close",v.current);M&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,F),M)):$&&(clearTimeout(_.current),r(!1,D,F))},[y,r]),N=zg(()=>{C.current(),w.current=void 0}),O=zg(()=>{if(S.current){const D=sv(a).body;D.style.pointerEvents="",D.removeAttribute(Moe),S.current=!1}});return I.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(_.current),x.current=!1,f&&!e7(v.current)||d>0&&!pD(y.current,"open"))return;const U=pD(y.current,"open",v.current);U?_.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(D())return;C.current();const U=sv(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),C.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!RA(a,B.relatedTarget):!0)&&k(B)}function M(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B)}})(B))}if(Si(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,O,r,n,p,y,g,i]),lh(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const F=sv(a).body;if(F.setAttribute(Moe,""),F.style.pointerEvents="none",S.current=!0,Si(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),lh(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),I.useEffect(()=>()=>{N(),clearTimeout(_.current),clearTimeout(E.current),O()},[u,o,N,O]),I.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function F(){x.current||r(!0,$.nativeEvent,"hover")}f&&!e7(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(_.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const s7=()=>{},Ube=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:s7,setState:s7,isInstantPhase:!1}),zbe=()=>I.useContext(Ube);function HVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return lh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Ube.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function qVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=zbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return lh(()=>{u&&(f({delay:{open:1,close:pD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),lh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),lh(()=>{l===s7||!n||l(o)},[n,l,o]),a}function Hj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const WVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},GVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Loe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function YVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=uG(),v=zg(typeof c=="function"?c:()=>!1),_=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:x,outsidePress:S}=Loe(m),{escapeKey:C,outsidePress:A}=Loe(g),k=zg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?Hj(y.nodesRef.current,M):[];if(!x&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,Uze($)?$.nativeEvent:$,"escape-key")}),N=zg($=>{var F;const M=()=>{var B;k($),(B=nw($))==null||B.removeEventListener("keydown",M)};(F=nw($))==null||F.addEventListener("keydown",M)}),O=zg($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof _=="function"&&!_($))return;const U=nw($),H="["+lG("inert")+"]",P=sv(o).querySelectorAll(H);let z=Si(U)?U:null;for(;z&&!B0(z);){const G=_m(z);if(B0(G)||!Si(G))break;z=G}if(P.length&&Si(U)&&!zze(U)&&!RA(U,o)&&Array.from(P).every(G=>!RA(z,G)))return;if(Ml(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&$.offsetX>U.clientWidth;if(ne&&Pc(U).direction==="rtl"&&(ce=$.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&Hj(y.nodesRef.current,W).some(G=>{var ne;return zj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(zj($,o)||zj($,s)||j)return;const q=y?Hj(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=zg($=>{var F;const M=()=>{var B;O($),(B=nw($))==null||B.removeEventListener(f,M)};(F=nw($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=x,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=sv(o);l&&F.addEventListener("keydown",C?N:k,C),_&&F.addEventListener(f,A?D:O,A);let M=[];return p&&(Si(s)&&(M=im(s)),Si(o)&&(M=M.concat(im(o))),!Si(i)&&i&&i.contextElement&&(M=M.concat(im(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?N:k,C),_&&F.removeEventListener(f,A?D:O,A),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,_,f,n,r,p,u,x,S,k,C,N,O,A,D]),I.useEffect(()=>{w.current=!1},[_,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[WVe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[GVe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function KVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Bbe(),s=I.useRef({}),[o]=I.useState(()=>BVe()),a=aG()!=null,[u,l]=I.useState(r.reference),c=zg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function cG(e){e===void 0&&(e={});const{nodeId:t}=e,n=KVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=uG();lh(()=>{c&&(f.current=c)},[c]);const h=PVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(_=>{const w=Si(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(_=>{(Si(_)||_===null)&&(f.current=_,o(_)),(Si(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Si(_))&&h.refs.setReference(_)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return lh(()=>{r.dataRef.current.floatingContext=v;const _=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);_&&(_.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function XVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=zu(o);function h(){!n&&Ml(o)&&o===Soe(sv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){Lze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=nw(d.nativeEvent);if(u&&Si(h))try{if(Fze()&&jze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Hze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Si(h)&&h.hasAttribute(lG("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Soe(o?o.ownerDocument:document);!h&&g===o||RA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||RA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Foe="active",joe="selected";function qj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Foe]:o,[joe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Foe,joe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function QVe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>qj(s,e,"reference"),t),r=I.useCallback(s=>qj(s,e,"floating"),t),i=I.useCallback(s=>qj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const JVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ZVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=JVe.get(o))!=null?n:o,u=Bbe(),c=aG()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Vbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Boe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Uoe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const eHe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function tHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Se(t),height:Se(t),transform:"rotate(45deg)",position:"absolute",[eHe[u]]:Se(r)},f=Se(-t/2);return u==="left"?{...c,...Boe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Boe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Uoe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Uoe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const fG=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=qh();return s?b.jsx("div",{...l,ref:c,style:{...u,...tHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});fG.displayName="@mantine/core/FloatingArrow";const[nHe,Hbe]=fo("Popover component was not found in the tree");function NL({children:e,active:t=!0,refProp:n="ref"}){const r=UUe(t),i=hs(r,e==null?void 0:e.ref);return ky(e)?I.cloneElement(e,{[n]:i}):e}function qbe(e){return b.jsx(XW,{tabIndex:-1,"data-autofocus":!0,...e})}NL.displayName="@mantine/core/FocusTrap";qbe.displayName="@mantine/core/FocusTrapInitialFocus";NL.InitialFocus=qbe;function rHe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const iHe={},Wbe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",iHe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Pb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:rHe(i),BW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:uk.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});Wbe.displayName="@mantine/core/Portal";function eS({withinPortal:e=!0,children:t,...n}){return e?b.jsx(Wbe,{...n,children:t}):b.jsx(b.Fragment,{children:t})}eS.displayName="@mantine/core/OptionalPortal";const TT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Se(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),PN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...TT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...TT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...TT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...TT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...TT("top"),common:{transformOrigin:"top right"}}},zoe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function sHe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in PN?{transitionProperty:PN[e].transitionProperty,...i,...PN[e].common,...PN[e][zoe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[zoe[t]]}}function oHe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ps(),l=TL(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const _=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof _=="function"&&_(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{w2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof _=="function"&&_(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return Th(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Wm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=oHe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?b.jsx(b.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:b.jsx(b.Fragment,{children:s(sHe({transition:t,duration:f,state:d,timingFunction:h}))})}Wm.displayName="@mantine/core/Transition";var Gbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const aHe={},dG=Me((e,t)=>{var g,y,v,_;const n=xe("PopoverDropdown",aHe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Hbe(),h=Kve({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=hs(t,d.floating);return d.disabled?null:b.jsx(eS,{...d.portalProps,withinPortal:d.withinPortal,children:b.jsx(Wm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:w=>b.jsx(NL,{active:d.trapFocus,children:b.jsxs(pe,{...p,...f,variant:u,ref:m,onKeyDownCapture:IUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Se(d.width)},i]}),children:[o,b.jsx(fG,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});dG.classes=Gbe;dG.displayName="@mantine/core/PopoverDropdown";const uHe={refProp:"ref",popupType:"dialog"},Ybe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",uHe,e);if(!ky(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Hbe(),u=hs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Xi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Ybe.displayName="@mantine/core/PopoverTarget";function Kbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return SVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Th(()=>{t.update()},r),Th(()=>{s(o=>o+1)},[e])}function lHe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function cHe(e,t){const n=lHe(e.middlewares),r=[Lbe(e.offset)];return n.shift&&r.push(oG(typeof n.shift=="boolean"?{limiter:Poe(),padding:5}:{limiter:Poe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?r7():r7(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?i7():i7(n.inline)),r.push(Fbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(OVe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function fHe(e){const[t,n]=Ss({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=cG({strategy:e.strategy,placement:e.position,middleware:cHe(e,()=>s)});return Kbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Th(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Th(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const dHe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Jl("popover"),__staticSelector:"Popover",width:"max-content"},hHe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ur(t),"--popover-shadow":FW(n)}});function Po(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",dHe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:w,portalProps:E,closeOnEscape:x,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:k,onChange:N,zIndex:O,radius:D,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:P,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:Gbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:hHe}),ce=I.useRef(null),[de,he]=I.useState(null),[ve,Ie]=I.useState(null),{dir:be}=qh(),Ke=Ta(F),Ue=fHe({middlewares:c,width:l,position:Vbe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:A,strategy:q});NUe(()=>_&&Ue.onClose(),S,[de,ve]);const yt=I.useCallback(ge=>{he(ge),Ue.floating.refs.setReference(ge)},[Ue.floating.refs.setReference]),it=I.useCallback(ge=>{Ie(ge),Ue.floating.refs.setFloating(ge)},[Ue.floating.refs.setFloating]);return b.jsx(nHe,{value:{returnFocus:P,disabled:H,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:D,shadow:$,closeOnEscape:x,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Po.Target=Ybe;Po.Dropdown=dG;Po.displayName="@mantine/core/Popover";Po.extend=e=>e;var Rf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const pHe=I.forwardRef(({className:e,...t},n)=>b.jsxs(pe,{component:"span",className:Xi(Rf.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Rf.bar}),b.jsx("span",{className:Rf.bar}),b.jsx("span",{className:Rf.bar})]})),mHe=I.forwardRef(({className:e,...t},n)=>b.jsxs(pe,{component:"span",className:Xi(Rf.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Rf.dot}),b.jsx("span",{className:Rf.dot}),b.jsx("span",{className:Rf.dot})]})),gHe=I.forwardRef(({className:e,...t},n)=>b.jsx(pe,{component:"span",className:Xi(Rf.ovalLoader,e),...t,ref:n})),Xbe={bars:pHe,oval:gHe,dots:mHe},yHe={loaders:Xbe,type:"oval"},vHe=(e,{size:t,color:n})=>({root:{"--loader-size":tn(t,"loader-size"),"--loader-color":n?$r(n,e):void 0}}),od=Me((e,t)=>{const n=xe("Loader",yHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:Rf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:vHe});return p?b.jsx(pe,{...g("root"),ref:t,...m,children:p}):b.jsx(pe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});od.defaultLoaders=Xbe;od.classes=Rf;od.displayName="@mantine/core/Loader";var PL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Voe={orientation:"horizontal"},bHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Se(t)}}),hG=Me((e,t)=>{const n=xe("ActionIconGroup",Voe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",Voe,e),p=dt({name:"ActionIconGroup",props:n,classes:PL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:bHe,rootSelector:"group"});return b.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});hG.classes=PL;hG.displayName="@mantine/core/ActionIconGroup";const _He={},wHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":tn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ur(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Lb=Us((e,t)=>{const n=xe("ActionIcon",_He,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:w,mod:E,...x}=n,S=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:PL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:wHe});return b.jsxs(xs,{...S("root",{active:!v&&!l&&!_}),...x,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||_},E],children:[b.jsx(Wm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>b.jsx(pe,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:b.jsx(od,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(pe,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});Lb.classes=PL;Lb.displayName="@mantine/core/ActionIcon";Lb.Group=hG;const Qbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Qbe.displayName="@mantine/core/CloseIcon";var Jbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const EHe={variant:"subtle"},xHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ur(n),"--cb-icon-size":Se(r)}}),Gm=Us((e,t)=>{const n=xe("CloseButton",EHe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:Jbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:xHe});return b.jsxs(xs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||b.jsx(Qbe,{}),i]})});Gm.classes=Jbe;Gm.displayName="@mantine/core/CloseButton";function SHe(e){return I.Children.toArray(e).filter(Boolean)}var Zbe={root:"m_4081bf90"};const THe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},CHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":as(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),ls=Me((e,t)=>{const n=xe("Group",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,w=SHe(u),E=w.length,x=as(l??"md"),C={childWidth:`calc(${100/E}% - (${x} - ${x} / ${E}))`},A=dt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Zbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:CHe});return b.jsx(pe,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:w})});ls.classes=Zbe;ls.displayName="@mantine/core/Group";var e_e={root:"m_9814e45f"};const AHe={zIndex:Jl("modal")},IHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Nd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Se(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ur(s),"--overlay-z-index":o==null?void 0:o.toString()}}),NA=Us((e,t)=>{const n=xe("Overlay",AHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,w=dt({name:"Overlay",props:n,classes:e_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IHe});return b.jsx(pe,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],..._,children:f})});NA.classes=e_e;NA.displayName="@mantine/core/Overlay";const[kHe,Ym]=fo("ModalBase component was not found in tree");function RHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=TL()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function NHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ta(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=RHe({opened:n,transitionDuration:d});return Zve("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Kve({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const t_e=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},w)=>{const{_id:E,titleMounted:x,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:k}=NHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return b.jsx(eS,{...c,withinPortal:l,children:b.jsx(kHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:x,bodyMounted:S,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:b.jsx(xL,{enabled:C&&f,...v,children:b.jsx(pe,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||Jl("modal")).toString(),"--mb-shadow":FW(p),"--mb-padding":as(m)},children:d})})})})});function PHe(){const e=Ym();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var LE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const pG=I.forwardRef(({className:e,...t},n)=>{const r=PHe(),i=Ym();return b.jsx(pe,{ref:n,...t,id:r,className:Xi({[LE.body]:!i.unstyled},e)})});pG.displayName="@mantine/core/ModalBaseBody";const mG=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Ym();return b.jsx(Gm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Xi({[LE.close]:!i.unstyled},e),unstyled:i.unstyled})});mG.displayName="@mantine/core/ModalBaseCloseButton";const n_e=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Ym();return b.jsx(Wm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>b.jsx("div",{...n,className:Xi({[LE.inner]:!a.unstyled},n.className),children:b.jsx(NL,{active:a.opened&&a.trapFocus,children:b.jsx($b,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Xi({[LE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),gG=I.forwardRef(({className:e,...t},n)=>{const r=Ym();return b.jsx(pe,{component:"header",ref:n,className:Xi({[LE.header]:!r.unstyled},e),...t})});gG.displayName="@mantine/core/ModalBaseHeader";const DHe={duration:200,timingFunction:"ease",transition:"fade"};function OHe(e){const t=Ym();return{...DHe,...t.transitionProps,...e}}const yG=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Ym(),o=OHe(t);return b.jsx(Wm,{mounted:s.opened,...o,transition:"fade",children:a=>b.jsx(NA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});yG.displayName="@mantine/core/ModalBaseOverlay";function $He(){const e=Ym();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const vG=I.forwardRef(({className:e,...t},n)=>{const r=$He(),i=Ym();return b.jsx(pe,{component:"h2",ref:n,className:Xi({[LE.title]:!i.unstyled},e),...t,id:r})});vG.displayName="@mantine/core/ModalBaseTitle";function r_e({children:e}){return b.jsx(b.Fragment,{children:e})}const[MHe,tS]=Xx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Hc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Hoe={},LHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Se(2)})`}}),DL=Me((e,t)=>{const n=xe("InputDescription",Hoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Hoe,n),p=tS(),m=dt({name:["InputWrapper",c],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:LHe}),g=f&&(p==null?void 0:p.getStyles)||m;return b.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});DL.classes=Hc;DL.displayName="@mantine/core/InputDescription";const FHe={},jHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Se(2)})`}}),OL=Me((e,t)=>{const n=xe("InputError",FHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:jHe}),m=tS(),g=f&&(m==null?void 0:m.getStyles)||p;return b.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});OL.classes=Hc;OL.displayName="@mantine/core/InputError";const qoe={labelElement:"label"},BHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0}}),$L=Me((e,t)=>{const n=xe("InputLabel",qoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",qoe,n),_=dt({name:["InputWrapper",m],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:BHe}),w=tS(),E=(w==null?void 0:w.getStyles)||_;return b.jsxs(pe,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:x=>{h==null||h(x),!x.defaultPrevented&&x.detail>1&&x.preventDefault()},...v,children:[p,f&&b.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});$L.classes=Hc;$L.displayName="@mantine/core/InputLabel";const Woe={},bG=Me((e,t)=>{const n=xe("InputPlaceholder",Woe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Woe,n),p=dt({name:["InputPlaceholder",l],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return b.jsx(pe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});bG.classes=Hc;bG.displayName="@mantine/core/InputPlaceholder";function UHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const zHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},VHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Se(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Se(2)})`}}),_G=Me((e,t)=>{const n=xe("InputWrapper",zHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:w,children:E,withAsterisk:x,id:S,required:C,__stylesApiProps:A,mod:k,...N}=n,O=dt({name:["InputWrapper",f],props:A||n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VHe}),D={size:l,variant:c,__staticSelector:f},$=Ta(S),F=typeof x=="boolean"?x:C,M=(_==null?void 0:_.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",P=!!g,z=`${H?M:""} ${P?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&b.jsx($L,{labelElement:w,id:j,htmlFor:U,required:F,...D,...y,children:p},"label"),G=P&&b.jsx(DL,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=b.jsx(I.Fragment,{children:d(E)},"input"),ce=H&&I.createElement(OL,{..._,...D,size:(_==null?void 0:_.size)||D.size,key:"error",id:(_==null?void 0:_.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return b.jsx(MHe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...UHe(h,{hasDescription:P,hasError:H})},children:b.jsx(pe,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...N,children:de})})});_G.classes=Hc;_G.displayName="@mantine/core/InputWrapper";const HHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},qHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tn(t.size,"input-height"),"--input-fz":uo(t.size),"--input-radius":t.radius===void 0?void 0:Ur(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Se(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Se(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mi=Us((e,t)=>{const n=xe("Input",HHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:x,variant:S,vars:C,pointer:A,multiline:k,radius:N,id:O,withAria:D,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=Ob(B),P=tS(),z={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=dt({name:["Input",l],props:c||n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:qHe}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return b.jsxs(pe,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&b.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(pe,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&b.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});mi.classes=Hc;mi.Wrapper=_G;mi.Label=$L;mi.Error=OL;mi.Description=DL;mi.Placeholder=bG;mi.displayName="@mantine/core/Input";function i_e(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,vars:A,mod:k,...N}=r,{styleProps:O,rest:D}=Ob(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:_,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,id:v,mod:k,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:_,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const WHe={__staticSelector:"InputBase",withAria:!0},qc=Us((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=i_e("InputBase",WHe,e);return b.jsx(mi.Wrapper,{...r,children:b.jsx(mi,{...n,...i,ref:t})})});qc.classes={...mi.classes,...mi.Wrapper.classes};qc.displayName="@mantine/core/InputBase";const GHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var s_e={root:"m_8bffd616"};const YHe={},Nt=Us((e,t)=>{const n=xe("Flex",YHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:s_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ps(),_=ck(),w=lbe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:GHe});return b.jsxs(b.Fragment,{children:[w.hasResponsiveStyles&&b.jsx(Db,{selector:`.${_}`,styles:w.styles,media:w.media}),b.jsx(pe,{ref:t,...y("root",{className:_,style:Iy(w.inlineStyles)}),...g})]})});Nt.classes=s_e;Nt.displayName="@mantine/core/Flex";function KHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function XHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{KHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),JUe(()=>{nbe()!=="test"&&o(!0)},20,{autoInvoke:!0}),ZUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var o_e={root:"m_96b553a6"};const QHe={},JHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),wG=Me((e,t)=>{const n=xe("FloatingIndicator",QHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:o_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JHe}),g=I.useRef(null),{initialized:y,hidden:v}=XHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),_=hs(t,g);return!l||!c?null:b.jsx(pe,{ref:_,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});wG.displayName="@mantine/core/FloatingIndicator";wG.classes=o_e;const[ZHe,EG]=fo("Accordion component was not found in the tree");function FE({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Se(t),height:Se(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}FE.displayName="@mantine/core/AccordionChevron";const[eqe,a_e]=fo("Accordion.Item component was not found in the tree");var dk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const tqe={},xG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",tqe,e),{value:m}=a_e(),g=EG(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,w=b.jsxs(xs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:LW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(pe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&b.jsx(pe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});xG.displayName="@mantine/core/AccordionControl";xG.classes=dk;const nqe={},SG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",nqe,e),c=EG();return b.jsx(eqe,{value:{value:a},children:b.jsx(pe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});SG.displayName="@mantine/core/AccordionItem";SG.classes=dk;const rqe={},TG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",rqe,e),{value:l}=a_e(),c=EG();return b.jsx(IL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});TG.displayName="@mantine/core/AccordionPanel";TG.classes=dk;const iqe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(FE,{})},sqe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Se(n),"--accordion-radius":r===void 0?void 0:Ur(r)}});function wu(e){const t=xe("Accordion",iqe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:w,variant:E,radius:x,...S}=t,C=Ta(h),[A,k]=Ss({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const F=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;k(F)},D=dt({name:"Accordion",classes:dk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:sqe});return b.jsx(ZHe,{value:{isItemActive:N,onChange:O,getControlId:HO(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:HO(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:D,variant:E,unstyled:o},children:b.jsx(pe,{...D("root"),id:C,...S,variant:E,"data-accordion":!0,children:u})})}const oqe=e=>e;wu.extend=oqe;wu.classes=dk;wu.displayName="@mantine/core/Accordion";wu.Item=SG;wu.Panel=TG;wu.Control=xG;wu.Chevron=FE;var u_e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const aqe={},uqe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ur(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},nS=Me((e,t)=>{const n=xe("Alert",aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...w}=n,E=dt({name:"Alert",classes:u_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uqe}),x=Ta(h),S=f&&`${x}-title`||void 0,C=`${x}-body`;return b.jsx(pe,{id:x,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":S,children:b.jsxs("div",{...E("wrapper"),children:[p&&b.jsx("div",{...E("icon"),children:p}),b.jsxs("div",{...E("body"),children:[f&&b.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:S,...E("label"),children:f})}),d&&b.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&b.jsx(Gm,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});nS.classes=u_e;nS.displayName="@mantine/core/Alert";var l_e={root:"m_b6d8b162"};function lqe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const cqe={inherit:!1},fqe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":uo(i),"--text-lh":Yve(i),"--text-gradient":t==="gradient"?XU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$r(s,e):void 0}}),Xe=Us((e,t)=>{const n=xe("Text",cqe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,w=dt({name:["Text",l],props:n,classes:l_e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:fqe});return b.jsx(pe,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":lqe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,..._})});Xe.classes=l_e;Xe.displayName="@mantine/core/Text";var c_e={root:"m_849cf0da"};const dqe={underline:"hover"},Fb=Us((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",dqe,e);return b.jsx(Xe,{component:"a",ref:t,className:Xi({[c_e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Fb.classes=c_e;Fb.displayName="@mantine/core/Anchor";const[hqe,rS]=fo("AppShell was not found in tree");var Py={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const pqe={},CG=Me((e,t)=>{const n=xe("AppShellAside",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=rS();return h.disabled?null:b.jsx(pe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});CG.classes=Py;CG.displayName="@mantine/core/AppShellAside";const mqe={},AG=Me((e,t)=>{var p;const n=xe("AppShellFooter",mqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=rS();return h.disabled?null:b.jsx(pe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Xi({[xL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});AG.classes=Py;AG.displayName="@mantine/core/AppShellFooter";const gqe={},IG=Me((e,t)=>{var p;const n=xe("AppShellHeader",gqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=rS();return h.disabled?null:b.jsx(pe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Xi({[xL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});IG.classes=Py;IG.displayName="@mantine/core/AppShellHeader";const yqe={},kG=Me((e,t)=>{const n=xe("AppShellMain",yqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return b.jsx(pe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});kG.classes=Py;kG.displayName="@mantine/core/AppShellMain";function hk(e){return typeof e=="object"?e.base:e}function pk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function mk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function vqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),pk(s)){const f=Se(hk(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(mk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Se(s.base),e["--app-shell-aside-offset"]=Se(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Se(s[f]),t[f]["--app-shell-aside-offset"]=Se(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=jW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function bqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(pk(r)){const o=Se(hk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}mk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Se(r.base),s&&(e["--app-shell-footer-offset"]=Se(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Se(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function _qe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(pk(r)){const o=Se(hk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}mk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Se(r.base),s&&(e["--app-shell-header-offset"]=Se(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Se(r[o]),s&&(t[o]["--app-shell-header-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function wqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),pk(s)){const f=Se(hk(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(mk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Se(s.base),e["--app-shell-navbar-offset"]=Se(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Se(s[f]),t[f]["--app-shell-navbar-offset"]=Se(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=jW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Wj(e){return Number(e)===0?"0px":as(e)}function Eqe({padding:e,baseStyles:t,minMediaStyles:n}){pk(e)&&(t["--app-shell-padding"]=Wj(hk(e))),mk(e)&&(e.base&&(t["--app-shell-padding"]=Wj(e.base)),Xr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Wj(e[r]))}))}function xqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};wqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),vqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),_qe({baseStyles:u,minMediaStyles:o,header:t}),bqe({baseStyles:u,minMediaStyles:o,footer:n}),Eqe({baseStyles:u,minMediaStyles:o,padding:i});const l=IA(Xr(o),s).map(d=>({query:`(min-width: ${VO(d.px)})`,styles:o[d.value]})),c=IA(Xr(a),s).map(d=>({query:`(max-width: ${VO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Sqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ps(),o=Ry(),{media:a,baseStyles:u}=xqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return b.jsx(Db,{media:a,styles:u,selector:o.cssVariablesSelector})}const Tqe={},RG=Me((e,t)=>{const n=xe("AppShellNavbar",Tqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=rS();return h.disabled?null:b.jsx(pe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});RG.classes=Py;RG.displayName="@mantine/core/AppShellNavbar";const Cqe={},NG=Us((e,t)=>{const n=xe("AppShellSection",Cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=rS();return b.jsx(pe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});NG.classes=Py;NG.displayName="@mantine/core/AppShellSection";function Aqe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return Zve("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Pb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Iqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Jl("app")},kqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),pi=Me((e,t)=>{const n=xe("AppShell",Iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:w,mod:E,...x}=n,S=dt({name:"AppShell",classes:Py,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kqe}),C=Aqe({disabled:y,transitionDuration:d});return b.jsxs(hqe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[b.jsx(Sqe,{navbar:l,header:p,aside:v,footer:_,padding:f}),b.jsx(pe,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},E],...x})]})});pi.classes=Py;pi.displayName="@mantine/core/AppShell";pi.Navbar=RG;pi.Header=IG;pi.Main=kG;pi.Aside=CG;pi.Footer=AG;pi.Section=NG;function f_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>f_e(t))}:e}function d_e(e){return e?e.map(t=>f_e(t)):[]}function PG(e){return e.reduce((t,n)=>"group"in n?{...t,...PG(n.items)}:(t[n.value]=n,t),{})}var Xu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Rqe={error:null},Nqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":tn(t,"combobox-chevron-size")}}),DG=Me((e,t)=>{const n=xe("ComboboxChevron",Rqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:Xu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Nqe,rootSelector:"chevron"});return b.jsx(pe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});DG.classes=Xu;DG.displayName="@mantine/core/ComboboxChevron";const[Pqe,Wc]=fo("Combobox component was not found in tree"),h_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>b.jsx(Gm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));h_e.displayName="@mantine/core/ComboboxClearButton";const Dqe={},OG=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",Dqe,e),u=Wc();return b.jsx(Po.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});OG.classes=Xu;OG.displayName="@mantine/core/ComboboxDropdown";const Oqe={refProp:"ref"},p_e=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",Oqe,e);if(Wc(),!ky(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx(Po.Target,{ref:t,refProp:r,children:n})});p_e.displayName="@mantine/core/ComboboxDropdownTarget";const $qe={},$G=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",$qe,e),u=Wc();return b.jsx(pe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});$G.classes=Xu;$G.displayName="@mantine/core/ComboboxEmpty";function MG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Wc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Mqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},m_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",Mqe,e);if(!ky(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Wc(),f=MG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:hs(t,c.store.targetRef,n==null?void 0:n.ref)})});m_e.displayName="@mantine/core/ComboboxEventsTarget";const Lqe={},LG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",Lqe,e),u=Wc();return b.jsx(pe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});LG.classes=Xu;LG.displayName="@mantine/core/ComboboxFooter";const Fqe={},FG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",Fqe,e),c=Wc();return b.jsxs(pe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});FG.classes=Xu;FG.displayName="@mantine/core/ComboboxGroup";const jqe={},jG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",jqe,e),u=Wc();return b.jsx(pe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});jG.classes=Xu;jG.displayName="@mantine/core/ComboboxHeader";function g_e({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}g_e.displayName="@mantine/core/ComboboxHiddenInput";const Bqe={},BG=Me((e,t)=>{const n=xe("ComboboxOption",Bqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Wc(),v=I.useId(),_=l||v;return b.jsx(pe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});BG.classes=Xu;BG.displayName="@mantine/core/ComboboxOption";const Uqe={},UG=Me((e,t)=>{const n=xe("ComboboxOptions",Uqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Wc(),d=Ta(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),b.jsx(pe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});UG.classes=Xu;UG.displayName="@mantine/core/ComboboxOptions";const zqe={withAriaAttributes:!0,withKeyboardNavigation:!0},zG=Me((e,t)=>{const n=xe("ComboboxSearch",zqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Wc(),h=d.getStyles("search"),p=MG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return b.jsx(mi,{ref:hs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});zG.classes=Xu;zG.displayName="@mantine/core/ComboboxSearch";const Vqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},y_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",Vqe,e);if(!ky(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Wc(),f=MG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return b.jsx(Po.Target,{ref:hs(t,c.store.targetRef),children:d})});y_e.displayName="@mantine/core/ComboboxTarget";function Hqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Wqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function VG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ss({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),_=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(_(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,_]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),x=I.useCallback(()=>w(qqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(Hqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(Wqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((P=U[H])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,_()},[_]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=I.useCallback(M=>{l.current=M},[]),D=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:x,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const Gqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Yqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Se(n),"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",Gqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=VG(),y=o||g,v=dt({name:h||"Combobox",classes:Xu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Yqe}),_=()=>{l==null||l(),y.closeDropdown()};return b.jsx(Pqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:b.jsx(Po,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const Kqe=e=>e;Kn.extend=Kqe;Kn.classes=Xu;Kn.displayName="@mantine/core/Combobox";Kn.Target=y_e;Kn.Dropdown=OG;Kn.Options=UG;Kn.Option=BG;Kn.Search=zG;Kn.Empty=$G;Kn.Chevron=DG;Kn.Footer=LG;Kn.Header=jG;Kn.EventsTarget=m_e;Kn.DropdownTarget=p_e;Kn.Group=FG;Kn.ClearButton=h_e;Kn.HiddenInput=g_e;var v_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const b_e=v_e,ML=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...w},E)=>{const x=dt({name:e,props:t,className:n,style:y,classes:v_e,classNames:r,styles:i,unstyled:s});return b.jsx(pe,{...x("root"),ref:E,__vars:{"--label-fz":uo(d),"--label-lh":tn(d,"label-lh")},mod:[{"label-position":h},_],variant:g,size:d,...w,children:b.jsxs(pe,{component:p,htmlFor:p==="label"?l:void 0,...x("body"),children:[o,b.jsxs("div",{...x("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(pe,{component:m,htmlFor:m==="label"?l:void 0,...x("label"),"data-disabled":c||void 0,children:a}),u&&b.jsx(mi.Description,{size:d,__inheritStyles:!1,...x("description"),children:u}),f&&typeof f!="boolean"&&b.jsx(mi.Error,{size:d,__inheritStyles:!1,...x("error"),children:f})]})]})})});ML.displayName="@mantine/core/InlineInput";const __e=I.createContext(null),Xqe=__e.Provider,w_e=()=>I.useContext(__e),[Qqe,Jqe]=Xx();var E_e={card:"m_26775b0a"};const Zqe={withBorder:!0},eWe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),HG=Me((e,t)=>{const n=xe("CheckboxCard",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:E_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe,rootSelector:"card"}),g=w_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return b.jsx(Qqe,{value:{checked:y},children:b.jsx(xs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});HG.displayName="@mantine/core/CheckboxCard";HG.classes=E_e;function qG({children:e,role:t}){const n=tS();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const tWe={},WG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",tWe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(Xqe,{value:{value:c,onChange:d,size:s},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(qG,{role:"group",children:a})})})});WG.classes=mi.Wrapper.classes;WG.displayName="@mantine/core/CheckboxGroup";function x_e({size:e,style:t,...n}){const r=e!==void 0?{width:Se(e),height:Se(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function S_e({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(x_e,{...t})}var T_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const nWe={icon:S_e},rWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Qx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},GG=Me((e,t)=>{const n=xe("CheckboxIndicator",nWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,w=l,E=dt({name:"CheckboxIndicator",classes:T_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rWe,rootSelector:"indicator"}),x=Jqe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(x==null?void 0:x.checked)||!1;return b.jsx(pe,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],..._,children:b.jsx(w,{indeterminate:c,...E("icon")})})});GG.displayName="@mantine/core/CheckboxIndicator";GG.classes=T_e;var C_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const iWe={labelPosition:"right",icon:S_e},sWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Qx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},Sl=Me((e,t)=>{const n=xe("Checkbox",iWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:w,variant:E,indeterminate:x,icon:S,rootRef:C,iconColor:A,onChange:k,autoContrast:N,mod:O,...D}=n,$=w_e(),F=d||($==null?void 0:$.size),M=S,B=dt({name:"Checkbox",props:n,classes:C_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sWe}),{styleProps:U,rest:H}=Ob(D),P=Ta(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return b.jsx(ML,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:_,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...U,...p,children:b.jsxs(pe,{...B("inner"),mod:{"data-label-position":y},children:[b.jsx(pe,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:x},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),b.jsx(M,{indeterminate:x,...B("icon")})]})})});Sl.classes={...C_e,...b_e};Sl.displayName="@mantine/core/Checkbox";Sl.Group=WG;Sl.Indicator=GG;Sl.Card=HG;function jE(e){return"group"in e}function A_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;jE(o)&&i.push({group:o.group,items:A_e({options:o.items,search:t,limit:n-i.length})}),jE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function oWe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function I_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(jE(n))I_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function aWe(e,t){return Array.isArray(e)?e.includes(t):e===t}function k_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!jE(e)){const a=aWe(n,e.value),u=t&&a&&b.jsx(x_e,{className:Xu.optionsDropdownCheckIcon}),l=b.jsxs(b.Fragment,{children:[r==="left"&&u,b.jsx("span",{children:e.label}),r==="right"&&u]});return b.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Xi({[Xu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>b.jsx(k_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return b.jsx(Kn.Group,{label:e.group,children:o})}function R_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){I_e(e);const _=typeof i=="string"?(r||A_e)({options:e,search:u?i:"",limit:s??1/0}):e,w=oWe(_),E=_.map(x=>b.jsx(k_e,{data:x,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},jE(x)?x.group:x.value));return b.jsx(Kn.Dropdown,{hidden:t||n&&w,children:b.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(bm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&b.jsx(Kn.Empty,{children:d})]})})}var N_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const uWe={},lWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":tn(s,"badge-height"),"--badge-padding-x":tn(s,"badge-padding-x"),"--badge-fz":tn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ur(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$r(n,e):void 0}}},_0=Us((e,t)=>{const n=xe("Badge",uWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...w}=n,E=dt({name:"Badge",props:n,classes:N_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lWe});return b.jsxs(pe,{variant:m,mod:[{block:g,circle:v},_],...E("root",{variant:m}),ref:t,...w,children:[d&&b.jsx("span",{...E("section"),"data-position":"left",children:d}),b.jsx("span",{...E("label"),children:p}),h&&b.jsx("span",{...E("section"),"data-position":"right",children:h})]})});_0.classes=N_e;_0.displayName="@mantine/core/Badge";var P_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const cWe={},fWe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?$r(t,e):void 0,"--burger-size":tn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),YG=Me((e,t)=>{const n=xe("Burger",cWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:P_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe});return b.jsxs(xs,{...p("root"),ref:t,...h,children:[b.jsx(pe,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});YG.classes=P_e;YG.displayName="@mantine/core/Burger";var LL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Goe={orientation:"horizontal"},dWe=(e,{borderWidth:t})=>({group:{"--button-border-width":Se(t)}}),KG=Me((e,t)=>{const n=xe("ButtonGroup",Goe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Goe,e),p=dt({name:"ButtonGroup",props:n,classes:LL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:dWe,rootSelector:"group"});return b.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});KG.classes=LL;KG.displayName="@mantine/core/ButtonGroup";const hWe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Se(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},pWe={},mWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":tn(s,"button-height"),"--button-padding-x":tn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?uo(s.replace("compact-","")):uo(s),"--button-radius":t===void 0?void 0:Ur(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},fn=Us((e,t)=>{const n=xe("Button",pWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":w,autoContrast:E,mod:x,...S}=n,C=dt({name:"Button",props:n,classes:LL,className:s,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:mWe}),A=!!l,k=!!c;return b.jsxs(xs,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":k},x],...S,children:[b.jsx(Wm,{mounted:!!p,transition:hWe,duration:150,children:N=>b.jsx(pe,{component:"span",...C("loader",{style:N}),"aria-hidden":!0,children:b.jsx(od,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...C("inner"),children:[l&&b.jsx(pe,{component:"span",...C("section"),mod:{position:"left"},children:l}),b.jsx(pe,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&b.jsx(pe,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});fn.classes=LL;fn.displayName="@mantine/core/Button";fn.Group=KG;const[gWe,yWe]=fo("Card component was not found in tree");var XG={root:"m_e615b15f",section:"m_599a2148"};const vWe={},FL=Us((e,t)=>{const n=xe("CardSection",vWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=yWe();return b.jsx(pe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});FL.classes=XG;FL.displayName="@mantine/core/CardSection";const bWe={},_We=(e,{padding:t})=>({root:{"--card-padding":as(t)}}),jb=Us((e,t)=>{const n=xe("Card",bWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:XG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_We}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===FL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(gWe,{value:{getStyles:d},children:b.jsx($b,{ref:t,unstyled:a,...d("root"),...f,children:p})})});jb.classes=XG;jb.displayName="@mantine/core/Card";jb.Section=FL;var D_e={root:"m_4451eb3a"};const wWe={},Dc=Us((e,t)=>{const n=xe("Center",wWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:D_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return b.jsx(pe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Dc.classes=D_e;Dc.displayName="@mantine/core/Center";var O_e={root:"m_b183c0a2"};const EWe={},xWe=(e,{color:t})=>({root:{"--code-bg":t?$r(t,e):void 0}}),_C=Me((e,t)=>{const n=xe("Code",EWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:O_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xWe});return b.jsx(pe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});_C.classes=O_e;_C.displayName="@mantine/core/Code";var $_e={root:"m_7485cace"};const SWe={},TWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:tn(t,"container-size")}}),Oc=Me((e,t)=>{const n=xe("Container",SWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TWe});return b.jsx(pe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Oc.classes=$_e;Oc.displayName="@mantine/core/Container";var M_e={root:"m_3eebeb36",label:"m_9e365f20"};const CWe={orientation:"horizontal"},AWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$r(t,e):void 0,"--divider-border-style":n,"--divider-size":tn(r,"divider-size")}}),BE=Me((e,t)=>{const n=xe("Divider",CWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:M_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AWe});return b.jsx(pe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&b.jsx(pe,{component:"span",mod:{position:d},...m("label"),children:f})})});BE.classes=M_e;BE.displayName="@mantine/core/Divider";const[IWe,iS]=fo("Drawer component was not found in tree");var Km={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const kWe={},jL=Me((e,t)=>{const n=xe("DrawerBody",kWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(pG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});jL.classes=Km;jL.displayName="@mantine/core/DrawerBody";const RWe={},BL=Me((e,t)=>{const n=xe("DrawerCloseButton",RWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(mG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Km;BL.displayName="@mantine/core/DrawerCloseButton";const NWe={},UL=Me((e,t)=>{const n=xe("DrawerContent",NWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=iS(),d=f.scrollAreaComponent||r_e;return b.jsx(n_e,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:b.jsx(d,{style:{height:"100vh"},children:u})})});UL.classes=Km;UL.displayName="@mantine/core/DrawerContent";const PWe={},zL=Me((e,t)=>{const n=xe("DrawerHeader",PWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(gG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Km;zL.displayName="@mantine/core/DrawerHeader";const DWe={},VL=Me((e,t)=>{const n=xe("DrawerOverlay",DWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(yG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});VL.classes=Km;VL.displayName="@mantine/core/DrawerOverlay";function OWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function $We(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const MWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},LWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},FWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),position:"left"},jWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":tn(n,"drawer-size"),"--drawer-flex":$We(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":OWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Se(r)}}),HL=Me((e,t)=>{const n=xe("DrawerRoot",FWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=qh(),m=dt({name:"Drawer",classes:Km,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jWe}),g=(p==="rtl"?LWe:MWe)[c];return b.jsx(IWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:b.jsx(t_e,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});HL.classes=Km;HL.displayName="@mantine/core/DrawerRoot";const BWe={},qL=Me((e,t)=>{const n=xe("DrawerTitle",BWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(vG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});qL.classes=Km;qL.displayName="@mantine/core/DrawerTitle";const UWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),withOverlay:!0,withCloseButton:!0},Wh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",UWe,e),l=!!n||s;return b.jsxs(HL,{ref:t,...u,children:[r&&b.jsx(VL,{...i}),b.jsxs(UL,{children:[l&&b.jsxs(zL,{children:[n&&b.jsx(qL,{children:n}),s&&b.jsx(BL,{...o})]}),b.jsx(jL,{children:a})]})]})});Wh.classes=Km;Wh.displayName="@mantine/core/Drawer";Wh.Root=HL;Wh.Overlay=VL;Wh.Content=UL;Wh.Body=jL;Wh.Header=zL;Wh.Title=qL;Wh.CloseButton=BL;function zWe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[VWe,L_e]=fo("Grid component was not found in tree"),o7=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Yoe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":o7(e,t),Koe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Xoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function HWe({span:e,order:t,offset:n,selector:r}){var d;const i=ps(),s=L_e(),a=kf(e)===void 0?12:kf(e),u=Iy({"--col-order":(d=kf(t))==null?void 0:d.toString(),"--col-flex-grow":Koe(a,s.grow),"--col-flex-basis":o7(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Yoe(a,s.columns,s.grow),"--col-offset":Xoe(kf(n),s.columns)}),l=Xr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Koe(e[p],s.grow),h[p]["--col-flex-basis"]=o7(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Yoe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Xoe(n[p],s.columns)),h},{}),f=IA(Xr(l),i).filter(h=>Xr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return b.jsx(Db,{styles:u,media:f,selector:r})}var QG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const qWe={span:12},JG=Me((e,t)=>{const n=xe("GridCol",qWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=L_e(),h=ck();return b.jsxs(b.Fragment,{children:[b.jsx(HWe,{selector:`.${h}`,span:u,order:l,offset:c}),b.jsx(pe,{ref:t,...d.getStyles("col",{className:Xi(i,h),style:s,classNames:r,styles:o}),...f})]})});JG.classes=QG;JG.displayName="@mantine/core/GridCol";function WWe({gutter:e,selector:t}){const n=ps(),r=Iy({"--grid-gutter":as(kf(e))}),i=Xr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=as(e[u])),a),{}),o=IA(Xr(i),n).filter(a=>Xr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(Db,{styles:r,media:o,selector:t})}const GWe={gutter:"md",grow:!1,columns:12},YWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ha=Me((e,t)=>{const n=xe("Grid",GWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:QG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YWe}),y=ck();return b.jsxs(VWe,{value:{getStyles:g,grow:l,columns:f},children:[b.jsx(WWe,{selector:`.${y}`,...n}),b.jsx(pe,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});Ha.classes=QG;Ha.displayName="@mantine/core/Grid";Ha.Col=JG;var F_e={root:"m_9e117634"};const KWe={},XWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ur(t),"--image-object-fit":n}}),Dy=Us((e,t)=>{const n=xe("Image",KWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:F_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XWe});return g&&h?b.jsx(pe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):b.jsx(pe,{component:"img",ref:t,...v("root"),src:c,onError:_=>{l==null||l(_),y(!0)},mod:p,...m})});Dy.classes=F_e;Dy.displayName="@mantine/core/Image";function QO(){return QO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QO.apply(null,arguments)}function ZG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var QWe=I.useLayoutEffect,JWe=function(t){var n=I.useRef(t);return QWe(function(){n.current=t}),n},Qoe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},ZWe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Qoe(r.current,null),r.current=n,n&&Qoe(n,i)},[n])},Joe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},eGe=function(t){Object.keys(Joe).forEach(function(n){t.style.setProperty(n,Joe[n],"important")})},Zoe=eGe,Na=null,eae=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function tGe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Na||(Na=document.createElement("textarea"),Na.setAttribute("tabindex","-1"),Na.setAttribute("aria-hidden","true"),Zoe(Na)),Na.parentNode===null&&document.body.appendChild(Na);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Na.style[h]=o[h]}),Zoe(Na),Na.value=t;var u=eae(Na,e);Na.value=t,u=eae(Na,e),Na.value="x";var l=Na.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var tae=function(){},nGe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},rGe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],iGe=!!document.documentElement.currentStyle,sGe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=nGe(rGe,n),i=r.boxSizing;if(i==="")return null;iGe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},oGe=sGe;function j_e(e,t,n){var r=JWe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var aGe=function(t){j_e(window,"resize",t)},uGe=function(t){j_e(document.fonts,"loadingdone",t)},lGe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],cGe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?tae:o,u=t.onHeightChange,l=u===void 0?tae:u,c=ZG(t,lGe),f=c.value!==void 0,d=I.useRef(null),h=ZWe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:oGe(_);if(w){m.current=w;var E=tGe(w,_.value||_.placeholder||"x",s,i),x=E[0],S=E[1];p.current!==x&&(p.current=x,_.style.setProperty("height",x+"px","important"),l(x,{rowHeight:S}))}},y=function(_){f||g(),a(_)};return I.useLayoutEffect(g),aGe(g),uGe(g),I.createElement("textarea",QO({},c,{onChange:y,ref:h}))},fGe=I.forwardRef(cGe);const dGe={},eY=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",dGe,e),u=n&&nbe()!=="test",l=u?{maxRows:r,minRows:i}:{};return b.jsx(qc,{component:u?fGe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});eY.classes=qc.classes;eY.displayName="@mantine/core/Textarea";const[hGe,pGe]=fo("List component was not found in tree");var tY={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const mGe={},nY=Me((e,t)=>{const n=xe("ListItem",mGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=pGe(),h=u||d.icon,p={classNames:r,styles:o};return b.jsx(pe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:b.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...d.getStyles("itemIcon",p),children:h}),b.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});nY.classes=tY;nY.displayName="@mantine/core/ListItem";const gGe={type:"unordered"},yGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":uo(t),"--list-lh":Yve(t),"--list-spacing":as(n)}}),Bf=Me((e,t)=>{const n=xe("List",gGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:tY,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yGe});return b.jsx(hGe,{value:{center:p,icon:d,getStyles:v},children:b.jsx(pe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Bf.classes=tY;Bf.displayName="@mantine/core/List";Bf.Item=nY;var B_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const nae={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Jl("overlay")},vGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ll=Me((e,t)=>{const n=xe("LoadingOverlay",nae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ps(),g=dt({name:"LoadingOverlay",classes:B_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vGe}),y={...nae.overlayProps,...f};return b.jsx(Wm,{transition:"fade",...l,mounted:!!d,children:v=>b.jsxs(pe,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(od,{...g("loader"),unstyled:a,...c}),b.jsx(NA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),b.jsx(NA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ll.classes=B_e;Ll.displayName="@mantine/core/LoadingOverlay";const[bGe,gk]=fo("Menu component was not found in the tree");var sS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const _Ge={},rY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",_Ge,e),u=gk();return b.jsx(pe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});rY.classes=sS;rY.displayName="@mantine/core/MenuDivider";const wGe={},iY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",wGe,e),f=I.useRef(null),d=gk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Gp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Gp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return b.jsxs(Po.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:hs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});iY.classes=sS;iY.displayName="@mantine/core/MenuDropdown";const EGe={},sY=Us((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",EGe,e),p=gk(),m=ps(),{dir:g}=qh(),y=I.useRef(),v=p.getItemIndex(y.current),_=h,w=Gp(_.onMouseLeave,()=>p.setHovered(-1)),E=Gp(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),x=Gp(_.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Gp(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Hh({color:a,theme:m}):null;return b.jsxs(xs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:hs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:x,onKeyDown:LW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&b.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});sY.classes=sS;sY.displayName="@mantine/core/MenuItem";const xGe={},oY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",xGe,e),u=gk();return b.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});oY.classes=sS;oY.displayName="@mantine/core/MenuLabel";const SGe={refProp:"ref"},U_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",SGe,e);if(!ky(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=gk(),o=Gp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Gp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Gp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return b.jsx(Po.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});U_e.displayName="@mantine/core/MenuTarget";const TGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Cu(e){const t=xe("Menu",TGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:w,keepMounted:E,...x}=t,S=dt({name:"Menu",classes:sS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:k}]=RUe(),[N,O]=Ss({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=I.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},M=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=zWe({open:M,close:F,closeDelay:p,openDelay:h}),P=j=>kUe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Hm({classNames:m,styles:g,props:t});return Th(()=>{k()},[N]),b.jsx(bGe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:b.jsx(Po,{...x,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Cu.extend=e=>e;Cu.classes=sS;Cu.displayName="@mantine/core/Menu";Cu.Item=sY;Cu.Label=oY;Cu.Dropdown=iY;Cu.Target=U_e;Cu.Divider=rY;const[CGe,oS]=fo("Modal component was not found in tree");var Xm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const AGe={},WL=Me((e,t)=>{const n=xe("ModalBody",AGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return b.jsx(pG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});WL.classes=Xm;WL.displayName="@mantine/core/ModalBody";const IGe={},GL=Me((e,t)=>{const n=xe("ModalCloseButton",IGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return b.jsx(mG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});GL.classes=Xm;GL.displayName="@mantine/core/ModalCloseButton";const kGe={},YL=Me((e,t)=>{const n=xe("ModalContent",kGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=oS(),f=c.scrollAreaComponent||r_e;return b.jsx(n_e,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:b.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Se(c.yOffset)} * 2))`},children:u})})});YL.classes=Xm;YL.displayName="@mantine/core/ModalContent";const RGe={},KL=Me((e,t)=>{const n=xe("ModalHeader",RGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return b.jsx(gG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});KL.classes=Xm;KL.displayName="@mantine/core/ModalHeader";const NGe={},XL=Me((e,t)=>{const n=xe("ModalOverlay",NGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return b.jsx(yG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});XL.classes=Xm;XL.displayName="@mantine/core/ModalOverlay";const PGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},DGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ur(t),"--modal-size":tn(n,"modal-size"),"--modal-y-offset":Se(r),"--modal-x-offset":Se(i)}}),QL=Me((e,t)=>{const n=xe("ModalRoot",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:Xm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DGe});return b.jsx(CGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:b.jsx(t_e,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});QL.classes=Xm;QL.displayName="@mantine/core/ModalRoot";const OGe={},JL=Me((e,t)=>{const n=xe("ModalTitle",OGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return b.jsx(vG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});JL.classes=Xm;JL.displayName="@mantine/core/ModalTitle";const $Ge={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Yi=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",$Ge,e),c=!!n||s;return b.jsxs(QL,{ref:t,radius:u,...l,children:[r&&b.jsx(XL,{...i}),b.jsxs(YL,{radius:u,children:[c&&b.jsxs(KL,{children:[n&&b.jsx(JL,{children:n}),s&&b.jsx(GL,{...o})]}),b.jsx(WL,{children:a})]})]})});Yi.classes=Xm;Yi.displayName="@mantine/core/Modal";Yi.Root=QL;Yi.Overlay=XL;Yi.Content=YL;Yi.Body=WL;Yi.Header=KL;Yi.Title=JL;Yi.CloseButton=GL;const[MGe,aY]=Xx(),[LGe,FGe]=Xx();var ZL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const jGe={},BGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?tn(t):tn(n,"pg-gap")}}),uY=Me((e,t)=>{const n=xe("PillGroup",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=aY(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:ZL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BGe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(LGe,{value:{size:h,disabled:c},children:b.jsx(pe,{ref:t,size:h,...p("group"),...f})})});uY.classes=ZL;uY.displayName="@mantine/core/PillGroup";const UGe={variant:"default"},zGe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":tn(n,"pill-fz"),"--pill-height":tn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ur(t)}}),PA=Me((e,t)=>{const n=xe("Pill",UGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=FGe(),w=aY(),E=m||(_==null?void 0:_.size)||void 0,x=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=dt({name:"Pill",classes:ZL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zGe,stylesCtx:{size:E}});return b.jsxs(pe,{component:"span",ref:t,variant:x,size:E,...S("root",{variant:x}),mod:[{"with-remove":f&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...S("label"),children:c}),f&&b.jsx(Gm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});PA.classes=ZL;PA.displayName="@mantine/core/Pill";PA.Group=uY;var z_e={field:"m_45c4369d"};const VGe={type:"visible"},lY=Me((e,t)=>{const n=xe("PillsInputField",VGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=aY(),g=tS(),y=dt({name:"PillsInputField",classes:z_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(pe,{component:"input",ref:hs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!d&&_.stopPropagation()})});lY.classes=z_e;lY.displayName="@mantine/core/PillsInputField";const HGe={},JO=Me((e,t)=>{const n=xe("PillsInput",HGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return b.jsx(MGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:b.jsx(qc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});JO.displayName="@mantine/core/PillsInput";JO.Field=lY;function qGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(jE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const WGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},cY=Me((e,t)=>{const n=xe("MultiSelect",WGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:k,searchValue:N,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:P,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:me,id:Ae,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Cr,required:Fn,mod:cr,renderOption:gn,onRemove:An,onClear:nr,scrollAreaProps:rr,...zo}=n,$i=Ta(Ae),In=d_e(m),Mi=PG(In),Ar=VG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),Ar.resetSelectedOption()}}),{styleProps:gs,rest:{type:pp,autoComplete:cl,..._d}}=Ob(zo),[xr,Ii]=Ss({value:c,defaultValue:f,finalValue:[],onChange:d}),[Qr,cu]=Ss({value:N,defaultValue:O,finalValue:"",onChange:D}),Ia=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ka,resolvedStyles:oe}=Hm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Qr.length===0&&xr.length>0&&(An==null||An(xr[xr.length-1]),Ii(xr.slice(0,xr.length-1)))},ae=xr.map((ot,St)=>{var Ht,On;return b.jsx(PA,{withRemoveButton:!$&&!((Ht=Mi[ot])!=null&&Ht.disabled),onRemove:()=>{Ii(xr.filter(jn=>ot!==jn)),An==null||An(ot)},unstyled:a,disabled:F,...Ia("pill"),children:((On=Mi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});I.useEffect(()=>{w&&Ar.selectFirstOption()},[w,xr]);const Ce=He&&xr.length>0&&!F&&!$&&b.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ii([]),cu("")}}),Te=qGe({data:In,value:xr});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:Ar,classNames:ka,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),cu(""),Ar.updateSelectedOptionIndex("selected"),xr.includes(Mi[ot].value)?(Ii(xr.filter(St=>St!==Mi[ot].value)),An==null||An(Mi[ot].value)):xr.length<ke&&Ii([...xr,Mi[ot].value])},...x,children:[b.jsx(Kn.DropdownTarget,{children:b.jsx(JO,{...gs,__staticSelector:"MultiSelect",classNames:ka,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:P||Ce||b.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:$i,required:Fn,mod:cr,children:b.jsxs(PA.Group,{disabled:F,unstyled:a,...Ia("pillsList"),children:[ae,b.jsx(Kn.EventsTarget,{autoComplete:cl,children:b.jsx(JO.Field,{..._d,ref:t,id:$i,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Ia("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),cu("")},onKeyDown:ee,value:Qr,onChange:ot=>{cu(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),b.jsx(R_e,{data:ge?Te:In,hidden:$||F,filter:S,search:Qr,limit:C,hiddenWhenEmpty:!ze||!ct||ge&&Te.length===0&&Qr.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:ze,value:xr,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${$i}-label`:void 0,"aria-label":it?void 0:zo["aria-label"],renderOption:gn,scrollAreaProps:rr})]}),b.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Cr,value:xr,form:me,disabled:F,..._t})]})});cY.classes={...qc.classes,...Kn.classes};cY.displayName="@mantine/core/MultiSelect";var V_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const GGe={},YGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":as(r)}}},e6=Us((e,t)=>{const n=xe("NavLink",GGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:_,disableRightSectionRotation:w,noWrap:E,childrenOffset:x,onKeyDown:S,autoContrast:C,mod:A,...k}=n,N=dt({name:"NavLink",props:n,classes:V_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YGe}),[O,D]=Ss({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),D(!O))};return b.jsxs(b.Fragment,{children:[b.jsxs(xs,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...k,children:[g&&b.jsx(pe,{component:"span",...N("section"),mod:{position:"left"},children:g}),b.jsxs(pe,{...N("body"),mod:{"no-wrap":E},children:[b.jsx(pe,{component:"span",...N("label"),children:v}),b.jsx(pe,{component:"span",mod:{active:p},...N("description"),children:_})]}),($||y)&&b.jsx(pe,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||b.jsx(FE,{...N("chevron")}):y})]}),b.jsx(IL,{in:O,...N("collapse"),children:b.jsx("div",{...N("children"),children:d})})]})});e6.classes=V_e;e6.displayName="@mantine/core/NavLink";var H_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const KGe={withCloseButton:!0},XGe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ur(t),"--notification-color":n?$r(n,e):void 0}}),fY=Me((e,t)=>{const n=xe("Notification",KGe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:_,mod:w,...E}=n,x=dt({name:"Notification",classes:H_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:_,varsResolver:XGe});return b.jsxs(pe,{...x("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&b.jsx("div",{...x("icon"),children:c}),o&&b.jsx(od,{size:28,color:i,...x("loader")}),b.jsxs("div",{...x("body"),children:[l&&b.jsx("div",{...x("title"),children:l}),b.jsx(pe,{...x("description"),mod:{"data-with-title":!!l},children:f})]}),a&&b.jsx(Gm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...x("closeButton")})]})});fY.classes=H_e;fY.displayName="@mantine/core/Notification";function q_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var DA;(function(e){e.event="event",e.props="prop"})(DA||(DA={}));function Vg(){}function QGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function OA(e){return!!(e||"").match(/\d/)}function Qw(e){return e==null}function JGe(e){return typeof e=="number"&&isNaN(e)}function W_e(e){return Qw(e)||JGe(e)||typeof e=="number"&&!isFinite(e)}function G_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ZGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function eYe(e,t,n){var r=ZGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function tYe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function dY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function nYe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Y_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function rae(e,t){return Array(t+1).join(e)}function K_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+rae("0",Math.abs(o))+i:o>=a?i=i+rae("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function iae(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=dY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Y_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function z1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var X_e=QGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),rYe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function iYe(e,t,n){return Math.min(Math.max(e,t),n)}function Gj(e){return Math.max(e.selectionStart,e.selectionEnd)}function sYe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function oYe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function aYe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function uYe(e,t,n,r,i,s,o){o===void 0&&(o=aYe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var _=y===-1||d[y]===-1?0:d[y]+1;return _>v?v:r-_<v-r?_:v}function sae(e,t,n,r){var i=e.length;if(t=iYe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function lYe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(OA(e[n])||OA(e[n-1]));return t}function Q_e(e,t,n,r,i,s){s===void 0&&(s=Vg);var o=tYe(function(p,m){var g,y;return W_e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?K_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Qw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Qw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function cYe(e){return e.replace(/[^0-9]/g,"")}function fYe(e){return e}function dYe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=fYe);var a=e.removeFormatting;a===void 0&&(a=cYe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Vg);var h=e.onKeyDown;h===void 0&&(h=Vg);var p=e.onMouseUp;p===void 0&&(p=Vg);var m=e.onFocus;m===void 0&&(m=Vg);var g=e.onBlur;g===void 0&&(g=Vg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=lYe);var _=e.isValidInputCharacter;_===void 0&&(_=OA);var w=e.isCharacterSame,E=q_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),x=Q_e(y,u,!!l,o,a,c),S=x[0],C=S.formattedValue,A=S.numAsString,k=x[1],N=I.useRef(),O=I.useRef({formattedValue:C,numAsString:A}),D=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,P=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(z1(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&z1(_e,ke)},0))},W=function(_e,ke,ze){return sae(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=uYe(ke,C,_e,ze,ct,_,w);return Ot=sae(ke,Ot,ct),Ot},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,ge;if(ze){var ht=_e.inputValue||ze.value,vt=Gj(ze);ze.value=ke,ge=j(ht,ke,vt),ge!==void 0&&z(ze,ge,ke)}ke!==C&&D(P(ke,We),{event:Ot,source:ct})};I.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(C!==ke||A!==ze)&&D(P(C,A),{event:void 0,source:DA.props})},[C,A]);var G=B.current?Gj(B.current):void 0,ne=typeof window<"u"?I.useLayoutEffect:I.useEffect;ne(function(){var _e=B.current;if(C!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,C,G);_e.value=C,z(_e,ke,C)}},[C]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=N.current?rYe(N.current,ct.selectionEnd):X_e(C,_e),We=Object.assign(Object.assign({},Ot),{lastValue:C}),ge=a(_e,We),ht=H(ge);if(ge=a(ht,void 0),f&&!f(P(ht,ge))){var vt=ke.target,me=Gj(vt),Ae=j(_e,C,me);return vt.value=C,z(vt,Ae,C),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,DA.event);ct&&d(_e),N.current=void 0},ve=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge;ze==="ArrowLeft"||ze==="Backspace"?ge=Math.max(ct-1,0):ze==="ArrowRight"?ge=Math.min(ct+1,We.length):ze==="Delete"&&(ge=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(ge===void 0||ct!==Ot&&!vt){h(_e),de(ke,ht);return}var me=ge;if(vt){var Ae=ze==="ArrowLeft"?"left":"right";me=W(We,ge,Ae),me!==ge&&_e.preventDefault()}else ze==="Delete"&&!_(We[ge])?me=W(We,ge,"right"):ze==="Backspace"&&!_(We[ge])&&(me=W(We,ge,"left"));me!==ge&&z(ke,me,We),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var ge=W(We,ct);ge!==ct&&z(ke,ge,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge=W(We,ct);ge!==ct&&!(ct===0&&Ot===We.length)&&z(ke,ge,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Ke=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},Ue=F&&sYe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Ke});if(n==="text")return i?_r.createElement(_r.Fragment,null,i(C,E)||null):_r.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return _r.createElement(it,Object.assign({},yt,{ref:s}))}return _r.createElement("input",Object.assign({},yt,{ref:s}))}function oae(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=t6(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=dY(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Y_e(p,n,!!r)),l&&(h=eYe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function t6(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function hYe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function pYe(e,t){return new RegExp("(^-)|[0-9]|"+G_e(e),"g")}function mYe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function gYe(e,t,n){var r;t===void 0&&(t=oYe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=t6(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(OA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var P=!1,z=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,z=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:P}},v=y(e,c,f),_=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,x=w.end,S=w.value,C=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||x<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=hYe(_?"-"+e:e,i),e=(e.match(pYe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(G_e(p),"g"),function(B,U){return U===O?".":""});var D=dY(e,i),$=D.beforeDecimal,F=D.afterDecimal,M=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function yYe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function vYe(e){var t=t6(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function bYe(e){e=vYe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vg);var s=e.onBlur;s===void 0&&(s=Vg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=q_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=t6(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return oae(M,e)},_=function(M,B){return gYe(M,B,e)},w=Qw(f)?c:f,E=d??mYe(w,l,t);Qw(f)?Qw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var x=function(M){return W_e(M)?M:(typeof M=="number"&&(M=K_e(M)),E&&typeof a=="number"?iae(M,a,!!u):M)},S=Q_e(x(f),x(c),!!E,v,_,h),C=S[0],A=C.numAsString,k=C.formattedValue,N=S[1],O=function(M){var B=M.target,U=M.key,H=B.selectionStart,P=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&P<l.length){M.preventDefault();return}if(H!==P){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&z1(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(z1(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&z1(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&z1(B,H-1),U==="Delete"&&z[H]===W&&z1(B,H+1),i(M)},D=function(M){var B=A;if(B.match(/\d/g)||(B=""),r||(B=nYe(B)),u&&a&&(B=iae(B,a,u)),B!==A){var U=oae(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:DA.event})}s(M)},$=function(M){return M===g?!0:OA(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,P=M.currentValueIndex,z=M.formattedValueIndex,W=B[P],j=H[z],q=X_e(U,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:_,getCaretBoundary:function(M){return yYe(M,e)},onKeyDown:O,onBlur:D})}function _Ye(e){var t=bYe(e);return _r.createElement(dYe,Object.assign({},t))}function aae({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var a7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const wYe=/^(0\.0*|-0(\.0*)?)$/,EYe=/^-?0\d+(\.\d+)?\.?$/;function xYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function uae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const SYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},TYe=(e,{size:t})=>({controls:{"--ni-chevron-size":tn(t,"ni-chevron-size")}}),hY=Me((e,t)=>{const n=xe("NumberInput",SYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:w,decimalScale:E,onKeyDown:x,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:k,rightSectionPointerEvents:N,allowNegative:O,readOnly:D,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...z}=n,W=dt({name:"NumberInput",classes:a7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:TYe}),{resolvedClassNames:j,resolvedStyles:q}=Hm({classNames:i,styles:s,props:n}),[G,ne]=Ss({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=I.useRef(null),he=I.useRef(null),ve=I.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne(xYe(ge.floatValue)&&!wYe.test(ge.value)&&!(U&&EYe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Ke=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},Ue=I.useRef();Ue.current=()=>{let ge;const ht=be(G),vt=be(p),me=Math.max(ht,vt),Ae=10**me;if(typeof G!="number"||Number.isNaN(G))ge=eh(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ge=ut<=d?ut:d}else ge=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const He=ge.toFixed(me);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),me=be(p),Ae=Math.max(vt,me),He=10**Ae;if(typeof G!="number"||Number.isNaN(G))ge=eh(A,ht,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ae);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{x==null||x(ge),!(D||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),Ue.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(S==null||S(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Ke(0),0))}};BW(C,{increment:Ue.current,decrement:yt.current});const ke=ge=>{ge?Ue.current():yt.current(),ve.current+=1},ze=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>ze(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>ze(ht),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},We=b.jsxs("div",{...W("controls"),children:[b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(aae,{direction:"up"})}),b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(aae,{direction:"down"})})]});return b.jsx(qc,{component:_Ye,allowNegative:O,className:Xi(a7.root,r),size:$,...z,readOnly:D,disabled:k,value:G,getInputRef:hs(t,de),onValueChange:Ie,rightSection:m||D?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ge=>{if(_==null||_(ge),v==="blur"&&typeof G=="number"&&eh(G,h,d)!==G&&ne(eh(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&uae(ge.floatValue,h,d):uae(ge.floatValue,h,d):y?y(ge):!0})});hY.classes={...qc.classes,...a7};hY.displayName="@mantine/core/NumberInput";const[CYe,J_e]=fo("Progress.Root component was not found in tree");var yk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const AYe={},pY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",AYe,e),u=J_e();return b.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});pY.classes=yk;pY.displayName="@mantine/core/ProgressLabel";const IYe={},kYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":tn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ur(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),n6=Me((e,t)=>{const n=xe("ProgressRoot",IYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:yk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kYe});return b.jsx(CYe,{value:{getStyles:d,autoContrast:l},children:b.jsx(pe,{ref:t,...d("root"),...f})})});n6.classes=yk;n6.displayName="@mantine/core/ProgressRoot";const RYe={withAria:!0},r6=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",RYe,e),p=J_e(),m=ps(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(pe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$r(l,m),"--progress-label-color":Qx(p.autoContrast,m)?Ny({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});r6.classes=yk;r6.displayName="@mantine/core/ProgressSection";const NYe={},aS=Me((e,t)=>{const n=xe("Progress",NYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Hm({classNames:i,styles:s,props:n});return b.jsx(n6,{ref:t,classNames:d,styles:h,vars:o,...f,children:b.jsx(r6,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});aS.classes=yk;aS.displayName="@mantine/core/Progress";aS.Section=r6;aS.Root=n6;aS.Label=pY;const[PYe,Z_e]=Xx(),[DYe,OYe]=Xx();var ewe={card:"m_9dc8ae12"};const $Ye={withBorder:!0},MYe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),mY=Me((e,t)=>{const n=xe("RadioCard",$Ye,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:ewe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MYe,rootSelector:"card"}),{dir:v}=qh(),_=Z_e(),w=typeof l=="boolean"?l:(_==null?void 0:_.value)===d||!1,E=p||(_==null?void 0:_.name),x=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===S.target),k=A+1>=C.length?0:A+1,N=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),S.nativeEvent.code==="ArrowUp"&&(C[N].focus(),C[N].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?N:k].focus(),C[v==="ltr"?N:k].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:N].focus(),C[v==="ltr"?k:N].click())}};return b.jsx(DYe,{value:{checked:w},children:b.jsx(xs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),_==null||_.onChange(d||"")},onKeyDown:x})})});mY.displayName="@mantine/core/RadioCard";mY.classes=ewe;const LYe={},gY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",LYe,e),f=Ta(u),[d,h]=Ss({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(PYe,{value:{value:d,onChange:p,size:s,name:f},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(qG,{role:"radiogroup",children:a})})})});gY.classes=mi.Wrapper.classes;gY.displayName="@mantine/core/RadioGroup";function twe({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Se(e),height:Se(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var nwe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const FYe={icon:twe},jYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":tn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ur(t),"--radio-color":s==="outline"?u:$r(n,e),"--radio-icon-size":tn(r,"radio-icon-size"),"--radio-icon-color":i?$r(i,e):Qx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},yY=Me((e,t)=>{const n=xe("RadioIndicator",FYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=l,w=dt({name:"RadioIndicator",classes:nwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jYe,rootSelector:"indicator"}),E=OYe(),x=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return b.jsx(pe,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:x,disabled:y},m],...v,children:b.jsx(_,{...w("icon")})})});yY.displayName="@mantine/core/RadioIndicator";yY.classes=nwe;var rwe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const BYe={labelPosition:"right"},UYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":tn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ur(n),"--radio-color":s==="outline"?u:$r(r,e),"--radio-icon-color":i?$r(i,e):Qx(o,e)?Ny({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":tn(t,"radio-icon-size")}}},Hv=Me((e,t)=>{const n=xe("Radio",BYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:w=twe,rootRef:E,iconColor:x,onChange:S,mod:C,...A}=n,k=dt({name:"Radio",classes:rwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UYe}),N=Z_e(),O=(N==null?void 0:N.size)??c,D=n.size?c:O,{styleProps:$,rest:F}=Ob(A),M=Ta(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),S==null||S(U)}}:{};return b.jsx(ML,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...$,..._,children:b.jsxs(pe,{...k("inner"),mod:{"label-position":d},children:[b.jsx(pe,{...k("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),b.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});Hv.classes=rwe;Hv.displayName="@mantine/core/Radio";Hv.Group=gY;Hv.Card=mY;Hv.Indicator=yY;const zYe={duration:100,transition:"fade"};function VYe(e,t){return{...zYe,...t,...e}}function HYe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=cG({placement:t,middleware:[oG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=im(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var i6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const qYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Jl("popover")},WYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),vY=Me((e,t)=>{const n=xe("TooltipFloating",qYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:_,vars:w,portalProps:E,...x}=n,S=ps(),C=dt({name:"TooltipFloating",props:n,classes:i6,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:WYe}),{handleMouseMove:A,x:k,y:N,opened:O,boundaryRef:D,floating:$,setOpened:F}=HYe({offset:p,position:m});if(!ky(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=hs(D,r.ref,t),B=H=>{var P,z;(z=(P=r.props).onMouseEnter)==null||z.call(P,H),A(H),F(!0)},U=H=>{var P,z;(z=(P=r.props).onMouseLeave)==null||z.call(P,H),F(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(eS,{...E,withinPortal:s,children:b.jsx(pe,{...x,...C("tooltip",{style:{...WW(o,S),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:_,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});vY.classes=i6;vY.displayName="@mantine/core/TooltipFloating";const iwe=I.createContext(!1),GYe=iwe.Provider,YYe=()=>I.useContext(iwe),KYe={openDelay:0,closeDelay:0};function swe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",KYe,e);return b.jsx(GYe,{value:!0,children:b.jsx(HVe,{delay:{open:t,close:n},children:r})})}swe.displayName="@mantine/core/TooltipGroup";function XYe(e){var x,S,C;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=YYe(),o=Ta(),{delay:a,currentId:u,setCurrentId:l}=zbe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=cG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Lbe(e.offset),oG({padding:8}),r7(),Fbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[i7()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=QVe([VVe(h,{enabled:(x=e.events)==null?void 0:x.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),XVe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),ZVe(h,{role:"tooltip"}),YVe(h,{enabled:typeof e.opened>"u"}),qVe(h,{id:o})]);Kbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Th(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:E,opened:i,placement:g}}const lae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Jl("popover"),positionDependencies:[]},QYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ai=Me((e,t)=>{const n=xe("Tooltip",lae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:_,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:S,offset:C,transitionProps:A,multiline:k,events:N,zIndex:O,disabled:D,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:P,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",lae,n),{dir:ne}=qh(),ce=I.useRef(null),de=XYe({position:Vbe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof C=="number"?C+(_?w/2:0):C,positionDependencies:[...$,r],inline:U,strategy:q}),he=dt({name:"Tooltip",props:n,classes:i6,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:QYe});if(!ky(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=hs(de.reference,r.ref,t),Ie=VYe(A,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(eS,{...W,withinPortal:f,children:b.jsx(Wm,{...Ie,keepMounted:P,mounted:!D&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>b.jsxs(pe,{...G,variant:H,mod:[{multiline:k},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,b.jsx(fG,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:_,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:x,arrowPosition:S,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:Xi(v,r.props.className),...r.props}))]})});ai.classes=i6;ai.displayName="@mantine/core/Tooltip";ai.Floating=vY;ai.Group=swe;var owe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const JYe={withItemsBorders:!0},ZYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ur(t),"--sc-color":n?$r(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":tn(i,"sc-padding"),"--sc-font-size":uo(i)}}),bY=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",JYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:_,color:w,transitionDuration:E,transitionTimingFunction:x,variant:S,autoContrast:C,withItemsBorders:A,mod:k,...N}=n,O=dt({name:"SegmentedControl",props:n,classes:owe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZYe}),D=ps(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=e7e(),[M,B]=I.useState(null),[U,H]=I.useState({}),P=(de,he)=>{U[he]=de,H(U)},[z,W]=Ss({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ta(p),q=$.map(de=>I.createElement(pe,{...O("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":D.focusRing,key:`${de.value}-input`}),I.createElement(pe,{component:"label",...O("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>P(he,de.value),__vars:{"--sc-label-color":w!==void 0?Ny({color:w,theme:D,autoContrast:C}):void 0},key:`${de.value}-label`},b.jsx("span",{...O("innerLabel"),children:de.label})))),G=hs(t,de=>B(de));return l.length===0?null:b.jsxs(pe,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":A},k],...N,role:"radiogroup",children:[typeof z=="string"&&b.jsx(wG,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});bY.classes=owe;bY.displayName="@mantine/core/SegmentedControl";const eKe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},vk=Me((e,t)=>{const n=xe("Select",eKe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:k,size:N,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:P,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Ke}=n,Ue=I.useMemo(()=>d_e(m),[m]),yt=I.useMemo(()=>PG(Ue),[Ue]),it=Ta(G),[_e,ke,ze]=Ss({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=Ss({value:H,defaultValue:P,finalValue:ct?ct.label:"",onChange:z}),ge=VG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Hm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),I.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const me=ne&&!!_e&&!x&&!E&&b.jsx(Kn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),We(""),ve==null||ve()}});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ae=>{_==null||_(Ae);const He=W&&yt[Ae].value===_e?null:yt[Ae],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),ge.closeDropdown()},size:N,...w,children:[b.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:b.jsx(qc,{id:it,ref:t,rightSection:D||me||b.jsx(Kn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(me?"all":"none"),...Ke,size:N,__staticSelector:"Select",disabled:x,readOnly:E||!O,value:Ot,onChange:Ae=>{We(Ae.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ae=>{O&&ge.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var He;O&&ge.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ae)},classNames:ht,styles:vt,unstyled:s,pointer:!O,error:j})}),b.jsx(R_e,{data:Ue,hidden:E||x,filter:S,search:Ot,limit:C,hiddenWhenEmpty:!O||!M,withScrollArea:A,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:be})]}),b.jsx(Kn.HiddenInput,{value:_e,name:B,form:U,disabled:x,...de})]})});vk.classes={...qc.classes,...Kn.classes};vk.displayName="@mantine/core/Select";function tKe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ps(),s=t===void 0?e:t,o=Iy({"--sg-spacing-x":as(kf(e)),"--sg-spacing-y":as(kf(s)),"--sg-cols":(c=kf(n))==null?void 0:c.toString()}),a=Xr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=as(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=as(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=IA(Xr(a),i).filter(f=>Xr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return b.jsx(Db,{styles:o,media:l,selector:r})}function Yj(e){return typeof e=="object"&&e!==null?Xr(e):[]}function nKe(e){return e.sort((t,n)=>AA(t)-AA(n))}function rKe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Yj(e),...Yj(t),...Yj(n)]));return nKe(r)}function iKe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Iy({"--sg-spacing-x":as(kf(e)),"--sg-spacing-y":as(kf(i)),"--sg-cols":(l=kf(n))==null?void 0:l.toString()}),o=rKe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=as(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=as(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return b.jsx(Db,{styles:s,container:u,selector:r})}var awe={container:"m_925c2d2c",root:"m_2415a157"};const sKe={cols:1,spacing:"md",type:"media"},_Y=Me((e,t)=>{const n=xe("SimpleGrid",sKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:awe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=ck();return d==="container"?b.jsxs(b.Fragment,{children:[b.jsx(iKe,{...n,selector:`.${m}`}),b.jsx("div",{...p("container"),children:b.jsx(pe,{ref:t,...p("root",{className:m}),...h})})]}):b.jsxs(b.Fragment,{children:[b.jsx(tKe,{...n,selector:`.${m}`}),b.jsx(pe,{ref:t,...p("root",{className:m}),...h})]})});_Y.classes=awe;_Y.displayName="@mantine/core/SimpleGrid";const[uwe,s6]=fo("SliderProvider was not found in tree"),wY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=s6();return b.jsx(pe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});wY.displayName="@mantine/core/SliderRoot";const ZO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=s6(),[_,w]=I.useState(!1),E=l||s||_||h&&p;return b.jsxs(pe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:x=>x.stopPropagation(),children:[m,b.jsx(Wm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:x=>b.jsx("div",{...v("label",{style:x}),children:i})})]})});ZO.displayName="@mantine/core/SliderThumb";function e3({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function oKe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function lwe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=s6();if(!e)return null;const u=e.map((l,c)=>I.createElement(pe,{...a("markWrapper"),__vars:{"--mark-offset":`${e3({value:l.value,min:t,max:n})}%`},key:c},b.jsx(pe,{...a("mark"),mod:{filled:oKe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&b.jsx("div",{...a("markLabel"),children:l.label})));return b.jsx("div",{children:u})}lwe.displayName="@mantine/core/SliderMarks";function EY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=s6();return b.jsx(b.Fragment,{children:b.jsx(pe,{...u("trackContainer"),mod:{disabled:r},...o,children:b.jsxs(pe,{...u("track"),mod:{inverted:s,disabled:r},children:[b.jsx(pe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,b.jsx(lwe,{...a,offset:i,disabled:r,inverted:s})]})})})}EY.displayName="@mantine/core/SliderTrack";function u7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function fc(e,t){return parseFloat(e.toFixed(t))}function cwe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var o6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const aKe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},uKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),a6=Me((e,t)=>{const n=xe("Slider",aKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,thumbChildren:E,disabled:x,unstyled:S,scale:C,inverted:A,className:k,style:N,vars:O,hiddenInputProps:D,...$}=n,F=dt({name:"Slider",props:n,classes:o6,classNames:r,className:k,styles:i,style:N,vars:O,varsResolver:uKe,unstyled:S}),{dir:M}=qh(),[B,U]=I.useState(!1),[H,P]=Ss({value:typeof s=="number"?eh(s,l,c):s,defaultValue:typeof h=="number"?eh(h,l,c):h,finalValue:eh(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=e3({value:H,min:l,max:c}),G=C(H),ne=typeof g=="function"?g(G):g,ce=d??cwe(f),de=I.useCallback(({x:be})=>{if(!x){const Ke=u7({value:be,min:l,max:c,step:f,precision:ce});P(Ke),z.current=Ke}},[x,l,c,f,ce,P]),{ref:he,active:ve}=tbe(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=be=>{var Ke,Ue,yt,it,_e,ke;if(!x)switch(be.key){case"ArrowUp":{be.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=fc(Math.min(Math.max(H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=fc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=fc(Math.min(Math.max(H-f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=fc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);P(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),P(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return b.jsx(uwe,{value:{getStyles:F},children:b.jsxs(wY,{...$,ref:hs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:x,children:[b.jsx(EY,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:x,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:b.jsx(ZO,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,isHovered:B,disabled:x,children:E})}),b.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});a6.classes=o6;a6.displayName="@mantine/core/Slider";function lKe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const cKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),fKe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},$A=Me((e,t)=>{const n=xe("RangeSlider",fKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:x,showLabelOnHover:S,thumbChildren:C,disabled:A,unstyled:k,scale:N,inverted:O,className:D,style:$,vars:F,hiddenInputProps:M,...B}=n,U=dt({name:"Slider",props:n,classes:o6,classNames:r,className:D,styles:i,style:$,vars:F,varsResolver:cKe,unstyled:k}),{dir:H}=qh(),[P,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=Ss({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=I.useRef(q),ce=I.useRef([]),de=I.useRef(void 0),he=[e3({value:q[0],min:l,max:c}),e3({value:q[1],min:l,max:c})],ve=p??cwe(h),Ie=We=>{G(We),ne.current=We};I.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,ge,ht)=>{const vt=[...ne.current];vt[ge]=We,ge===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-We>d&&(vt[1]=We+d)),ge===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[ge]=ne.current[ge]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=fc(vt[0],ve),vt[1]=fc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Ke=We=>{if(!A){const ge=u7({value:We,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:Ue,active:yt}=tbe(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const ge=Ue.current.getBoundingClientRect(),ht=lKe(We.nativeEvent),vt=u7({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),me=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ae=H==="ltr"?me:me===1?0:1;de.current=Ae},ke=()=>P!==1&&P!==0?(z(0),0):P,ze=We=>{if(!A)switch(We.key){case"ArrowUp":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>z(-1)},Ot=Array.isArray(C);return b.jsx(uwe,{value:{getStyles:U},children:b.jsxs(wY,{...B,size:u,ref:t,disabled:A,children:[b.jsxs(EY,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[b.jsx(ZO,{...ct,value:N(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(fc(N(q[0]),ve)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:A,children:Ot?C[0]:C}),b.jsx(ZO,{...ct,thumbLabel:x,value:N(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(fc(N(q[1]),ve)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:A,children:Ot?C[1]:C})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});$A.classes=o6;$A.displayName="@mantine/core/RangeSlider";const dKe={},Nl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",dKe,e);return b.jsx(pe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Nl.displayName="@mantine/core/Space";var fwe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const hKe={maxHeight:100,initialState:!1},pKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),xY=Me((e,t)=>{const n=xe("Spoiler",hKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:fwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pKe}),_=Ta(g),w=`${_}-region`,[E,x]=I.useState(l),{ref:S,height:C}=GUe(),A=E?f:d,k=A!==null&&c<C;return b.jsxs(pe,{...v("root"),id:_,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&b.jsx(Fb,{component:"button",type:"button",ref:p,onClick:()=>x(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:A}),b.jsx("div",{...v("content",{style:{maxHeight:E?C?Se(C):void 0:Se(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:b.jsx("div",{ref:S,children:h})})]})});xY.classes=fwe;xY.displayName="@mantine/core/Spoiler";var dwe={root:"m_6d731127"};const mKe={gap:"md",align:"stretch",justify:"flex-start"},gKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":as(t),"--stack-align":n,"--stack-justify":r}}),Nf=Me((e,t)=>{const n=xe("Stack",mKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:dwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gKe});return b.jsx(pe,{ref:t,...p("root"),variant:d,...h})});Nf.classes=dwe;Nf.displayName="@mantine/core/Stack";const hwe=I.createContext(null),yKe=hwe.Provider,vKe=()=>I.useContext(hwe),bKe={},SY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",bKe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(yKe,{value:{value:c,onChange:d,size:s},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(qG,{role:"group",children:a})})})});SY.classes=mi.Wrapper.classes;SY.displayName="@mantine/core/SwitchGroup";var pwe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const _Ke={labelPosition:"right"},wKe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ur(t),"--switch-height":tn(r,"switch-height"),"--switch-width":tn(r,"switch-width"),"--switch-thumb-size":tn(r,"switch-thumb-size"),"--switch-label-font-size":tn(r,"switch-label-font-size"),"--switch-track-label-padding":tn(r,"switch-track-label-padding"),"--switch-color":n?$r(n,e):void 0}}),Jw=Me((e,t)=>{const n=xe("Switch",_Ke,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:w,onChange:E,labelPosition:x,description:S,error:C,disabled:A,variant:k,rootRef:N,mod:O,...D}=n,$=vKe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:pwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wKe}),{styleProps:B,rest:U}=Ob(D),H=Ta(h),P=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=Ss({value:P.checked??_,defaultValue:w,finalValue:!1});return b.jsxs(ML,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:x,label:c,description:S,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:k,ref:N,mod:O,...B,...g,children:[b.jsx("input",{...U,disabled:A,checked:z,onChange:j=>{var q;$?(q=P.onChange)==null||q.call(P,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),b.jsxs(pe,{"aria-hidden":"true",mod:{error:C,"label-position":x},...M("track"),children:[b.jsx(pe,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),b.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});Jw.classes={...pwe,...b_e};Jw.displayName="@mantine/core/Switch";Jw.Group=SY;const[EKe,xKe]=fo("Table component was not found in the tree");var bk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function SKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Bb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=xKe();return b.jsx(pe,{component:e,ref:s,...SKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=bk,r}const l7=Bb("th",{columnBorder:!0}),mwe=Bb("td",{columnBorder:!0}),mD=Bb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),gwe=Bb("thead",{stickyHeader:!0}),ywe=Bb("tbody"),vwe=Bb("tfoot"),bwe=Bb("caption",{captionSide:!0});function TY({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(bwe,{children:e.caption}),e.head&&b.jsx(gwe,{children:b.jsx(mD,{children:e.head.map((t,n)=>b.jsx(l7,{children:t},n))})}),e.body&&b.jsx(ywe,{children:e.body.map((t,n)=>b.jsx(mD,{children:t.map((r,i)=>b.jsx(mwe,{children:r},i))},n))}),e.foot&&b.jsx(vwe,{children:b.jsx(mD,{children:e.foot.map((t,n)=>b.jsx(l7,{children:t},n))})})]})}TY.displayName="@mantine/core/TableDataRenderer";const TKe={type:"scrollarea"},CKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Se(t),"--table-overflow":n==="native"?"auto":void 0}}),CY=Me((e,t)=>{const n=xe("TableScrollContainer",TKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:bk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CKe,rootSelector:"scrollContainer"});return b.jsx(pe,{component:f==="scrollarea"?bm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:b.jsx("div",{...h("scrollContainerInner"),children:l})})});CY.classes=bk;CY.displayName="@mantine/core/TableScrollContainer";const AKe={withRowBorders:!0,verticalSpacing:7},IKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":as(r),"--table-vertical-spacing":as(i),"--table-border-color":s?$r(s,e):void 0,"--table-striped-color":u&&o?$r(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$r(a,e):void 0,"--table-sticky-header-offset":f?Se(c):void 0}}),qt=Me((e,t)=>{const n=xe("Table",AKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:w,variant:E,data:x,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:k,...N}=n,O=dt({name:"Table",props:n,className:i,style:s,classes:bk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:IKe});return b.jsx(EKe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:b.jsx(pe,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...N,children:S||!!x&&b.jsx(TY,{data:x})})})});qt.classes=bk;qt.displayName="@mantine/core/Table";qt.Td=mwe;qt.Th=l7;qt.Tr=mD;qt.Thead=gwe;qt.Tbody=ywe;qt.Tfoot=vwe;qt.Caption=bwe;qt.ScrollContainer=CY;qt.DataRenderer=TY;const[kKe,AY]=fo("Tabs component was not found in the tree");var _k={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const RKe={},IY=Me((e,t)=>{const n=xe("TabsList",RKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=AY();return b.jsx(pe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});IY.classes=_k;IY.displayName="@mantine/core/TabsList";const NKe={},kY=Me((e,t)=>{const n=xe("TabsPanel",NKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=AY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return b.jsx(pe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});kY.classes=_k;kY.displayName="@mantine/core/TabsPanel";const PKe={},RY=Me((e,t)=>{const n=xe("TabsTab",PKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ps(),{dir:_}=qh(),w=AY(),E=a===w.value,x=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return b.jsxs(xs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:x,__vars:{"--tabs-color":f?$r(f,v):void 0},onKeyDown:LW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:l}),children:[o&&b.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&b.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&b.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});RY.classes=_k;RY.displayName="@mantine/core/TabsTab";const cae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",DKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},OKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ur(t),"--tabs-color":$r(n,e),"--tabs-text-color":Qx(r,e)?Ny({color:n,theme:e,autoContrast:r}):void 0}}),ns=Me((e,t)=>{const n=xe("Tabs",DKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:w,className:E,style:x,vars:S,autoContrast:C,mod:A,...k}=n,N=Ta(l),[O,D]=Ss({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:_k,className:E,style:x,classNames:v,styles:_,unstyled:w,vars:S,varsResolver:OKe});return b.jsx(kKe,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:HO(`${N}-tab`,cae),getPanelId:HO(`${N}-panel`,cae),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:b.jsx(pe,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...k,children:a})})});ns.classes=_k;ns.displayName="@mantine/core/Tabs";ns.Tab=RY;ns.Panel=kY;ns.List=IY;const $Ke={},Jg=Me((e,t)=>{const n=xe("TextInput",$Ke,e);return b.jsx(qc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Jg.classes=qc.classes;Jg.displayName="@mantine/core/TextInput";const MKe=["h1","h2","h3","h4","h5","h6"];function LKe(e,t){const n=t!==void 0?t:`h${e}`;return MKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Se(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var _we={root:"m_8a5d1357"};const FKe={order:1},jKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=LKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ui=Me((e,t)=>{const n=xe("Title",FKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:_we,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:jKe});return[1,2,3,4,5,6].includes(u)?b.jsx(pe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ui.classes=_we;ui.displayName="@mantine/core/Title";function BKe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function UKe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function zKe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const VKe=()=>BKe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Ub=VKe(),HKe=(e=Ub)=>UKe(e);function uS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=zKe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function qKe(e,t=Ub){const n=e.id||Kw();return uS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function wwe(e,t=Ub){return uS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function WKe(e,t=Ub){return uS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function GKe(e=Ub){uS(e,()=>[])}function YKe(e=Ub){uS(e,t=>t.slice(0,e.getState().limit))}const zb={show:qKe,hide:wwe,update:WKe,clean:GKe,cleanQueue:YKe,updateState:uS};function c7(e,t){return c7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},c7(e,t)}function Ewe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c7(e,t)}var xwe={exports:{}},KKe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XKe=KKe,QKe=XKe;function Swe(){}function Twe(){}Twe.resetWarningCache=Swe;var JKe=function(){function e(r,i,s,o,a,u){if(u!==QKe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Twe,resetWarningCache:Swe};return n.PropTypes=n,n};xwe.exports=JKe();var ZKe=xwe.exports;const fae=Kl(ZKe),dae={disabled:!1},t3=_r.createContext(null);var eXe=function(t){return t.scrollTop},E2="unmounted",C1="exited",A1="entering",rw="entered",f7="exiting",Qm=function(e){Ewe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=C1,s.appearStatus=A1):u=rw:r.unmountOnExit||r.mountOnEnter?u=E2:u=C1,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===E2?{status:C1}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==A1&&o!==rw&&(s=A1):(o===A1||o===rw)&&(s=f7)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===A1){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:w2.findDOMNode(this);o&&eXe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===C1&&this.setState({status:E2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[w2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||dae.disabled){this.safeSetState({status:rw},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:A1},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:rw},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:w2.findDOMNode(this);if(!s||dae.disabled){this.safeSetState({status:C1},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:f7},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:C1},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:w2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===E2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=ZG(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _r.createElement(t3.Provider,{value:null},typeof o=="function"?o(i,a):_r.cloneElement(_r.Children.only(o),a))},t}(_r.Component);Qm.contextType=t3;Qm.propTypes={};function N_(){}Qm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:N_,onEntering:N_,onEntered:N_,onExit:N_,onExiting:N_,onExited:N_};Qm.UNMOUNTED=E2;Qm.EXITED=C1;Qm.ENTERING=A1;Qm.ENTERED=rw;Qm.EXITING=f7;function tXe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NY(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function nXe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function ov(e,t,n){return n[t]!=null?n[t]:e.props[t]}function rXe(e,t){return NY(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:ov(n,"appear",e),enter:ov(n,"enter",e),exit:ov(n,"exit",e)})})}function iXe(e,t,n){var r=NY(e.children),i=nXe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:ov(o,"exit",e),enter:ov(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:ov(o,"exit",e),enter:ov(o,"enter",e)}))}}),i}var sXe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},oXe={component:"div",childFactory:function(t){return t}},Pg=function(e){Ewe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(tXe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?rXe(i,a):iXe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=NY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=QO({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=ZG(i,["component","childFactory"]),u=this.state.contextValue,l=sXe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?_r.createElement(t3.Provider,{value:u},l):_r.createElement(t3.Provider,{value:u},_r.createElement(s,a,l))},t}(_r.Component);Pg.propTypes={};Pg.defaultProps=oXe;const Cwe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function aXe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),Cwe.reduce((n,r)=>(n[r]=[],n),{}))}const hae={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},uXe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function lXe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:hae[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:uXe[o]},l={opacity:0,maxHeight:0,transform:hae[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function cXe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const Awe=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=cXe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),b.jsx(fY,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});Awe.displayName="@mantine/notifications/NotificationContainer";var Iwe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const fXe=Qm,dXe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Jl("overlay"),store:Ub,withinPortal:!0},hXe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Se(n)}}),Jm=Me((e,t)=>{const n=xe("Notifications",dXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,..._}=n,w=ps(),E=HKe(g),x=VUe(),S=TL(),C=I.useRef({}),A=I.useRef(0),N=(w.respectReducedMotion?S:!1)?1:f,O=dt({name:"Notifications",classes:Iwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hXe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),Th(()=>{E.notifications.length>A.current&&setTimeout(()=>x(),0),A.current=E.notifications.length},[E.notifications]);const D=aXe(E.notifications,l),$=Cwe.reduce((F,M)=>(F[M]=D[M].map(({style:B,...U})=>b.jsx(fXe,{timeout:N,onEnter:()=>C.current[U.id].offsetHeight,nodeRef:{current:C.current[U.id]},children:H=>b.jsx(Awe,{ref:P=>{C.current[U.id]=P},data:U,onHide:P=>wwe(P,g),autoClose:c,...O("notification",{style:{...lXe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return b.jsxs(eS,{withinPortal:v,...y,children:[b.jsx(pe,{...O("root"),"data-position":"top-center",ref:t,..._,children:b.jsx(Pg,{children:$["top-center"]})}),b.jsx(pe,{...O("root"),"data-position":"top-left",..._,children:b.jsx(Pg,{children:$["top-left"]})}),b.jsx(pe,{...O("root"),"data-position":"top-right",..._,children:b.jsx(Pg,{children:$["top-right"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-right",..._,children:b.jsx(Pg,{children:$["bottom-right"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-left",..._,children:b.jsx(Pg,{children:$["bottom-left"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-center",..._,children:b.jsx(Pg,{children:$["bottom-center"]})})]})});Jm.classes=Iwe;Jm.displayName="@mantine/notifications/Notifications";Jm.show=zb.show;Jm.hide=zb.hide;Jm.update=zb.update;Jm.clean=zb.clean;Jm.cleanQueue=zb.cleanQueue;Jm.updateState=zb.updateState;const kwe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Cs=()=>I.useContext(kwe);function pXe({children:e}){const[t,n]=_r.useState(void 0),r=_r.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(kwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function MA(){return MA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MA.apply(this,arguments)}var Zg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zg||(Zg={}));const pae="popstate";function mXe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return d7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Nwe(i)}return yXe(t,n,null,e)}function us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gXe(){return Math.random().toString(36).substr(2,8)}function mae(e,t){return{usr:e.state,key:e.key,idx:t}}function d7(e,t,n,r){return n===void 0&&(n=null),MA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lS(t):t,{state:n,key:t&&t.key||r||gXe()})}function Nwe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yXe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(MA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Zg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Zg.Push;let v=d7(m.location,g,y);l=c()+1;let _=mae(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Zg.Replace;let v=d7(m.location,g,y);l=c();let _=mae(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Nwe(g);return v=v.replace(/ $/,"%20"),us(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(pae,f),u=g,()=>{i.removeEventListener(pae,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var gae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gae||(gae={}));function vXe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?lS(t):t,i=Owe(r.pathname||"/",n);if(i==null)return null;let s=Pwe(e);bXe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=NXe(i);o=IXe(s[a],u)}return o}function Pwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=w0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Pwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:CXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Dwe(s.path))i(s,o,u)}),t}function Dwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Dwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function bXe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:AXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _Xe=/^:[\w-]+$/,wXe=3,EXe=2,xXe=1,SXe=10,TXe=-2,yae=e=>e==="*";function CXe(e,t){let n=e.split("/"),r=n.length;return n.some(yae)&&(r+=TXe),t&&(r+=EXe),n.filter(i=>!yae(i)).reduce((i,s)=>i+(_Xe.test(s)?wXe:s===""?xXe:SXe),r)}function AXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function IXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=kXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:w0([i,c.pathname]),pathnameBase:$Xe(w0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=w0([i,c.pathnameBase]))}return s}function kXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=RXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function RXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Rwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function NXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Owe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function PXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?lS(e):e;return{pathname:n?n.startsWith("/")?n:DXe(n,t):t,search:MXe(r),hash:LXe(i)}}function DXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function PY(e,t){let n=OXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function DY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=lS(e):(i=MA({},e),us(!i.pathname||!i.pathname.includes("?"),Kj("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),Kj("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),Kj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=PXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const w0=e=>e.join("/").replace(/\/\/+/g,"/"),$Xe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $we=["post","put","patch","delete"];new Set($we);const jXe=["get",...$we];new Set(jXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function LA(){return LA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LA.apply(this,arguments)}const OY=I.createContext(null),BXe=I.createContext(null),Vb=I.createContext(null),u6=I.createContext(null),Gh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Mwe=I.createContext(null);function Lwe(e,t){let{relative:n}={};cS()||us(!1);let{basename:r,navigator:i}=I.useContext(Vb),{hash:s,pathname:o,search:a}=HXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:w0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function cS(){return I.useContext(u6)!=null}function Oy(){return cS()||us(!1),I.useContext(u6).location}function Fwe(e){I.useContext(Vb).static||I.useLayoutEffect(e)}function Yh(){let{isDataRoute:e}=I.useContext(Gh);return e?tQe():UXe()}function UXe(){cS()||us(!1);let e=I.useContext(OY),{basename:t,future:n,navigator:r}=I.useContext(Vb),{matches:i}=I.useContext(Gh),{pathname:s}=Oy(),o=JSON.stringify(PY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Fwe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=DY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:w0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const zXe=I.createContext(null);function VXe(e){let t=I.useContext(Gh).outlet;return t&&I.createElement(zXe.Provider,{value:e},t)}function Em(){let{matches:e}=I.useContext(Gh),t=e[e.length-1];return t?t.params:{}}function HXe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Vb),{matches:i}=I.useContext(Gh),{pathname:s}=Oy(),o=JSON.stringify(PY(i,r.v7_relativeSplatPath));return I.useMemo(()=>DY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function jwe(e,t){return qXe(e,t)}function qXe(e,t,n,r){cS()||us(!1);let{navigator:i}=I.useContext(Vb),{matches:s}=I.useContext(Gh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Oy(),c;if(t){var f;let g=typeof t=="string"?lS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||us(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=vXe(e,{pathname:h}),m=XXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:w0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:w0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(u6.Provider,{value:{location:LA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Zg.Pop}},m):m}function WXe(){let e=eQe(),t=FXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const GXe=I.createElement(WXe,null);class YXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Gh.Provider,{value:this.props.routeContext},I.createElement(Mwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(OY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Gh.Provider,{value:t},r)}function XXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||GXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=I.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,I.createElement(KXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(YXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Bwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bwe||{}),n3=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(n3||{});function QXe(e){let t=I.useContext(OY);return t||us(!1),t}function JXe(e){let t=I.useContext(BXe);return t||us(!1),t}function ZXe(e){let t=I.useContext(Gh);return t||us(!1),t}function Uwe(e){let t=ZXe(),n=t.matches[t.matches.length-1];return n.route.id||us(!1),n.route.id}function eQe(){var e;let t=I.useContext(Mwe),n=JXe(n3.UseRouteError),r=Uwe(n3.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function tQe(){let{router:e}=QXe(Bwe.UseNavigateStable),t=Uwe(n3.UseNavigateStable),n=I.useRef(!1);return Fwe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,LA({fromRouteId:t},s)))},[e,t])}function $Y(e){let{to:t,replace:n,state:r,relative:i}=e;cS()||us(!1);let{future:s,static:o}=I.useContext(Vb),{matches:a}=I.useContext(Gh),{pathname:u}=Oy(),l=Yh(),c=DY(t,PY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function nQe(e){return VXe(e.context)}function Cp(e){us(!1)}function rQe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Zg.Pop,navigator:s,static:o=!1,future:a}=e;cS()&&us(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:LA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=lS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=Owe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Vb.Provider,{value:l},I.createElement(u6.Provider,{children:n,value:m}))}function iQe(e){let{children:t,location:n}=e;return jwe(h7(t),n)}new Promise(()=>{});function h7(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,h7(r.props.children,s));return}r.type!==Cp&&us(!1),!r.props.index||!r.props.children||us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=h7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sQe(e,t){let n=p7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const oQe="6";try{window.__reactRouterVersion=oQe}catch{}const aQe="startTransition",vae=vO[aQe];function uQe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=mXe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&vae?vae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(rQe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var bae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bae||(bae={}));var _ae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_ae||(_ae={}));function MY(e){let t=I.useRef(p7(e)),n=I.useRef(!1),r=Oy(),i=I.useMemo(()=>sQe(r.search,n.current?null:t.current),[r.search]),s=Yh(),o=I.useCallback((a,u)=>{const l=p7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const LY=I.createContext(null);LY.displayName="@mantine/modals/ModalsContext";function lQe(){const e=I.useContext(LY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function cQe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=lQe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return b.jsxs(b.Fragment,{children:[l&&b.jsx(pe,{mb:"md",children:l}),b.jsxs(ls,{justify:"flex-end",...o,children:[b.jsx(fn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(fn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[fQe,l6]=n7e("mantine-modals");l6("openModal");l6("closeModal");l6("closeAllModals");const m7=l6("openConfirmModal");function wae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function dQe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;wae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{wae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function hQe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function pQe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(dQe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||Kw();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||Kw();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const _=y||Kw();return s({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);fQe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=hQe(g.props);return{modalProps:y,content:b.jsx(cQe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(LY.Provider,{value:d,children:[b.jsx(Yi,{zIndex:Jl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...mQe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gQe=Tn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yQe=Tn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eae=Tn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQe=Tn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQe=Tn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Qe=Tn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wQe=Tn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EQe=Tn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xQe=Tn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SQe=Tn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zwe=Tn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TQe=Tn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xae=Tn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CQe=Tn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AQe=Tn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IQe=Tn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kQe=Tn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQe=Tn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NQe=Tn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PQe=Tn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vwe=Tn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DQe=Tn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OQe=Tn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Qe=Tn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MQe=Tn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LQe=Tn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hwe=Tn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FQe=Tn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jQe=Tn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BQe=Tn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UQe=Tn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zQe=Tn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qwe=Tn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VQe=Tn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wwe=Tn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HQe=Tn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gwe=Tn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FY=Tn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jY=Tn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qQe=Tn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Ywe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Vu="/study/";function Sae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Kwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const WQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,GQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YQe={};function Tae(e,t){return(YQe.jsx?GQe:WQe).test(e)}const KQe=/[ \t\n\f\r]/g;function XQe(e){return typeof e=="object"?e.type==="text"?Cae(e.value):!1:Cae(e)}function Cae(e){return e.replace(KQe,"")===""}let wk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};wk.prototype.property={};wk.prototype.normal={};wk.prototype.space=null;function Xwe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new wk(n,r,t)}function FA(e){return e.toLowerCase()}let Gc=class{constructor(t,n){this.property=t,this.attribute=n}};Gc.prototype.space=null;Gc.prototype.boolean=!1;Gc.prototype.booleanish=!1;Gc.prototype.overloadedBoolean=!1;Gc.prototype.number=!1;Gc.prototype.commaSeparated=!1;Gc.prototype.spaceSeparated=!1;Gc.prototype.commaOrSpaceSeparated=!1;Gc.prototype.mustUseProperty=!1;Gc.prototype.defined=!1;let QQe=0;const yn=Hb(),bs=Hb(),Qwe=Hb(),nt=Hb(),ei=Hb(),Zw=Hb(),dl=Hb();function Hb(){return 2**++QQe}const g7=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:bs,commaOrSpaceSeparated:dl,commaSeparated:Zw,number:nt,overloadedBoolean:Qwe,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),Xj=Object.keys(g7);class BY extends Gc{constructor(t,n,r,i){let s=-1;if(super(t,n),Aae(this,"space",i),typeof r=="number")for(;++s<Xj.length;){const o=Xj[s];Aae(this,Xj[s],(r&g7[o])===g7[o])}}}BY.prototype.defined=!0;function Aae(e,t,n){n&&(e[t]=n)}const JQe={}.hasOwnProperty;function fS(e){const t={},n={};let r;for(r in e.properties)if(JQe.call(e.properties,r)){const i=e.properties[r],s=new BY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[FA(r)]=r,n[FA(s.attribute)]=r}return new wk(t,n,e.space)}const Jwe=fS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Zwe=fS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function eEe(e,t){return t in e?e[t]:t}function tEe(e,t){return eEe(e,t.toLowerCase())}const nEe=fS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:tEe,properties:{xmlns:null,xmlnsXLink:null}}),rEe=fS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bs,ariaAutoComplete:null,ariaBusy:bs,ariaChecked:bs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:bs,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:bs,ariaFlowTo:ei,ariaGrabbed:bs,ariaHasPopup:null,ariaHidden:bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:nt,ariaLive:null,ariaModal:bs,ariaMultiLine:bs,ariaMultiSelectable:bs,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:bs,ariaReadOnly:bs,ariaRelevant:null,ariaRequired:bs,ariaRoleDescription:ei,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:bs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),ZQe=fS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:tEe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zw,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ei,autoFocus:yn,autoPlay:yn,blocking:ei,capture:null,charSet:null,checked:yn,cite:null,className:ei,cols:nt,colSpan:null,content:null,contentEditable:bs,controls:yn,controlsList:ei,coords:nt|Zw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:Qwe,draggable:bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ei,height:nt,hidden:yn,high:nt,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ei,itemRef:ei,itemScope:yn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:nt,pattern:null,ping:ei,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ei,required:yn,reversed:yn,rows:nt,rowSpan:nt,sandbox:ei,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:bs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:bs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),eJe=fS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:eEe,properties:{about:dl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zw,g2:Zw,glyphName:Zw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:dl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:dl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:dl,rev:dl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:dl,requiredFeatures:dl,requiredFonts:dl,requiredFormats:dl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:dl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:dl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:dl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),tJe=/^data[-\w.:]+$/i,Iae=/-[a-z]/g,nJe=/[A-Z]/g;function c6(e,t){const n=FA(t);let r=t,i=Gc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tJe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Iae,iJe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Iae.test(s)){let o=s.replace(nJe,rJe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=BY}return new i(r,t)}function rJe(e){return"-"+e.toLowerCase()}function iJe(e){return e.charAt(1).toUpperCase()}const sJe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ek=Xwe([Zwe,Jwe,nEe,rEe,ZQe],"html"),$y=Xwe([Zwe,Jwe,nEe,rEe,eJe],"svg");function kae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function iEe(e){return e.join(" ").trim()}var sEe={},Rae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,oJe=/\n/g,aJe=/^\s*/,uJe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,lJe=/^:\s*/,cJe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,fJe=/^[;\s]*/,dJe=/^\s+|\s+$/g,hJe=`
`,Nae="/",Pae="*",V1="",pJe="comment",mJe="declaration",gJe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(oJe);m&&(n+=m.length);var g=p.lastIndexOf(hJe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(aJe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Nae!=e.charAt(0)||Pae!=e.charAt(1))){for(var m=2;V1!=e.charAt(m)&&(Pae!=e.charAt(m)||Nae!=e.charAt(m+1));)++m;if(m+=2,V1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:pJe,comment:g})}}function d(){var p=s(),m=u(uJe);if(m){if(f(),!u(lJe))return a("property missing ':'");var g=u(cJe),y=p({type:mJe,property:Dae(m[0].replace(Rae,V1)),value:g?Dae(g[0].replace(Rae,V1)):V1});return u(fJe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Dae(e){return e?e.replace(dJe,V1):V1}var yJe=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sEe,"__esModule",{value:!0});var vJe=yJe(gJe);function bJe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,vJe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Oae=sEe.default=bJe;const _Je=Oae.default||Oae,f6=oEe("end"),Kh=oEe("start");function oEe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function wJe(e){const t=Kh(e),n=f6(e);if(t&&n)return{start:t,end:n}}function wC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?$ae(e.position):"start"in e||"end"in e?$ae(e):"line"in e||"column"in e?y7(e):""}function y7(e){return Mae(e&&e.line)+":"+Mae(e&&e.column)}function $ae(e){return y7(e&&e.start)+"-"+y7(e&&e.end)}function Mae(e){return e&&typeof e=="number"?e:1}class Ca extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=wC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ca.prototype.file="";Ca.prototype.name="";Ca.prototype.reason="";Ca.prototype.message="";Ca.prototype.stack="";Ca.prototype.column=void 0;Ca.prototype.line=void 0;Ca.prototype.ancestors=void 0;Ca.prototype.cause=void 0;Ca.prototype.fatal=void 0;Ca.prototype.place=void 0;Ca.prototype.ruleId=void 0;Ca.prototype.source=void 0;const UY={}.hasOwnProperty,EJe=new Map,xJe=/[A-Z]/g,SJe=/-([a-z])/g,TJe=new Set(["table","tbody","thead","tfoot","tr"]),CJe=new Set(["td","th"]),aEe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function AJe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=$Je(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=OJe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?$y:Ek,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=uEe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function uEe(e,t,n){if(t.type==="element")return IJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return kJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return NJe(e,t,n);if(t.type==="mdxjsEsm")return RJe(e,t);if(t.type==="root")return PJe(e,t,n);if(t.type==="text")return DJe(e,t)}function IJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$y,e.schema=i),e.ancestors.push(t);const s=cEe(e,t.tagName,!1),o=MJe(e,t);let a=VY(e,t);return TJe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!XQe(u):!0})),lEe(e,o,s,t),zY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function kJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}jA(e,t.position)}function RJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jA(e,t.position)}function NJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=$y,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:cEe(e,t.name,!0),o=LJe(e,t),a=VY(e,t);return lEe(e,o,s,t),zY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function PJe(e,t,n){const r={};return zY(r,VY(e,t)),e.create(t,e.Fragment,r,n)}function DJe(e,t){return t.value}function lEe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function zY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function OJe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function $Je(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Kh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function MJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&UY.call(t.properties,i)){const s=FJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&CJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function LJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else jA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else jA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function VY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:EJe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=uEe(e,s,o);a!==void 0&&n.push(a)}return n}function FJe(e,t,n){const r=c6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Kwe(n):iEe(n)),r.property==="style"){let i=typeof n=="object"?n:jJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=BJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?sJe[r.property]||r.property:r.attribute,n]}}function jJe(e,t){const n={};try{_Je(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ca("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=aEe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(SJe,zJe)),n[o]=s}}function cEe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Tae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Tae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return UY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);jA(e)}function jA(e,t){const n=new Ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=aEe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function BJe(e){const t={};let n;for(n in e)UY.call(e,n)&&(t[UJe(n)]=e[n]);return t}function UJe(e){let t=e.replace(xJe,VJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function zJe(e,t){return t.toUpperCase()}function VJe(e){return"-"+e.toLowerCase()}const Qj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},HJe={};function qJe(e,t){const n=HJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return fEe(e,r,i)}function fEe(e,t,n){if(WJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Lae(e.children,t,n)}return Array.isArray(e)?Lae(e,t,n):""}function Lae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=fEe(e[i],t,n);return r.join("")}function WJe(e){return!!(e&&typeof e=="object")}const Fae=document.createElement("i");function HY(e){const t="&"+e+";";Fae.innerHTML=t;const n=Fae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function xm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function mc(e,t){return e.length>0?(xm(e,e.length,0,t),e):t}const jae={}.hasOwnProperty;function GJe(e){const t={};let n=-1;for(;++n<e.length;)YJe(t,e[n]);return t}function YJe(e,t){let n;for(n in t){const i=(jae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){jae.call(i,o)||(i[o]=[]);const a=s[o];KJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function KJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);xm(e,0,0,r)}function dEe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function eE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zd=My(/[A-Za-z]/),Tl=My(/[\dA-Za-z]/),XJe=My(/[#-'*+\--9=?A-Z^-~]/);function v7(e){return e!==null&&(e<32||e===127)}const b7=My(/\d/),QJe=My(/[\dA-Fa-f]/),JJe=My(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function Hu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const ZJe=My(new RegExp("\\p{P}|\\p{S}","u")),eZe=My(/\s/);function My(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function dS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Tl(e.charCodeAt(n+1))&&Tl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const tZe={tokenize:nZe};function nZe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const rZe={tokenize:iZe},Bae={tokenize:sZe};function iZe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,x;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){x=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},x),S++;return xm(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Bae,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Bae,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return en(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const S=t.events.length;let C=S,A,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){k=t.events[C][1].end;break}A=!0}for(y(r),x=S;x<t.events.length;)t.events[x][1].end=Object.assign({},k),x++;xm(t.events,C+1,0,t.events.slice(S)),t.events.length=x}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function sZe(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Uae(e){if(e===null||Hu(e)||eZe(e))return 1;if(ZJe(e))return 2}function qY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const _7={name:"attention",tokenize:aZe,resolveAll:oZe};function oZe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);zae(f,-u),zae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=mc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=mc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=mc(l,qY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=mc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=mc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,xm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function aZe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Uae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Uae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function zae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const uZe={name:"autolink",tokenize:lZe};function lZe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return zd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Tl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Tl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||v7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):XJe(h)?(e.consume(h),l):n(h)}function c(h){return Tl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Tl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const d6={tokenize:cZe,partial:!0};function cZe(e,t,n){return r;function r(s){return br(s)?ni(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const hEe={name:"blockQuote",tokenize:fZe,continuation:{tokenize:dZe},exit:hZe};function fZe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function dZe(e,t,n){const r=this;return i;function i(o){return br(o)?ni(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(hEe,t,n)(o)}}function hZe(e){e.exit("blockQuote")}const pEe={name:"characterEscape",tokenize:pZe};function pZe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return JJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const mEe={name:"characterReference",tokenize:mZe};function mZe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Tl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=QJe,c):(e.enter("characterReferenceValue"),s=7,o=b7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Tl&&!HY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Vae={tokenize:yZe,partial:!0},Hae={name:"codeFenced",tokenize:gZe,concrete:!0};function gZe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),br(x)?ni(e,f,"whitespace")(x):f(x))}function f(x){return x===null||en(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(Vae,m,w)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||en(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):br(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),d)}function h(x){return x===null||en(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||en(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,w,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&br(x)?ni(e,v,"linePrefix",s+1)(x):v(x)}function v(x){return x===null||en(x)?e.check(Vae,m,w)(x):(e.enter("codeFlowValue"),_(x))}function _(x){return x===null||en(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),_)}function w(x){return e.exit("codeFenced"),t(x)}function E(x,S,C){let A=0;return k;function k(F){return x.enter("lineEnding"),x.consume(F),x.exit("lineEnding"),N}function N(F){return x.enter("codeFencedFence"),br(F)?ni(x,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(x.enter("codeFencedFenceSequence"),D(F)):C(F)}function D(F){return F===a?(A++,x.consume(F),D):A>=o?(x.exit("codeFencedFenceSequence"),br(F)?ni(x,$,"whitespace")(F):$(F)):C(F)}function $(F){return F===null||en(F)?(x.exit("codeFencedFence"),S(F)):C(F)}}}function yZe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Jj={name:"codeIndented",tokenize:bZe},vZe={tokenize:_Ze,partial:!0};function bZe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(vZe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function _Ze(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const wZe={name:"codeText",tokenize:SZe,resolve:EZe,previous:xZe};function EZe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function xZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class TZe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&CT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),CT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),CT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);CT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);CT(this.left,n.reverse())}}}function CT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function gEe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new TZe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,CZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return xm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function CZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const AZe={tokenize:RZe,resolve:kZe},IZe={tokenize:NZe,partial:!0};function kZe(e){return gEe(e),e}function RZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(IZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function NZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function yEe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||v7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Hu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||v7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function vEe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function bEe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function EC(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const PZe={name:"definition",tokenize:OZe},DZe={tokenize:$Ze,partial:!0};function OZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return vEe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=eE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Hu(h)?EC(e,l)(h):l(h)}function l(h){return yEe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(DZe,f,f)(h)}function f(h){return br(h)?ni(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function $Ze(e,t,n){return r;function r(a){return Hu(a)?EC(e,i)(a):n(a)}function i(a){return bEe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ni(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const MZe={name:"hardBreakEscape",tokenize:LZe};function LZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const FZe={name:"headingAtx",tokenize:BZe,resolve:jZe};function jZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},xm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function BZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Hu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):br(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Hu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const UZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],qae=["pre","script","style","textarea"],zZe={name:"htmlFlow",tokenize:WZe,resolveTo:qZe,concrete:!0},VZe={tokenize:YZe,partial:!0},HZe={tokenize:GZe,partial:!0};function qZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function WZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):zd(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Hu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&qae.includes(G)?(i=1,r.interrupt?t(j):O(j)):UZe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):_(j))}return j===45||Tl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return br(j)?(e.consume(j),v):k(j)}function _(j){return j===47?(e.consume(j),k):j===58||j===95||zd(j)?(e.consume(j),w):br(j)?(e.consume(j),_):k(j)}function w(j){return j===45||j===46||j===58||j===95||Tl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),x):br(j)?(e.consume(j),E):_(j)}function x(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):br(j)?(e.consume(j),x):C(j)}function S(j){return j===u?(e.consume(j),u=null,A):j===null||en(j)?n(j):(e.consume(j),S)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Hu(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||br(j)?_(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||en(j)?O(j):br(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(VZe,W,D)(j)):j===null||en(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(HZe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?D(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return qae.includes(q)?(e.consume(j),z):O(j)}return zd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),P):O(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function GZe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function YZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(d6,t,n)}}const KZe={name:"htmlText",tokenize:XZe};function XZe(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),_):zd(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):zd(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):en(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?M(P):P===45?d(P):f(P)}function p(P){const z="CDATA[";return P===z.charCodeAt(s++)?(e.consume(P),s===z.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):en(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?M(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?M(P):en(P)?(o=v,B(P)):(e.consume(P),v)}function _(P){return P===null?n(P):P===63?(e.consume(P),w):en(P)?(o=_,B(P)):(e.consume(P),_)}function w(P){return P===62?M(P):_(P)}function E(P){return zd(P)?(e.consume(P),x):n(P)}function x(P){return P===45||Tl(P)?(e.consume(P),x):S(P)}function S(P){return en(P)?(o=S,B(P)):br(P)?(e.consume(P),S):M(P)}function C(P){return P===45||Tl(P)?(e.consume(P),C):P===47||P===62||Hu(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),M):P===58||P===95||zd(P)?(e.consume(P),k):en(P)?(o=A,B(P)):br(P)?(e.consume(P),A):M(P)}function k(P){return P===45||P===46||P===58||P===95||Tl(P)?(e.consume(P),k):N(P)}function N(P){return P===61?(e.consume(P),O):en(P)?(o=N,B(P)):br(P)?(e.consume(P),N):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):en(P)?(o=O,B(P)):br(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):en(P)?(o=D,B(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Hu(P)?A(P):(e.consume(P),$)}function F(P){return P===47||P===62||Hu(P)?A(P):n(P)}function M(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return br(P)?ni(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),o(P)}}const WY={name:"labelEnd",tokenize:net,resolveTo:tet,resolveAll:eet},QZe={tokenize:ret},JZe={tokenize:iet},ZZe={tokenize:set};function eet(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function tet(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=mc(a,e.slice(s+1,s+r+3)),a=mc(a,[["enter",c,t]]),a=mc(a,qY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=mc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=mc(a,e.slice(o+1)),a=mc(a,[["exit",u,t]]),xm(e,s,e.length,a),e}function net(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(eE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(QZe,c,o?c:f)(d):d===91?e.attempt(JZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(ZZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function ret(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Hu(f)?EC(e,s)(f):s(f)}function s(f){return f===41?c(f):yEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Hu(f)?EC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?bEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Hu(f)?EC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function iet(e,t,n){const r=this;return i;function i(a){return vEe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(eE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function set(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const oet={name:"labelStartImage",tokenize:aet,resolveAll:WY.resolveAll};function aet(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const uet={name:"labelStartLink",tokenize:cet,resolveAll:WY.resolveAll};function cet(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Zj={name:"lineEnding",tokenize:fet};function fet(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const gD={name:"thematicBreak",tokenize:det};function det(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ni(e,a,"whitespace")(l):a(l))}}const yu={name:"list",tokenize:met,continuation:{tokenize:get},exit:vet},het={tokenize:bet,partial:!0},pet={tokenize:yet,partial:!0};function met(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:b7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(gD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return b7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(d6,r.interrupt?n:c,e.attempt(het,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function get(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(d6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(pet,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(yu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function yet(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function vet(e){e.exit(this.containerState.type)}function bet(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Wae={name:"setextUnderline",tokenize:wet,resolveTo:_et};function _et(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function wet(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ni(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Eet={tokenize:xet};function xet(e){const t=this,n=e.attempt(d6,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(AZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Tet={resolveAll:wEe()},Cet=_Ee("string"),Aet=_Ee("text");function _Ee(e){return{tokenize:t,resolveAll:wEe(e==="text"?Iet:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function wEe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Iet(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function ket(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:S(E),check:S(x),interrupt:S(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=mc(o,N),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=qY(s,l.events,l),l.events)}function d(N,O){return Net(h(N),O)}function h(N){return Ret(o,N)}function p(){const{line:N,column:O,offset:D,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:D,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){en(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function _(N,O){const D=O||{};return D.type=N,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){C(N,O.from)}function x(N,O){O.restore()}function S(N,O){return D;function D($,F,M){let B,U,H,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?M:j(ne[U])}function j(ne){return ce;function ce(de){return P=A(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(de)}}function q(ne){return N(H,P),F}function G(ne){return P.restore(),++U<B.length?j(B[U]):M}}}function C(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&xm(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function A(){const N=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=O,l.currentConstruct=D,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ret(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Net(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Pet={42:yu,43:yu,45:yu,48:yu,49:yu,50:yu,51:yu,52:yu,53:yu,54:yu,55:yu,56:yu,57:yu,62:hEe},Det={91:PZe},Oet={[-2]:Jj,[-1]:Jj,32:Jj},$et={35:FZe,42:gD,45:[Wae,gD],60:zZe,61:Wae,95:gD,96:Hae,126:Hae},Met={38:mEe,92:pEe},Let={[-5]:Zj,[-4]:Zj,[-3]:Zj,33:oet,38:mEe,42:_7,60:[uZe,KZe],91:uet,92:[MZe,pEe],93:WY,95:_7,96:wZe},Fet={null:[_7,Tet]},jet={null:[42,95]},Bet={null:[]},Uet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jet,contentInitial:Det,disable:Bet,document:Pet,flow:$et,flowInitial:Oet,insideSpan:Fet,string:Met,text:Let},Symbol.toStringTag,{value:"Module"}));function zet(e){const n=GJe([Uet,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(tZe),document:i(rZe),flow:i(Eet),string:i(Cet),text:i(Aet)};return r;function i(s){return o;function o(a){return ket(r,s,a)}}}function Vet(e){for(;!gEe(e););return e}const Gae=/[\0\t\n\r]/g;function Het(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Gae.lastIndex=f,l=Gae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const qet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Wet(e){return e.replace(qet,Get)}function Get(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return dEe(n.slice(s?2:1),s?16:10)}return HY(n)||e}const EEe={}.hasOwnProperty;function Yet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ket(n)(Vet(zet(n).document().write(Het()(e,t,!0))))}function Ket(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ve),characterEscape:A,characterReference:A,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:A,htmlText:s(_e,o),htmlTextData:A,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:x,strong:u(),thematicBreak:u()}};xEe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(me){let Ae={type:"root",children:[]};const He={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<me.length;)if(me[_t][1].type==="listOrdered"||me[_t][1].type==="listUnordered")if(me[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(me,Ln,_t)}for(_t=-1;++_t<me.length;){const Ln=t[me[_t][0]];EEe.call(Ln,me[_t][1].type)&&Ln[me[_t][1].type].call(Object.assign({sliceSerialize:me[_t][2].sliceSerialize},He),me[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Yae).call(He,void 0,Ln[0])}for(Ae.position={start:vg(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:vg(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ae=t.transforms[_t](Ae)||Ae;return Ae}function i(me,Ae,He){let ut=Ae-1,_t=-1,Ln=!1,Cr,Fn,cr,gn;for(;++ut<=He;){const An=me[ut];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?_t++:_t--,gn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(Cr&&!gn&&!_t&&!cr&&(cr=ut),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!_t&&An[0]==="enter"&&An[1].type==="listItemPrefix"||_t===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(Cr){let nr=ut;for(Fn=void 0;nr--;){const rr=me[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(me[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Cr._spread=!0),Cr.end=Object.assign({},Fn?me[Fn][1].start:An[1].end),me.splice(Fn||ut,0,["exit",Cr,An[2]]),ut++,He++}if(An[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};Cr=nr,me.splice(ut,0,["enter",nr,An[2]]),ut++,He++,cr=void 0,gn=!0}}}return me[Ae][1]._spread=Ln,He}function s(me,Ae){return He;function He(ut){a.call(this,me(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(me,Ae,He){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Ae,He]),me.position={start:vg(Ae.start),end:void 0}}function u(me){return Ae;function Ae(He){me&&me.call(this,He),l.call(this,He)}}function l(me,Ae){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==me.type&&(Ae?Ae.call(this,me,ut[0]):(ut[1]||Yae).call(this,me,ut[0]));else throw new Error("Cannot close `"+me.type+"` ("+wC({start:me.start,end:me.end})+"): it’s not open");He.position.end=vg(me.end)}function c(){return qJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(me){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function h(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=me}function p(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=me}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/(\r?\n|\r)$/g,"")}function v(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=eE(this.sliceSerialize(me)).toLowerCase()}function _(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function w(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function E(me){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const He=this.sliceSerialize(me).length;Ae.depth=He}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(me){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(me){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:vg(me.start),end:void 0},He.push(ut)),this.stack.push(ut)}function k(me){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(me),Ae.position.end=vg(me.end)}function N(me){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ae.children[Ae.children.length-1];He.position.end=vg(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(A.call(this,me),k.call(this,me))}function O(){this.data.atHardBreak=!0}function D(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function $(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function F(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function M(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function B(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function U(me){const Ae=this.sliceSerialize(me),He=this.stack[this.stack.length-2];He.label=Wet(Ae),He.identifier=eE(Ae).toLowerCase()}function H(){const me=this.stack[this.stack.length-1],Ae=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=me.children;He.children=ut}else He.alt=Ae}function P(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function z(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=eE(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function G(me){this.data.characterReferenceType=me.type}function ne(me){const Ae=this.sliceSerialize(me),He=this.data.characterReferenceType;let ut;He?(ut=dEe(Ae,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=HY(Ae);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(me){const Ae=this.stack.pop();Ae.position.end=vg(me.end)}function de(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(me)}function he(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(me)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ot(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function vg(e){return{line:e.line,column:e.column,offset:e.offset}}function xEe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?xEe(e,r):Xet(e,r)}}function Xet(e,t){let n;for(n in t)if(EEe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Yae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+wC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+wC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+wC({start:t.start,end:t.end})+") is still open")}function Qet(e){const t=this;t.parser=n;function n(r){return Yet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Jet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Zet(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ett(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function ttt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ntt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rtt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=dS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function itt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function stt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function SEe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function ott(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return SEe(e,t);const i={src:dS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function att(e,t){const n={src:dS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function utt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function ltt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return SEe(e,t);const i={href:dS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function ctt(e,t){const n={href:dS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ftt(e,t,n){const r=e.all(t),i=n?dtt(n):TEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function dtt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=TEe(n[r])}return t}function TEe(e){const t=e.spread;return t??e.children.length>1}function htt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function ptt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mtt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function gtt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ytt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Kh(t.children[1]),u=f6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function vtt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function btt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Kae=9,Xae=32;function _tt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Qae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Qae(t.slice(i),i>0,!1)),s.join("")}function Qae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Kae||s===Xae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Kae||s===Xae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function wtt(e,t){const n={type:"text",value:_tt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Ett(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const xtt={blockquote:Jet,break:Zet,code:ett,delete:ttt,emphasis:ntt,footnoteReference:rtt,heading:itt,html:stt,imageReference:ott,image:att,inlineCode:utt,linkReference:ltt,link:ctt,listItem:ftt,list:htt,paragraph:ptt,root:mtt,strong:gtt,table:ytt,tableCell:btt,tableRow:vtt,text:wtt,thematicBreak:Ett,toml:DN,yaml:DN,definition:DN,footnoteDefinition:DN};function DN(){}const CEe=-1,h6=0,r3=1,i3=2,GY=3,YY=4,KY=5,XY=6,AEe=7,IEe=8,Jae=typeof self=="object"?self:globalThis,Stt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case h6:case CEe:return n(o,i);case r3:{const a=n([],i);for(const u of o)a.push(r(u));return a}case i3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case GY:return n(new Date(o),i);case YY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case KY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case XY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case AEe:{const{name:a,message:u}=o;return n(new Jae[a](u),i)}case IEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Jae[s](o),i)};return r},Zae=e=>Stt(new Map,e)(0),P_="",{toString:Ttt}={},{keys:Ctt}=Object,AT=e=>{const t=typeof e;if(t!=="object"||!e)return[h6,t];const n=Ttt.call(e).slice(8,-1);switch(n){case"Array":return[r3,P_];case"Object":return[i3,P_];case"Date":return[GY,P_];case"RegExp":return[YY,P_];case"Map":return[KY,P_];case"Set":return[XY,P_]}return n.includes("Array")?[r3,n]:n.includes("Error")?[AEe,n]:[i3,n]},ON=([e,t])=>e===h6&&(t==="function"||t==="symbol"),Att=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=AT(o);switch(a){case h6:{let c=o;switch(u){case"bigint":a=IEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([CEe],o)}return i([a,c],o)}case r3:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case i3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Ctt(o))(e||!ON(AT(o[d])))&&c.push([s(d),s(o[d])]);return f}case GY:return i([a,o.toISOString()],o);case YY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case KY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(ON(AT(d))||ON(AT(h))))&&c.push([s(d),s(h)]);return f}case XY:{const c=[],f=i([a,c],o);for(const d of o)(e||!ON(AT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},eue=(e,{json:t,lossy:n}={})=>{const r=[];return Att(!(t||n),!!t,new Map,r)(e),r},UE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Zae(eue(e,t)):structuredClone(e):(e,t)=>Zae(eue(e,t));function Itt(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ktt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Rtt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Itt,r=e.options.footnoteBackLabel||ktt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=dS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...UE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const kEe=function(e){if(e==null)return Ott;if(typeof e=="function")return p6(e);if(typeof e=="object")return Array.isArray(e)?Ntt(e):Ptt(e);if(typeof e=="string")return Dtt(e);throw new Error("Expected function, string, or object as test")};function Ntt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=kEe(e[n]);return p6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Ptt(e){const t=e;return p6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Dtt(e){return p6(t);function t(n){return n&&n.type===e}}function p6(e){return t;function t(n,r,i){return!!($tt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ott(){return!0}function $tt(e){return e!==null&&typeof e=="object"&&"type"in e}const REe=[],Mtt=!0,tue=!1,Ltt="skip";function Ftt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=kEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=REe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=jtt(n(u,c)),h[0]===tue))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Ltt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===tue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function jtt(e){return Array.isArray(e)?e:typeof e=="number"?[Mtt,e]:e==null?REe:[e]}function QY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Ftt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const w7={}.hasOwnProperty,Btt={};function Utt(e,t){const n=t||Btt,r=new Map,i=new Map,s=new Map,o={...xtt,...n.handlers},a={all:l,applyData:Vtt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:ztt,wrap:qtt};return QY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(w7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=UE(g);return y.children=a.all(c),y}return UE(c)}return(a.options.unknownHandler||Htt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=nue(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=nue(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function ztt(e,t){e.position&&(t.position=wJe(e))}function Vtt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,UE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Htt(e,t){const n=t.data||{},r="value"in t&&!(w7.call(n,"hProperties")||w7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qtt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function nue(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function rue(e,t){const n=Utt(e,t),r=n.one(e,void 0),i=Rtt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Wtt(e,t){return e&&"run"in e?async function(n,r){const i=rue(n,{file:r,...t});await e.run(i,r)}:function(n,r){return rue(n,{file:r,...t||e})}}function iue(e){if(e)throw e}var yD=Object.prototype.hasOwnProperty,NEe=Object.prototype.toString,sue=Object.defineProperty,oue=Object.getOwnPropertyDescriptor,aue=function(t){return typeof Array.isArray=="function"?Array.isArray(t):NEe.call(t)==="[object Array]"},uue=function(t){if(!t||NEe.call(t)!=="[object Object]")return!1;var n=yD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&yD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||yD.call(t,i)},lue=function(t,n){sue&&n.name==="__proto__"?sue(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},cue=function(t,n){if(n==="__proto__")if(yD.call(t,n)){if(oue)return oue(t,n).value}else return;return t[n]},Gtt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=cue(a,n),i=cue(t,n),a!==i&&(c&&i&&(uue(i)||(s=aue(i)))?(s?(s=!1,o=r&&aue(r)?r:[]):o=r&&uue(r)?r:{},lue(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&lue(a,{name:n,newValue:i}));return a};const e8=Kl(Gtt);function E7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ytt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Ktt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Ktt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Pd={basename:Xtt,dirname:Qtt,extname:Jtt,join:Ztt,sep:"/"};function Xtt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');xk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Qtt(e){if(xk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Jtt(e){xk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ztt(...e){let t=-1,n;for(;++t<e.length;)xk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ent(n)}function ent(e){xk(e);const t=e.codePointAt(0)===47;let n=tnt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function tnt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function xk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const nnt={cwd:rnt};function rnt(){return"/"}function x7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function int(e){if(typeof e=="string")e=new URL(e);else if(!x7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return snt(e)}function snt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const t8=["history","path","basename","stem","extname","dirname"];class PEe{constructor(t){let n;t?x7(t)?n={path:t}:typeof t=="string"||ont(t)?n={value:t}:n=t:n={},this.cwd=nnt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<t8.length;){const s=t8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)t8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Pd.basename(this.path):void 0}set basename(t){r8(t,"basename"),n8(t,"basename"),this.path=Pd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Pd.dirname(this.path):void 0}set dirname(t){fue(this.basename,"dirname"),this.path=Pd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Pd.extname(this.path):void 0}set extname(t){if(n8(t,"extname"),fue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){x7(t)&&(t=int(t)),r8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Pd.basename(this.path,this.extname):void 0}set stem(t){r8(t,"stem"),n8(t,"stem"),this.path=Pd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ca(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function n8(e,t){if(e&&e.includes(Pd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Pd.sep+"`")}function r8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function fue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ont(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ant=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},unt={}.hasOwnProperty;class JY extends ant{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ytt()}copy(){const t=new JY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(e8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(o8("data",this.frozen),this.namespace[t]=n,this):unt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(o8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=$N(t),r=this.parser||this.Parser;return i8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),i8("process",this.parser||this.Parser),s8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=$N(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);fnt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),i8("processSync",this.parser||this.Parser),s8("processSync",this.compiler||this.Compiler),this.process(t,i),hue("processSync","process",n),r;function i(s,o){n=!0,iue(s),r=o}}run(t,n,r){due(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=$N(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),hue("runSync","run",r),i;function s(o,a){iue(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=$N(n),i=this.compiler||this.Compiler;return s8("stringify",i),due(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(o8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=e8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];E7(m)&&E7(h)&&(h=e8(!0,m,h)),r[d]=[l,h,...p]}}}}const lnt=new JY().freeze();function i8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function s8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function o8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function due(e){if(!E7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function hue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $N(e){return cnt(e)?e:new PEe(e)}function cnt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fnt(e){return typeof e=="string"||dnt(e)}function dnt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hnt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pue=[],mue={allowDangerousHtml:!0},pnt=/^(https?|ircs?|mailto|xmpp)$/i,mnt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gnt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||pue,u=e.remarkPlugins||pue,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...mue}:mue,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||ynt,h=lnt().use(Qet).use(u).use(Wtt,l).use(a),p=new PEe;typeof r=="string"&&(p.value=r);for(const v of mnt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+hnt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),QY(g,y),AJe(g,{Fragment:b.Fragment,components:s,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,w){if(v.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let E;for(E in Qj)if(Object.hasOwn(Qj,E)&&Object.hasOwn(v.properties,E)){const x=v.properties[E],S=Qj[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(x||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof _=="number"&&(E=!n(v,_,w)),E&&w&&typeof _=="number")return f&&v.children?w.children.splice(_,1,...v.children):w.children.splice(_,1),_}}}function ynt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||pnt.test(e.slice(0,t))?e:""}const gue=/[#.]/g;function vnt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){gue.lastIndex=i;const a=gue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const bnt=new Set(["button","menu","reset","submit"]),S7={}.hasOwnProperty;function DEe(e,t,n){const r=n&&xnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=vnt(s,t),l.tagName=l.tagName.toLowerCase(),r&&S7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),_nt(o,l.tagName)){let c;for(c in o)S7.call(o,c)&&wnt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)T7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function _nt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?bnt.has(e.type.toLowerCase()):!("value"in e)}function wnt(e,t,n,r){const i=c6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=kae(r):i.commaSeparated?o=Sae(r):i.commaOrSpaceSeparated?o=kae(Sae(r).join(" ")):o=yue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Ent(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=yue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function T7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)T7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?T7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function yue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||FA(n)===FA(t)))return!0}return n}function Ent(e){const t=[];let n;for(n in e)S7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function xnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Snt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Tnt=DEe(Ek,"div"),Cnt=DEe($y,"g",Snt),a8=/\r?\n|\r/g;function Ant(e){const t=String(e),n=[];for(a8.lastIndex=0;a8.test(t);)n.push(a8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const av={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},OEe={}.hasOwnProperty,Int=Object.prototype;function knt(e,t){const n=t||{};return ZY({file:n.file||void 0,location:!1,schema:n.space==="svg"?$y:Ek,verbose:n.verbose||!1},e)}function ZY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},vD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:$Ee(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Ant(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},vD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},vD(e,r,n),n}default:return n=Rnt(e,t),n}}function $Ee(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=ZY(e,t[n]);r.push(i)}return r}function Rnt(e,t){const n=e.schema;e.schema=t.namespaceURI===av.svg?$y:Ek;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;OEe.call(Int,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Cnt:Tnt)(t.tagName,i,$Ee(e,t.childNodes));if(vD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Iw(u.startTag),c=u&&u.endTag&&Iw(u.endTag),f=ZY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function vD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Nnt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Nnt(e,t,n){const r=Iw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)OEe.call(n.attrs,o)&&(s[c6(e.schema,o).property]=Iw(n.attrs[o]));n.startTag;const a=Iw(n.startTag),u=n.endTag?Iw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Iw(e){const t=vue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=vue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function vue(e){return e.line&&e.column?e:void 0}const bue={}.hasOwnProperty;function MEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&bue.call(i,e)){const u=String(i[e]);o=bue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Pnt={},Dnt={}.hasOwnProperty,LEe=MEe("type",{handlers:{root:$nt,element:Bnt,text:Fnt,comment:jnt,doctype:Lnt}});function Ont(e,t){const r=(t||Pnt).space;return LEe(e,r==="svg"?$y:Ek)}function $nt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=eK(e.children,n,t),hS(e,n),n}function Mnt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=eK(e.children,n,t),hS(e,n),n}function Lnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return hS(e,t),t}function Fnt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return hS(e,t),t}function jnt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return hS(e,t),t}function Bnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=$y);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Dnt.call(e.properties,s)){const u=Unt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:av[o],childNodes:[],parentNode:null};return a.childNodes=eK(e.children,a,r),hS(e,a),e.tagName==="template"&&e.content&&(a.content=Mnt(e.content,r)),a}function Unt(e,t,n){const r=c6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Kwe(n):iEe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=av[r.space]}return i}function eK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=LEe(e[r],n);s.parentNode=t,i.push(s)}return i}function hS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const znt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Vnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vi="�";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const pu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function FEe(e){return e>=55296&&e<=57343}function Hnt(e){return e>=56320&&e<=57343}function qnt(e,t){return(e-55296)*1024+9216+t}function jEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function BEe(e){return e>=64976&&e<=65007||Vnt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const Wnt=65536;class Gnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Wnt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Hnt(n))return this.pos++,this._addGap(),qnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,FEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){jEe(t)?this._err(Ne.controlCharacterInInputStream):BEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function UEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Sg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),Ynt=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var u8;const Knt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Xnt=(u8=String.fromCodePoint)!==null&&u8!==void 0?u8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Qnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Knt.get(e))!==null&&t!==void 0?t:e}var Zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Zs||(Zs={}));const Jnt=32;var th;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(th||(th={}));function C7(e){return e>=Zs.ZERO&&e<=Zs.NINE}function Znt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_F||e>=Zs.LOWER_A&&e<=Zs.LOWER_F}function ert(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_Z||e>=Zs.LOWER_A&&e<=Zs.LOWER_Z||C7(e)}function trt(e){return e===Zs.EQUALS||ert(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var H1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(H1||(H1={}));class nrt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=H1.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Zs.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Jnt)===Zs.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(C7(i)||Znt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(C7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Zs.SEMI)this.consumed+=1;else if(this.decodeMode===H1.Strict)return 0;return this.emitCodePoint(Qnt(this.result),this.consumed),this.errors&&(t!==Zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&th.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=VEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===H1.Attribute&&(s===0||trt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&th.VALUE_LENGTH)>>14,s!==0){if(o===Zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==H1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&th.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~th.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==H1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function zEe(e){let t="";const n=new nrt(e,r=>t+=Xnt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function VEe(e,t,n,r){const i=(t&th.BRANCH_LENGTH)>>7,s=t&th.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}zEe(Sg);zEe(Ynt);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var E0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(E0=E0||(E0={}));var yl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(yl=yl||(yl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const rrt=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function pS(e){var t;return(t=rrt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Je=R,irt={[Fe.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Fe.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Fe.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function HEe(e){return e===Je.H1||e===Je.H2||e===Je.H3||e===Je.H4||e===Je.H5||e===Je.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const srt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const os={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function xC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function x2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function ort(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Tg(e){return ort(e)||x2(e)}function A7(e){return Tg(e)||xC(e)}function qEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function WEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function art(e){return xC(e)||qEe(e)||WEe(e)}function MN(e){return e+32}function GEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function urt(e){return e===X.EQUALS_SIGN||A7(e)}function _ue(e){return GEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class lrt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Gnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(UEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=pS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=GEe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Sg[0];s>=0&&(s=VEe(Sg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Sg[s];const a=o&th.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&urt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Sg[s]&~th.VALUE_LENGTH]:u===1?[Sg[++s]]:[Sg[++s],Sg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Tg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Tg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(x2(t)?MN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Tg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Tg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Tg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&_ue(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&_ue(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=vi;break}default:this.currentAttr.name+=String.fromCodePoint(x2(t)?MN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(pu.DASH_DASH,!0)?(this._createCommentToken(pu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(pu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(pu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(pu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(pu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(x2(t))this._createDoctypeToken(String.fromCharCode(MN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(vi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=vi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(x2(t)?MN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(pu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(pu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:A7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){A7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:xC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){art(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){qEe(t)?this.charRefCode=this.charRefCode*16+t-55:WEe(t)?this.charRefCode=this.charRefCode*16+t-87:xC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){xC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(FEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(BEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(jEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=srt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const YEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),wue=new Set([...YEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),LN=new Map([[R.APPLET,Fe.HTML],[R.CAPTION,Fe.HTML],[R.HTML,Fe.HTML],[R.MARQUEE,Fe.HTML],[R.OBJECT,Fe.HTML],[R.TABLE,Fe.HTML],[R.TD,Fe.HTML],[R.TEMPLATE,Fe.HTML],[R.TH,Fe.HTML],[R.ANNOTATION_XML,Fe.MATHML],[R.MI,Fe.MATHML],[R.MN,Fe.MATHML],[R.MO,Fe.MATHML],[R.MS,Fe.MATHML],[R.MTEXT,Fe.MATHML],[R.DESC,Fe.SVG],[R.FOREIGN_OBJECT,Fe.SVG],[R.TITLE,Fe.SVG]]),crt=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],frt=[R.TR,R.TEMPLATE,R.HTML],drt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],hrt=[R.TABLE,R.TEMPLATE,R.HTML],prt=[R.TD,R.TH];class mrt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(crt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(prt,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(hrt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(drt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(frt,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(LN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(HEe(n)&&r===Fe.HTML)return!0;if(LN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===R.UL||r===R.OL)&&i===Fe.HTML||LN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===R.BUTTON&&i===Fe.HTML||LN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;YEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;wue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&wue.has(this.currentTagId);)this.pop()}}const l8=3;var wf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(wf=wf||(wf={}));const Eue={type:wf.Marker};class grt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===wf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<l8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<l8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=l8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Eue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:wf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:wf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Eue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===wf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===wf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===wf.Element&&n.element===t)}}function xue(e){return{nodeName:"#text",value:e,parentNode:null}}const iw={createDocument(){return{nodeName:"#document",mode:yl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};iw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(iw.isTextNode(n)){n.value+=t;return}}iw.appendChild(e,xue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&iw.isTextNode(r)?r.value+=t:iw.insertBefore(e,xue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},KEe="html",yrt="about:legacy-compat",vrt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",XEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],brt=[...XEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_rt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),QEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],wrt=[...QEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Sue(e,t){return t.some(n=>e.startsWith(n))}function Ert(e){return e.name===KEe&&e.publicId===null&&(e.systemId===null||e.systemId===yrt)}function xrt(e){if(e.name!==KEe)return yl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===vrt)return yl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),_rt.has(n))return yl.QUIRKS;let r=t===null?brt:XEe;if(Sue(n,r))return yl.QUIRKS;if(r=t===null?QEe:wrt,Sue(n,r))return yl.LIMITED_QUIRKS}return yl.NO_QUIRKS}const Tue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Srt="definitionurl",Trt="definitionURL",Crt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Art=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),Irt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),krt=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function Rrt(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===E0.COLOR||r===E0.SIZE||r===E0.FACE)||krt.has(t)}function JEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Srt){e.attrs[t].name=Trt;break}}function ZEe(e){for(let t=0;t<e.attrs.length;t++){const n=Crt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function tK(e){for(let t=0;t<e.attrs.length;t++){const n=Art.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Nrt(e){const t=Irt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=pS(e.tagName))}function Prt(e,t){return t===Fe.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function Drt(e,t,n){if(t===Fe.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===E0.ENCODING){const i=n[r].value.toLowerCase();return i===Tue.TEXT_HTML||i===Tue.APPLICATION_XML}}return t===Fe.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function Ort(e,t,n,r){return(!r||r===Fe.HTML)&&Drt(e,t,n)||(!r||r===Fe.MATHML)&&Prt(e,t)}const $rt="hidden",Mrt=8,Lrt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Frt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},exe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),Cue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:iw,onParseError:null};let Aue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Cue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new lrt(this.options,this),this.activeFormattingElements=new grt(this.treeAdapter),this.fragmentContextID=r?pS(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new mrt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Cue,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Frt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=os.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=os.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=os.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=os.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=os.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ort(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===wf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return exe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return irt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){pst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{IT(this,t);break}case ie.BEFORE_HTML:{SC(this,t);break}case ie.BEFORE_HEAD:{TC(this,t);break}case ie.IN_HEAD:{CC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{AC(this,t);break}case ie.AFTER_HEAD:{IC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{nxe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{c8(this,t);break}case ie.IN_TABLE_TEXT:{uxe(this,t);break}case ie.IN_COLUMN_GROUP:{s3(this,t);break}case ie.AFTER_BODY:{o3(this,t);break}case ie.AFTER_AFTER_BODY:{bD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{IT(this,t);break}case ie.BEFORE_HTML:{SC(this,t);break}case ie.BEFORE_HEAD:{TC(this,t);break}case ie.IN_HEAD:{CC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{AC(this,t);break}case ie.AFTER_HEAD:{IC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{c8(this,t);break}case ie.IN_COLUMN_GROUP:{s3(this,t);break}case ie.AFTER_BODY:{o3(this,t);break}case ie.AFTER_AFTER_BODY:{bD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){I7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{I7(this,t);break}case ie.IN_TABLE_TEXT:{kT(this,t);break}case ie.AFTER_BODY:{qrt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Wrt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Grt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{kT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?mst(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{IT(this,t);break}case ie.BEFORE_HTML:{Yrt(this,t);break}case ie.BEFORE_HEAD:{Xrt(this,t);break}case ie.IN_HEAD:{ad(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Zrt(this,t);break}case ie.AFTER_HEAD:{tit(this,t);break}case ie.IN_BODY:{Aa(this,t);break}case ie.IN_TABLE:{zE(this,t);break}case ie.IN_TABLE_TEXT:{kT(this,t);break}case ie.IN_CAPTION:{Qit(this,t);break}case ie.IN_COLUMN_GROUP:{iK(this,t);break}case ie.IN_TABLE_BODY:{y6(this,t);break}case ie.IN_ROW:{v6(this,t);break}case ie.IN_CELL:{est(this,t);break}case ie.IN_SELECT:{fxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{nst(this,t);break}case ie.IN_TEMPLATE:{ist(this,t);break}case ie.AFTER_BODY:{ost(this,t);break}case ie.IN_FRAMESET:{ast(this,t);break}case ie.AFTER_FRAMESET:{lst(this,t);break}case ie.AFTER_AFTER_BODY:{fst(this,t);break}case ie.AFTER_AFTER_FRAMESET:{dst(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?gst(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{IT(this,t);break}case ie.BEFORE_HTML:{Krt(this,t);break}case ie.BEFORE_HEAD:{Qrt(this,t);break}case ie.IN_HEAD:{Jrt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{eit(this,t);break}case ie.AFTER_HEAD:{nit(this,t);break}case ie.IN_BODY:{g6(this,t);break}case ie.TEXT:{Uit(this,t);break}case ie.IN_TABLE:{BA(this,t);break}case ie.IN_TABLE_TEXT:{kT(this,t);break}case ie.IN_CAPTION:{Jit(this,t);break}case ie.IN_COLUMN_GROUP:{Zit(this,t);break}case ie.IN_TABLE_BODY:{k7(this,t);break}case ie.IN_ROW:{cxe(this,t);break}case ie.IN_CELL:{tst(this,t);break}case ie.IN_SELECT:{dxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{rst(this,t);break}case ie.IN_TEMPLATE:{sst(this,t);break}case ie.AFTER_BODY:{pxe(this,t);break}case ie.IN_FRAMESET:{ust(this,t);break}case ie.AFTER_FRAMESET:{cst(this,t);break}case ie.AFTER_AFTER_BODY:{bD(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{IT(this,t);break}case ie.BEFORE_HTML:{SC(this,t);break}case ie.BEFORE_HEAD:{TC(this,t);break}case ie.IN_HEAD:{CC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{AC(this,t);break}case ie.AFTER_HEAD:{IC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{oxe(this,t);break}case ie.TEXT:{zit(this,t);break}case ie.IN_TABLE_TEXT:{kT(this,t);break}case ie.IN_TEMPLATE:{hxe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{rK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{txe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{c8(this,t);break}case ie.IN_TABLE_TEXT:{axe(this,t);break}}}};function jrt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):sxe(e,t),n}function Brt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Urt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Lrt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=zrt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function zrt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Vrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=pS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Hrt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function nK(e,t){for(let n=0;n<Mrt;n++){const r=jrt(e,t);if(!r)break;const i=Brt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Urt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Vrt(e,o,s),Hrt(e,i,r)}}function I7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function qrt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Wrt(e,t){e._appendCommentNode(t,e.document)}function rK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Grt(e,t){e._setDocumentType(t);const n=t.forceQuirks?yl.QUIRKS:xrt(t);Ert(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function IT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,yl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Yrt(e,t){t.tagID===R.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):SC(e,t)}function Krt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&SC(e,t)}function SC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Xrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:TC(e,t)}}function Qrt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?TC(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function TC(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function ad(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,os.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,os.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,os.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,os.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:CC(e,t)}}function Jrt(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{CC(e,t);break}case R.TEMPLATE:{qb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function qb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function CC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Zrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{ad(e,t);break}case R.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:AC(e,t)}}function eit(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{AC(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function AC(e,t){const n=t.type===kn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function tit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),ad(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:IC(e,t)}}function nit(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{IC(e,t);break}case R.TEMPLATE:{qb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function IC(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,m6(e,t)}function m6(e,t){switch(t.type){case kn.CHARACTER:{nxe(e,t);break}case kn.WHITESPACE_CHARACTER:{txe(e,t);break}case kn.COMMENT:{I7(e,t);break}case kn.START_TAG:{Aa(e,t);break}case kn.END_TAG:{g6(e,t);break}case kn.EOF:{oxe(e,t);break}}}function txe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function nxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function rit(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function iit(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function sit(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function oit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function ait(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),HEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function uit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function lit(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function cit(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function fit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=os.PLAINTEXT}function dit(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function hit(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(nK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function pit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function mit(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(nK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function git(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function yit(e,t){e.treeAdapter.getDocumentMode(e.document)!==yl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function rxe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function ixe(e){const t=UEe(e,E0.TYPE);return t!=null&&t.toLowerCase()===$rt}function vit(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),ixe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function bit(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function _it(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function wit(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,rxe(e,t)}function Eit(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=os.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function xit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function Sit(e,t){e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function Iue(e,t){e._switchToTextParsing(t,os.RAWTEXT)}function Tit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Cit(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Ait(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function Iit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,Fe.HTML)}function kit(e,t){e._reconstructActiveFormattingElements(),JEe(t),tK(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function Rit(e,t){e._reconstructActiveFormattingElements(),ZEe(t),tK(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function kue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Aa(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{pit(e,t);break}case R.A:{hit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{ait(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{oit(e,t);break}case R.LI:case R.DD:case R.DT:{cit(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{rxe(e,t);break}case R.HR:{_it(e,t);break}case R.RB:case R.RTC:{Ait(e,t);break}case R.RT:case R.RP:{Iit(e,t);break}case R.PRE:case R.LISTING:{uit(e,t);break}case R.XMP:{xit(e,t);break}case R.SVG:{Rit(e,t);break}case R.HTML:{rit(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{ad(e,t);break}case R.BODY:{iit(e,t);break}case R.FORM:{lit(e,t);break}case R.NOBR:{mit(e,t);break}case R.MATH:{kit(e,t);break}case R.TABLE:{yit(e,t);break}case R.INPUT:{vit(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{bit(e,t);break}case R.IMAGE:{wit(e,t);break}case R.BUTTON:{dit(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{git(e,t);break}case R.IFRAME:{Sit(e,t);break}case R.SELECT:{Tit(e,t);break}case R.OPTION:case R.OPTGROUP:{Cit(e,t);break}case R.NOEMBED:{Iue(e,t);break}case R.FRAMESET:{sit(e,t);break}case R.TEXTAREA:{Eit(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?Iue(e,t):kue(e,t);break}case R.PLAINTEXT:{fit(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:kue(e,t)}}function Nit(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Pit(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,pxe(e,t))}function Dit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Oit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function $it(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function Mit(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function Lit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Fit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function jit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Bit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function sxe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function g6(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{nK(e,t);break}case R.P:{$it(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{Dit(e,t);break}case R.LI:{Mit(e);break}case R.DD:case R.DT:{Lit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Fit(e);break}case R.BR:{Bit(e);break}case R.BODY:{Nit(e,t);break}case R.HTML:{Pit(e,t);break}case R.FORM:{Oit(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{jit(e,t);break}case R.TEMPLATE:{qb(e,t);break}default:sxe(e,t)}}function oxe(e,t){e.tmplInsertionModeStack.length>0?hxe(e,t):rK(e,t)}function Uit(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function zit(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function c8(e,t){if(exe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{uxe(e,t);break}case kn.WHITESPACE_CHARACTER:{axe(e,t);break}}else Sk(e,t)}function Vit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Hit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function qit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,iK(e,t)}function Wit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Git(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,y6(e,t)}function Yit(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Kit(e,t){ixe(t)?e._appendElement(t,Fe.HTML):Sk(e,t),t.ackSelfClosing=!0}function Xit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function zE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{Git(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{ad(e,t);break}case R.COL:{qit(e,t);break}case R.FORM:{Xit(e,t);break}case R.TABLE:{Yit(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{Wit(e,t);break}case R.INPUT:{Kit(e,t);break}case R.CAPTION:{Vit(e,t);break}case R.COLGROUP:{Hit(e,t);break}default:Sk(e,t)}}function BA(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{qb(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:Sk(e,t)}}function Sk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,m6(e,t),e.fosterParentingEnabled=n}function axe(e,t){e.pendingCharacterTokens.push(t)}function uxe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function kT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Sk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const lxe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Qit(e,t){const n=t.tagID;lxe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,zE(e,t)):Aa(e,t)}function Jit(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&BA(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:g6(e,t)}}function iK(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{ad(e,t);break}default:s3(e,t)}}function Zit(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{qb(e,t);break}case R.COL:break;default:s3(e,t)}}function s3(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function y6(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,v6(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,zE(e,t));break}default:zE(e,t)}}function k7(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,BA(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:BA(e,t)}}function v6(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,y6(e,t));break}default:zE(e,t)}}function cxe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,k7(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,k7(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:BA(e,t)}}function est(e,t){const n=t.tagID;lxe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),v6(e,t)):Aa(e,t)}function tst(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),cxe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:g6(e,t)}}function fxe(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{ad(e,t);break}}}function dxe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{qb(e,t);break}}}function nst(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):fxe(e,t)}function rst(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):dxe(e,t)}function ist(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{ad(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,zE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,iK(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,y6(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,v6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Aa(e,t)}}function sst(e,t){t.tagID===R.TEMPLATE&&qb(e,t)}function hxe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):rK(e,t)}function ost(e,t){t.tagID===R.HTML?Aa(e,t):o3(e,t)}function pxe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else o3(e,t)}function o3(e,t){e.insertionMode=ie.IN_BODY,m6(e,t)}function ast(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.FRAMESET:{e._insertElement(t,Fe.HTML);break}case R.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{ad(e,t);break}}}function ust(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function lst(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{ad(e,t);break}}}function cst(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function fst(e,t){t.tagID===R.HTML?Aa(e,t):bD(e,t)}function bD(e,t){e.insertionMode=ie.IN_BODY,m6(e,t)}function dst(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{ad(e,t);break}}}function hst(e,t){t.chars=vi,e._insertCharacters(t)}function pst(e,t){e._insertCharacters(t),e.framesetOk=!1}function mxe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function mst(e,t){if(Rrt(t))mxe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?JEe(t):r===Fe.SVG&&(Nrt(t),ZEe(t)),tK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function gst(e,t){if(t.tagID===R.P||t.tagID===R.BR){mxe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const yst=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Rue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gxe(e,t){const n=Ast(e),r=MEe("type",{handlers:{root:vst,element:bst,text:_st,comment:vxe,doctype:wst,raw:xst},unknown:Sst}),i={parser:n?new Aue(Rue):Aue.getFragmentParser(void 0,Rue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),mS(i,Kh());const s=n?i.parser.document:i.parser.getFragment(),o=knt(s,{file:i.options.file});return i.stitches&&QY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function yxe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function vst(e,t){yxe(e.children,t)}function bst(e,t){Tst(e,t),yxe(e.children,t),Cst(e,t)}function _st(e,t){const n={type:kn.CHARACTER,chars:e.value,location:Tk(e)};mS(t,Kh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function wst(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Tk(e)};mS(t,Kh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Est(e,t){t.stitches=!0;const n=Ist(e);if("children"in e&&"children"in n){const r=gxe({type:"root",children:e.children},t.options);n.children=r.children}vxe({type:"comment",value:{stitch:n}},t)}function vxe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:Tk(e)};mS(t,Kh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function xst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,bxe(t,Kh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Sst(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Est(n,t);else{let r="";throw yst.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function mS(e,t){bxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=os.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function bxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Tst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===os.PLAINTEXT)return;mS(t,Kh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:av.html;i===av.html&&n==="svg"&&(i=av.svg);const s=Ont({...e,children:[]},{space:i===av.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:pS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Tk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Cst(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&znt.includes(n)||t.parser.tokenizer.state===os.PLAINTEXT)return;mS(t,f6(e));const r={type:kn.END_TAG,tagName:n,tagID:pS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Tk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===os.RCDATA||t.parser.tokenizer.state===os.RAWTEXT||t.parser.tokenizer.state===os.SCRIPT_DATA)&&(t.parser.tokenizer.state=os.DATA)}function Ast(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Tk(e){const t=Kh(e)||{line:void 0,column:void 0,offset:void 0},n=f6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Ist(e){return"children"in e?UE({...e,children:[]}):UE(e)}function kst(e){return function(t,n){return gxe(t,{...e,file:n})}}function Qa({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return b.jsx(Dy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return b.jsx(Xe,{...s,size:"xl",pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return b.jsx(ui,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return b.jsx(ui,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return b.jsx(ui,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return b.jsx(ui,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return b.jsx(ui,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return b.jsx(ui,{...s,order:6,...s,pb:12})},a({node:i,...s}){return b.jsx(Fb,{...s,ref:void 0})},ul({node:i,...s}){return b.jsx(Bf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return b.jsx(Bf,{type:"ordered",withPadding:!0,...o,pb:8})}};return b.jsx(gnt,{components:n,rehypePlugins:[kst],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function R7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(Qa,{text:n})}const Rst="https://github.com/revisit-studies/study/tree/main/public/";function Nst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Yh();return b.jsx(pi.Main,{children:b.jsxs(Oc,{size:"xs",px:"xs",children:[b.jsx(Dy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(Xe,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Ywe(i);return b.jsx(xs,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:b.jsxs(jb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:"bold",children:i}),b.jsxs(Nt,{align:"center",direction:"row",children:[b.jsx(Eae,{color:"red"}),b.jsx(Xe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(R7,{issues:s.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsxs(Nt,{direction:"row",justify:"space-between",children:[b.jsx(Xe,{fw:"bold",children:s.studyMetadata.title}),b.jsx(Lb,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Vu}${o}`,children:b.jsx(RQe,{style:{paddingTop:4}})})]}),b.jsxs(Xe,{c:"dimmed",children:[b.jsx(Xe,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),b.jsx(Xe,{c:"dimmed",children:s.studyMetadata.description}),b.jsx(Xe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Fb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Rst}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(Nt,{align:"center",direction:"row",children:[b.jsx(Eae,{color:"orange"}),b.jsx(Xe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(R7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var _xe={exports:{}},wxe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck=I;function Pst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dst=typeof Object.is=="function"?Object.is:Pst,Ost=Ck.useSyncExternalStore,$st=Ck.useRef,Mst=Ck.useEffect,Lst=Ck.useMemo,Fst=Ck.useDebugValue;wxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=$st(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Lst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Dst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Ost(e,s[0],s[1]);return Mst(function(){o.hasValue=!0,o.value=a},[a]),Fst(a),a};_xe.exports=wxe;var jst=_xe.exports,Cl="default"in vO?_r:vO,Nue=Symbol.for("react-redux-context"),Pue=typeof globalThis<"u"?globalThis:{};function Bst(){if(!Cl.createContext)return{};const e=Pue[Nue]??(Pue[Nue]=new Map);let t=e.get(Cl.createContext);return t||(t=Cl.createContext(null),e.set(Cl.createContext,t)),t}var z0=Bst(),Ust=()=>{throw new Error("uSES not initialized!")};function sK(e=z0){return function(){return Cl.useContext(e)}}var Exe=sK(),xxe=Ust,zst=e=>{xxe=e},Vst=(e,t)=>e===t;function Hst(e=z0){const t=e===z0?Exe:sK(e),n=(r,i={})=>{const{equalityFn:s=Vst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Cl.useRef(!0);const d=Cl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=xxe(u.addNestedSub,a.getState,l||a.getState,d,s);return Cl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var qst=Hst();function Wst(e){e()}function Gst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Wst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Due={notify(){},get:()=>[]};function Yst(e,t){let n,r=Due,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Gst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Due)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Kst=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xst=typeof navigator<"u"&&navigator.product==="ReactNative",Qst=Kst||Xst?Cl.useLayoutEffect:Cl.useEffect;function Jst({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Cl.useMemo(()=>{const l=Yst(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Cl.useMemo(()=>e.getState(),[e]);Qst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||z0;return Cl.createElement(u.Provider,{value:o},n)}var Zst=Jst;function Sxe(e=z0){const t=e===z0?Exe:sK(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var eot=Sxe();function tot(e=z0){const t=e===z0?eot:Sxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Txe=tot();zst(jst.useSyncExternalStoreWithSelector);function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var not=typeof Symbol=="function"&&Symbol.observable||"@@observable",Oue=not,f8=()=>Math.random().toString(36).substring(7).split("").join("."),rot={INIT:`@@redux/INIT${f8()}`,REPLACE:`@@redux/REPLACE${f8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${f8()}`},a3=rot;function oK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Cxe(e,t,n){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eo(1));return n(Cxe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Eo(3));return i}function f(g){if(typeof g!="function")throw new Error(Eo(4));if(u)throw new Error(Eo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Eo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!oK(g))throw new Error(Eo(7));if(typeof g.type>"u")throw new Error(Eo(8));if(typeof g.type!="string")throw new Error(Eo(17));if(u)throw new Error(Eo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Eo(10));r=g,d({type:a3.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Oue](){return this}}}return d({type:a3.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Oue]:p}}function iot(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:a3.INIT})>"u")throw new Error(Eo(12));if(typeof n(void 0,{type:a3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function sot(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{iot(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Eo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function u3(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function oot(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Eo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=u3(...a)(i.dispatch),{...i,dispatch:s}}}function aot(e){return oK(e)&&"type"in e&&typeof e.type=="string"}var Axe=Symbol.for("immer-nothing"),$ue=Symbol.for("immer-draftable"),Fl=Symbol.for("immer-state");function xf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var VE=Object.getPrototypeOf;function V0(e){return!!e&&!!e[Fl]}function Sm(e){var t;return e?Ixe(e)||Array.isArray(e)||!!e[$ue]||!!((t=e.constructor)!=null&&t[$ue])||_6(e)||w6(e):!1}var uot=Object.prototype.constructor.toString();function Ixe(e){if(!e||typeof e!="object")return!1;const t=VE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===uot}function l3(e,t){b6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function b6(e){const t=e[Fl];return t?t.type_:Array.isArray(e)?1:_6(e)?2:w6(e)?3:0}function N7(e,t){return b6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kxe(e,t,n){const r=b6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function lot(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function _6(e){return e instanceof Map}function w6(e){return e instanceof Set}function I1(e){return e.copy_||e.base_}function P7(e,t){if(_6(e))return new Map(e);if(w6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Ixe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Fl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(VE(e),r)}else{const r=VE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function aK(e,t=!1){return E6(e)||V0(e)||!Sm(e)||(b6(e)>1&&(e.set=e.add=e.clear=e.delete=cot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>aK(r,!0))),e}function cot(){xf(2)}function E6(e){return Object.isFrozen(e)}var fot={};function qv(e){const t=fot[e];return t||xf(0,e),t}var UA;function Rxe(){return UA}function dot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mue(e,t){t&&(qv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D7(e){O7(e),e.drafts_.forEach(hot),e.drafts_=null}function O7(e){e===UA&&(UA=e.parent_)}function Lue(e){return UA=dot(UA,e)}function hot(e){const t=e[Fl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Fl].modified_&&(D7(t),xf(4)),Sm(e)&&(e=c3(t,e),t.parent_||f3(t,e)),t.patches_&&qv("Patches").generateReplacementPatches_(n[Fl].base_,e,t.patches_,t.inversePatches_)):e=c3(t,n,[]),D7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Axe?e:void 0}function c3(e,t,n){if(E6(t))return t;const r=t[Fl];if(!r)return l3(t,(i,s)=>jue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return f3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),l3(s,(a,u)=>jue(e,r,i,a,u,n,o)),f3(e,i,!1),n&&e.patches_&&qv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function jue(e,t,n,r,i,s,o){if(V0(i)){const a=s&&t&&t.type_!==3&&!N7(t.assigned_,r)?s.concat(r):void 0,u=c3(e,i,a);if(kxe(n,r,u),V0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Sm(i)&&!E6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;c3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&f3(e,i)}}function f3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aK(t,n)}function pot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Rxe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=uK;n&&(i=[r],s=zA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var uK={get(e,t){if(t===Fl)return e;const n=I1(e);if(!N7(n,t))return mot(e,n,t);const r=n[t];return e.finalized_||!Sm(r)?r:r===d8(e.base_,t)?(h8(e),e.copy_[t]=M7(r,e)):r},has(e,t){return t in I1(e)},ownKeys(e){return Reflect.ownKeys(I1(e))},set(e,t,n){const r=Nxe(I1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=d8(I1(e),t),s=i==null?void 0:i[Fl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(lot(n,i)&&(n!==void 0||N7(e.base_,t)))return!0;h8(e),$7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return d8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,h8(e),$7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=I1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){xf(11)},getPrototypeOf(e){return VE(e.base_)},setPrototypeOf(){xf(12)}},zA={};l3(uK,(e,t)=>{zA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zA.deleteProperty=function(e,t){return zA.set.call(this,e,t,void 0)};zA.set=function(e,t,n){return uK.set.call(this,e[0],t,n,e[0])};function d8(e,t){const n=e[Fl];return(n?I1(n):e)[t]}function mot(e,t,n){var i;const r=Nxe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Nxe(e,t){if(!(t in e))return;let n=VE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=VE(n)}}function $7(e){e.modified_||(e.modified_=!0,e.parent_&&$7(e.parent_))}function h8(e){e.copy_||(e.copy_=P7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var got=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&xf(6),r!==void 0&&typeof r!="function"&&xf(7);let i;if(Sm(t)){const s=Lue(this),o=M7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?D7(s):O7(s)}return Mue(s,r),Fue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Axe&&(i=void 0),this.autoFreeze_&&aK(i,!0),r){const s=[],o=[];qv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else xf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Sm(e)||xf(8),V0(e)&&(e=Pxe(e));const t=Lue(this),n=M7(e,void 0);return n[Fl].isManual_=!0,O7(t),n}finishDraft(e,t){const n=e&&e[Fl];(!n||!n.isManual_)&&xf(9);const{scope_:r}=n;return Mue(r,t),Fue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=qv("Patches").applyPatches_;return V0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function M7(e,t){const n=_6(e)?qv("MapSet").proxyMap_(e,t):w6(e)?qv("MapSet").proxySet_(e,t):pot(e,t);return(t?t.scope_:Rxe()).drafts_.push(n),n}function Pxe(e){return V0(e)||xf(10,e),Dxe(e)}function Dxe(e){if(!Sm(e)||E6(e))return e;const t=e[Fl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=P7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=P7(e,!0);return l3(n,(r,i)=>{kxe(n,r,Dxe(i))}),t&&(t.finalized_=!1),n}var jl=new got,Oxe=jl.produce;jl.produceWithPatches.bind(jl);jl.setAutoFreeze.bind(jl);jl.setUseStrictShallowCopy.bind(jl);jl.applyPatches.bind(jl);jl.createDraft.bind(jl);jl.finishDraft.bind(jl);function yot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function bot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Bue=e=>Array.isArray(e)?e:[e];function _ot(e){const t=Array.isArray(e[0])?e[0]:e;return bot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Eot=class{constructor(e){this.value=e}deref(){return this.value}},xot=typeof WeakRef<"u"?WeakRef:Eot,Sot=0,Uue=1;function FN(){return{s:Sot,v:void 0,o:null,p:null}}function lK(e,t={}){let n=FN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=FN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=FN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Uue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new xot(c):c}return l.s=Uue,l.v=c,c}return o.clearCache=()=>{n=FN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function $xe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),yot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=lK,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Bue(d),y=Bue(p),v=_ot(i),_=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const x=wot(v,arguments);return a=_.apply(null,x),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Tot=$xe(lK),Cot=Object.assign((e,t=Tot)=>{vot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Cot});function Mxe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Aot=Mxe(),Iot=Mxe,kot=(...e)=>{const t=$xe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(V0(o)?Pxe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};kot(lK);var Rot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?u3:u3.apply(null,arguments)};function HE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>aot(r)&&r.type===e,n}var Lxe=class S2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,S2.prototype)}static get[Symbol.species](){return S2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new S2(...t[0].concat(this)):new S2(...t.concat(this))}};function zue(e){return Sm(e)?Oxe(e,()=>{}):e}function Vue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(qu(10));const r=n.insert(t,e);return e.set(t,r),r}function Not(e){return typeof e=="boolean"}var Pot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Lxe;return n&&(Not(n)?o.push(Aot):o.push(Iot(n.extraArgument))),o},Dot="RTK_autoBatch",Fxe=e=>t=>{setTimeout(t,e)},Oot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fxe(10),$ot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Oot:e.type==="callback"?e.queueNotification:Fxe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Dot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Mot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Lxe(e);return r&&i.push($ot(typeof r=="object"?r:void 0)),i},Lot=!0;function Fot(e){const t=Pot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(oK(n))a=sot(n);else throw new Error(qu(1));let u;typeof r=="function"?u=r(t):u=t();let l=u3;i&&(l=Rot({trace:!Lot,...typeof i=="object"&&i}));const c=oot(...u),f=Mot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Cxe(a,s,h)}function jxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(qu(28));if(a in t)throw new Error(qu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function jot(e){return typeof e=="function"}function Bot(e,t){let[n,r,i]=jxe(t),s;if(jot(e))s=()=>zue(e());else{const a=zue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(V0(c)){const h=f(c,u);return h===void 0?c:h}else{if(Sm(c))return Oxe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(qu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Uot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zot=(e=21)=>{let t="",n=e;for(;n--;)t+=Uot[Math.random()*64|0];return t},Vot=Symbol.for("rtk-slice-createasyncthunk");function Hot(e,t){return`${e}/${t}`}function qot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Vot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(qu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Yot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(qu(12));if(E in l.sliceCaseReducersByType)throw new Error(qu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(_,w){return l.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return l.actionCreators[_]=w,c},exposeCaseReducer(_,w){return l.sliceCaseReducersByName[_]=w,c}};u.forEach(_=>{const w=a[_],E={reducerName:_,type:Hot(s,_),createNotation:typeof i.reducers=="function"};Xot(w)?Jot(E,w,c,t):Kot(E,w,c)});function f(){const[_={},w=[],E=void 0]=typeof i.extraReducers=="function"?jxe(i.extraReducers):[i.extraReducers],x={..._,...l.sliceCaseReducersByType};return Bot(i.initialState,S=>{for(let C in x)S.addCase(C,x[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of w)S.addMatcher(C.matcher,C.reducer);E&&S.addDefaultCase(E)})}const d=_=>_,h=new Map;let p;function m(_,w){return p||(p=f()),p(_,w)}function g(){return p||(p=f()),p.getInitialState()}function y(_,w=!1){function E(S){let C=S[_];return typeof C>"u"&&w&&(C=g()),C}function x(S=d){const C=Vue(h,w,{insert:()=>new WeakMap});return Vue(C,S,{insert:()=>{const A={};for(const[k,N]of Object.entries(i.selectors??{}))A[k]=Wot(N,S,g,w);return A}})}return{reducerPath:_,getSelectors:x,get selectors(){return x(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:w,...E}={}){const x=w??o;return _.inject({reducerPath:x,reducer:m},E),{...v,...y(x,!0)}}};return v}}function Wot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Got=qot();function Yot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Kot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Qot(r))throw new Error(qu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?HE(e,o):HE(e))}function Xot(e){return e._reducerDefinitionType==="asyncThunk"}function Qot(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Jot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||jN,pending:a||jN,rejected:u||jN,settled:l||jN})}function jN(){}var Zot=(e,t)=>{if(typeof e!="function")throw new Error(qu(32))},cK="listenerMiddleware",eat=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=HE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qu(21));return Zot(s),{predicate:i,type:t,effect:s}},tat=Object.assign(e=>{const{type:t,predicate:n,effect:r}=eat(e);return{id:zot(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qu(22))}}},{withTypes:()=>tat}),nat=Object.assign(HE(`${cK}/add`),{withTypes:()=>nat});HE(`${cK}/removeAll`);var rat=Object.assign(HE(`${cK}/remove`),{withTypes:()=>rat});function qu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Tm(e){return e.components.flatMap(t=>typeof t=="string"?t:Tm(t))}function Bxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Bxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Uxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];r+=1}else{const o=Uxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function zxe(e,t){const n=Uxe(e,t,0);return typeof n=="number"?null:n}function Vxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Vxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function iat(e,t){const n=Vxe(e,t,0);return n.found?n.distance:-1}function Hxe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Hxe(i,`${t}-${s}`))}),n}function fK(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>fK(n,`${t}-${r}`))}}async function sat(e,t,n,r,i){const s=Tm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Got({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}}}});return{store:Fot({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const qxe=I.createContext(null);function Xh(){return I.useContext(qxe).actions}const Qh=Txe,Yc=qst;function oat(e){return Yc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function dK(){return Yc(e=>Tm(e.sequence))}function Wb(){const{studyId:e}=Em();return`${e}`}function Zm(){const{index:e}=Em(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ly(){const e=Zm(),t=dK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var d3={exports:{}};d3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",x="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[D]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[A]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[x]=j[C]=!1;var q=typeof to=="object"&&to&&to.Object===Object&&to,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,At=Array(te);++Re<te;)At[Re]=ue(Re);return At}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,me=We.call(Object),Ae=RegExp("^"+We.call(ge).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Cr=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,gn=ut?ut.toStringTag:void 0,An=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,zo=Date.now,$i=qe(ne,"Map"),In=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!vp(ue))return{};if(Cr)return Cr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function gs(){this.__data__=In?In(null):{},this.size=0}function pp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function cl(te){var ue=this.__data__;if(In){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function _d(te){var ue=this.__data__;return In?ue[te]!==void 0:ge.call(ue,te)}function xr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=In&&ue===void 0?r:ue,this}Ar.prototype.clear=gs,Ar.prototype.delete=pp,Ar.prototype.get=cl,Ar.prototype.has=_d,Ar.prototype.set=xr;function Ii(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function Qr(){this.__data__=[],this.size=0}function cu(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var At=ue.length-1;return Re==At?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Ia(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function ka(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,At=Jn(Re,te);return At<0?(++this.size,Re.push([te,ue])):Re[At][1]=ue,this}Ii.prototype.clear=Qr,Ii.prototype.delete=cu,Ii.prototype.get=Ia,Ii.prototype.has=ka,Ii.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new($i||Ii),string:new Ar}}function Ce(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Te(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),At=Re.size;return Re.set(te,ue),this.size+=Re.size==At?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Te,ee.prototype.has=ot,ee.prototype.set=St;function Ht(te){var ue=this.__data__=new Ii(te);this.size=ue.size}function On(){this.__data__=new Ii,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function pn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Ir(te,ue){var Re=this.__data__;if(Re instanceof Ii){var At=Re.__data__;if(!$i||At.length<n-1)return At.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(At)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=On,Ht.prototype.delete=jn,Ht.prototype.get=pn,Ht.prototype.has=ir,Ht.prototype.set=Ir;function Vt(te,ue){var Re=gp(te),At=!Re&&fu(te),$n=!Re&&!At&&yp(te),Sr=!Re&&!At&&!$n&&nN(te),qr=Re||At||$n||Sr,Un=qr?Ue(te.length,String):[],Wr=Un.length;for(var Zi in te)qr&&(Zi=="length"||$n&&(Zi=="offset"||Zi=="parent")||Sr&&(Zi=="buffer"||Zi=="byteLength"||Zi=="byteOffset")||Et(Zi,Wr))||Un.push(Zi);return Un}function sr(te,ue,Re){(Re!==void 0&&!nc(te[ue],Re)||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Hr(te,ue,Re){var At=te[ue];(!(ge.call(te,ue)&&nc(At,Re))||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(nc(te[Re][0],ue))return Re;return-1}function ki(te,ue,Re){ue=="__proto__"&&An?An(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Hs=Oe();function Jr(te){return te==null?te===void 0?S:y:gn&&gn in Object(te)?Ge(te):Ho(te)}function mo(te){return du(te)&&Jr(te)==a}function Li(te){if(!vp(te)||Bn(te))return!1;var ue=hT(te)?Ae:z;return ue.test(ZR(te))}function Fi(te){return du(te)&&tN(te.length)&&!!j[Jr(te)]}function Vo(te){if(!vp(te))return Rr(te);var ue=kr(te),Re=[];for(var At in te)At=="constructor"&&(ue||!ge.call(te,At))||Re.push(At);return Re}function Ra(te,ue,Re,At,$n){te!==ue&&Hs(ue,function(Sr,qr){if($n||($n=new Ht),vp(Sr))qs(te,ue,qr,Re,Ra,At,$n);else{var Un=At?At(mp(te,qr),Sr,qr+"",te,ue,$n):void 0;Un===void 0&&(Un=Sr),sr(te,qr,Un)}},u1)}function qs(te,ue,Re,At,$n,Sr,qr){var Un=mp(te,Re),Wr=mp(ue,Re),Zi=qr.get(Wr);if(Zi){sr(te,Re,Zi);return}var qo=Sr?Sr(Un,Wr,Re+"",te,ue,qr):void 0,c1=qo===void 0;if(c1){var bp=gp(Wr),w_=!bp&&yp(Wr),E_=!bp&&!w_&&nN(Wr);qo=Wr,bp||w_||E_?gp(Un)?qo=Un:eN(Un)?qo=fe(Un):w_?(c1=!1,qo=Y(Wr)):E_?(c1=!1,qo=Z(Wr)):qo=[]:J5(Wr)||fu(Wr)?(qo=Un,fu(Un)?qo=a1(Un):(!vp(Un)||hT(Un))&&(qo=st(Wr))):c1=!1}c1&&(qr.set(Wr,qo),$n(qo,Wr,At,Sr,qr),qr.delete(Wr)),sr(te,Re,qo)}function tc(te,ue){return dT(Ed(te,ue,gg),te+"")}var wd=An?function(te,ue){return An(te,"toString",{configurable:!0,enumerable:!1,value:l1(ue),writable:!0})}:gg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,At=te.length;for(ue||(ue=Array(At));++Re<At;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,At){var $n=!Re;Re||(Re={});for(var Sr=-1,qr=ue.length;++Sr<qr;){var Un=ue[Sr],Wr=void 0;Wr===void 0&&(Wr=te[Un]),$n?ki(Re,Un,Wr):Hr(Re,Un,Wr)}return Re}function le(te){return tc(function(ue,Re){var At=-1,$n=Re.length,Sr=$n>1?Re[$n-1]:void 0,qr=$n>2?Re[2]:void 0;for(Sr=te.length>3&&typeof Sr=="function"?($n--,Sr):void 0,qr&&mn(Re[0],Re[1],qr)&&(Sr=$n<3?void 0:Sr,$n=1),ue=Object(ue);++At<$n;){var Un=Re[At];Un&&te(ue,Un,At,Sr)}return ue})}function Oe(te){return function(ue,Re,At){for(var $n=-1,Sr=Object(ue),qr=At(ue),Un=qr.length;Un--;){var Wr=qr[++$n];if(Re(Sr[Wr],Wr,Sr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=ge.call(te,gn),Re=te[gn];try{te[gn]=void 0;var At=!0}catch{}var $n=vt.call(te);return At&&(ue?te[gn]=Re:delete te[gn]),$n}function st(te){return typeof te.constructor=="function"&&!kr(te)?Mi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function mn(te,ue,Re){if(!vp(Re))return!1;var At=typeof ue;return(At=="number"?__(Re)&&Et(ue,Re.length):At=="string"&&ue in Re)?nc(Re[ue],te):!1}function Pt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!ht&&ht in te}function kr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Rr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Ho(te){return vt.call(te)}function Ed(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var At=arguments,$n=-1,Sr=rr(At.length-ue,0),qr=Array(Sr);++$n<Sr;)qr[$n]=At[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=At[$n];return Un[ue]=Re(qr),Ke(te,this,Un)}}function mp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var dT=o1(wd);function o1(te){var ue=0,Re=0;return function(){var At=zo(),$n=s-(At-Re);if(Re=At,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function ZR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function nc(te,ue){return te===ue||te!==te&&ue!==ue}var fu=mo(function(){return arguments}())?mo:function(te){return du(te)&&ge.call(te,"callee")&&!Fn.call(te,"callee")},gp=Array.isArray;function __(te){return te!=null&&tN(te.length)&&!hT(te)}function eN(te){return du(te)&&__(te)}var yp=nr||iN;function hT(te){if(!vp(te))return!1;var ue=Jr(te);return ue==h||ue==p||ue==l||ue==_}function tN(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function vp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function du(te){return te!=null&&typeof te=="object"}function J5(te){if(!du(te)||Jr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==me}var nN=be?yt(be):Fi;function a1(te){return ye(te,u1(te))}function u1(te){return __(te)?Vt(te):Vo(te)}var rN=le(function(te,ue,Re){Ra(te,ue,Re)});function l1(te){return function(){return te}}function gg(te){return te}function iN(){return!1}e.exports=rN})(d3,d3.exports);var aat=d3.exports;const hK=Kl(aat);function x0(e){return structuredClone(e)}function pK(){const{answers:e}=Yc(i=>i),t=Zm(),r=`${Ly()}_${t}`;return e[r]}const Wxe=I.createContext(null);function uat(){const e=I.useContext(Wxe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function H0(){return Yc(e=>e.config)}function Hue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Gxe(){const e=Zm(),t=dK(),r=`${Ly()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Yc(x=>x),a=Qh(),{saveTrialAnswer:u,setIframeAnswers:l}=Xh(),{storageEngine:c}=Cs(),f=Wb(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=oat(r),m=typeof e!="number"||!p,g=pK(),y=Yh(),v=H0(),_=I.useMemo(()=>Date.now(),[]),w=uat(),E=I.useCallback(()=>{if(typeof e!="number")return;const x=x0(i[r]),S=Object.values(x).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:C}=x,A=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k}}),a(l({})));let N=e+1;const O=zxe(s,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k}};D&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([P])=>{const z=parseInt(P.slice(P.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([P,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[P,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!Hue(z.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const P=H.map(([j,q])=>Hue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=P.filter(j=>j).length,W=P.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const P=t.indexOf(M.to),z=P===-1?iat(s,M.to):-1;return N=P===-1?z:P,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,_,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function lat({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=Gxe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return b.jsx(fn,{type:"submit",disabled:t||r,onClick:s,children:e})}function cat(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const fat=typeof window<"u"?I.useLayoutEffect:I.useEffect;function yo(e,t){fat(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function dat(e,t){e&&cat(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function hat(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function L7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function pat(e){const[t,n]=I.useState(L7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=L7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Yxe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function que(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Wue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Yxe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=que(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=que(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function mat(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Gue(e,t,n){typeof n.value=="object"&&(n.value=kw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function kw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(kw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(kw(a),kw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(kw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Gue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Gue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Kxe(e){return typeof e!="string"?[]:e.split(".")}function Ou(e,t){const n=Kxe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function x6(e,t,n){const r=Kxe(e);if(r.length===0)return n;const i=kw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function gat(e,{from:t,to:n},r){const i=Ou(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),x6(e,s,r)}function yat(e,t,n,r){const i=Ou(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),x6(e,s,r)}function vat(e,t,n){const r=Ou(e,n);return Array.isArray(r)?x6(e,r.filter((i,s)=>s!==t),n):n}function bat({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>mat(o,a,u)),e.setValues({values:gat(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Wue(o,a,u,-1)),e.setValues({values:vat(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Wue(o,u,l,1)),e.setValues({values:yat(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var mK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const _D=Kl(mK);function BN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function _at({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const x=typeof E=="function"?E(u.current):E;u.current=x,n==="controlled"&&s(x)},[]),f=I.useCallback(E=>{const x=typeof E=="function"?E(l.current):E;l.current=x,n==="controlled"&&a(x)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const x=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(x),f({})},p=I.useCallback((E,x)=>{c(S=>BN(S,E)===x?S:{...S,[E]:x})},[]),m=I.useCallback((E,x)=>{f(S=>BN(S,E)===x?S:{...S,[E]:x})},[]),g=I.useCallback(E=>BN(u.current,E),[]),y=I.useCallback(E=>f(x=>{if(typeof E!="string")return x;const S=Yxe(E,x);return delete S[E],_D(S,x)?x:S}),[]),v=I.useCallback(E=>{if(E){const S=Ou(E,l.current);if(typeof S=="boolean")return S;const C=Ou(E,r.refValues.current),A=Ou(E,r.valuesSnapshot.current);return!_D(C,A)}return Object.keys(l.current).length>0?BN(l.current):!_D(r.refValues.current,r.valuesSnapshot.current)},[]),_=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:_,getTouched:w}}function wat({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,_=p instanceof Function?p(o.current):p,w=y?{...v,..._}:_;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Ou(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,_=x6(p.path,g,o.current);u({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:_,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Eat({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Ou(i,o.previousValues),value:Ou(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Yue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Kue(e){const t=L7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function F7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Ou(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>F7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||F7(o,t,a,i)),i},r)}function j7(e,t){return Kue(typeof e=="function"?e(t):F7(e,t))}function UN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=j7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const xat="__MANTINE_FORM_INDEX__";function Xue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${xat}`)):!1:!1}function Xxe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=pat(r),p=wat({initialValues:n,onValuesChange:l,mode:t}),m=_at({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=bat({$values:p,$errors:h,$status:m}),y=Eat({$status:m}),[v,_]=I.useState(0),[w,E]=I.useState({}),x=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(P=>P+1)},[]),S=I.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&_(z=>z+1))},[]),C=I.useCallback((P,z,W)=>{const j=Xue(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=UN(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),A=I.useCallback(P=>{const z=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Ou(W,p.refValues.current),q=Ou(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const P=j7(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),N=I.useCallback(P=>{const z=UN(P,d,p.refValues.current);return z.hasError?h.setFieldError(P,z.error):h.clearFieldError(P),z},[d]),O=(P,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:hat(ce=>C(P,ce,{forceUpdate:!1})),"data-path":Yue(e,P)};return W&&(ne.error=h.errorsState[P]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Ou(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Ou(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Xue(P,u)){const ce=UN(P,d,p.refValues.current);ce.hasError?h.setFieldError(P,ce.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:z,withError:W,withFocus:j,...q},form:H}))},D=(P,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=I.useCallback(P=>{P.preventDefault(),x()},[]),M=I.useCallback(P=>P?!UN(P,d,p.refValues.current).hasError:!j7(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=I.useCallback(P=>document.querySelector(`[data-path="${Yue(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:x,validate:k,validateField:N,getInputProps:O,onSubmit:D,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return dat(e,H),H}function Sat(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Tat(e){return Sat(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Qxe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Cat=new URLSearchParams(window.location.search),Aat=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Cat.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Iat=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Qxe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function kat(e,t,n){const[r,i]=I.useState(null),s=Xxe({initialValues:Aat(e,n),validate:Iat(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Gb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Qxe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Rat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return b.jsx(Sl.Group,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:s,required:o})})]}),description:u,...n,error:Gb(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(ls,{mt:"xs",children:l.map(c=>b.jsx(Sl,{disabled:t,value:c.value,label:c.label},c.value))})})}function Nat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return b.jsx(vk,{disabled:t,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Gb(e,n,c)})}function Pat({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return b.jsx(mi.Wrapper,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:i,required:s})})]}),description:o,size:"md",children:b.jsx(Bf,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(Bf.Item,{children:a},a)):b.jsx(Bf.Item,{children:t.value})})})}function Jxe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return b.jsx(Hv.Group,{name:`radioInput${e.id}`,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:s,required:o})})]}),description:c,...n,error:Gb(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(ls,{mt:"xs",children:[u?b.jsx(Xe,{style:{textAlign:"center"},children:u}):null,f.map(d=>b.jsx(Hv,{size:"xl",disabled:t,value:d.value,label:d.label},d.label)),b.jsx(Xe,{children:l})]})},e.id)}function Dat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return b.jsx(Jxe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Oat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return b.jsx(hY,{disabled:t,placeholder:l,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Gb(e,n)})}function $at({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Gb(e,n);return b.jsx(mi.Wrapper,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(a6,{disabled:t,marks:a,...n,h:40})})}function Mat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(Jg,{disabled:t,placeholder:s,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Gb(e,n)})}function Lat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(eY,{disabled:t,placeholder:s,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Gb(e,n)})}function Fat({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=MY(),u=H0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return b.jsxs(pe,{mb:"md",children:[e.type==="numerical"&&b.jsx(Oat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&b.jsx(Mat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&b.jsx(Lat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&b.jsx(Dat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&b.jsx(Nat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&b.jsx($at,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&b.jsx(Jxe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&b.jsx(Rat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&b.jsx(Pat,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function h3({config:e,location:t,status:n,style:r}){var $;const i=Qh(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=Xh(),a=Zm(),u=Ly(),l=n==null?void 0:n.answer,c=Yh(),f=e,d=I.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=kat(d,a,l||{}),[p,m]=I.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=Yc(F=>F),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,_=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=I.useState(0),x=(f==null?void 0:f.trainingAttempts)||2,[S,C]=I.useState(!1),A=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const F=d.find(M=>M.type==="iframe");if(g&&F){const M=F.id;h.setValues({...h.values,[M]:g[M]})}},[g]),I.useEffect(()=>{y&&m(y)},[y]),I.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:x0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,N]=I.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(F,M,B,U,H)=>{N(P=>({...P,[F]:{visible:M,title:B,message:U,color:H}}))},D=()=>{const F=w+1;E(F);const M=Object.fromEntries(d.map(B=>{var P,z;const U=(z=(P=f.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=x?(H=`You didn't answer this question correctly after ${x} attempts. ${_?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,_||setTimeout(()=>{c("./__trainingFailed")},5e3)):x-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${x-F} attempts left.`,O(B.id,!0,"Incorrect Answer",H,"red")}}),C(_&&F>=x||Object.values(M).every(B=>B)&&F<=x))};return b.jsxs("div",{style:r,children:[d.map((F,M)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(P=>P.id===F.id))==null?void 0:H.answer;return b.jsx(_r.Fragment,{children:F.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(Fat,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:M+1}),k[F.id].visible&&b.jsxs(nS,{mb:"md",title:k[F.id].title,color:k[F.id].color,children:[k[F.id].message," ",k[F.id].message.includes("Please try again")&&b.jsxs(b.Fragment,{children:["Please"," ",b.jsx(Fb,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),b.jsx("br",{}),b.jsx("br",{}),w>=x&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),b.jsxs(ls,{justify:"right",gap:"xs",children:[v&&A&&b.jsx(fn,{onClick:()=>D(),disabled:!h.isValid(),children:"Check Answer"}),A&&b.jsx(lat,{disabled:v&&!S||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const RT="@REVISIT_COMMS",jat={minHeight:"500px",width:"100%",border:0};function Bat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Xh(),r=Qh(),i=Txe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ly(),u=Yh(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${RT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${RT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${RT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${RT}/ANSWERS`:r(t(d.message));break;case`${RT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),b.jsx("iframe",{ref:s,src:`${Vu}${e.path}?trialid=${a}&id=${o}`,style:jat})}async function gK(e){const n=await(await fetch(`${Vu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Wv({email:e,path:t}){const n=Oy();return b.jsxs(Oc,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(ui,{order:2,children:b.jsx(Xe,{span:!0,c:"orange",children:"404"})}),b.jsxs(Xe,{children:[b.jsx(Xe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Bf,{children:[b.jsx(Bf.Item,{children:b.jsx(Xe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(Bf.Item,{children:b.jsxs(Xe,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Fb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Uat={maxWidth:"100%"};function zat({currentConfig:e}){const t={...Uat,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await gK(e.path);s(!!a),r(!1)}o()},[e]),n||i?b.jsx(Dy,{mx:"auto",src:`${Vu}${e.path}`,style:t}):b.jsx(Wv,{path:e.path})}function sm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gS(e){let t,n,r;e.length!==2?(t=sm,n=(a,u)=>sm(e(a),u),r=(a,u)=>e(a)-u):(t=e===sm||e===Vat?e:Hat,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Hat(){return 0}function Zxe(e){return e===null?NaN:+e}function*qat(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const eSe=gS(sm),q0=eSe.right,Wat=eSe.left;gS(Zxe).center;function Gat(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Yat(e,t){const n=Gat(e,t);return n&&Math.sqrt(n)}function B7(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ya{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class U7 extends Map{constructor(t,n=rSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(z7(this,t))}has(t){return super.has(z7(this,t))}set(t,n){return super.set(tSe(this,t),n)}delete(t){return super.delete(nSe(this,t))}}class p3 extends Set{constructor(t,n=rSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(z7(this,t))}add(t){return super.add(tSe(this,t))}delete(t){return super.delete(nSe(this,t))}}function z7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function nSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Kat(e){return e}function Xat(e,t,...n){return Qat(e,Kat,t,n)}function Qat(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new U7,u=r[o++];let l=-1;for(const c of s){const f=u(c,++l,s),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return t(a)}(e,0)}function Jat(e,t){return Array.from(t,n=>e[n])}function Zat(e=sm){if(e===sm)return iSe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function iSe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eut=Math.sqrt(50),tut=Math.sqrt(10),nut=Math.sqrt(2);function m3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=eut?10:s>=tut?5:s>=nut?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?m3(e,t,n*2):[a,u,l]}function V7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?m3(t,e,n):m3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function H7(e,t,n){return t=+t,e=+e,n=+n,m3(e,t,n)[2]}function W0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?H7(t,e,n):H7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ch(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function g3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function sSe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?iSe:Zat(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));sSe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(NT(e,n,t),i(e[r],s)>0&&NT(e,n,r);o<a;){for(NT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?NT(e,n,a):(++a,NT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function NT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function VA(e,t,n){if(e=Float64Array.from(qat(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return g3(e);if(t>=1)return ch(e);var r,i=(r-1)*t,s=Math.floor(i),o=ch(sSe(e,s).subarray(0,s+1)),a=g3(e.subarray(s+1));return o+(a-o)*(i-s)}}function oSe(e,t,n=Zxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function aSe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function uSe(e,t){return VA(e,.5,t)}function*rut(e){for(const t of e)yield*t}function lSe(e){return Array.from(rut(e))}function $u(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function yK(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function iut(e,...t){e=new p3(e),t=t.map(sut);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function sut(e){return e instanceof p3?e:new p3(e)}function out(...e){const t=new p3;for(const n of e)for(const r of n)t.add(r);return t}function aut(e){return e}var p8=1,m8=2,q7=3,T2=4,Que=1e-6;function uut(e){return"translate("+e+",0)"}function lut(e){return"translate(0,"+e+")"}function cut(e){return t=>+e(t)}function fut(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function dut(){return!this.__axis}function cSe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===p8||e===T2?-1:1,c=e===T2||e===m8?"x":"y",f=e===p8||e===q7?uut:lut;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):aut),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,_=+y[y.length-1]+u,w=(t.bandwidth?fut:cut)(t.copy(),u),E=h.selection?h.selection():h,x=E.selectAll(".domain").data([null]),S=E.selectAll(".tick").data(p,t).order(),C=S.exit(),A=S.enter().append("g").attr("class","tick"),k=S.select("line"),N=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),k=k.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===p8?"0em":e===q7?"0.71em":"0.32em")),h!==E&&(x=x.transition(h),S=S.transition(h),k=k.transition(h),N=N.transition(h),C=C.transition(h).attr("opacity",Que).attr("transform",function(O){return isFinite(O=w(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",Que).attr("transform",function(O){var D=this.parentNode.__axis;return f((D&&isFinite(D=D(O))?D:w(O))+u)})),C.remove(),x.attr("d",e===T2||e===m8?o?"M"+l*o+","+v+"H"+u+"V"+_+"H"+l*o:"M"+u+","+v+"V"+_:o?"M"+v+","+l*o+"V"+u+"H"+_+"V"+l*o:"M"+v+","+u+"H"+_),S.attr("opacity",1).attr("transform",function(O){return f(w(O)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(dut).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===m8?"start":e===T2?"end":"middle"),E.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function hut(e){return cSe(q7,e)}function put(e){return cSe(T2,e)}var mut={value:()=>{}};function S6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new wD(n)}function wD(e){this._=e}function gut(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}wD.prototype=S6.prototype={constructor:wD,on:function(e,t){var n=this._,r=gut(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=yut(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Jue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Jue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function yut(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Jue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=mut,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var W7="http://www.w3.org/1999/xhtml";const Zue={svg:"http://www.w3.org/2000/svg",xhtml:W7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function T6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Zue.hasOwnProperty(t)?{space:Zue[t],local:e}:e}function vut(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===W7&&t.documentElement.namespaceURI===W7?t.createElement(e):t.createElementNS(n,e)}}function but(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fSe(e){var t=T6(e);return(t.local?but:vut)(t)}function _ut(){}function vK(e){return e==null?_ut:function(){return this.querySelector(e)}}function wut(e){typeof e!="function"&&(e=vK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ja(r,this._parents)}function dSe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Eut(){return[]}function hSe(e){return e==null?Eut:function(){return this.querySelectorAll(e)}}function xut(e){return function(){return dSe(e.apply(this,arguments))}}function Sut(e){typeof e=="function"?e=xut(e):e=hSe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ja(r,i)}function pSe(e){return function(){return this.matches(e)}}function mSe(e){return function(t){return t.matches(e)}}var Tut=Array.prototype.find;function Cut(e){return function(){return Tut.call(this.children,e)}}function Aut(){return this.firstElementChild}function Iut(e){return this.select(e==null?Aut:Cut(typeof e=="function"?e:mSe(e)))}var kut=Array.prototype.filter;function Rut(){return Array.from(this.children)}function Nut(e){return function(){return kut.call(this.children,e)}}function Put(e){return this.selectAll(e==null?Rut:Nut(typeof e=="function"?e:mSe(e)))}function Dut(e){typeof e!="function"&&(e=pSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ja(r,this._parents)}function gSe(e){return new Array(e.length)}function Out(){return new Ja(this._enter||this._groups.map(gSe),this._parents)}function y3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}y3.prototype={constructor:y3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $ut(e){return function(){return e}}function Mut(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new y3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Lut(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new y3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Fut(e){return e.__data__}function jut(e,t){if(!arguments.length)return Array.from(this,Fut);var n=t?Lut:Mut,r=this._parents,i=this._groups;typeof e!="function"&&(e=$ut(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=But(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,E;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);w._next=E||null}}return o=new Ja(o,r),o._enter=a,o._exit=u,o}function But(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Uut(){return new Ja(this._exit||this._groups.map(gSe),this._parents)}function zut(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Vut(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ja(a,this._parents)}function Hut(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function qut(e){e||(e=Wut);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ja(i,this._parents).order()}function Wut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gut(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Yut(){return Array.from(this)}function Kut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Xut(){let e=0;for(const t of this)++e;return e}function Qut(){return!this.node()}function Jut(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Zut(e){return function(){this.removeAttribute(e)}}function elt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tlt(e,t){return function(){this.setAttribute(e,t)}}function nlt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rlt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ilt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function slt(e,t){var n=T6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?elt:Zut:typeof t=="function"?n.local?ilt:rlt:n.local?nlt:tlt)(n,t))}function ySe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function olt(e){return function(){this.style.removeProperty(e)}}function alt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ult(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function llt(e,t,n){return arguments.length>1?this.each((t==null?olt:typeof t=="function"?ult:alt)(e,t,n??"")):qE(this.node(),e)}function qE(e,t){return e.style.getPropertyValue(t)||ySe(e).getComputedStyle(e,null).getPropertyValue(t)}function clt(e){return function(){delete this[e]}}function flt(e,t){return function(){this[e]=t}}function dlt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hlt(e,t){return arguments.length>1?this.each((t==null?clt:typeof t=="function"?dlt:flt)(e,t)):this.node()[e]}function vSe(e){return e.trim().split(/^|\s+/)}function bK(e){return e.classList||new bSe(e)}function bSe(e){this._node=e,this._names=vSe(e.getAttribute("class")||"")}bSe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _Se(e,t){for(var n=bK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function wSe(e,t){for(var n=bK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function plt(e){return function(){_Se(this,e)}}function mlt(e){return function(){wSe(this,e)}}function glt(e,t){return function(){(t.apply(this,arguments)?_Se:wSe)(this,e)}}function ylt(e,t){var n=vSe(e+"");if(arguments.length<2){for(var r=bK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?glt:t?plt:mlt)(n,t))}function vlt(){this.textContent=""}function blt(e){return function(){this.textContent=e}}function _lt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function wlt(e){return arguments.length?this.each(e==null?vlt:(typeof e=="function"?_lt:blt)(e)):this.node().textContent}function Elt(){this.innerHTML=""}function xlt(e){return function(){this.innerHTML=e}}function Slt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tlt(e){return arguments.length?this.each(e==null?Elt:(typeof e=="function"?Slt:xlt)(e)):this.node().innerHTML}function Clt(){this.nextSibling&&this.parentNode.appendChild(this)}function Alt(){return this.each(Clt)}function Ilt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function klt(){return this.each(Ilt)}function Rlt(e){var t=typeof e=="function"?e:fSe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Nlt(){return null}function Plt(e,t){var n=typeof e=="function"?e:fSe(e),r=t==null?Nlt:typeof t=="function"?t:vK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dlt(){var e=this.parentNode;e&&e.removeChild(this)}function Olt(){return this.each(Dlt)}function $lt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mlt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Llt(e){return this.select(e?Mlt:$lt)}function Flt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function jlt(e){return function(t){e.call(this,t,this.__data__)}}function Blt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ult(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function zlt(e,t,n){return function(){var r=this.__on,i,s=jlt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Vlt(e,t,n){var r=Blt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?zlt:Ult,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ESe(e,t,n){var r=ySe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Hlt(e,t){return function(){return ESe(this,e,t)}}function qlt(e,t){return function(){return ESe(this,e,t.apply(this,arguments))}}function Wlt(e,t){return this.each((typeof t=="function"?qlt:Hlt)(e,t))}function*Glt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var _K=[null];function Ja(e,t){this._groups=e,this._parents=t}function Ak(){return new Ja([[document.documentElement]],_K)}function Ylt(){return this}Ja.prototype=Ak.prototype={constructor:Ja,select:wut,selectAll:Sut,selectChild:Iut,selectChildren:Put,filter:Dut,data:jut,enter:Out,exit:Uut,join:zut,merge:Vut,selection:Ylt,order:Hut,sort:qut,call:Gut,nodes:Yut,node:Kut,size:Xut,empty:Qut,each:Jut,attr:slt,style:llt,property:hlt,classed:ylt,text:wlt,html:Tlt,raise:Alt,lower:klt,append:Rlt,insert:Plt,remove:Olt,clone:Llt,datum:Flt,on:Vlt,dispatch:Wlt,[Symbol.iterator]:Glt};function rs(e){return typeof e=="string"?new Ja([[document.querySelector(e)]],[document.documentElement]):new Ja([[e]],_K)}function Klt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function G7(e,t){if(e=Klt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Xlt(e){return typeof e=="string"?new Ja([document.querySelectorAll(e)],[document.documentElement]):new Ja([dSe(e)],_K)}const Y7={capture:!0,passive:!1};function K7(e){e.preventDefault(),e.stopImmediatePropagation()}function Qlt(e){var t=e.document.documentElement,n=rs(e).on("dragstart.drag",K7,Y7);"onselectstart"in t?n.on("selectstart.drag",K7,Y7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Jlt(e,t){var n=e.document.documentElement,r=rs(e).on("dragstart.drag",null);t&&(r.on("click.drag",K7,Y7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function yS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ik(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fy(){}var Gv=.7,WE=1/Gv,tE="\\s*([+-]?\\d+)\\s*",HA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zlt=/^#([0-9a-f]{3,8})$/,ect=new RegExp(`^rgb\\(${tE},${tE},${tE}\\)$`),tct=new RegExp(`^rgb\\(${fh},${fh},${fh}\\)$`),nct=new RegExp(`^rgba\\(${tE},${tE},${tE},${HA}\\)$`),rct=new RegExp(`^rgba\\(${fh},${fh},${fh},${HA}\\)$`),ict=new RegExp(`^hsl\\(${HA},${fh},${fh}\\)$`),sct=new RegExp(`^hsla\\(${HA},${fh},${fh},${HA}\\)$`),ele={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yS(Fy,Yv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tle,formatHex:tle,formatHex8:oct,formatHsl:act,formatRgb:nle,toString:nle});function tle(){return this.rgb().formatHex()}function oct(){return this.rgb().formatHex8()}function act(){return xSe(this).formatHsl()}function nle(){return this.rgb().formatRgb()}function Yv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Zlt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rle(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ect.exec(e))?new no(t[1],t[2],t[3],1):(t=tct.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nct.exec(e))?zN(t[1],t[2],t[3],t[4]):(t=rct.exec(e))?zN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ict.exec(e))?ole(t[1],t[2]/100,t[3]/100,1):(t=sct.exec(e))?ole(t[1],t[2]/100,t[3]/100,t[4]):ele.hasOwnProperty(e)?rle(ele[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function rle(e){return new no(e>>16&255,e>>8&255,e&255,1)}function zN(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function wK(e){return e instanceof Fy||(e=Yv(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function G0(e,t,n,r){return arguments.length===1?wK(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yS(no,G0,Ik(Fy,{brighter(e){return e=e==null?WE:Math.pow(WE,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gv:Math.pow(Gv,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(Cv(this.r),Cv(this.g),Cv(this.b),v3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ile,formatHex:ile,formatHex8:uct,formatRgb:sle,toString:sle}));function ile(){return`#${uv(this.r)}${uv(this.g)}${uv(this.b)}`}function uct(){return`#${uv(this.r)}${uv(this.g)}${uv(this.b)}${uv((isNaN(this.opacity)?1:this.opacity)*255)}`}function sle(){const e=v3(this.opacity);return`${e===1?"rgb(":"rgba("}${Cv(this.r)}, ${Cv(this.g)}, ${Cv(this.b)}${e===1?")":`, ${e})`}`}function v3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function uv(e){return e=Cv(e),(e<16?"0":"")+e.toString(16)}function ole(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sf(e,t,n,r)}function xSe(e){if(e instanceof Sf)return new Sf(e.h,e.s,e.l,e.opacity);if(e instanceof Fy||(e=Yv(e)),!e)return new Sf;if(e instanceof Sf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Sf(o,a,u,e.opacity)}function b3(e,t,n,r){return arguments.length===1?xSe(e):new Sf(e,t,n,r??1)}function Sf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yS(Sf,b3,Ik(Fy,{brighter(e){return e=e==null?WE:Math.pow(WE,e),new Sf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gv:Math.pow(Gv,e),new Sf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(g8(e>=240?e-240:e+120,i,r),g8(e,i,r),g8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Sf(ale(this.h),VN(this.s),VN(this.l),v3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v3(this.opacity);return`${e===1?"hsl(":"hsla("}${ale(this.h)}, ${VN(this.s)*100}%, ${VN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ale(e){return e=(e||0)%360,e<0?e+360:e}function VN(e){return Math.max(0,Math.min(1,e||0))}function g8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const SSe=Math.PI/180,TSe=180/Math.PI,_3=18,CSe=.96422,ASe=1,ISe=.82521,kSe=4/29,nE=6/29,RSe=3*nE*nE,lct=nE*nE*nE;function NSe(e){if(e instanceof dh)return new dh(e.l,e.a,e.b,e.opacity);if(e instanceof Yp)return PSe(e);e instanceof no||(e=wK(e));var t=_8(e.r),n=_8(e.g),r=_8(e.b),i=y8((.2225045*t+.7168786*n+.0606169*r)/ASe),s,o;return t===n&&n===r?s=o=i:(s=y8((.4360747*t+.3850649*n+.1430804*r)/CSe),o=y8((.0139322*t+.0971045*n+.7141733*r)/ISe)),new dh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function w3(e,t,n,r){return arguments.length===1?NSe(e):new dh(e,t,n,r??1)}function dh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}yS(dh,w3,Ik(Fy,{brighter(e){return new dh(this.l+_3*(e??1),this.a,this.b,this.opacity)},darker(e){return new dh(this.l-_3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=CSe*v8(t),e=ASe*v8(e),n=ISe*v8(n),new no(b8(3.1338561*t-1.6168667*e-.4906146*n),b8(-.9787684*t+1.9161415*e+.033454*n),b8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function y8(e){return e>lct?Math.pow(e,1/3):e/RSe+kSe}function v8(e){return e>nE?e*e*e:RSe*(e-kSe)}function b8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cct(e){if(e instanceof Yp)return new Yp(e.h,e.c,e.l,e.opacity);if(e instanceof dh||(e=NSe(e)),e.a===0&&e.b===0)return new Yp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*TSe;return new Yp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function E3(e,t,n,r){return arguments.length===1?cct(e):new Yp(e,t,n,r??1)}function Yp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function PSe(e){if(isNaN(e.h))return new dh(e.l,0,0,e.opacity);var t=e.h*SSe;return new dh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}yS(Yp,E3,Ik(Fy,{brighter(e){return new Yp(this.h,this.c,this.l+_3*(e??1),this.opacity)},darker(e){return new Yp(this.h,this.c,this.l-_3*(e??1),this.opacity)},rgb(){return PSe(this).rgb()}}));var DSe=-.14861,EK=1.78277,xK=-.29227,C6=-.90649,qA=1.97294,ule=qA*C6,lle=qA*EK,cle=EK*xK-C6*DSe;function fct(e){if(e instanceof Av)return new Av(e.h,e.s,e.l,e.opacity);e instanceof no||(e=wK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(cle*r+ule*t-lle*n)/(cle+ule-lle),s=r-i,o=(qA*(n-i)-xK*s)/C6,a=Math.sqrt(o*o+s*s)/(qA*i*(1-i)),u=a?Math.atan2(o,s)*TSe-120:NaN;return new Av(u<0?u+360:u,a,i,e.opacity)}function X7(e,t,n,r){return arguments.length===1?fct(e):new Av(e,t,n,r??1)}function Av(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yS(Av,X7,Ik(Fy,{brighter(e){return e=e==null?WE:Math.pow(WE,e),new Av(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gv:Math.pow(Gv,e),new Av(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*SSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(DSe*r+EK*i)),255*(t+n*(xK*r+C6*i)),255*(t+n*(qA*r)),this.opacity)}}));function OSe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function $Se(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return OSe((n-r/t)*t,o,i,s,a)}}function MSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return OSe((n-r/t)*t,i,s,o,a)}}const A6=e=>()=>e;function LSe(e,t){return function(n){return e+n*t}}function dct(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function I6(e,t){var n=t-e;return n?LSe(e,n>180||n<-180?n-360*Math.round(n/360):n):A6(isNaN(e)?t:e)}function hct(e){return(e=+e)==1?ro:function(t,n){return n-t?dct(t,n,e):A6(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?LSe(e,n):A6(isNaN(e)?t:e)}const WA=function e(t){var n=hct(t);function r(i,s){var o=n((i=G0(i)).r,(s=G0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function FSe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=G0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var pct=FSe($Se),mct=FSe(MSe);function SK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function jSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gct(e,t){return(jSe(t)?SK:BSe)(e,t)}function BSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=eg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function USe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function zSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=eg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Q7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w8=new RegExp(Q7.source,"g");function yct(e){return function(){return e}}function vct(e){return function(t){return e(t)+""}}function TK(e,t){var n=Q7.lastIndex=w8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Q7.exec(e))&&(i=w8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:gc(r,i)})),n=w8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?vct(u[0].x):yct(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function eg(e,t){var n=typeof t,r;return t==null||n==="boolean"?A6(t):(n==="number"?gc:n==="string"?(r=Yv(t))?(t=r,WA):TK:t instanceof Yv?WA:t instanceof Date?USe:jSe(t)?SK:Array.isArray(t)?BSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zSe:gc)(e,t)}function bct(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function _ct(e,t){var n=I6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function kk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var fle=180/Math.PI,J7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function VSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*fle,skewX:Math.atan(u)*fle,scaleX:o,scaleY:a}}var HN;function wct(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?J7:VSe(t.a,t.b,t.c,t.d,t.e,t.f)}function Ect(e){return e==null||(HN||(HN=document.createElementNS("http://www.w3.org/2000/svg","g")),HN.setAttribute("transform",e),!(e=HN.transform.baseVal.consolidate()))?J7:(e=e.matrix,VSe(e.a,e.b,e.c,e.d,e.e,e.f))}function HSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:gc(l,f)},{i:m-2,x:gc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:gc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:gc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:gc(l,f)},{i:m-2,x:gc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var qSe=HSe(wct,"px, ","px)","deg)"),WSe=HSe(Ect,", ",")",")"),xct=1e-12;function dle(e){return((e=Math.exp(e))+1/e)/2}function Sct(e){return((e=Math.exp(e))-1/e)/2}function Tct(e){return((e=Math.exp(2*e))-1)/(e+1)}const Cct=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<xct)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),x=Math.log(Math.sqrt(w*w+1)-w);y=(x-E)/t,g=function(S){var C=S*y,A=dle(E),k=l/(n*v)*(A*Tct(t*C+E)-Sct(E));return[a+k*h,u+k*p,l*A/dle(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function GSe(e){return function(t,n){var r=e((t=b3(t)).h,(n=b3(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Act=GSe(I6);var Ict=GSe(ro);function kct(e,t){var n=ro((e=w3(e)).l,(t=w3(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function YSe(e){return function(t,n){var r=e((t=E3(t)).h,(n=E3(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Rct=YSe(I6);var Nct=YSe(ro);function KSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=X7(i)).h,(s=X7(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Pct=KSe(I6);var Dct=KSe(ro);function CK(e,t){t===void 0&&(t=e,e=eg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Oct(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const $ct=Object.freeze(Object.defineProperty({__proto__:null,interpolate:eg,interpolateArray:gct,interpolateBasis:$Se,interpolateBasisClosed:MSe,interpolateCubehelix:Pct,interpolateCubehelixLong:Dct,interpolateDate:USe,interpolateDiscrete:bct,interpolateHcl:Rct,interpolateHclLong:Nct,interpolateHsl:Act,interpolateHslLong:Ict,interpolateHue:_ct,interpolateLab:kct,interpolateNumber:gc,interpolateNumberArray:SK,interpolateObject:zSe,interpolateRgb:WA,interpolateRgbBasis:pct,interpolateRgbBasisClosed:mct,interpolateRound:kk,interpolateString:TK,interpolateTransformCss:qSe,interpolateTransformSvg:WSe,interpolateZoom:Cct,piecewise:CK,quantize:Oct},Symbol.toStringTag,{value:"Module"}));var GE=0,C2=0,PT=0,XSe=1e3,x3,A2,S3=0,Kv=0,k6=0,GA=typeof performance=="object"&&performance.now?performance:Date,QSe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function R6(){return Kv||(QSe(Mct),Kv=GA.now()+k6)}function Mct(){Kv=0}function YA(){this._call=this._time=this._next=null}YA.prototype=AK.prototype={constructor:YA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?R6():+n)+(t==null?0:+t),!this._next&&A2!==this&&(A2?A2._next=this:x3=this,A2=this),this._call=e,this._time=n,Z7()},stop:function(){this._call&&(this._call=null,this._time=1/0,Z7())}};function AK(e,t,n){var r=new YA;return r.restart(e,t,n),r}function Lct(){R6(),++GE;for(var e=x3,t;e;)(t=Kv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--GE}function hle(){Kv=(S3=GA.now())+k6,GE=C2=0;try{Lct()}finally{GE=0,jct(),Kv=0}}function Fct(){var e=GA.now(),t=e-S3;t>XSe&&(k6-=t,S3=e)}function jct(){for(var e,t=x3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:x3=n);A2=e,Z7(r)}function Z7(e){if(!GE){C2&&(C2=clearTimeout(C2));var t=e-Kv;t>24?(e<1/0&&(C2=setTimeout(hle,e-GA.now()-k6)),PT&&(PT=clearInterval(PT))):(PT||(S3=GA.now(),PT=setInterval(Fct,XSe)),GE=1,QSe(hle))}}function ple(e,t,n){var r=new YA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Bct(e,t,n){var r=new YA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?R6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Uct=S6("start","end","cancel","interrupt"),zct=[],JSe=0,mle=1,ez=2,ED=3,gle=4,tz=5,xD=6;function N6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Vct(e,n,{name:t,index:r,group:i,on:Uct,tween:zct,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:JSe})}function IK(e,t){var n=ud(e,t);if(n.state>JSe)throw new Error("too late; already scheduled");return n}function Jh(e,t){var n=ud(e,t);if(n.state>ED)throw new Error("too late; already running");return n}function ud(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vct(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=AK(s,0,n.time);function s(l){n.state=mle,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==mle)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===ED)return ple(o);h.state===gle?(h.state=xD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=xD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ple(function(){n.state===ED&&(n.state=gle,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ez,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ez){for(n.state=ED,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=tz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===tz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=xD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function nz(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>ez&&r.state<tz,r.state=xD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Hct(e){return this.each(function(){nz(this,e)})}function qct(e,t){var n,r;return function(){var i=Jh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Wct(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Jh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Gct(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ud(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?qct:Wct)(n,e,t))}function kK(e,t,n){var r=e._id;return e.each(function(){var i=Jh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ud(i,r).value[t]}}function ZSe(e,t){var n;return(typeof t=="number"?gc:t instanceof Yv?WA:(n=Yv(t))?(t=n,WA):TK)(e,t)}function Yct(e){return function(){this.removeAttribute(e)}}function Kct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Qct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Jct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Zct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function eft(e,t){var n=T6(e),r=n==="transform"?WSe:ZSe;return this.attrTween(e,typeof t=="function"?(n.local?Zct:Jct)(n,r,kK(this,"attr."+e,t)):t==null?(n.local?Kct:Yct)(n):(n.local?Qct:Xct)(n,r,t))}function tft(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nft(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rft(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&nft(e,s)),n}return i._value=t,i}function ift(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tft(e,s)),n}return i._value=t,i}function sft(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=T6(e);return this.tween(n,(r.local?rft:ift)(r,t))}function oft(e,t){return function(){IK(this,e).delay=+t.apply(this,arguments)}}function aft(e,t){return t=+t,function(){IK(this,e).delay=t}}function uft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oft:aft)(t,e)):ud(this.node(),t).delay}function lft(e,t){return function(){Jh(this,e).duration=+t.apply(this,arguments)}}function cft(e,t){return t=+t,function(){Jh(this,e).duration=t}}function fft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lft:cft)(t,e)):ud(this.node(),t).duration}function dft(e,t){if(typeof t!="function")throw new Error;return function(){Jh(this,e).ease=t}}function hft(e){var t=this._id;return arguments.length?this.each(dft(t,e)):ud(this.node(),t).ease}function pft(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Jh(this,e).ease=n}}function mft(e){if(typeof e!="function")throw new Error;return this.each(pft(this._id,e))}function gft(e){typeof e!="function"&&(e=pSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Cm(r,this._parents,this._name,this._id)}function yft(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Cm(o,this._parents,this._name,this._id)}function vft(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bft(e,t,n){var r,i,s=vft(t)?IK:Jh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function _ft(e,t){var n=this._id;return arguments.length<2?ud(this.node(),n).on.on(e):this.each(bft(n,e,t))}function wft(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Eft(){return this.on("end.remove",wft(this._id))}function xft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,N6(l[d],t,n,d,l,ud(c,n)));return new Cm(s,this._parents,t,n)}function Sft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hSe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=ud(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&N6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Cm(s,o,t,n)}var Tft=Ak.prototype.constructor;function Cft(){return new Tft(this._groups,this._parents)}function Aft(e,t){var n,r,i;return function(){var s=qE(this,e),o=(this.style.removeProperty(e),qE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function eTe(e){return function(){this.style.removeProperty(e)}}function Ift(e,t,n){var r,i=n+"",s;return function(){var o=qE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function kft(e,t,n){var r,i,s;return function(){var o=qE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),qE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Rft(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Jh(this,e),l=u.on,c=u.value[s]==null?a||(a=eTe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Nft(e,t,n){var r=(e+="")=="transform"?qSe:ZSe;return t==null?this.styleTween(e,Aft(e,r)).on("end.style."+e,eTe(e)):typeof t=="function"?this.styleTween(e,kft(e,r,kK(this,"style."+e,t))).each(Rft(this._id,e)):this.styleTween(e,Ift(e,r,t),n).on("end.style."+e,null)}function Pft(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Dft(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Pft(e,o,n)),r}return s._value=t,s}function Oft(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Dft(e,t,n??""))}function $ft(e){return function(){this.textContent=e}}function Mft(e){return function(){var t=e(this);this.textContent=t??""}}function Lft(e){return this.tween("text",typeof e=="function"?Mft(kK(this,"text",e)):$ft(e==null?"":e+""))}function Fft(e){return function(t){this.textContent=e.call(this,t)}}function jft(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Fft(i)),t}return r._value=e,r}function Bft(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jft(e))}function Uft(){for(var e=this._name,t=this._id,n=tTe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ud(u,t);N6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Cm(r,this._parents,e,n)}function zft(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Jh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Vft=0;function Cm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tTe(){return++Vft}var _p=Ak.prototype;Cm.prototype={constructor:Cm,select:xft,selectAll:Sft,selectChild:_p.selectChild,selectChildren:_p.selectChildren,filter:gft,merge:yft,selection:Cft,transition:Uft,call:_p.call,nodes:_p.nodes,node:_p.node,size:_p.size,empty:_p.empty,each:_p.each,on:_ft,attr:eft,attrTween:sft,style:Nft,styleTween:Oft,text:Lft,textTween:Bft,remove:Eft,tween:Gct,delay:uft,duration:fft,ease:hft,easeVarying:mft,end:zft,[Symbol.iterator]:_p[Symbol.iterator]};const Hft=e=>+e;function qft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wft={time:null,delay:0,duration:250,ease:qft};function Gft(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yft(e){var t,n;e instanceof Cm?(t=e._id,e=e._name):(t=tTe(),(n=Wft).time=R6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&N6(u,e,t,l,o,n||Gft(u,t));return new Cm(r,this._parents,e,t)}Ak.prototype.interrupt=Hct;Ak.prototype.transition=Yft;const E8=e=>()=>e;function Kft(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Xft(e){e.stopImmediatePropagation()}function x8(e){e.preventDefault(),e.stopImmediatePropagation()}var yle={name:"drag"},S8={name:"space"},D_={name:"handle"},O_={name:"center"};const{abs:vle,max:Xo,min:Qo}=Math;function ble(e){return[+e[0],+e[1]]}function rz(e){return[ble(e[0]),ble(e[1])]}var SD={name:"x",handles:["w","e"].map(KA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},TD={name:"y",handles:["n","s"].map(KA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Qft={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(KA),input:function(e){return e==null?null:rz(e)},output:function(e){return e}},wp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_le={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wle={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Jft={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Zft={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function KA(e){return{type:e}}function edt(e){return!e.ctrlKey&&!e.button}function tdt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ndt(){return navigator.maxTouchPoints||"ontouchstart"in this}function T8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function rdt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function idt(){return RK(SD)}function sdt(){return RK(TD)}function odt(){return RK(Qft)}function RK(e){var t=tdt,n=edt,r=ndt,i=!0,s=S6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([KA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wp.overlay).merge(y).each(function(){var _=T8(this).extent;rs(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([KA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return wp[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,E=c(_,arguments),x=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=eg(x,S);function A(k){w.selection=k===1&&S===null?null:C(k),l.call(_),E.brush()}return x!==null&&S!==null?A:A(1)}):g.each(function(){var _=this,w=arguments,E=_.__brush,x=e.input(typeof y=="function"?y.apply(_,w):y,E.extent),S=c(_,w).beforestart();nz(_),E.selection=x===null?null:x,l.call(_),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=rs(this),y=T8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=rs(this.that).datum();s.call(g,this.that,new Kft(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?yle:i&&g.altKey?O_:D_,w=e===TD?null:Jft[v],E=e===SD?null:Zft[v],x=T8(y),S=x.extent,C=x.selection,A=S[0][0],k,N,O=S[0][1],D,$,F=S[1][0],M,B,U=S[1][1],H,P,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=G7(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});nz(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];x.selection=C=[[k=e===TD?A:Qo(_e[0][0],_e[1][0]),D=e===SD?O:Qo(_e[0][1],_e[1][1])],[M=e===TD?F:Xo(_e[0][0],_e[1][0]),H=e===SD?U:Xo(_e[0][1],_e[1][1])]],ce.length>1&&Ke(g)}else k=C[0][0],D=C[0][1],M=C[1][0],H=C[1][1];N=k,$=D,B=M,P=H;var he=rs(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",wp[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=rs(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),Qlt(g.view)}l.call(y),de.start(g,_.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=G7(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];vle(ke.cur[0]-ke[0])>vle(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,x8(_e),Ke(_e)}function Ke(_e){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],_){case S8:case yle:{w&&(z=Xo(A-k,Qo(F-M,z)),N=k+z,B=M+z),E&&(W=Xo(O-D,Qo(U-H,W)),$=D+W,P=H+W);break}case D_:{ce[1]?(w&&(N=Xo(A,Qo(F,ce[0][0])),B=Xo(A,Qo(F,ce[1][0])),w=1),E&&($=Xo(O,Qo(U,ce[0][1])),P=Xo(O,Qo(U,ce[1][1])),E=1)):(w<0?(z=Xo(A-k,Qo(F-k,z)),N=k+z,B=M):w>0&&(z=Xo(A-M,Qo(F-M,z)),N=k,B=M+z),E<0?(W=Xo(O-D,Qo(U-D,W)),$=D+W,P=H):E>0&&(W=Xo(O-H,Qo(U-H,W)),$=D,P=H+W));break}case O_:{w&&(N=Xo(A,Qo(F,k-z*w)),B=Xo(A,Qo(F,M+z*w))),E&&($=Xo(O,Qo(U,D-W*E)),P=Xo(O,Qo(U,H+W*E)));break}}B<N&&(w*=-1,ct=k,k=M,M=ct,ct=N,N=B,B=ct,v in _le&&ve.attr("cursor",wp[v=_le[v]])),P<$&&(E*=-1,ct=D,D=H,H=ct,ct=$,$=P,P=ct,v in wle&&ve.attr("cursor",wp[v=wle[v]])),x.selection&&(C=x.selection),G&&(N=C[0][0],B=C[1][0]),ne&&($=C[0][1],P=C[1][1]),(C[0][0]!==N||C[0][1]!==$||C[1][0]!==B||C[1][1]!==P)&&(x.selection=[[N,$],[B,P]],l.call(y),de.brush(_e,_.name))}function Ue(_e){if(Xft(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Jlt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",wp.overlay),x.selection&&(C=x.selection),rdt(C)&&(x.selection=null,l.call(y)),de.end(_e,_.name)}function yt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{_===D_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),_=O_,Ke(_e));break}case 32:{(_===D_||_===O_)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=P-W:E>0&&(D=$-W),_=S8,ve.attr("cursor",wp.selection),Ke(_e));break}default:return}x8(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Ke(_e));break}case 18:{_===O_&&(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),_=D_,Ke(_e));break}case 32:{_===S8&&(_e.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),_=O_):(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),_=D_),ve.attr("cursor",wp[v]),Ke(_e));break}default:return}x8(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=rz(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:E8(rz(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:E8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:E8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const iz=Math.PI,sz=2*iz,k1=1e-6,adt=sz-k1;function nTe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function udt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nTe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let NK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nTe:udt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>k1)if(!(Math.abs(f*u-l*c)>k1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((iz-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,E=_/y;Math.abs(w-1)>k1&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>k1||Math.abs(this._y1-c)>k1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%sz+sz),d>adt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>k1&&this._append`A${r},${r},0,${+(d>=iz)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function P6(){return new NK}P6.prototype=NK.prototype;const om=11102230246251565e-32,Jo=134217729,ldt=(3+8*om)*om;function C8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function cdt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Rk(e){return new Float64Array(e)}const fdt=(3+16*om)*om,ddt=(2+12*om)*om,hdt=(9+64*om)*om*om,$_=Rk(4),Ele=Rk(8),xle=Rk(12),Sle=Rk(16),Pa=Rk(4);function pdt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,E,x,S,C;const A=e-i,k=n-i,N=t-s,O=r-s;w=A*O,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=N*k,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*k,m=d-(d-k),g=k-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,$_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,$_[1]=_-(y+f)+(f-x),C=v+y,f=C-v,$_[2]=v-(C-f)+(y-f),$_[3]=C;let D=cdt(4,$_),$=ddt*o;if(D>=$||-D>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=hdt*o+ldt*Math.abs(D),D+=A*c+O*a-(N*l+k*u),D>=$||-D>=$))return D;w=a*O,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),x=u*k,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*k,m=d-(d-k),g=k-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Pa[0]=E-(y+f)+(f-S),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const F=C8(4,$_,4,Pa,Ele);w=A*c,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=N*l,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Pa[0]=E-(y+f)+(f-S),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const M=C8(F,Ele,4,Pa,xle);w=a*c,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=u*l,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*l,m=d-(d-l),g=l-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,f=E-y,Pa[0]=E-(y+f)+(f-S),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const B=C8(M,xle,4,Pa,Sle);return Sle[B-1]}function qN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=fdt*l?u:-pdt(e,t,n,r,i,s,l)}const Tle=Math.pow(2,-52),WN=new Uint32Array(512);class T3{static from(t,n=bdt,r=_dt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new T3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],N=t[2*A+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const N=A8(f,d,t[2*A],t[2*A+1]);N<k&&(h=A,k=N)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const N=A8(g,y,t[2*A],t[2*A+1]);N<k&&N>0&&(p=A,k=N)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=ydt(g,y,v,_,t[2*A],t[2*A+1]);k<w&&(m=A,w=k)}let E=t[2*m],x=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Rw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let N=0,O=-1/0;N<o;N++){const D=this._ids[N],$=this._dists[D];$>O&&(A[k++]=D,O=$)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(qN(g,y,v,_,E,x)<0){const A=p,k=v,N=_;p=m,v=E,_=x,m=A,E=k,x=N}const S=vdt(g,y,v,_,E,x);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=A8(t[2*A],t[2*A+1],S.x,S.y);Rw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(E,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,N;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(D-k)<=Tle&&Math.abs($-N)<=Tle||(k=D,N=$,O===h||O===p||O===m))continue;let F=0;for(let P=0,z=this._hashKey(D,$);P<this._hashSize&&(F=s[(z+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let M=F,B;for(;B=r[M],qN(D,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,C++;let H=r[M];for(;B=r[H],qN(D,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,C--,H=B;if(M===F)for(;B=n[M],qN(D,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,C--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,k=this._hullStart;A<C;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mdt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=WN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(gdt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<WN.length&&(WN[s++]=v)}else{if(s===0)break;t=WN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function mdt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function A8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function gdt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function ydt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function vdt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Rw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;DT(e,i,s),t[e[n]]>t[e[r]]&&DT(e,n,r),t[e[s]]>t[e[r]]&&DT(e,s,r),t[e[n]]>t[e[s]]&&DT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;DT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Rw(e,t,s,r),Rw(e,t,n,o-1)):(Rw(e,t,n,o-1),Rw(e,t,s,r))}}function DT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bdt(e){return e[0]}function _dt(e){return e[1]}const Cle=1e-6;class lv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Cle||Math.abs(this._y1-s)>Cle)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class oz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let wdt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,x=r[m+2]*2,S=t[w],C=t[w+1],A=t[E],k=t[E+1],N=t[x],O=t[x+1],D=A-S,$=k-C,F=N-S,M=O-C,B=(D*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-C)*F);v=(S+N)/2-U*M,_=(C+O)/2+U*F}else{const U=1/B,H=D*D+$*$,P=F*F+M*M;v=S+(M*H-$*P)*U,_=C+(D*P-F*H)*U}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new lv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new lv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new lv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new oz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Edt=2*Math.PI,M_=Math.pow;function xdt(e){return e[0]}function Sdt(e){return e[1]}function Tdt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Cdt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class PK{static from(t,n=xdt,r=Sdt,i){return new PK("length"in t?Adt(t,n,r,i):Float64Array.from(Idt(t,n,r,i)))}constructor(t){this._delaunator=new T3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tdt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Cdt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new T3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new wdt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=M_(n-l[t*2],2)+M_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=M_(n-l[p*2],2)+M_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&M_(n-l[h*2],2)+M_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new lv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new lv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Edt)}return r&&r.value()}renderHull(t){const n=t==null?t=new lv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new oz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new lv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new oz;return this.renderTriangle(t,n),n.value()}}function Adt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Idt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Ale={},I8={},k8=34,OT=10,R8=13;function rTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function kdt(e,t){var n=rTe(e);return function(r,i){return t(n(r),i,e)}}function Ile(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Rdt(e){return e<0?"-"+vu(-e,6):e>9999?"+"+vu(e,6):vu(e,4)}function Ndt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Rdt(e.getUTCFullYear())+"-"+vu(e.getUTCMonth()+1,2)+"-"+vu(e.getUTCDate(),2)+(i?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"."+vu(i,3)+"Z":r?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"Z":n||t?"T"+vu(t,2)+":"+vu(n,2)+"Z":"")}function iTe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?kdt(g,d):rTe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===OT&&--p,f.charCodeAt(p-1)===R8&&--p;function w(){if(v)return I8;if(_)return _=!1,Ale;var x,S=m,C;if(f.charCodeAt(S)===k8){for(;m++<p&&f.charCodeAt(m)!==k8||f.charCodeAt(++m)===k8;);return(x=m)>=p?v=!0:(C=f.charCodeAt(m++))===OT?_=!0:C===R8&&(_=!0,f.charCodeAt(m)===OT&&++m),f.slice(S+1,x-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(x=m++))===OT)_=!0;else if(C===R8)_=!0,f.charCodeAt(m)===OT&&++m;else if(C!==n)continue;return f.slice(S,x)}return v=!0,f.slice(S,p)}for(;(y=w())!==I8;){for(var E=[];y!==Ale&&y!==I8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Ile(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Ile(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Ndt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Pdt=iTe(","),Ddt=Pdt.parse;function Odt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function $dt(e,t){return fetch(e,t).then(Odt)}function Mdt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),$dt(t,n).then(function(i){return e(i,r)})}}var DK=Mdt(Ddt);function Ldt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Fdt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return sTe(this.cover(t,n),t,n,e)}function sTe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function jdt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)sTe(this,o[n],a[n],e[n]);return this}function Bdt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Udt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zdt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Vdt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new za(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new za(h[3],g,y,u,l),new za(h[2],o,y,g,l),new za(h[1],g,a,u,y),new za(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Hdt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function qdt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Wdt(){return this._root}function Gdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Ydt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new za(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new za(i,l,c,a,u)),(i=r[2])&&t.push(new za(i,s,c,l,u)),(i=r[1])&&t.push(new za(i,l,o,a,c)),(i=r[0])&&t.push(new za(i,s,o,l,c))}return this}function Kdt(e){var t=[],n=[],r;for(this._root&&t.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new za(s,o,a,c,f)),(s=i[1])&&t.push(new za(s,c,a,u,f)),(s=i[2])&&t.push(new za(s,o,f,c,l)),(s=i[3])&&t.push(new za(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Xdt(e){return e[0]}function Qdt(e){return arguments.length?(this._x=e,this):this._x}function Jdt(e){return e[1]}function Zdt(e){return arguments.length?(this._y=e,this):this._y}function OK(e,t,n){var r=new $K(t??Xdt,n??Jdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function $K(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function kle(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ou=OK.prototype=$K.prototype;ou.copy=function(){var e=new $K(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=kle(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=kle(r));return e};ou.add=Fdt;ou.addAll=jdt;ou.cover=Bdt;ou.data=Udt;ou.extent=zdt;ou.find=Vdt;ou.remove=Hdt;ou.removeAll=qdt;ou.root=Wdt;ou.size=Gdt;ou.visit=Ydt;ou.visitAfter=Kdt;ou.x=Qdt;ou.y=Zdt;function qa(e){return function(){return e}}function e0(e){return(e()-.5)*1e-6}function eht(e){return e.x+e.vx}function tht(e){return e.y+e.vy}function nht(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=qa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=OK(t,eht,tht).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,E,x,S){var C=_.data,A=_.r,k=m+A;if(C){if(C.index>d.index){var N=h-C.x-C.vx,O=p-C.y-C.vy,D=N*N+O*O;D<k*k&&(N===0&&(N=e0(r),D+=N*N),O===0&&(O=e0(r),D+=O*O),D=(k-(D=Math.sqrt(D)))/D*i,d.vx+=(N*=D)*(k=(A*=A)/(g+A)),d.vy+=(O*=D)*k,C.vx-=N*(k=1-k),C.vy-=O*k)}return}return w>h+k||x<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:qa(+l),u(),o):e},o}function rht(e){return e.index}function Rle(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function iht(e){var t=rht,n=f,r,i=qa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,E,x,S,C,A,k;_<v;++_)w=e[_],E=w.source,x=w.target,S=x.x+x.vx-E.x-E.vx||e0(l),C=x.y+x.vy-E.y-E.vy||e0(l),A=Math.sqrt(S*S+C*C),A=(A-s[_])/A*g*r[_],S*=A,C*=A,x.vx-=S*(k=u[_]),x.vy-=C*k,E.vx+=S*(k=1-k),E.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,x)=>[t(E,x,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Rle(_,w.source)),typeof w.target!="object"&&(w.target=Rle(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:qa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:qa(+g),m(),d):i},d}const sht=1664525,oht=1013904223,Nle=4294967296;function aht(){let e=1;return()=>(e=(sht*e+oht)%Nle)/Nle}function uht(e){return e.x}function lht(e){return e.y}var cht=10,fht=Math.PI*(3-Math.sqrt(5));function dht(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=AK(f),l=S6("tick","end"),c=aht();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=cht*Math.sqrt(.5+m),_=m*fht;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,E,x,S,C;for(y==null?y=1/0:y*=y,v=0;v<_;++v)S=e[v],w=m-S.x,E=g-S.y,x=w*w+E*E,x<y&&(C=S,y=x);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function hht(){var e,t,n,r,i=qa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=OK(e,uht,lht).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=e0(n),w+=y*y),v===0&&(v=e0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=e0(n),w+=y*y),v===0&&(v=e0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:qa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function pht(e){var t=qa(.1),n,r,i;typeof e!="function"&&(e=qa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:qa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:qa(+a),o(),s):e},s}function mht(e){var t=qa(.1),n,r,i;typeof e!="function"&&(e=qa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:qa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:qa(+a),o(),s):e},s}function ght(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function C3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function YE(e){return e=C3(Math.abs(e)),e?e[1]:NaN}function yht(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function vht(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bht=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xv(e){if(!(t=bht.exec(e)))throw new Error("invalid format: "+e);var t;return new MK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xv.prototype=MK.prototype;function MK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}MK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _ht(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oTe;function wht(e,t){var n=C3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(oTe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+C3(e,Math.max(0,t+s-1))[0]}function Ple(e,t){var n=C3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Dle={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ght,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ple(e*100,t),r:Ple,s:wht,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ole(e){return e}var $le=Array.prototype.map,Mle=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aTe(e){var t=e.grouping===void 0||e.thousands===void 0?Ole:yht($le.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ole:vht($le.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Xv(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Dle[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",C=Dle[E],A=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function k(N){var O=x,D=S,$,F,M;if(E==="c")D=C(N)+D,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:C(Math.abs(N),_),w&&(N=_ht(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(E==="s"?Mle[8+oTe/3]:"")+D+(B&&p==="("?")":""),A){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){D=(M===46?i+N.slice($+1):N.slice($))+D,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+D.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-D.length:1/0),H=""),h){case"<":N=O+N+D+H;break;case"=":N=O+H+N+D;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+D+H.slice(U);break;default:N=H+O+N+D;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=Xv(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(YE(d)/3)))*3,m=Math.pow(10,-p),g=Mle[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var GN,jy,LK;Eht({thousands:",",grouping:[3],currency:["$",""]});function Eht(e){return GN=aTe(e),jy=GN.format,LK=GN.formatPrefix,GN}function uTe(e){return Math.max(0,-YE(Math.abs(e)))}function lTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(YE(t)/3)))*3-YE(Math.abs(e)))}function cTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,YE(t)-YE(e))+1}var Bt=1e-6,A3=1e-12,Pn=Math.PI,Gi=Pn/2,I3=Pn/4,Za=Pn*2,is=180/Pn,Rn=Pn/180,Xn=Math.abs,vS=Math.atan,$c=Math.atan2,zt=Math.cos,YN=Math.ceil,fTe=Math.exp,az=Math.hypot,k3=Math.log,N8=Math.pow,Ft=Math.sin,xc=Math.sign||function(e){return e>0?1:e<0?-1:0},eu=Math.sqrt,FK=Math.tan;function dTe(e){return e>1?0:e<-1?Pn:Math.acos(e)}function Qu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function ko(){}function R3(e,t){e&&Fle.hasOwnProperty(e.type)&&Fle[e.type](e,t)}var Lle={Feature:function(e,t){R3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)R3(n[r].geometry,t)}},Fle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){uz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)uz(n[r],t,0)},Polygon:function(e,t){jle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)R3(n[r],t)}};function uz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function jle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)uz(e[n],t,1);t.polygonEnd()}function jp(e,t){e&&Lle.hasOwnProperty(e.type)?Lle[e.type](e,t):R3(e,t)}var N3=new Ya,P3=new Ya,hTe,pTe,lz,cz,fz,Ch={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){N3=new Ya,Ch.lineStart=xht,Ch.lineEnd=Sht},polygonEnd:function(){var e=+N3;P3.add(e<0?Za+e:e),this.lineStart=this.lineEnd=this.point=ko},sphere:function(){P3.add(Za)}};function xht(){Ch.point=Tht}function Sht(){mTe(hTe,pTe)}function Tht(e,t){Ch.point=mTe,hTe=e,pTe=t,e*=Rn,t*=Rn,lz=e,cz=zt(t=t/2+I3),fz=Ft(t)}function mTe(e,t){e*=Rn,t*=Rn,t=t/2+I3;var n=e-lz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=fz*o,u=cz*s+a*zt(i),l=a*r*Ft(i);N3.add($c(l,u)),lz=e,cz=s,fz=o}function Cht(e){return P3=new Ya,jp(e,Ch),P3*2}function D3(e){return[$c(e[1],e[0]),Qu(e[2])]}function Qv(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function KN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function KE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function P8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function XN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function O3(e){var t=eu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ri,Au,ji,vl,R1,gTe,yTe,rE,kC,Dg,Am,Op={point:dz,lineStart:Ble,lineEnd:Ule,polygonStart:function(){Op.point=bTe,Op.lineStart=Aht,Op.lineEnd=Iht,kC=new Ya,Ch.polygonStart()},polygonEnd:function(){Ch.polygonEnd(),Op.point=dz,Op.lineStart=Ble,Op.lineEnd=Ule,N3<0?(Ri=-(ji=180),Au=-(vl=90)):kC>Bt?vl=90:kC<-Bt&&(Au=-90),Am[0]=Ri,Am[1]=ji},sphere:function(){Ri=-(ji=180),Au=-(vl=90)}};function dz(e,t){Dg.push(Am=[Ri=e,ji=e]),t<Au&&(Au=t),t>vl&&(vl=t)}function vTe(e,t){var n=Qv([e*Rn,t*Rn]);if(rE){var r=KE(rE,n),i=[r[1],-r[0],0],s=KE(i,r);O3(s),s=D3(s);var o=e-R1,a=o>0?1:-1,u=s[0]*is*a,l,c=Xn(o)>180;c^(a*R1<u&&u<a*e)?(l=s[1]*is,l>vl&&(vl=l)):(u=(u+360)%360-180,c^(a*R1<u&&u<a*e)?(l=-s[1]*is,l<Au&&(Au=l)):(t<Au&&(Au=t),t>vl&&(vl=t))),c?e<R1?gl(Ri,e)>gl(Ri,ji)&&(ji=e):gl(e,ji)>gl(Ri,ji)&&(Ri=e):ji>=Ri?(e<Ri&&(Ri=e),e>ji&&(ji=e)):e>R1?gl(Ri,e)>gl(Ri,ji)&&(ji=e):gl(e,ji)>gl(Ri,ji)&&(Ri=e)}else Dg.push(Am=[Ri=e,ji=e]);t<Au&&(Au=t),t>vl&&(vl=t),rE=n,R1=e}function Ble(){Op.point=vTe}function Ule(){Am[0]=Ri,Am[1]=ji,Op.point=dz,rE=null}function bTe(e,t){if(rE){var n=e-R1;kC.add(Xn(n)>180?n+(n>0?360:-360):n)}else gTe=e,yTe=t;Ch.point(e,t),vTe(e,t)}function Aht(){Ch.lineStart()}function Iht(){bTe(gTe,yTe),Ch.lineEnd(),Xn(kC)>Bt&&(Ri=-(ji=180)),Am[0]=Ri,Am[1]=ji,rE=null}function gl(e,t){return(t-=e)<0?t+360:t}function kht(e,t){return e[0]-t[0]}function zle(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Rht(e){var t,n,r,i,s,o,a;if(vl=ji=-(Ri=Au=1/0),Dg=[],jp(e,Op),n=Dg.length){for(Dg.sort(kht),t=1,r=Dg[0],s=[r];t<n;++t)i=Dg[t],zle(r,i[0])||zle(r,i[1])?(gl(r[0],i[1])>gl(r[0],r[1])&&(r[1]=i[1]),gl(i[0],r[1])>gl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=gl(r[1],i[0]))>o&&(o=a,Ri=i[0],ji=r[1])}return Dg=Am=null,Ri===1/0||Au===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ri,Au],[ji,vl]]}var I2,$3,M3,L3,F3,j3,B3,U3,hz,pz,mz,_Te,wTe,ja,Ba,Ua,Pf={sphere:ko,point:jK,lineStart:Vle,lineEnd:Hle,polygonStart:function(){Pf.lineStart=Dht,Pf.lineEnd=Oht},polygonEnd:function(){Pf.lineStart=Vle,Pf.lineEnd=Hle}};function jK(e,t){e*=Rn,t*=Rn;var n=zt(t);Nk(n*zt(e),n*Ft(e),Ft(t))}function Nk(e,t,n){++I2,M3+=(e-M3)/I2,L3+=(t-L3)/I2,F3+=(n-F3)/I2}function Vle(){Pf.point=Nht}function Nht(e,t){e*=Rn,t*=Rn;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Pf.point=Pht,Nk(ja,Ba,Ua)}function Pht(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=$c(eu((o=Ba*s-Ua*i)*o+(o=Ua*r-ja*s)*o+(o=ja*i-Ba*r)*o),ja*r+Ba*i+Ua*s);$3+=o,j3+=o*(ja+(ja=r)),B3+=o*(Ba+(Ba=i)),U3+=o*(Ua+(Ua=s)),Nk(ja,Ba,Ua)}function Hle(){Pf.point=jK}function Dht(){Pf.point=$ht}function Oht(){ETe(_Te,wTe),Pf.point=jK}function $ht(e,t){_Te=e,wTe=t,e*=Rn,t*=Rn,Pf.point=ETe;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Nk(ja,Ba,Ua)}function ETe(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Ba*s-Ua*i,a=Ua*r-ja*s,u=ja*i-Ba*r,l=az(o,a,u),c=Qu(l),f=l&&-c/l;hz.add(f*o),pz.add(f*a),mz.add(f*u),$3+=c,j3+=c*(ja+(ja=r)),B3+=c*(Ba+(Ba=i)),U3+=c*(Ua+(Ua=s)),Nk(ja,Ba,Ua)}function Mht(e){I2=$3=M3=L3=F3=j3=B3=U3=0,hz=new Ya,pz=new Ya,mz=new Ya,jp(e,Pf);var t=+hz,n=+pz,r=+mz,i=az(t,n,r);return i<A3&&(t=j3,n=B3,r=U3,$3<Bt&&(t=M3,n=L3,r=F3),i=az(t,n,r),i<A3)?[NaN,NaN]:[$c(n,t)*is,Qu(r/i)*is]}function gz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function yz(e,t){return Xn(e)>Pn&&(e-=Math.round(e/Za)*Za),[e,t]}yz.invert=yz;function xTe(e,t,n){return(e%=Za)?t||n?gz(Wle(e),Gle(t,n)):Wle(e):t||n?Gle(t,n):yz}function qle(e){return function(t,n){return t+=e,Xn(t)>Pn&&(t-=Math.round(t/Za)*Za),[t,n]}}function Wle(e){var t=qle(e);return t.invert=qle(-e),t}function Gle(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[$c(f*i-h*s,c*n-d*r),Qu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[$c(f*i+d*s,c*n+h*r),Qu(h*n-c*r)]},o}function Lht(e){e=xTe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n},t}function Fht(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*Za,s=t-u/2):(i=Yle(o,i),s=Yle(o,s),(r>0?i<s:i>s)&&(i+=r*Za));for(var l,c=i;r>0?c>s:c<s;c-=u)l=D3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function Yle(e,t){t=Qv(t),t[0]-=e,O3(t);var n=dTe(-t[1]);return((-t[2]<0?-n:n)+Za-Bt)%Za}function STe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ko,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function CD(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function QN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(CD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new QN(g,p,null,!0)),o.push(v.o=new QN(g,null,v,!1)),s.push(v=new QN(y,p,null,!1)),o.push(v.o=new QN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Kle(s),Kle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Kle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function D8(e){return Xn(e[0])<=Pn?e[0]:xc(e[0])*((Xn(e[0])+Pn)%Za-Pn)}function jht(e,t){var n=D8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Ya;i===1?r=Gi+Bt:i===-1&&(r=-Gi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=D8(h),m=h[1]/2+I3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=x,y=S,h=_){var _=f[v],w=D8(_),E=_[1]/2+I3,x=Ft(E),S=zt(E),C=w-p,A=C>=0?1:-1,k=A*C,N=k>Pn,O=g*x;if(u.add($c(O*A*Ft(k),y*S+O*zt(k))),o+=N?C+A*Za:C,N^p>=n^w>=n){var D=KE(Qv(h),Qv(_));O3(D);var $=KE(s,D);O3($);var F=(N^C>=0?-1:1)*Qu($[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=N^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-A3)^a&1}function CTe(e,t,n,r){return function(i){var s=t(i),o=STe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=lSe(c);var w=jht(l,r);c.length?(u||(i.polygonStart(),u=!0),TTe(c,Uht,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),x,S=E.length,C,A,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<C;++x)i.point((k=A[x])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Bht))}}return d}}function Bht(e){return e.length>1}function Uht(e,t){return((e=e.x)[0]<0?e[1]-Gi-Bt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-Bt:Gi-t[1])}const Xle=CTe(function(){return!0},zht,Hht,[-Pn,-Gi]);function zht(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Pn:-Pn,u=Xn(s-t);Xn(u-Pn)<Bt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Pn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=Vht(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Vht(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?vS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function Hht(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Pn:-Pn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function qht(e){var t=zt(e),n=2*Rn,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){Fht(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Pn:-Pn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||CD(f,_)||CD(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var x;!(E&d)&&(x=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}w&&(!f||!CD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Qv(c),p=Qv(f),m=[1,0,0],g=KE(h,p),y=KN(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,E=-t*v/_,x=KE(m,g),S=XN(m,w),C=XN(g,E);P8(S,C);var A=x,k=KN(S,A),N=KN(A,A),O=k*k-N*(KN(S,S)-1);if(!(O<0)){var D=eu(O),$=XN(A,(-k-D)/N);if(P8($,S),$=D3($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var P=M-F,z=Xn(P-Pn)<Bt,W=z||P<Bt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Xn($[0]-F)<Bt?B:U):B<=$[1]&&$[1]<=U:P>Pn^(F<=$[0]&&$[0]<=M)){var j=XN(A,(-k+D)/N);return P8(j,S),[$,D3(j)]}}}function l(c,f){var d=r?e:Pn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return CTe(o,a,s,r?[0,-e]:[-Pn,e-Pn])}function Wht(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var k2=1e9,JN=-k2;function ATe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=STe(),d,h,p,m,g,y,v,_,w,E,x,S={point:C,lineStart:O,lineEnd:D,polygonStart:k,polygonEnd:N};function C(F,M){i(F,M)&&c.point(F,M)}function A(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,P=U.length,z=U[0],W,j,q=z[0],G=z[1];H<P;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],x=!0}function N(){var F=A(),M=x&&F,B=(d=lSe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&TTe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=_=NaN}function D(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=C,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(JN,Math.min(k2,v)),_=Math.max(JN,Math.min(k2,_))],H=[F=Math.max(JN,Math.min(k2,F)),M=Math.max(JN,Math.min(k2,M))];Wht(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),x=!1):B&&(c.lineStart(),c.point(F,M),x=!1)}v=F,_=M,w=B}return S}}function Qle(e,t,n){var r=$u(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Jle(e,t,n){var r=$u(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Ght(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return $u(YN(r/c)*c,n,c).map(p).concat($u(YN(a/f)*f,o,f).map(m)).concat($u(YN(t/u)*u,e,u).filter(function(_){return Xn(_%c)>Bt}).map(d)).concat($u(YN(s/l)*l,i,l).filter(function(_){return Xn(_%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=Qle(s,i,90),h=Jle(t,e,g),p=Qle(a,o,90),m=Jle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const XA=e=>e;var O8=new Ya,vz=new Ya,ITe,kTe,bz,_z,Bp={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){Bp.lineStart=Yht,Bp.lineEnd=Xht},polygonEnd:function(){Bp.lineStart=Bp.lineEnd=Bp.point=ko,O8.add(Xn(vz)),vz=new Ya},result:function(){var e=O8/2;return O8=new Ya,e}};function Yht(){Bp.point=Kht}function Kht(e,t){Bp.point=RTe,ITe=bz=e,kTe=_z=t}function RTe(e,t){vz.add(_z*e-bz*t),bz=e,_z=t}function Xht(){RTe(ITe,kTe)}var XE=1/0,z3=XE,QA=-XE,V3=QA,H3={point:Qht,lineStart:ko,lineEnd:ko,polygonStart:ko,polygonEnd:ko,result:function(){var e=[[XE,z3],[QA,V3]];return QA=V3=-(z3=XE=1/0),e}};function Qht(e,t){e<XE&&(XE=e),e>QA&&(QA=e),t<z3&&(z3=t),t>V3&&(V3=t)}var wz=0,Ez=0,R2=0,q3=0,W3=0,Nw=0,xz=0,Sz=0,N2=0,NTe,PTe,Vd,Hd,_c={point:Jv,lineStart:Zle,lineEnd:ece,polygonStart:function(){_c.lineStart=ept,_c.lineEnd=tpt},polygonEnd:function(){_c.point=Jv,_c.lineStart=Zle,_c.lineEnd=ece},result:function(){var e=N2?[xz/N2,Sz/N2]:Nw?[q3/Nw,W3/Nw]:R2?[wz/R2,Ez/R2]:[NaN,NaN];return wz=Ez=R2=q3=W3=Nw=xz=Sz=N2=0,e}};function Jv(e,t){wz+=e,Ez+=t,++R2}function Zle(){_c.point=Jht}function Jht(e,t){_c.point=Zht,Jv(Vd=e,Hd=t)}function Zht(e,t){var n=e-Vd,r=t-Hd,i=eu(n*n+r*r);q3+=i*(Vd+e)/2,W3+=i*(Hd+t)/2,Nw+=i,Jv(Vd=e,Hd=t)}function ece(){_c.point=Jv}function ept(){_c.point=npt}function tpt(){DTe(NTe,PTe)}function npt(e,t){_c.point=DTe,Jv(NTe=Vd=e,PTe=Hd=t)}function DTe(e,t){var n=e-Vd,r=t-Hd,i=eu(n*n+r*r);q3+=i*(Vd+e)/2,W3+=i*(Hd+t)/2,Nw+=i,i=Hd*e-Vd*t,xz+=i*(Vd+e),Sz+=i*(Hd+t),N2+=i*3,Jv(Vd=e,Hd=t)}function OTe(e){this._context=e}OTe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Za);break}}},result:ko};var Tz=new Ya,$8,$Te,MTe,P2,D2,JA={point:ko,lineStart:function(){JA.point=rpt},lineEnd:function(){$8&&LTe($Te,MTe),JA.point=ko},polygonStart:function(){$8=!0},polygonEnd:function(){$8=null},result:function(){var e=+Tz;return Tz=new Ya,e}};function rpt(e,t){JA.point=LTe,$Te=P2=e,MTe=D2=t}function LTe(e,t){P2-=e,D2-=t,Tz.add(eu(P2*P2+D2*D2)),P2=e,D2=t}let tce,G3,nce,rce;class ice{constructor(t){this._append=t==null?FTe:ipt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==nce||this._append!==G3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nce=r,G3=this._append,rce=this._,this._=i}this._+=rce;break}}}result(){const t=this._;return this._="",t.length?t:null}}function FTe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ipt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return FTe;if(t!==tce){const n=10**t;tce=t,G3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return G3}function jTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),jp(a,i(s))),s.result()}return o.area=function(a){return jp(a,i(Bp)),Bp.result()},o.measure=function(a){return jp(a,i(JA)),JA.result()},o.bounds=function(a){return jp(a,i(H3)),H3.result()},o.centroid=function(a){return jp(a,i(_c)),_c.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,XA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new ice(n)):new OTe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new ice(n)),o},o.projection(e).digits(n).context(t)}function D6(e){return function(t){var n=new Cz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Cz(){}Cz.prototype={constructor:Cz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function BK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),jp(n,e.stream(H3)),t(H3.result()),r!=null&&e.clipExtent(r),e}function O6(e,t,n){return BK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function UK(e,t,n){return O6(e,[[0,0],t],n)}function zK(e,t,n){return BK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function VK(e,t,n){return BK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var sce=16,spt=zt(30*Rn);function oce(e,t){return+t?apt(e,t):opt(e)}function opt(e){return D6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function apt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,E=a+h,x=u+p,S=eu(w*w+E*E+x*x),C=Qu(x/=S),A=Xn(Xn(x)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:$c(E,w),k=e(A,C),N=k[0],O=k[1],D=N-r,$=O-i,F=v*D-y*$;(F*F/_>t||Xn((y*D+v*$)/_-.5)>.3||o*d+a*h+u*p<spt)&&(n(r,i,s,o,a,u,N,O,A,w/=S,E/=S,x,m,g),g.point(N,O),n(N,O,A,w,E,x,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(C,A){var k=Qv([C,A]),N=e(C,A);n(f,d,c,h,p,m,f=N[0],d=N[1],c=C,h=k[0],p=k[1],m=k[2],sce,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=x,g.lineEnd=S}function x(C,A){_(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,sce,r),g.lineEnd=w,w()}return g}}var upt=D6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function lpt(e){return D6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function cpt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function ace(e,t,n,r,i,s){if(!s)return cpt(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Zh(e){return BTe(function(){return e})()}function BTe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Xle,g=null,y,v,_,w=XA,E=.5,x,S,C,A,k;function N(F){return C(F[0]*Rn,F[1]*Rn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*is,F[1]*is]}N.stream=function(F){return A&&k===F?A:A=upt(lpt(c)(m(x(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=_=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?qht(p=F*Rn):(p=null,Xle),$()):p*is},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=_=null,XA):ATe(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),$()):g==null?null:[[g,y],[v,_]]},N.scale=function(F){return arguments.length?(n=+F,D()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*Rn,o=F[1]%360*Rn,D()):[s*is,o*is]},N.rotate=function(F){return arguments.length?(a=F[0]%360*Rn,u=F[1]%360*Rn,l=F.length>2?F[2]%360*Rn:0,D()):[a*is,u*is,l*is]},N.angle=function(F){return arguments.length?(f=F%360*Rn,D()):f*is},N.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},N.precision=function(F){return arguments.length?(x=oce(S,E=F*F),$()):eu(E)},N.fitExtent=function(F,M){return O6(N,F,M)},N.fitSize=function(F,M){return UK(N,F,M)},N.fitWidth=function(F,M){return zK(N,F,M)},N.fitHeight=function(F,M){return VK(N,F,M)};function D(){var F=ace(n,0,0,d,h,f).apply(null,t(s,o)),M=ace(n,r-F[0],i-F[1],d,h,f);return c=xTe(a,u,l),S=gz(t,M),C=gz(c,S),x=oce(S,E),$()}function $(){return A=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,D()}}function HK(e){var t=0,n=Pn/3,r=BTe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*is,n*is]},i}function fpt(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Qu(i*t)]},n}function dpt(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return fpt(e);var i=1+n*(2*r-n),s=eu(i)/r;function o(a,u){var l=eu(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=$c(a,Xn(l))*xc(l);return l*r<0&&(c-=Pn*xc(a)*xc(l)),[c/r,Qu((i-(a*a+l*l)*r*r)/(2*r))]},o}function Y3(){return HK(dpt).scale(155.424).center([0,33.6442])}function UTe(){return Y3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hpt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ppt(){var e,t,n=UTe(),r,i=Y3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Y3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=hpt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return O6(c,d,h)},c.fitSize=function(d,h){return UK(c,d,h)},c.fitWidth=function(d,h){return zK(c,d,h)},c.fitHeight=function(d,h){return VK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function zTe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function Pk(e){return function(t,n){var r=eu(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[$c(t*s,r*o),Qu(r&&n*s/r)]}}var VTe=zTe(function(e){return eu(2/(1+e))});VTe.invert=Pk(function(e){return 2*Qu(e/2)});function mpt(){return Zh(VTe).scale(124.75).clipAngle(180-.001)}var HTe=zTe(function(e){return(e=dTe(e))&&e/Ft(e)});HTe.invert=Pk(function(e){return e});function gpt(){return Zh(HTe).scale(79.4188).clipAngle(180-.001)}function $6(e,t){return[e,k3(FK((Gi+t)/2))]}$6.invert=function(e,t){return[e,2*vS(fTe(t))-Gi]};function ypt(){return qTe($6).scale(961/Za)}function qTe(e){var t=Zh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Pn*r(),d=t(Lht(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===$6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function ZN(e){return FK((Gi+e)/2)}function vpt(e,t){var n=zt(e),r=e===t?Ft(e):k3(n/zt(t))/k3(ZN(t)/ZN(e)),i=n*N8(ZN(e),r)/r;if(!r)return $6;function s(o,a){i>0?a<-Gi+Bt&&(a=-Gi+Bt):a>Gi-Bt&&(a=Gi-Bt);var u=i/N8(ZN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=xc(r)*eu(o*o+u*u),c=$c(o,Xn(u))*xc(u);return u*r<0&&(c-=Pn*xc(o)*xc(u)),[c/r,2*vS(N8(i/l,1/r))-Gi]},s}function bpt(){return HK(vpt).scale(109.5).parallels([30,30])}function K3(e,t){return[e,t]}K3.invert=K3;function _pt(){return Zh(K3).scale(152.63)}function wpt(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return K3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=$c(o,Xn(u))*xc(u);return u*r<0&&(l-=Pn*xc(o)*xc(u)),[l/r,i-xc(r)*eu(o*o+u*u)]},s}function Ept(){return HK(wpt).scale(131.154).center([0,13.9389])}var RC=1.340264,NC=-.081106,PC=893e-6,DC=.003796,X3=eu(3)/2,xpt=12;function WTe(e,t){var n=Qu(X3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(X3*(RC+3*NC*r+i*(7*PC+9*DC*r))),n*(RC+NC*r+i*(PC+DC*r))]}WTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<xpt&&(a=n*(RC+NC*r+i*(PC+DC*r))-t,u=RC+3*NC*r+i*(7*PC+9*DC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<A3));++s);return[X3*e*(RC+3*NC*r+i*(7*PC+9*DC*r))/zt(n),Qu(Ft(n)/X3)]};function Spt(){return Zh(WTe).scale(177.158)}function GTe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}GTe.invert=Pk(vS);function Tpt(){return Zh(GTe).scale(144.049).clipAngle(60)}function Cpt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=D6({point:function(w,E){var x=_([w,E]);this.stream.point(x[0],x[1])}}),m=XA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*d,x=w[1]*h;if(s){var S=x*o-E*a;E=E*o+x*a,x=S}return[E+t,x+n]}return _.invert=function(w){var E=w[0]-t,x=w[1]-n;if(s){var S=x*o+E*a;E=E*o-x*a,x=S}return[E/d,x/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,XA):ATe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Rn,a=Ft(s),o=zt(s),v()):s*is},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,E){return O6(_,w,E)},_.fitSize=function(w,E){return UK(_,w,E)},_.fitWidth=function(w,E){return zK(_,w,E)},_.fitHeight=function(w,E){return VK(_,w,E)},_}function YTe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}YTe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Apt(){return Zh(YTe).scale(175.295)}function KTe(e,t){return[zt(t)*Ft(e),Ft(t)]}KTe.invert=Pk(Qu);function Ipt(){return Zh(KTe).scale(249.5).clipAngle(90+Bt)}function XTe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}XTe.invert=Pk(function(e){return 2*vS(e)});function kpt(){return Zh(XTe).scale(250).clipAngle(142)}function QTe(e,t){return[k3(FK((Gi+t)/2)),-e]}QTe.invert=function(e,t){return[-t,2*vS(fTe(e))-Gi]};function Rpt(){var e=qTe(QTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Npt(e,t){return e.parent===t.parent?1:2}function Ppt(e){return e.reduce(Dpt,0)/e.length}function Dpt(e,t){return e+t.x}function Opt(e){return 1+e.reduce($pt,0)}function $pt(e,t){return Math.max(e,t.y)}function Mpt(e){for(var t;t=e.children;)e=t[0];return e}function Lpt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Fpt(){var e=Npt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Ppt(h),d.y=Opt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Mpt(s),l=Lpt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function jpt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Bpt(){return this.eachAfter(jpt)}function Upt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function zpt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Vpt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Hpt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function qpt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Wpt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Gpt(e){for(var t=this,n=Ypt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ypt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Kpt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Xpt(){return Array.from(this)}function Qpt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Jpt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zpt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function M6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=nmt)):t===void 0&&(t=tmt);for(var n=new QE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new QE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(JTe)}function emt(){return M6(this).eachBefore(rmt)}function tmt(e){return e.children}function nmt(e){return Array.isArray(e)?e[1]:null}function rmt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function JTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function QE(e){this.data=e,this.depth=this.height=0,this.parent=null}QE.prototype=M6.prototype={constructor:QE,count:Bpt,each:Upt,eachAfter:Vpt,eachBefore:zpt,find:Hpt,sum:qpt,sort:Wpt,path:Gpt,ancestors:Kpt,descendants:Xpt,leaves:Qpt,links:Jpt,copy:emt,[Symbol.iterator]:Zpt};function AD(e){return e==null?null:ZTe(e)}function ZTe(e){if(typeof e!="function")throw new Error;return e}function q1(){return 0}function sw(e){return function(){return e}}const imt=1664525,smt=1013904223,uce=4294967296;function omt(){let e=1;return()=>(e=(imt*e+smt)%uce)/uce}function amt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function umt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function lmt(e,t){for(var n=0,r=(e=umt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&e2e(o,s)?++n:(o=fmt(i=cmt(i,s)),n=0);return o}function cmt(e,t){var n,r;if(M8(t,e))return[t];for(n=0;n<e.length;++n)if(eP(t,e[n])&&M8(O2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(eP(O2(e[n],e[r]),t)&&eP(O2(e[n],t),e[r])&&eP(O2(e[r],t),e[n])&&M8(t2e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function eP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function e2e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function M8(e,t){for(var n=0;n<t.length;++n)if(!e2e(e,t[n]))return!1;return!0}function fmt(e){switch(e.length){case 1:return dmt(e[0]);case 2:return O2(e[0],e[1]);case 3:return t2e(e[0],e[1],e[2])}}function dmt(e){return{x:e.x,y:e.y,r:e.r}}function O2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function t2e(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,x=(p*w-m*_)/(E*2)-r,S=(m*g-p*y)/E,C=(h*_-d*w)/(E*2)-i,A=(d*y-h*g)/E,k=S*S+A*A-1,N=2*(s+x*S+C*A),O=x*x+C*C-s*s,D=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*O))/(2*k):O/N);return{x:r+x+S*D,y:i+C+A*D,r:D}}function lce(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function cce(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function fce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function tP(e){this._=e,this.next=null,this.previous=null}function hmt(e,t){if(!(s=(e=amt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;lce(r,n,i=e[2]),n=new tP(n),r=new tP(r),i=new tP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){lce(n._,r._,i=e[u]),i=new tP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(cce(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(cce(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=fce(n);(i=i.next)!==r;)(a=fce(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lmt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function pmt(e){return Math.sqrt(e.value)}function n2e(){var e=null,t=1,n=1,r=q1;function i(s){const o=omt();return s.x=t/2,s.y=n/2,e?s.eachBefore(dce(e)).eachAfter(L8(r,.5,o)).eachBefore(hce(1)):s.eachBefore(dce(pmt)).eachAfter(L8(q1,1,o)).eachAfter(L8(r,s.r/Math.min(t,n),o)).eachBefore(hce(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=AD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:sw(+s),i):r},i}function dce(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function L8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=hmt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function hce(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function r2e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Dk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function mmt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(r2e),o}function s(o,a){return function(u){u.children&&Dk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var gmt={depth:-1},pce={},F8={};function ymt(e){return e.id}function vmt(e){return e.parentId}function mce(){var e=ymt,t=vmt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>bmt(n(w,E,i))),v=y.map(gce),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(gce(w)),s.push(F8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new QE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?pce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===pce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===F8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===F8);--y)h.data=null}if(f.parent=gmt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(JTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=AD(i),r):e},r.parentId=function(i){return arguments.length?(t=AD(i),r):t},r.path=function(i){return arguments.length?(n=AD(i),r):n},r}function bmt(e){e=`${e}`;let t=e.length;return Az(e,t-1)&&!Az(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function gce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Az(e,t););return e.slice(0,t)}function Az(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function _mt(e,t){return e.parent===t.parent?1:2}function j8(e){var t=e.children;return t?t[0]:e.t}function B8(e){var t=e.children;return t?t[t.length-1]:e.t}function wmt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Emt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xmt(e,t,n){return e.a.parent===t.parent?e.a:n}function ID(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ID.prototype=Object.create(QE.prototype);function Smt(e){for(var t=new ID(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new ID(s[o],o)),i.parent=n;return(t.parent=new ID(null,0)).children=[t],t}function Tmt(){var e=_mt,t=1,n=1,r=null;function i(l){var c=Smt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Emt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=B8(p),d=j8(d),p&&d;)m=j8(m),h=B8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(wmt(xmt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!B8(h)&&(h.t=p,h.m+=v-y),d&&!j8(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function L6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var i2e=(1+Math.sqrt(5))/2;function s2e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,E,x;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),x=g*g*E,w=Math.max(v/x,x/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),x=g*g*E,_=Math.max(v/x,x/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?Dk(u,n,r,i,m?r+=p*g/m:s):L6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const o2e=function e(t){function n(r,i,s,o,a){s2e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(i2e);function Cmt(){var e=o2e,t=!1,n=1,r=1,i=[0],s=q1,o=q1,a=q1,u=q1,l=q1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(r2e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=ZTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:sw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:sw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:sw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:sw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:sw(+d),c):l},c}function Amt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,E=f+1,x=d-1;E<x;){var S=E+x>>>1;l[S]<w?E=S+1:x=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-_,A=h-C;if(g-p>y-m){var k=h?(p*A+g*C)/h:g;c(f,E,C,p,m,k,y),c(E,d,A,k,m,g,y)}else{var N=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,N),c(E,d,A,p,N,g,y)}}}function Imt(e,t,n,r,i){(e.depth&1?L6:Dk)(e,t,n,r,i)}const kmt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Dk(l,i,s,o,m?s+=(a-s)*l.value/m:a):L6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=s2e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(i2e);function ld(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function By(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Iz=Symbol("implicit");function Yb(){var e=new U7,t=[],n=[],r=Iz;function i(s){let o=e.get(s);if(o===void 0){if(r!==Iz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new U7;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Yb(t,n).unknown(r)},ld.apply(i,arguments),i}function bS(){var e=Yb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=$u(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return bS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ld.apply(f(),arguments)}function Rmt(e){return function(){return e}}function kz(e){return+e}var yce=[0,1];function Mu(e){return e}function Rz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Rmt(isNaN(t)?NaN:.5)}function Nmt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Pmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Rz(i,r),s=n(o,s)):(r=Rz(r,i),s=n(s,o)),function(a){return s(r(a))}}function Dmt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Rz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=q0(e,a,1,r)-1;return s[u](i[u](a))}}function Ok(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function F6(){var e=yce,t=yce,n=eg,r,i,s,o=Mu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Mu&&(o=Nmt(e[0],e[d-1])),a=d>2?Dmt:Pmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),gc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,kz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=kk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Mu,c()):o!==Mu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function a2e(){return F6()(Mu,Mu)}function u2e(e,t,n,r){var i=W0(e,t,n),s;switch(r=Xv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=lTe(i,o))&&(r.precision=s),LK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=cTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jy(r)}function Kb(e){var t=e.domain;return e.ticks=function(n){var r=t();return V7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return u2e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=H7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Kf(){var e=a2e();return e.copy=function(){return Ok(e,Kf())},ld.apply(e,arguments),Kb(e)}function l2e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,kz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return l2e(e).unknown(t)},e=arguments.length?Array.from(e,kz):[0,1],Kb(n)}function c2e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function vce(e){return Math.log(e)}function bce(e){return Math.exp(e)}function Omt(e){return-Math.log(-e)}function $mt(e){return-Math.exp(-e)}function Mmt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lmt(e){return e===10?Mmt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Fmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _ce(e){return(t,n)=>-e(-t,n)}function qK(e){const t=e(vce,bce),n=t.domain;let r=10,i,s;function o(){return i=Fmt(r),s=Lmt(r),n()[0]<0?(i=_ce(i),s=_ce(s),e(Omt,$mt)):e(vce,bce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=V7(l,c,g))}else y=V7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Xv(u)).precision==null&&(u.trim=!0),u=jy(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(c2e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function f2e(){const e=qK(F6()).domain([1,10]);return e.copy=()=>Ok(e,f2e()).base(e.base()),ld.apply(e,arguments),e}function wce(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ece(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function WK(e){var t=1,n=e(wce(t),Ece(t));return n.constant=function(r){return arguments.length?e(wce(t=+r),Ece(t)):t},Kb(n)}function d2e(){var e=WK(F6());return e.copy=function(){return Ok(e,d2e()).constant(e.constant())},ld.apply(e,arguments)}function xce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Bmt(e){return e<0?-e*e:e*e}function GK(e){var t=e(Mu,Mu),n=1;function r(){return n===1?e(Mu,Mu):n===.5?e(jmt,Bmt):e(xce(n),xce(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Kb(t)}function YK(){var e=GK(F6());return e.copy=function(){return Ok(e,YK()).exponent(e.exponent())},ld.apply(e,arguments),e}function Umt(){return YK.apply(null,arguments).exponent(.5)}function h2e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=oSe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[q0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(sm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return h2e().domain(e).range(t).unknown(r)},ld.apply(s,arguments)}function p2e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[q0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return p2e().domain([e,t]).range(i).unknown(s)},ld.apply(Kb(o),arguments)}function m2e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[q0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return m2e().domain(e).range(t).unknown(n)},ld.apply(i,arguments)}const U8=new Date,z8=new Date;function zs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>zs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(U8.setTime(+s),z8.setTime(+o),e(U8),e(z8),Math.floor(n(U8,z8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const JE=zs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);JE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):JE);JE.range;const Kp=1e3,Sc=Kp*60,Xp=Sc*60,Im=Xp*24,KK=Im*7,Sce=Im*30,V8=Im*365,Qp=zs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getUTCSeconds());Qp.range;const j6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kp)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getMinutes());j6.range;const B6=zs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getUTCMinutes());B6.range;const U6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kp-e.getMinutes()*Sc)},(e,t)=>{e.setTime(+e+t*Xp)},(e,t)=>(t-e)/Xp,e=>e.getHours());U6.range;const z6=zs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xp)},(e,t)=>(t-e)/Xp,e=>e.getUTCHours());z6.range;const am=zs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sc)/Im,e=>e.getDate()-1);am.range;const S0=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>e.getUTCDate()-1);S0.range;const g2e=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>Math.floor(e/Im));g2e.range;function Xb(e){return zs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Sc)/KK)}const _S=Xb(0),Q3=Xb(1),zmt=Xb(2),Vmt=Xb(3),ZE=Xb(4),Hmt=Xb(5),qmt=Xb(6);_S.range;Q3.range;zmt.range;Vmt.range;ZE.range;Hmt.range;qmt.range;function Qb(e){return zs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/KK)}const wS=Qb(0),J3=Qb(1),Wmt=Qb(2),Gmt=Qb(3),ex=Qb(4),Ymt=Qb(5),Kmt=Qb(6);wS.range;J3.range;Wmt.range;Gmt.range;ex.range;Ymt.range;Kmt.range;const ZA=zs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ZA.range;const eI=zs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eI.range;const Ah=zs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ah.range;const Ih=zs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ih.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ih.range;function y2e(e,t,n,r,i,s){const o=[[Qp,1,Kp],[Qp,5,5*Kp],[Qp,15,15*Kp],[Qp,30,30*Kp],[s,1,Sc],[s,5,5*Sc],[s,15,15*Sc],[s,30,30*Sc],[i,1,Xp],[i,3,3*Xp],[i,6,6*Xp],[i,12,12*Xp],[r,1,Im],[r,2,2*Im],[n,1,KK],[t,1,Sce],[t,3,3*Sce],[e,1,V8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=gS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(W0(l/V8,c/V8,f));if(h===0)return JE.every(Math.max(W0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Xmt,Qmt]=y2e(Ih,eI,wS,g2e,z6,B6),[Jmt,Zmt]=y2e(Ah,ZA,_S,am,U6,j6);function H8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function q8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $T(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function v2e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=MT(i),c=LT(i),f=MT(s),d=LT(s),h=MT(o),p=LT(o),m=MT(a),g=LT(a),y=MT(u),v=LT(u),_={a:B,A:U,b:H,B:P,c:null,d:Rce,e:Rce,f:Egt,g:Pgt,G:Ogt,H:bgt,I:_gt,j:wgt,L:b2e,m:xgt,M:Sgt,p:z,q:W,Q:Dce,s:Oce,S:Tgt,u:Cgt,U:Agt,V:Igt,w:kgt,W:Rgt,x:null,X:null,y:Ngt,Y:Dgt,Z:$gt,"%":Pce},w={a:j,A:q,b:G,B:ne,c:null,d:Nce,e:Nce,f:jgt,g:Kgt,G:Qgt,H:Mgt,I:Lgt,j:Fgt,L:w2e,m:Bgt,M:Ugt,p:ce,q:de,Q:Dce,s:Oce,S:zgt,u:Vgt,U:Hgt,V:qgt,w:Wgt,W:Ggt,x:null,X:null,y:Ygt,Y:Xgt,Z:Jgt,"%":Pce},E={a:k,A:N,b:O,B:D,c:$,d:Ice,e:Ice,f:mgt,g:Ace,G:Cce,H:kce,I:kce,j:fgt,L:pgt,m:cgt,M:dgt,p:A,q:lgt,Q:ygt,s:vgt,S:hgt,u:igt,U:sgt,V:ogt,w:rgt,W:agt,x:F,X:M,y:Ace,Y:Cce,Z:ugt,"%":ggt};_.x=x(n,_),_.X=x(r,_),_.c=x(t,_),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(he,ve){return function(Ie){var be=[],Ke=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<yt;)he.charCodeAt(Ke)===37&&(be.push(he.slice(Ue,Ke)),(_e=Tce[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Ke+1);return be.push(he.slice(Ue,Ke)),be.join("")}}function S(he,ve){return function(Ie){var be=$T(1900,void 0,1),Ke=C(be,he,Ie+="",0),Ue,yt;if(Ke!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=q8($T(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?J3.ceil(Ue):J3(Ue),Ue=S0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=H8($T(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?Q3.ceil(Ue):Q3(Ue),Ue=am.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?q8($T(be.y,0,1)).getUTCDay():H8($T(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,q8(be)):H8(be)}}function C(he,ve,Ie,be){for(var Ke=0,Ue=ve.length,yt=Ie.length,it,_e;Ke<Ue;){if(be>=yt)return-1;if(it=ve.charCodeAt(Ke++),it===37){if(it=ve.charAt(Ke++),_e=E[it in Tce?ve.charAt(Ke++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function A(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function k(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function D(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return C(he,t,ve,Ie)}function F(he,ve,Ie){return C(he,n,ve,Ie)}function M(he,ve,Ie){return C(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function P(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=x(he+="",_);return ve.toString=function(){return he},ve},parse:function(he){var ve=S(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=x(he+="",w);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=S(he+="",!0);return ve.toString=function(){return he},ve}}}var Tce={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,egt=/^%/,tgt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ngt(e){return e.replace(tgt,"\\$&")}function MT(e){return new RegExp("^(?:"+e.map(ngt).join("|")+")","i")}function LT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rgt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function igt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ogt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function agt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Cce(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ace(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ugt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lgt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function cgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ice(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fgt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function kce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function dgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function hgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pgt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mgt(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ggt(e,t,n){var r=egt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ygt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vgt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Rce(e,t){return mr(e.getDate(),t,2)}function bgt(e,t){return mr(e.getHours(),t,2)}function _gt(e,t){return mr(e.getHours()%12||12,t,2)}function wgt(e,t){return mr(1+am.count(Ah(e),e),t,3)}function b2e(e,t){return mr(e.getMilliseconds(),t,3)}function Egt(e,t){return b2e(e,t)+"000"}function xgt(e,t){return mr(e.getMonth()+1,t,2)}function Sgt(e,t){return mr(e.getMinutes(),t,2)}function Tgt(e,t){return mr(e.getSeconds(),t,2)}function Cgt(e){var t=e.getDay();return t===0?7:t}function Agt(e,t){return mr(_S.count(Ah(e)-1,e),t,2)}function _2e(e){var t=e.getDay();return t>=4||t===0?ZE(e):ZE.ceil(e)}function Igt(e,t){return e=_2e(e),mr(ZE.count(Ah(e),e)+(Ah(e).getDay()===4),t,2)}function kgt(e){return e.getDay()}function Rgt(e,t){return mr(Q3.count(Ah(e)-1,e),t,2)}function Ngt(e,t){return mr(e.getFullYear()%100,t,2)}function Pgt(e,t){return e=_2e(e),mr(e.getFullYear()%100,t,2)}function Dgt(e,t){return mr(e.getFullYear()%1e4,t,4)}function Ogt(e,t){var n=e.getDay();return e=n>=4||n===0?ZE(e):ZE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function $gt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function Nce(e,t){return mr(e.getUTCDate(),t,2)}function Mgt(e,t){return mr(e.getUTCHours(),t,2)}function Lgt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Fgt(e,t){return mr(1+S0.count(Ih(e),e),t,3)}function w2e(e,t){return mr(e.getUTCMilliseconds(),t,3)}function jgt(e,t){return w2e(e,t)+"000"}function Bgt(e,t){return mr(e.getUTCMonth()+1,t,2)}function Ugt(e,t){return mr(e.getUTCMinutes(),t,2)}function zgt(e,t){return mr(e.getUTCSeconds(),t,2)}function Vgt(e){var t=e.getUTCDay();return t===0?7:t}function Hgt(e,t){return mr(wS.count(Ih(e)-1,e),t,2)}function E2e(e){var t=e.getUTCDay();return t>=4||t===0?ex(e):ex.ceil(e)}function qgt(e,t){return e=E2e(e),mr(ex.count(Ih(e),e)+(Ih(e).getUTCDay()===4),t,2)}function Wgt(e){return e.getUTCDay()}function Ggt(e,t){return mr(J3.count(Ih(e)-1,e),t,2)}function Ygt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function Kgt(e,t){return e=E2e(e),mr(e.getUTCFullYear()%100,t,2)}function Xgt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function Qgt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ex(e):ex.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function Jgt(){return"+0000"}function Pce(){return"%"}function Dce(e){return+e}function Oce(e){return Math.floor(+e/1e3)}var L_,XK,QK,Jb,x2e;Zgt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zgt(e){return L_=v2e(e),XK=L_.format,QK=L_.parse,Jb=L_.utcFormat,x2e=L_.utcParse,L_}function e0t(e){return new Date(e)}function t0t(e){return e instanceof Date?+e:+new Date(+e)}function JK(e,t,n,r,i,s,o,a,u,l){var c=a2e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function E(x){return(u(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:v:n(x)<x?_:w)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?d(Array.from(x,t0t)):d().map(e0t)},c.ticks=function(x){var S=d();return e(S[0],S[S.length-1],x??10)},c.tickFormat=function(x,S){return S==null?E:l(S)},c.nice=function(x){var S=d();return(!x||typeof x.range!="function")&&(x=t(S[0],S[S.length-1],x??10)),x?d(c2e(S,x)):c},c.copy=function(){return Ok(c,JK(e,t,n,r,i,s,o,a,u,l))},c}function tI(){return ld.apply(JK(Jmt,Zmt,Ah,ZA,_S,am,U6,j6,Qp,XK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function n0t(){return ld.apply(JK(Xmt,Qmt,Ih,eI,wS,S0,z6,B6,Qp,Jb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V6(){var e=0,t=1,n,r,i,s,o=Mu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(eg),l.rangeRound=c(kk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Uy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZK(){var e=Kb(V6()(Mu));return e.copy=function(){return Uy(e,ZK())},By.apply(e,arguments)}function S2e(){var e=qK(V6()).domain([1,10]);return e.copy=function(){return Uy(e,S2e()).base(e.base())},By.apply(e,arguments)}function T2e(){var e=WK(V6());return e.copy=function(){return Uy(e,T2e()).constant(e.constant())},By.apply(e,arguments)}function eX(){var e=GK(V6());return e.copy=function(){return Uy(e,eX()).exponent(e.exponent())},By.apply(e,arguments)}function r0t(){return eX.apply(null,arguments).exponent(.5)}function H6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Mu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=CK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(eg),h.rangeRound=p(kk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function C2e(){var e=Kb(H6()(Mu));return e.copy=function(){return Uy(e,C2e())},By.apply(e,arguments)}function A2e(){var e=qK(H6()).domain([.1,1,10]);return e.copy=function(){return Uy(e,A2e()).base(e.base())},By.apply(e,arguments)}function I2e(){var e=WK(H6());return e.copy=function(){return Uy(e,I2e()).constant(e.constant())},By.apply(e,arguments)}function tX(){var e=GK(H6());return e.copy=function(){return Uy(e,tX()).exponent(e.exponent())},By.apply(e,arguments)}function i0t(){return tX.apply(null,arguments).exponent(.5)}function cd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const s0t=cd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o0t=cd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a0t=cd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),u0t=cd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),l0t=cd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c0t=cd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),f0t=cd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d0t=cd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),h0t=cd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),p0t=cd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),k2e=cd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e){return function(){return e}}const $ce=Math.abs,Zo=Math.atan2,d1=Math.cos,m0t=Math.max,W8=Math.min,Sd=Math.sin,cv=Math.sqrt,ra=1e-12,tx=Math.PI,Z3=tx/2,OC=2*tx;function g0t(e){return e>1?0:e<-1?tx:Math.acos(e)}function Mce(e){return e>=1?Z3:e<=-1?-Z3:Math.asin(e)}function q6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new NK(t)}function y0t(e){return e.innerRadius}function v0t(e){return e.outerRadius}function b0t(e){return e.startAngle}function _0t(e){return e.endAngle}function w0t(e){return e&&e.padAngle}function E0t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function nP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/cv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,E=i-s,x=d*m-p*h,S=(_<0?-1:1)*cv(m0t(0,E*E*w-x*x)),C=(x*_-v*S)/w,A=(-x*v-_*S)/w,k=(x*_+v*S)/w,N=(-x*v+_*S)/w,O=C-g,D=A-y,$=k-g,F=N-y;return O*O+D*D>$*$+F*F&&(C=k,A=N),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function e$(){var e=y0t,t=v0t,n=En(0),r=null,i=b0t,s=_0t,o=w0t,a=null,u=q6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-Z3,m=s.apply(this,arguments)-Z3,g=$ce(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>OC-ra)a.moveTo(h*d1(p),h*Sd(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*d1(m),d*Sd(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,E=m,x=g,S=g,C=o.apply(this,arguments)/2,A=C>ra&&(r?+r.apply(this,arguments):cv(d*d+h*h)),k=W8($ce(h-d)/2,+n.apply(this,arguments)),N=k,O=k,D,$;if(A>ra){var F=Mce(A/d*Sd(C)),M=Mce(A/h*Sd(C));(x-=F*2)>ra?(F*=y?1:-1,w+=F,E-=F):(x=0,w=E=(p+m)/2),(S-=M*2)>ra?(M*=y?1:-1,v+=M,_-=M):(S=0,v=_=(p+m)/2)}var B=h*d1(v),U=h*Sd(v),H=d*d1(E),P=d*Sd(E);if(k>ra){var z=h*d1(_),W=h*Sd(_),j=d*d1(w),q=d*Sd(w),G;if(g<tx)if(G=E0t(B,U,j,q,z,W,H,P)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ve=1/Sd(g0t((ne*de+ce*he)/(cv(ne*ne+ce*ce)*cv(de*de+he*he)))/2),Ie=cv(G[0]*G[0]+G[1]*G[1]);N=W8(k,(d-Ie)/(ve-1)),O=W8(k,(h-Ie)/(ve+1))}else N=O=0}S>ra?O>ra?(D=nP(j,q,B,U,h,O,y),$=nP(z,W,H,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<k?a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,h,Zo(D.cy+D.y11,D.cx+D.x11),Zo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,_,!y)):a.moveTo(B,U),!(d>ra)||!(x>ra)?a.lineTo(H,P):N>ra?(D=nP(H,P,z,W,d,-N,y),$=nP(B,U,j,q,d,-N,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<k?a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,d,Zo(D.cy+D.y11,D.cx+D.x11),Zo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-tx/2;return[d1(f)*c,Sd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:En(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:En(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:En(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:En(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:En(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function W6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function R2e(e){this._context=e}R2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nX(e){return new R2e(e)}function N2e(e){return e[0]}function P2e(e){return e[1]}function rX(e,t){var n=En(!0),r=null,i=nX,s=null,o=q6(a);e=typeof e=="function"?e:e===void 0?N2e:En(e),t=typeof t=="function"?t:t===void 0?P2e:En(t);function a(u){var l,c=(u=W6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:En(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:En(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function D2e(e,t,n){var r=null,i=En(!0),s=null,o=nX,a=null,u=q6(l);e=typeof e=="function"?e:e===void 0?N2e:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?P2e:En(+n);function l(f){var d,h,p,m=(f=W6(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return rX().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function x0t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function S0t(e){return e}function O2e(){var e=S0t,t=x0t,n=null,r=En(0),i=En(OC),s=En(0);function o(a){var u,l=(a=W6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(OC,Math.max(-OC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,x){return t(p[E],p[x])}):n!=null&&h.sort(function(E,x){return n(a[E],a[x])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+_,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:En(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),o):s},o}const T0t={draw(e,t){const n=cv(t/tx);e.moveTo(n,0),e.arc(0,0,n,0,OC)}};function C0t(e,t){let n=null,r=q6(i);e=typeof e=="function"?e:En(e||T0t),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Y0(){}function t$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function G6(e){this._context=e}G6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $2e(e){return new G6(e)}function M2e(e){this._context=e}M2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:t$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A0t(e){return new M2e(e)}function L2e(e){this._context=e}L2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:t$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I0t(e){return new L2e(e)}function F2e(e,t){this._basis=new G6(e),this._beta=t}F2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const k0t=function e(t){function n(r){return t===1?new G6(r):new F2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function n$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function iX(e,t){this._context=e,this._k=(1-t)/6}iX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:n$(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:n$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R0t=function e(t){function n(r){return new iX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sX(e,t){this._context=e,this._k=(1-t)/6}sX.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:n$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N0t=function e(t){function n(r){return new sX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oX(e,t){this._context=e,this._k=(1-t)/6}oX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:n$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P0t=function e(t){function n(r){return new oX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function aX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function j2e(e,t){this._context=e,this._alpha=t}j2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:aX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const D0t=function e(t){function n(r){return t?new j2e(r,t):new iX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function B2e(e,t){this._context=e,this._alpha=t}B2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:aX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O0t=function e(t){function n(r){return t?new B2e(r,t):new sX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function U2e(e,t){this._context=e,this._alpha=t}U2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $0t=function e(t){function n(r){return t?new U2e(r,t):new oX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function z2e(e){this._context=e}z2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function M0t(e){return new z2e(e)}function Lce(e){return e<0?-1:1}function Fce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Lce(s)+Lce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function jce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function G8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function r$(e){this._context=e}r$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G8(this,this._t0,jce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,G8(this,jce(this,n=Fce(this,e,t)),n);break;default:G8(this,this._t0,n=Fce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function V2e(e){this._context=new H2e(e)}(V2e.prototype=Object.create(r$.prototype)).point=function(e,t){r$.prototype.point.call(this,t,e)};function H2e(e){this._context=e}H2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function L0t(e){return new r$(e)}function F0t(e){return new V2e(e)}function q2e(e){this._context=e}q2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Bce(e),i=Bce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Bce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function j0t(e){return new q2e(e)}function Y6(e,t){this._context=e,this._t=t}Y6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function B0t(e){return new Y6(e,.5)}function U0t(e){return new Y6(e,0)}function z0t(e){return new Y6(e,1)}function Uce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function zce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function V0t(e,t){return e[t]}function H0t(e){const t=[];return t.key=e,t}function q0t(){var e=En([]),t=zce,n=Uce,r=V0t;function i(s){var o=Array.from(e.apply(this,arguments),H0t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=W6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:En(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?zce:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Uce,i):n},i}function $2(e,t,n){this.k=e,this.x=t,this.y=n}$2.prototype={constructor:$2,scale:function(e){return e===1?this:new $2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$2.prototype;function uX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?Jb("%B"):jy(".2s"))(c),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:b.jsx(Dc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>b.jsxs("g",{transform:`translate(${f}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:b.jsx(Dc,{children:b.jsx(ai,{withinPortal:!0,label:c,children:b.jsx(Xe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const W0t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:uX},Symbol.toStringTag,{value:"Module"}));function W2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Dc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${n}, ${l})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(ls,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(Xe,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const G0t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:W2e},Symbol.toStringTag,{value:"Module"})),rc={top:15,left:100,right:50,bottom:50};function Nz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Sv(),o=I.useMemo(()=>s-rc.left-rc.right,[s]),a=I.useMemo(()=>i-rc.top-rc.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Yb(k2e).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Kf([rc.left,o+rc.left]).domain([0,ch(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?bS([rc.top,a+rc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:b.jsxs("g",{children:[b.jsx("rect",{x:rc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-rc.left},h),b.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?b.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(uX,{xScale:l,yRange:c.range(),vertPosition:a+rc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?b.jsx(W2e,{yScale:c,horizontalPosition:rc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):b.jsx(od,{})}const Y0t=Object.freeze(Object.defineProperty({__proto__:null,Bar:Nz,default:Nz},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Ju(e){return e!=null?dr(e)?e:[e]:[]}function K0t(e=0,t=1/0){return`${Vce(e)} < row_number() && row_number() <= ${Vce(t)}`}function Vce(e){return e<0?`count() + ${e}`:e}class G2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(K0t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ju(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function tu(e){return typeof e=="number"}function gi(e){return typeof e=="function"}function K6(e,t){const n=Array(e);if(gi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let X0t=class extends G2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){tu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=K6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Q0t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},J0t=function(e){return e&&gi(e.get)?e:new Q0t(e)};function km(e){return e instanceof Date}function wa(e){return e===Object(e)}function i$(e){return e instanceof RegExp}function Bo(e){return typeof e=="string"}function Z0t(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Hce(e.entries(),t):km(e)?n("Date"):i$(e)?n("RegExp"):Bo(e)?n():dr(e)?eyt(e,t):gi(e[Symbol.iterator])?tyt(e,t):wa(e)?Hce(Object.entries(e),t):n()}function Hce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function eyt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function tyt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:nyt}=Object.prototype;function Xf(e,t){return nyt.call(e,t)}function Zl(e){return e?new qce({...e.data()},e.columnNames()):new qce}class qce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Xf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,ryt=Object.getPrototypeOf(Int8Array);function $k(e){return e instanceof ryt}function fv(e){return dr(e)||$k(e)}function Df(e){return e!=null&&e===e}const FT=e=>fv(e)||Bo(e),iyt={compact:e=>fv(e)?e.filter(t=>Df(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>FT(e)?e.includes(t,n):!1,indexof:(e,t)=>FT(e)?e.indexOf(t):-1,join:(e,t)=>fv(e)?e.join(t):ar,lastindexof:(e,t)=>FT(e)?e.lastIndexOf(t):-1,length:e=>FT(e)?e.length:0,pluck:(e,t)=>fv(e)?e.map(n=>Df(n)?n[t]:ar):ar,reverse:e=>fv(e)?e.slice().reverse():Bo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>FT(e)?e.slice(t,n):ar};function syt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function kD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Td=e=>(e<10?"0":"")+e,oyt=e=>e<0?"-"+kD(-e,6):e>9999?"+"+kD(e,6):kD(e,4);function Y2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return oyt(e)+"-"+Td(t+1)+"-"+Td(n)+(!u||o?"T"+Td(r)+":"+Td(i)+":"+Td(s)+"."+kD(o,3)+l:s?"T"+Td(r)+":"+Td(i)+":"+Td(s)+l:i||r||!a?"T"+Td(r)+":"+Td(i)+l:"")}function K2e(e,t){return isNaN(e)?"Invalid Date":Y2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function X6(e,t){return isNaN(e)?"Invalid Date":Y2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const ayt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function uyt(e){return e.match(ayt)&&!isNaN(Date.parse(e))}function lyt(e,t=Date.parse){return uyt(e)?t(e):e}const X2e=6e4,Q2e=864e5,J2e=6048e5,Vi=new Date,Hi=new Date,es=e=>(Vi.setTime(typeof e=="string"?lyt(e):e),Vi);function cyt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function fyt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function dyt(e){Hi.setTime(+e),Hi.setHours(0,0,0,0),Vi.setTime(+Hi),Vi.setMonth(0),Vi.setDate(1);const t=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*X2e;return Math.floor(1+(Hi-Vi-t)/Q2e)}function hyt(e){Hi.setTime(+e),Hi.setUTCHours(0,0,0,0);const t=Date.UTC(Hi.getUTCFullYear(),0,1);return Math.floor(1+(Hi-t)/Q2e)}function pyt(e,t){const n=t||0;Hi.setTime(+e),Hi.setDate(Hi.getDate()-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*X2e;return Math.floor((1+(Hi-Vi)-r)/J2e)}function myt(e,t){const n=t||0;return Hi.setTime(+e),Hi.setUTCDate(Hi.getUTCDate()-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(Hi-Vi))/J2e)}const gyt={format_date:(e,t)=>K2e(es(e),!t),format_utcdate:(e,t)=>X6(es(e),!t),timestamp:e=>+es(e),year:e=>es(e).getFullYear(),quarter:e=>Math.floor(es(e).getMonth()/3),month:e=>es(e).getMonth(),date:e=>es(e).getDate(),dayofweek:e=>es(e).getDay(),hours:e=>es(e).getHours(),minutes:e=>es(e).getMinutes(),seconds:e=>es(e).getSeconds(),milliseconds:e=>es(e).getMilliseconds(),utcyear:e=>es(e).getUTCFullYear(),utcquarter:e=>Math.floor(es(e).getUTCMonth()/3),utcmonth:e=>es(e).getUTCMonth(),utcdate:e=>es(e).getUTCDate(),utcdayofweek:e=>es(e).getUTCDay(),utchours:e=>es(e).getUTCHours(),utcminutes:e=>es(e).getUTCMinutes(),utcseconds:e=>es(e).getUTCSeconds(),utcmilliseconds:e=>es(e).getUTCMilliseconds(),datetime:cyt,dayofyear:dyt,week:pyt,utcdatetime:fyt,utcdayofyear:hyt,utcweek:myt,now:Date.now};function lX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:km(e)||km(t)?+e==+t:i$(e)&&i$(t)?e+""==t+"":wa(e)&&wa(t)?yyt(e,t):!1}function yyt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Wce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Wce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!lX(e[o],t[o]))return!1}return!0}function Wce(e,t,n=lX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const vyt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let byt=Math.random;function ES(){return byt()}const _yt={random:ES,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function cX(e){return e instanceof Map}function wyt(e){return e instanceof Set}function RD(e){return cX(e)||wyt(e)}function Y8(e){return Array.from(e)}const Eyt={has:(e,t)=>RD(e)?e.has(t):e!=null?Xf(e,t):!1,keys:e=>cX(e)?Y8(e.keys()):e!=null?Object.keys(e):[],values:e=>RD(e)?Y8(e.values()):e!=null?Object.values(e):[],entries:e=>RD(e)?Y8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function xyt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Xf(t,e))return t[e];return n!==void 0?n:e}function Syt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Tyt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Pw={bin:syt,equal:lX,recode:xyt,sequence:Syt,...iyt,...gyt,...vyt,..._yt,...Eyt,...Tyt};function nI(e){return typeof e=="bigint"}function kh(e){return e===void 0?e+"":nI(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new Cyt(e,Ju(t),Ju(n))}let Cyt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${kh(n)}]`),...this.params.map(kh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Z2e=e=>vn("any",e),eCe=()=>vn("count"),tCe=e=>vn("array_agg",e),nCe=e=>vn("array_agg_distinct",e),rCe=(e,t)=>vn("map_agg",[e,t]),iCe=(e,t)=>vn("object_agg",[e,t]),sCe=(e,t)=>vn("entries_agg",[e,t]);({...Pw});function Ayt(e,t){e=RD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Iyt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function kyt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Ryt(e,t,n,r){const i=r==="map"||r===!0?rCe:r==="entries"?sCe:r==="object"?iCe:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Ayt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:tCe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Nyt="ArrayPattern",Pyt="ArrowFunctionExpression",Dyt="FunctionExpression",T0="Identifier",xS="Literal",oCe="MemberExpression",Oyt="ObjectExpression",aCe="ObjectPattern",uCe="Property",Mk="Column",$yt="Constant",Myt="Dictionary",Lyt="Function",Fyt="Parameter",lCe="Op",Zr=(e,t)=>{const n=jyt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},K8=(e,t)=>"("+Zr(e.left,t)+" "+e.operator+" "+Zr(e.right,t)+")",X8=(e,t)=>"("+Dd(e.params,t)+")=>"+Zr(e.body,t),Gce=(e,t)=>Zr(e.callee,t)+"("+Dd(e.arguments,t)+")",Dd=(e,t,n=",")=>e.map(r=>Zr(r,t)).join(n),cCe=e=>e.computed?`[${kh(e.name)}]`:`.${e.name}`,Yce=(e,t,n)=>{const r=e.table||"";return`data${r}${cCe(e)}.${n}(${t.index}${r})`},jyt={Constant:e=>e.raw,Column:(e,t)=>Yce(e,t,"get"),Dictionary:(e,t)=>Yce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${cCe(e)}`,Op:(e,t)=>`op(${kh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Zr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Zr(e.object,t),i=Zr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Gce,NewExpression:(e,t)=>"new "+Gce(e,t),ArrayExpression:(e,t)=>"["+Dd(e.elements,t)+"]",AssignmentExpression:K8,BinaryExpression:K8,LogicalExpression:K8,UnaryExpression:(e,t)=>"("+e.operator+Zr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Zr(e.test,t)+"?"+Zr(e.consequent,t)+":"+Zr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Dd(e.properties,t)+"})",Property:(e,t)=>{const n=Zr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Zr(e.value,t)},ArrowFunctionExpression:X8,FunctionExpression:X8,FunctionDeclaration:X8,ArrayPattern:(e,t)=>"["+Dd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Dd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Dd(e.declarations,t,","),VariableDeclarator:(e,t)=>Zr(e.id,t)+"="+Zr(e.init,t),SpreadElement:(e,t)=>"..."+Zr(e.argument,t),BlockStatement:(e,t)=>"{"+Dd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Zr(e.expression,t),IfStatement:(e,t)=>"if ("+Zr(e.test,t)+")"+Zr(e.consequent,t)+(e.alternate?" else "+Zr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Zr(e.discriminant,t)+") {"+Dd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Zr(e.test,t):"default")+": "+Dd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Zr(e.argument,t),Program:(e,t)=>Zr(e.body[0],t)};function s$(e,t={index:"row"}){return Zr(e,t)}function Byt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function nx(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:km(e)?+e:dr(e)||$k(e)?`[${e.map(nx)}]`:i$(e)?e+"":Uyt(e)}function Uyt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${nx(e[r])}`;return t+="}",t}function o$(e,t){const n=e.length;return n===1?(r,i)=>nx(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=nx(a)}return s}}function zyt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=nx(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=nx(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function $p(){}function Vyt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function As(e){return e.init=e.init||$p,e.add=e.add||$p,e.rem=e.rem||$p,e}function Kce(e,t){return e.product_v=!1,e.product=t}const fCe={count:{create:()=>As({value:e=>e.count}),param:[]},array_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>As({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>As({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>As({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>As({value:e=>e.valid}),param:[1]},invalid:{create:()=>As({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=zyt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>As({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>As({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>nI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Kce(e,1),value:e=>e.valid?e.product_v?Kce(e,Vyt(e.list.values())):e.product:void 0,add:(e,t)=>nI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>As({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>As({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>As({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>As({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>As({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>As({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>As({value:i=>Byt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Xce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Qce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},dCe={row_number:{create(){return{init:$p,value:e=>e.index+1}},param:[]},rank:Xce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Xce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Qce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=Qce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:$p,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:$p,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:$p,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:$p,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:$p,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Df(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Hyt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Hyt(e,t,n){for(const r=e.size;n<r;++n)if(Df(e.value(n,t)))return n;return-1}function fX(e){return Xf(fCe,e)}function dX(e){return Xf(dCe,e)}function hCe(e){return Xf(Pw,e)||e==="row_object"}function pCe(e){return fX(e)&&fCe[e]}function mCe(e){return dX(e)&&dCe[e]}function jT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const hX={escape:(e,t,n)=>jT(e,t,n),expr:(e,t)=>jT(`(row,data,op)=>${e}`,Pw,t),expr2:(e,t)=>jT(`(row0,data0,row,data)=>${e}`,Pw,t),join:(e,t)=>jT(`(row1,data1,row2,data2)=>${e}`,Pw,t),param:(e,t)=>jT(e,Pw,t)},qyt={"==":1,"!=":1,"===":1,"!==":1};function gCe(e,t,n=0,r,i){if(e.type=Mk,e.name=t,e.table=n,i&&r&&gi(r.keyFor)){const s=qyt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===xS&&Wyt(i,e,s,r.keyFor(s.value))}return e}function Wyt(e,t,n,r){return r<0?(e.type=xS,e.value=!1,e.raw="false"):(t.type=Myt,n.value=r,n.raw=r+""),!0}function Q6(e){return dr(e)?e:cX(e)?e.entries():e?Object.entries(e):[]}const yCe="row_object";function vCe(e,t){e.type=Oyt;const n=e.properties=[];for(const r of Q6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:uCe,key:{type:xS,raw:kh(s)},value:gCe({computed:!0},i)})}return e}function bCe(e){return s$(vCe({},e))}function _Ce(e){return hX.expr(bCe(e))}const Gyt=new TextDecoder("utf-8"),Pz=e=>Gyt.decode(e),Yyt=new TextEncoder,pX=e=>Yyt.encode(e),Kyt=e=>typeof e=="boolean",Eu=e=>typeof e=="function",zy=e=>e!=null&&Object(e)===e,J6=e=>zy(e)&&Eu(e.then),mX=e=>zy(e)&&Eu(e[Symbol.iterator]),Z6=e=>zy(e)&&Eu(e[Symbol.asyncIterator]),Xyt=e=>zy(e)&&"done"in e&&"value"in e,wCe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Qyt=e=>zy(e)&&Eu(e.abort)&&Eu(e.getWriter)&&!wCe(e),Jyt=e=>zy(e)&&Eu(e.end)&&Eu(e.write)&&Kyt(e.writable)&&!wCe(e),Zyt=e=>zy(e)&&Eu(e.clear)&&Eu(e.bytes)&&Eu(e.position)&&Eu(e.setPosition)&&Eu(e.capacity)&&Eu(e.getBufferIdentifier)&&Eu(e.createLong),gX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function e1t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function a$(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Rh(e,t){const n=e1t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?a$(o,s,a):o=s;break}a$(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ys(e,t){let n=Xyt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=pX(n)),n instanceof ArrayBuffer?new e(n):n instanceof gX?new e(n):Zyt(n)?Ys(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const BT=e=>Ys(Int32Array,e),Pr=e=>Ys(Uint8Array,e),Dz=e=>(e.next(),e);function*t1t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gX?n(t):mX(t)?t:n(t);return yield*Dz(function*(i){let s=null;do s=i.next(yield Ys(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const n1t=e=>t1t(Uint8Array,e);function ECe(e,t){return iv(this,arguments,function*(){if(J6(t))return yield Yn(yield Yn(yield*Ij(bC(ECe(e,yield Yn(t))))));const r=function(o){return iv(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return iv(this,arguments,function*(){yield Yn(yield*Ij(bC(Dz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gX?r(t):mX(t)?i(t):Z6(t)?t:r(t);return yield Yn(yield*Ij(bC(Dz(function(o){return iv(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ys(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const r1t=e=>ECe(Uint8Array,e);function xCe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function i1t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Jce={fromIterable(e){return rP(s1t(e))},fromAsyncIterable(e){return rP(o1t(e))},fromDOMStream(e){return rP(a1t(e))},fromNodeStream(e){return rP(l1t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},rP=e=>(e.next(),e);function*s1t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Rh(r,o)[0]:([i,r,a]=Rh(r,o),i)}({cmd:s,size:o}=yield null);const l=n1t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function o1t(e){return iv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Rh(i,a)[0]:([s,i,u]=Rh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=r1t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function a1t(e){return iv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Rh(i,a)[0]:([s,i,u]=Rh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new u1t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Pr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class u1t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Fp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Fp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Pr(n)),n})}}const Q8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function l1t(e){return iv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Rh(l,a)[0]:([c,l,u]=Rh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=Q8(e,"end"),n[1]=Q8(e,"error");do{if(n[2]=Q8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Pr(e.read(a-u)),c.byteLength<a-u&&(c=Pr(e.read()))):c=Pr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Va;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Va||(Va={}));var Zu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zu||(Zu={}));var Do;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Do||(Do={}));var Nh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Nh||(Nh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Ph;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ph||(Ph={}));var Qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Qs||(Qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var kp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(kp||(kp={}));const c1t=void 0;function Zv(e){if(e===null)return"null";if(e===c1t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Zv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const f1t=Symbol.for("isArrowBigNum");function fd(e,...t){return t.length===0?Object.setPrototypeOf(Ys(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}fd.prototype[f1t]=!0;fd.prototype.toJSON=function(){return`"${iI(this)}"`};fd.prototype.valueOf=function(){return SCe(this)};fd.prototype.toString=function(){return iI(this)};fd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return SCe(this);case"string":return iI(this);case"default":return d1t(this)}return iI(this)};function iE(...e){return fd.apply(this,e)}function sE(...e){return fd.apply(this,e)}function rI(...e){return fd.apply(this,e)}Object.setPrototypeOf(iE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(sE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(rI.prototype,Object.create(Uint32Array.prototype));Object.assign(iE.prototype,fd.prototype,{constructor:iE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(sE.prototype,fd.prototype,{constructor:sE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(rI.prototype,fd.prototype,{constructor:rI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function SCe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const iI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return J8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return J8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${J8(t)}`},d1t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:iI(e);function J8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class yX{static new(t,n){switch(n){case!0:return new iE(t);case!1:return new sE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new iE(t)}return t.byteLength===16?new rI(t):new sE(t)}static signed(t){return new iE(t)}static unsigned(t){return new sE(t)}static decimal(t){return new rI(t)}constructor(t,n){return yX.new(t,n)}}function Qf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var TCe,CCe,ACe,ICe,kCe,RCe,NCe,PCe,DCe,OCe,$Ce,MCe,LCe,FCe,jCe,BCe,UCe,zCe,VCe,HCe;let Sn=class Oz{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Oz.isUnion(t)&&t.mode===Zu.Dense}static isSparseUnion(t){return Oz.isUnion(t)&&t.mode===Zu.Sparse}get typeId(){return re.NONE}};TCe=Symbol.toStringTag;Sn[TCe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let Rm=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};CCe=Symbol.toStringTag;Rm[CCe]=(e=>e[Symbol.toStringTag]="Null")(Rm.prototype);class nu extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ACe=Symbol.toStringTag;nu[ACe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(nu.prototype);class vX extends nu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class bX extends nu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class K0 extends nu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class _X extends nu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class wX extends nu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class EX extends nu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class xX extends nu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class SX extends nu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(vX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(bX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(K0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(_X.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(wX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(EX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(xX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(SX.prototype,"ArrayType",{value:BigUint64Array});class X0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Do.HALF:return Uint16Array;case Do.SINGLE:return Float32Array;case Do.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ICe=Symbol.toStringTag;X0[ICe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(X0.prototype);class qCe extends X0{constructor(){super(Do.HALF)}}class TX extends X0{constructor(){super(Do.SINGLE)}}class CX extends X0{constructor(){super(Do.DOUBLE)}}Object.defineProperty(qCe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(TX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(CX.prototype,"ArrayType",{value:Float64Array});let sI=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};kCe=Symbol.toStringTag;sI[kCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(sI.prototype);let rx=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};RCe=Symbol.toStringTag;rx[RCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(rx.prototype);let oI=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};NCe=Symbol.toStringTag;oI[NCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(oI.prototype);let u$=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};PCe=Symbol.toStringTag;u$[PCe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(u$.prototype);class ix extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Nh[this.unit]}>`}}DCe=Symbol.toStringTag;ix[DCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(ix.prototype);class h1t extends ix{constructor(){super(Nh.DAY)}}class p1t extends ix{constructor(){super(Nh.MILLISECOND)}}class Nm extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}OCe=Symbol.toStringTag;Nm[OCe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Nm.prototype);class m1t extends Nm{constructor(){super(Wt.SECOND,32)}}class g1t extends Nm{constructor(){super(Wt.MILLISECOND,32)}}class y1t extends Nm{constructor(){super(Wt.MICROSECOND,64)}}class v1t extends Nm{constructor(){super(Wt.NANOSECOND,64)}}class l$ extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}$Ce=Symbol.toStringTag;l$[$Ce]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(l$.prototype);class sx extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Ph[this.unit]}>`}}MCe=Symbol.toStringTag;sx[MCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(sx.prototype);class b1t extends sx{constructor(){super(Ph.DAY_TIME)}}class _1t extends sx{constructor(){super(Ph.YEAR_MONTH)}}let c$=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};LCe=Symbol.toStringTag;c$[LCe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(c$.prototype);let ox=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};FCe=Symbol.toStringTag;ox[FCe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ox.prototype);class fa extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}jCe=Symbol.toStringTag;fa[jCe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fa.prototype);class aI extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}BCe=Symbol.toStringTag;aI[BCe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(aI.prototype);let f$=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};UCe=Symbol.toStringTag;f$[UCe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(f$.prototype);let ax=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};zCe=Symbol.toStringTag;ax[zCe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ax.prototype);class uI extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}VCe=Symbol.toStringTag;uI[VCe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(uI.prototype);const w1t=(e=>()=>++e)(-1);class Q0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?w1t():Qf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}HCe=Symbol.toStringTag;Q0[HCe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Q0.prototype);function Md(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return E1t(this,t,n)}getVisitFnByTypeId(t,n=!0){return ow(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function E1t(e,t,n=!0){return typeof t=="number"?ow(e,t,n):typeof t=="string"&&t in re?ow(e,re[t],n):t&&t instanceof Sn?ow(e,Zce(t),n):t!=null&&t.type&&t.type instanceof Sn?ow(e,Zce(t.type),n):ow(e,re.NONE,n)}function ow(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Zce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Do.HALF:return re.Float16;case Do.SINGLE:return re.Float32;case Do.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Nh.DAY:return re.DateDay;case Nh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Ph.DAY_TIME:return re.IntervalDayTime;case Ph.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Zu.Dense:return re.DenseUnion;case Zu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const WCe=new Float64Array(1),F_=new Uint32Array(WCe.buffer);function GCe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function YCe(e){if(e!==e)return 32256;WCe[0]=e;const t=(F_[1]&2147483648)>>16&65535;let n=F_[1]&2146435072,r=0;return n>=1089470464?F_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(F_[1]&1048575)>>10):n<=1056964608?(r=1048576+(F_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(F_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends Cn{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const x1t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},AX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},S1t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},T1t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},KCe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},C1t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},tg=({values:e},t,n)=>{e[t]=n},IX=({values:e},t,n)=>{e[t]=n},XCe=({values:e},t,n)=>{e[t]=YCe(n)},A1t=(e,t,n)=>{switch(e.type.precision){case Do.HALF:return XCe(e,t,n);case Do.SINGLE:case Do.DOUBLE:return IX(e,t,n)}},kX=({values:e},t,n)=>{x1t(e,t,n.valueOf())},RX=({values:e},t,n)=>{AX(e,t*2,n.valueOf())},QCe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},I1t=({values:e,valueOffsets:t},n,r)=>KCe(e,t,n,r),k1t=({values:e,valueOffsets:t},n,r)=>{KCe(e,t,n,pX(r))},JCe=(e,t,n)=>{e.type.unit===Nh.DAY?kX(e,t,n):RX(e,t,n)},NX=({values:e},t,n)=>AX(e,t*2,n/1e3),PX=({values:e},t,n)=>AX(e,t*2,n),DX=({values:e},t,n)=>S1t(e,t*2,n),OX=({values:e},t,n)=>T1t(e,t*2,n),ZCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return NX(e,t,n);case Wt.MILLISECOND:return PX(e,t,n);case Wt.MICROSECOND:return DX(e,t,n);case Wt.NANOSECOND:return OX(e,t,n)}},$X=({values:e},t,n)=>{e[t]=n},MX=({values:e},t,n)=>{e[t]=n},LX=({values:e},t,n)=>{e[t]=n},FX=({values:e},t,n)=>{e[t]=n},eAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return $X(e,t,n);case Wt.MILLISECOND:return MX(e,t,n);case Wt.MICROSECOND:return LX(e,t,n);case Wt.NANOSECOND:return FX(e,t,n)}},tAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},R1t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Mc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},N1t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Mc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},P1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),D1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),O1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),$1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),M1t=(e,t,n)=>{const r=e.type.children.map(s=>Mc.getVisitFn(s.type)),i=n instanceof Map?O1t(t,n):n instanceof hr?D1t(t,n):Array.isArray(n)?P1t(t,n):$1t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},L1t=(e,t,n)=>{e.type.mode===Zu.Dense?nAe(e,t,n):rAe(e,t,n)},nAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,e.valueOffsets[t],n)},rAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,t,n)},F1t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},iAe=(e,t,n)=>{e.type.unit===Ph.DAY_TIME?jX(e,t,n):BX(e,t,n)},jX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},BX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},UX=({values:e},t,n)=>{e[t]=n},zX=({values:e},t,n)=>{e[t]=n},VX=({values:e},t,n)=>{e[t]=n},HX=({values:e},t,n)=>{e[t]=n},sAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return UX(e,t,n);case Wt.MILLISECOND:return zX(e,t,n);case Wt.MICROSECOND:return VX(e,t,n);case Wt.NANOSECOND:return HX(e,t,n)}},j1t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Mc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=rn(C1t);Qt.prototype.visitInt=rn(tg);Qt.prototype.visitInt8=rn(tg);Qt.prototype.visitInt16=rn(tg);Qt.prototype.visitInt32=rn(tg);Qt.prototype.visitInt64=rn(tg);Qt.prototype.visitUint8=rn(tg);Qt.prototype.visitUint16=rn(tg);Qt.prototype.visitUint32=rn(tg);Qt.prototype.visitUint64=rn(tg);Qt.prototype.visitFloat=rn(A1t);Qt.prototype.visitFloat16=rn(XCe);Qt.prototype.visitFloat32=rn(IX);Qt.prototype.visitFloat64=rn(IX);Qt.prototype.visitUtf8=rn(k1t);Qt.prototype.visitBinary=rn(I1t);Qt.prototype.visitFixedSizeBinary=rn(QCe);Qt.prototype.visitDate=rn(JCe);Qt.prototype.visitDateDay=rn(kX);Qt.prototype.visitDateMillisecond=rn(RX);Qt.prototype.visitTimestamp=rn(ZCe);Qt.prototype.visitTimestampSecond=rn(NX);Qt.prototype.visitTimestampMillisecond=rn(PX);Qt.prototype.visitTimestampMicrosecond=rn(DX);Qt.prototype.visitTimestampNanosecond=rn(OX);Qt.prototype.visitTime=rn(eAe);Qt.prototype.visitTimeSecond=rn($X);Qt.prototype.visitTimeMillisecond=rn(MX);Qt.prototype.visitTimeMicrosecond=rn(LX);Qt.prototype.visitTimeNanosecond=rn(FX);Qt.prototype.visitDecimal=rn(tAe);Qt.prototype.visitList=rn(R1t);Qt.prototype.visitStruct=rn(M1t);Qt.prototype.visitUnion=rn(L1t);Qt.prototype.visitDenseUnion=rn(nAe);Qt.prototype.visitSparseUnion=rn(rAe);Qt.prototype.visitDictionary=rn(F1t);Qt.prototype.visitInterval=rn(iAe);Qt.prototype.visitIntervalDayTime=rn(jX);Qt.prototype.visitIntervalYearMonth=rn(BX);Qt.prototype.visitDuration=rn(sAe);Qt.prototype.visitDurationSecond=rn(UX);Qt.prototype.visitDurationMillisecond=rn(zX);Qt.prototype.visitDurationMicrosecond=rn(VX);Qt.prototype.visitDurationNanosecond=rn(HX);Qt.prototype.visitFixedSizeList=rn(j1t);Qt.prototype.visitMap=rn(N1t);const Mc=new Qt,yf=Symbol.for("parent"),oE=Symbol.for("rowIndex");class qX{constructor(t,n){return this[yf]=t,this[oE]=n,new Proxy(this,new U1t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[oE],n=this[yf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=el.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Zv(t)}: ${Zv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new B1t(this[yf],this[oE])}}class B1t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,el.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(qX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[yf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[oE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class U1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[yf].type.children.map(n=>n.name)}has(t,n){return t[yf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[yf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[yf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=el.visit(t[yf].children[r],t[oE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[yf].type.children.findIndex(s=>s.name===n);return i!==-1?(Mc.visit(t[yf].children[i],t[oE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const z1t=(e,t)=>864e5*e[t],WX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),V1t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,H1t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,oAe=e=>new Date(e),q1t=(e,t)=>oAe(z1t(e,t)),W1t=(e,t)=>oAe(WX(e,t)),G1t=(e,t)=>null,aAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},Y1t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},uAe=({values:e},t)=>q1t(e,t),lAe=({values:e},t)=>W1t(e,t*2),Vy=({stride:e,values:t},n)=>t[e*n],K1t=({stride:e,values:t},n)=>GCe(t[e*n]),cAe=({values:e},t)=>e[t],X1t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Q1t=({values:e,valueOffsets:t},n)=>aAe(e,t,n),J1t=({values:e,valueOffsets:t},n)=>{const r=aAe(e,t,n);return r!==null?Pz(r):null},Z1t=({values:e},t)=>e[t],evt=({type:e,values:t},n)=>e.precision!==Do.HALF?t[n]:GCe(t[n]),tvt=(e,t)=>e.type.unit===Nh.DAY?uAe(e,t):lAe(e,t),fAe=({values:e},t)=>1e3*WX(e,t*2),dAe=({values:e},t)=>WX(e,t*2),hAe=({values:e},t)=>V1t(e,t*2),pAe=({values:e},t)=>H1t(e,t*2),nvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return fAe(e,t);case Wt.MILLISECOND:return dAe(e,t);case Wt.MICROSECOND:return hAe(e,t);case Wt.NANOSECOND:return pAe(e,t)}},mAe=({values:e},t)=>e[t],gAe=({values:e},t)=>e[t],yAe=({values:e},t)=>e[t],vAe=({values:e},t)=>e[t],rvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return mAe(e,t);case Wt.MILLISECOND:return gAe(e,t);case Wt.MICROSECOND:return yAe(e,t);case Wt.NANOSECOND:return vAe(e,t)}},ivt=({values:e,stride:t},n)=>yX.decimal(e.subarray(t*n,t*(n+1))),svt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},ovt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new e4(o.slice(i,s-i))},avt=(e,t)=>new qX(e,t),uvt=(e,t)=>e.type.mode===Zu.Dense?bAe(e,t):_Ae(e,t),bAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,e.valueOffsets[t])},_Ae=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,t)},lvt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},cvt=(e,t)=>e.type.unit===Ph.DAY_TIME?wAe(e,t):EAe(e,t),wAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),EAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},xAe=({values:e},t)=>e[t],SAe=({values:e},t)=>e[t],TAe=({values:e},t)=>e[t],CAe=({values:e},t)=>e[t],fvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return xAe(e,t);case Wt.MILLISECOND:return SAe(e,t);case Wt.MICROSECOND:return TAe(e,t);case Wt.NANOSECOND:return CAe(e,t)}},dvt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Gt.prototype.visitNull=Jt(G1t);Gt.prototype.visitBool=Jt(Y1t);Gt.prototype.visitInt=Jt(Z1t);Gt.prototype.visitInt8=Jt(Vy);Gt.prototype.visitInt16=Jt(Vy);Gt.prototype.visitInt32=Jt(Vy);Gt.prototype.visitInt64=Jt(cAe);Gt.prototype.visitUint8=Jt(Vy);Gt.prototype.visitUint16=Jt(Vy);Gt.prototype.visitUint32=Jt(Vy);Gt.prototype.visitUint64=Jt(cAe);Gt.prototype.visitFloat=Jt(evt);Gt.prototype.visitFloat16=Jt(K1t);Gt.prototype.visitFloat32=Jt(Vy);Gt.prototype.visitFloat64=Jt(Vy);Gt.prototype.visitUtf8=Jt(J1t);Gt.prototype.visitBinary=Jt(Q1t);Gt.prototype.visitFixedSizeBinary=Jt(X1t);Gt.prototype.visitDate=Jt(tvt);Gt.prototype.visitDateDay=Jt(uAe);Gt.prototype.visitDateMillisecond=Jt(lAe);Gt.prototype.visitTimestamp=Jt(nvt);Gt.prototype.visitTimestampSecond=Jt(fAe);Gt.prototype.visitTimestampMillisecond=Jt(dAe);Gt.prototype.visitTimestampMicrosecond=Jt(hAe);Gt.prototype.visitTimestampNanosecond=Jt(pAe);Gt.prototype.visitTime=Jt(rvt);Gt.prototype.visitTimeSecond=Jt(mAe);Gt.prototype.visitTimeMillisecond=Jt(gAe);Gt.prototype.visitTimeMicrosecond=Jt(yAe);Gt.prototype.visitTimeNanosecond=Jt(vAe);Gt.prototype.visitDecimal=Jt(ivt);Gt.prototype.visitList=Jt(svt);Gt.prototype.visitStruct=Jt(avt);Gt.prototype.visitUnion=Jt(uvt);Gt.prototype.visitDenseUnion=Jt(bAe);Gt.prototype.visitSparseUnion=Jt(_Ae);Gt.prototype.visitDictionary=Jt(lvt);Gt.prototype.visitInterval=Jt(cvt);Gt.prototype.visitIntervalDayTime=Jt(wAe);Gt.prototype.visitIntervalYearMonth=Jt(EAe);Gt.prototype.visitDuration=Jt(fvt);Gt.prototype.visitDurationSecond=Jt(xAe);Gt.prototype.visitDurationMillisecond=Jt(SAe);Gt.prototype.visitDurationMicrosecond=Jt(TAe);Gt.prototype.visitDurationNanosecond=Jt(CAe);Gt.prototype.visitFixedSizeList=Jt(dvt);Gt.prototype.visitMap=Jt(ovt);const el=new Gt,Tf=Symbol.for("keys"),aE=Symbol.for("vals");class e4{constructor(t){return this[Tf]=new hr([t.children[0]]).memoize(),this[aE]=t.children[1],new Proxy(this,new pvt)}[Symbol.iterator](){return new hvt(this[Tf],this[aE])}get size(){return this[Tf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Tf],n=this[aE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=el.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Zv(t)}: ${Zv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class hvt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),el.visit(this.vals,t)]})}}class pvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Tf].toArray().map(String)}has(t,n){return t[Tf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Tf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Tf].indexOf(n);if(r!==-1){const i=el.visit(Reflect.get(t,aE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Tf].indexOf(n);return i!==-1?(Mc.visit(Reflect.get(t,aE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(e4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Tf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[aE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let efe;function AAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(efe=s,s=o,o=efe),o>i&&(o=i),r?r(e,s,o):[s,o]}const tfe=e=>e!==e;function SS(e){if(typeof e!=="object"||e===null)return tfe(e)?tfe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?i1t(e,n):!1:e instanceof Map?gvt(e):Array.isArray(e)?mvt(e):e instanceof hr?yvt(e):vvt(e,!0)}function mvt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=SS(e[n]);return t4(t)}function gvt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=SS(r);return t4(n)}function yvt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=SS(e.get(n));return t4(t)}function vvt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=SS(e[n[i]]);return t4(r,n)}function t4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return bvt(e,n);case Map:return nfe(e,n,n.keys());case e4:case qX:case Object:case void 0:return nfe(e,n,t||Object.keys(n))}return n instanceof hr?_vt(e,n):!1}}function bvt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function _vt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function nfe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function IAe(e,t,n,r){return(n&1<<r)!==0}function wvt(e,t,n,r){return(n&1<<r)>>r}function d$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):kAe(new GX(n,e,t,null,IAe)).subarray(0,r)),i}return n}function kAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class GX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function $z(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new GX(e,t,n-t,e,wvt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return $z(e,t,i)+$z(e,r,n)+Evt(e,i>>3,r-i>>3)}function Evt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Z8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Z8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Z8(s.getUint8(i)),i+=1;return r}function Z8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const xvt=-1;class Nr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=xvt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-$z(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Nr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Md(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Zu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Zu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(d$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Nr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(d$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[kp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[kp.TYPE])&&(o[kp.TYPE]=s.subarray(t,t+n)),(s=o[kp.OFFSET])&&(o[kp.OFFSET]=s.subarray(t,t+n+1))||(s=o[kp.DATA])&&(o[kp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Nr.prototype.children=Object.freeze([]);class $C extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Nr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=BT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=BT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Pr(t.nullBitmap),o=BT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Pr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ys(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Nr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=BT(t.valueOffsets);return new Nr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new $C().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $C().visit({type:n.valueType})}=t,s=Pr(t.nullBitmap),{["length"]:o=i.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $C().visit({type:n.childType})}=t,s=Pr(t.nullBitmap),o=BT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}}const Svt=new $C;function aa(e){return Svt.visit(e)}class rfe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function RAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function NAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function PAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function YX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function KX(e,t){return e.getValid(t)}function uE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return YX(r,this._offsets,n,t)}}function DAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=YX(s,this._offsets,r,n);return t=void 0,o}}function OAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):YX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function Tvt(e,t){return t===null&&e.length>0?0:-1}function Cvt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new GX(n,e.offset+(t||0),e.length,n,IAe)){if(!i)return r;++r}return-1}function cn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return Cvt(e,n)}const r=el.getVisitFn(e),i=SS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function $Ae(e,t,n){const r=el.getVisitFn(e),i=SS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=Tvt;Yt.prototype.visitBool=cn;Yt.prototype.visitInt=cn;Yt.prototype.visitInt8=cn;Yt.prototype.visitInt16=cn;Yt.prototype.visitInt32=cn;Yt.prototype.visitInt64=cn;Yt.prototype.visitUint8=cn;Yt.prototype.visitUint16=cn;Yt.prototype.visitUint32=cn;Yt.prototype.visitUint64=cn;Yt.prototype.visitFloat=cn;Yt.prototype.visitFloat16=cn;Yt.prototype.visitFloat32=cn;Yt.prototype.visitFloat64=cn;Yt.prototype.visitUtf8=cn;Yt.prototype.visitBinary=cn;Yt.prototype.visitFixedSizeBinary=cn;Yt.prototype.visitDate=cn;Yt.prototype.visitDateDay=cn;Yt.prototype.visitDateMillisecond=cn;Yt.prototype.visitTimestamp=cn;Yt.prototype.visitTimestampSecond=cn;Yt.prototype.visitTimestampMillisecond=cn;Yt.prototype.visitTimestampMicrosecond=cn;Yt.prototype.visitTimestampNanosecond=cn;Yt.prototype.visitTime=cn;Yt.prototype.visitTimeSecond=cn;Yt.prototype.visitTimeMillisecond=cn;Yt.prototype.visitTimeMicrosecond=cn;Yt.prototype.visitTimeNanosecond=cn;Yt.prototype.visitDecimal=cn;Yt.prototype.visitList=cn;Yt.prototype.visitStruct=cn;Yt.prototype.visitUnion=cn;Yt.prototype.visitDenseUnion=$Ae;Yt.prototype.visitSparseUnion=$Ae;Yt.prototype.visitDictionary=cn;Yt.prototype.visitInterval=cn;Yt.prototype.visitIntervalDayTime=cn;Yt.prototype.visitIntervalYearMonth=cn;Yt.prototype.visitDuration=cn;Yt.prototype.visitDurationSecond=cn;Yt.prototype.visitDurationMillisecond=cn;Yt.prototype.visitDurationMicrosecond=cn;Yt.prototype.visitDurationNanosecond=cn;Yt.prototype.visitFixedSizeList=cn;Yt.prototype.visitMap=cn;const h$=new Yt;class Kt extends Cn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof nu&&t.bitWidth!==64||t instanceof Nm&&t.bitWidth!==64||t instanceof X0&&t.precision!==Do.HALF))return new rfe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new rfe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Avt(o)})}class Avt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const XX=new Kt,Ivt=(e,t)=>e+t;class Hy extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const kvt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Rvt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Nvt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Dh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},Pvt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Dh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},Dvt=(e,t)=>e.type.mode===Zu.Dense?MAe(e,t):LAe(e,t),MAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Dh.visit(t[s],r[i])},LAe=({children:e},t)=>4+Dh.visitMany(e,e.map(()=>t)).reduce(Ivt,0);Hy.prototype.visitUtf8=kvt;Hy.prototype.visitBinary=Rvt;Hy.prototype.visitList=Nvt;Hy.prototype.visitFixedSizeList=Pvt;Hy.prototype.visitUnion=Dvt;Hy.prototype.visitDenseUnion=MAe;Hy.prototype.visitSparseUnion=LAe;const Dh=new Hy;var FAe;const jAe={},BAe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Nr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=jAe[o.typeId],f=s[0];this.isValid=d=>KX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,BAe[o.typeId]),this._offsets=NAe(s);break}this.data=s,this.type=o,this.stride=Md(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return RAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return XX.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(AAe(this,t,n,({data:r,_offsets:i},s,o)=>PAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new p$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new p$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}FAe=Symbol.toStringTag;hr[FAe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=el.getVisitFnByTypeId(n),i=Mc.getVisitFnByTypeId(n),s=h$.getVisitFnByTypeId(n),o=Dh.getVisitFnByTypeId(n);jAe[n]={get:r,set:i,indexOf:s,byteLength:o},BAe[n]=Object.create(e,{isValid:{value:uE(KX)},get:{value:uE(el.getVisitFnByTypeId(n))},set:{value:DAe(Mc.getVisitFnByTypeId(n))},indexOf:{value:OAe(h$.getVisitFnByTypeId(n))},getByteLength:{value:uE(Dh.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class p$ extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new p$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Ovt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${$vt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function $vt(e){return typeof e!="bigint"?Zv(e):`${Zv(e)}n`}const eB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Mvt=(e,t=0)=>e.length>=t?e.subarray(0,t):a$(new e.constructor(t),e,0);class n4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?eB(r*1,this.BYTES_PER_ELEMENT):eB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=eB(t*this.stride,this.BYTES_PER_ELEMENT);const n=Mvt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=a$(new this.ArrayType(t),this.buffer)}}n4.prototype.offset=0;class Lk extends n4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class UAe extends Lk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class zAe extends Lk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let al=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Md(t),this._nulls=new UAe,n&&n.length>0&&(this._isValid=Ovt(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};al.prototype.length=1;al.prototype.stride=1;al.prototype.children=null;al.prototype.finished=!1;al.prototype.nullValues=null;al.prototype._isValid=()=>!0;class ng extends al{constructor(t){super(t),this._values=new Lk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class r4 extends al{constructor(t){super(t),this._pendingLength=0,this._offsets=new zAe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof e4?n[Tf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Mz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const tB=2,qd=4,Up=4,zr=4,Og=new Int32Array(2),ife=new Float32Array(Og.buffer),sfe=new Float64Array(Og.buffer),iP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Lz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Lz||(Lz={}));let m$=class VAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new VAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Og[0]=this.readInt32(t),ife[0]}readFloat64(t){return Og[iP?0:1]=this.readInt32(t),Og[iP?1:0]=this.readInt32(t+4),sfe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){ife[0]=n,this.writeInt32(t,Og[0])}writeFloat64(t,n){sfe[0]=n,this.writeInt32(t,Og[iP?0:1]),this.writeInt32(t+4,Og[iP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+qd+Up)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Up;n++)t+=String.fromCharCode(this.readInt8(this.position_+qd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=qd;const i=this.bytes_.subarray(t,t+r);return n===Lz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+qd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Up)throw new Error("FlatBuffers: file identifier must be length "+Up);for(let n=0;n<Up;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+qd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},HAe=class qAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=m$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=qAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=m$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(qd,0),this.writeInt32(this.offset()-t+qd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*tB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=tB;l<s;l+=tB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?zr:0;if(n){const s=n;if(this.prep(this.minalign,qd+Up+i),s.length!=Up)throw new TypeError("FlatBuffers: file identifier must be length "+Up);for(let o=Up-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,qd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(qd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+zr),(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Rs.startKeyValue(t),Rs.addKey(t,n),Rs.addValue(t,r),Rs.endKeyValue(t)}}var ux;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ux||(ux={}));var lx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(lx||(lx={}));var g$;(function(e){e[e.DenseArray=0]="DenseArray"})(g$||(g$={}));class bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+zr),(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return bl.startInt(t),bl.addBitWidth(t,n),bl.addIsSigned(t,r),bl.endInt(t)}}class zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+zr),(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):g$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,g$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+zr),(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return dv.startBinary(t),dv.endBinary(t)}}class hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+zr),(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return hv.startBool(t),hv.endBool(t)}}var y$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(y$||(y$={}));let ND=class aw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new aw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+zr),(n||new aw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):y$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,y$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return aw.startDate(t),aw.addUnit(t,n),aw.endDate(t)}};class xu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+zr),(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return xu.startDecimal(t),xu.addPrecision(t,n),xu.addScale(t,r),xu.addBitWidth(t,i),xu.endDecimal(t)}}var J0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(J0||(J0={}));class Wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+zr),(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,J0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Wd.startDuration(t),Wd.addUnit(t,n),Wd.endDuration(t)}}class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+zr),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Gd.startFixedSizeBinary(t),Gd.addByteWidth(t,n),Gd.endFixedSizeBinary(t)}}class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+zr),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Yd.startFixedSizeList(t),Yd.addListSize(t,n),Yd.endFixedSizeList(t)}}var v$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(v$||(v$={}));class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+zr),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):v$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,v$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Kd.startFloatingPoint(t),Kd.addPrecision(t,n),Kd.endFloatingPoint(t)}}var b$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(b$||(b$={}));class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+zr),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):b$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,b$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Xd.startInterval(t),Xd.addUnit(t,n),Xd.endInterval(t)}}class pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+zr),(n||new pv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return pv.startList(t),pv.endList(t)}}let PD=class uw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new uw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+zr),(n||new uw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return uw.startMap(t),uw.addKeysSorted(t,n),uw.endMap(t)}};class mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+zr),(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return mv.startNull(t),mv.endNull(t)}}class gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+zr),(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return gv.startStruct_(t),gv.endStruct_(t)}}let M2=class N1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new N1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+zr),(n||new N1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return N1.startTime(t),N1.addUnit(t,n),N1.addBitWidth(t,r),N1.endTime(t)}},L2=class P1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+zr),(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return P1.startTimestamp(t),P1.addUnit(t,n),P1.addTimezone(t,r),P1.endTimestamp(t)}};var _$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(_$||(_$={}));let D1=class O1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+zr),(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,_$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return O1.startUnion(t),O1.addMode(t,n),O1.addTypeIds(t,r),O1.endUnion(t)}};class yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+zr),(n||new yv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return yv.startUtf8(t),yv.endUtf8(t)}}var bi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(bi||(bi={}));let lc=class DD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new DD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+zr),(n||new DD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):bi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new zp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new DD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,bi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Od=class Ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+zr),(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new lc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,lx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Ap.startSchema(t),Ap.addEndianness(t,n),Ap.addFields(t,r),Ap.addCustomMetadata(t,i),Ap.addFeatures(t,s),Ap.endSchema(t)}};class pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+zr),(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ux.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Od).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Mz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Mz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ux.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Tr{constructor(t=[],n,r,i=Va.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=jz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Tr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Tr(n,this.metadata)}assign(...t){const n=t[0]instanceof Tr?t[0]:Array.isArray(t[0])?new Tr(t[0]):new Tr(t),r=[...this.fields],i=sP(sP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:sP(sP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=jz(s,new Map);return new Tr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Tr.prototype.fields=null;Tr.prototype.metadata=null;Tr.prototype.dictionaries=null;let Fr=class Fz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Fz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Fz.new(n,r,i,s)}};Fr.prototype.type=null;Fr.prototype.name=null;Fr.prototype.nullable=null;Fr.prototype.metadata=null;function sP(e,t){return new Map([...e||new Map,...t||new Map])}function jz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&jz(s.children,t)}return t}var Lvt=HAe,Fvt=m$;class Bz{static decode(t){t=new Fvt(Pr(t));const n=pl.getRootAsFooter(t),r=Tr.decode(n.schema(),new Map,n.version());return new jvt(r,n)}static encode(t){const n=new Lvt,r=Tr.encode(n,t.schema);pl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Z0.encode(n,o);const i=n.endVector();pl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Z0.encode(n,o);const s=n.endVector();return pl.startFooter(n),pl.addSchema(n,r),pl.addVersion(n,Va.V5),pl.addRecordBatches(n,i),pl.addDictionaries(n,s),pl.finishFooterBuffer(n,pl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Va.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class jvt extends Bz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Z0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Z0.decode(n)}return null}}class Z0{static decode(t){return new Z0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Mz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Qf(r),this.bodyLength=Qf(n)}}const oP=Object.freeze({done:!0,value:void 0});class WAe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Bvt extends WAe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Fp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(oP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Jce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Jce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Fp(this,void 0,void 0,function*(){return yield this.abort(t),oP})}return(t){return Fp(this,void 0,void 0,function*(){return yield this.close(),oP})}read(t){return Fp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Fp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(oP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class nB extends Bvt{write(t){if((t=Pr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Pz(this.toUint8Array(!0)):this.toUint8Array(!1).then(Pz)}toUint8Array(t=!1){return t?Rh(this._values)[0]:Fp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=bC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Rh(o,a)[0]})}}class GAe extends r4{constructor(t){super(t),this._values=new n4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Pr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Uvt extends al{constructor(t){super(t),this._values=new UAe}setValue(t,n){this._values.set(t,+n)}}class i4 extends ng{}i4.prototype._setValue=JCe;class YAe extends i4{}YAe.prototype._setValue=kX;class KAe extends i4{}KAe.prototype._setValue=RX;class XAe extends ng{}XAe.prototype._setValue=tAe;class zvt extends al{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Q0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=w$({type:this.type.indices,nullValues:n}),this.dictionary=w$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class QAe extends ng{}QAe.prototype._setValue=QCe;class Vvt extends al{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new ax(this.type.listSize,new Fr(n,t.type,!0)),r}}class s4 extends ng{setValue(t,n){this._values.set(t,n)}}class Hvt extends s4{setValue(t,n){super.setValue(t,YCe(n))}}class qvt extends s4{}class Wvt extends s4{}class o4 extends ng{}o4.prototype._setValue=iAe;class JAe extends o4{}JAe.prototype._setValue=jX;class ZAe extends o4{}ZAe.prototype._setValue=BX;class TS extends ng{}TS.prototype._setValue=sAe;class eIe extends TS{}eIe.prototype._setValue=UX;class tIe extends TS{}tIe.prototype._setValue=zX;class nIe extends TS{}nIe.prototype._setValue=VX;class rIe extends TS{}rIe.prototype._setValue=HX;class rg extends ng{setValue(t,n){this._values.set(t,n)}}class Gvt extends rg{}class Yvt extends rg{}class Kvt extends rg{}class Xvt extends rg{}class Qvt extends rg{}class Jvt extends rg{}class Zvt extends rg{}class ebt extends rg{}class tbt extends r4{constructor(t){super(t),this._offsets=new zAe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ox(new Fr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class nbt extends r4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new uI(new Fr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class rbt extends al{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class ibt extends al{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new fa([...this.type.children,new Fr(n,t.type,!0)]),r}}class CS extends ng{}CS.prototype._setValue=ZCe;class iIe extends CS{}iIe.prototype._setValue=NX;class sIe extends CS{}sIe.prototype._setValue=PX;class oIe extends CS{}oIe.prototype._setValue=DX;class aIe extends CS{}aIe.prototype._setValue=OX;class AS extends ng{}AS.prototype._setValue=eAe;class uIe extends AS{}uIe.prototype._setValue=$X;class lIe extends AS{}lIe.prototype._setValue=MX;class cIe extends AS{}cIe.prototype._setValue=LX;class fIe extends AS{}fIe.prototype._setValue=FX;class QX extends al{constructor(t){super(t),this._typeIds=new Lk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Fr(n,t.type)];return this.type=new aI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class sbt extends QX{}class obt extends QX{constructor(t){super(t),this._offsets=new Lk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class dIe extends r4{constructor(t){super(t),this._values=new n4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,pX(n))}_flushPending(t,n){}}dIe.prototype._flushPending=GAe.prototype._flushPending;class abt extends Cn{visitNull(){return rbt}visitBool(){return Uvt}visitInt(){return rg}visitInt8(){return Gvt}visitInt16(){return Yvt}visitInt32(){return Kvt}visitInt64(){return Xvt}visitUint8(){return Qvt}visitUint16(){return Jvt}visitUint32(){return Zvt}visitUint64(){return ebt}visitFloat(){return s4}visitFloat16(){return Hvt}visitFloat32(){return qvt}visitFloat64(){return Wvt}visitUtf8(){return dIe}visitBinary(){return GAe}visitFixedSizeBinary(){return QAe}visitDate(){return i4}visitDateDay(){return YAe}visitDateMillisecond(){return KAe}visitTimestamp(){return CS}visitTimestampSecond(){return iIe}visitTimestampMillisecond(){return sIe}visitTimestampMicrosecond(){return oIe}visitTimestampNanosecond(){return aIe}visitTime(){return AS}visitTimeSecond(){return uIe}visitTimeMillisecond(){return lIe}visitTimeMicrosecond(){return cIe}visitTimeNanosecond(){return fIe}visitDecimal(){return XAe}visitList(){return tbt}visitStruct(){return ibt}visitUnion(){return QX}visitDenseUnion(){return obt}visitSparseUnion(){return sbt}visitDictionary(){return zvt}visitInterval(){return o4}visitIntervalDayTime(){return JAe}visitIntervalYearMonth(){return ZAe}visitDuration(){return TS}visitDurationSecond(){return eIe}visitDurationMillisecond(){return tIe}visitDurationMicrosecond(){return nIe}visistDurationNanosecond(){return rIe}visitFixedSizeList(){return Vvt}visitMap(){return nbt}}const ubt=new abt;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function au(e,t){return t instanceof e.constructor}function Fk(e,t){return e===t||au(e,t)}function ig(e,t){return e===t||au(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function a4(e,t){return e===t||au(e,t)&&e.precision===t.precision}function lbt(e,t){return e===t||au(e,t)&&e.byteWidth===t.byteWidth}function JX(e,t){return e===t||au(e,t)&&e.unit===t.unit}function jk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Bk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function cbt(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function fbt(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function ZX(e,t){return e===t||au(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ey.compareManyFields(e.children,t.children)}function dbt(e,t){return e===t||au(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ey.visit(e.indices,t.indices)&&ey.visit(e.dictionary,t.dictionary)}function eQ(e,t){return e===t||au(e,t)&&e.unit===t.unit}function Uk(e,t){return e===t||au(e,t)&&e.unit===t.unit}function hbt(e,t){return e===t||au(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function pbt(e,t){return e===t||au(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=Fk;Xt.prototype.visitBool=Fk;Xt.prototype.visitInt=ig;Xt.prototype.visitInt8=ig;Xt.prototype.visitInt16=ig;Xt.prototype.visitInt32=ig;Xt.prototype.visitInt64=ig;Xt.prototype.visitUint8=ig;Xt.prototype.visitUint16=ig;Xt.prototype.visitUint32=ig;Xt.prototype.visitUint64=ig;Xt.prototype.visitFloat=a4;Xt.prototype.visitFloat16=a4;Xt.prototype.visitFloat32=a4;Xt.prototype.visitFloat64=a4;Xt.prototype.visitUtf8=Fk;Xt.prototype.visitBinary=Fk;Xt.prototype.visitFixedSizeBinary=lbt;Xt.prototype.visitDate=JX;Xt.prototype.visitDateDay=JX;Xt.prototype.visitDateMillisecond=JX;Xt.prototype.visitTimestamp=jk;Xt.prototype.visitTimestampSecond=jk;Xt.prototype.visitTimestampMillisecond=jk;Xt.prototype.visitTimestampMicrosecond=jk;Xt.prototype.visitTimestampNanosecond=jk;Xt.prototype.visitTime=Bk;Xt.prototype.visitTimeSecond=Bk;Xt.prototype.visitTimeMillisecond=Bk;Xt.prototype.visitTimeMicrosecond=Bk;Xt.prototype.visitTimeNanosecond=Bk;Xt.prototype.visitDecimal=Fk;Xt.prototype.visitList=cbt;Xt.prototype.visitStruct=fbt;Xt.prototype.visitUnion=ZX;Xt.prototype.visitDenseUnion=ZX;Xt.prototype.visitSparseUnion=ZX;Xt.prototype.visitDictionary=dbt;Xt.prototype.visitInterval=eQ;Xt.prototype.visitIntervalDayTime=eQ;Xt.prototype.visitIntervalYearMonth=eQ;Xt.prototype.visitDuration=Uk;Xt.prototype.visitDurationSecond=Uk;Xt.prototype.visitDurationMillisecond=Uk;Xt.prototype.visitDurationMicrosecond=Uk;Xt.prototype.visitDurationNanosecond=Uk;Xt.prototype.visitFixedSizeList=hbt;Xt.prototype.visitMap=pbt;const ey=new Xt;function Uz(e,t){return ey.compareSchemas(e,t)}function w$(e){const t=e.type,n=new(ubt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(w$(Object.assign(Object.assign({},l),{type:u})))}}return n}function rB(e,t){return mbt(e,t.map(n=>n.data.concat()))}function mbt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=gbt(n,o,c,t,i),o>0&&(r[s++]=aa({type:new fa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new _l(e,f))]}function gbt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var hIe;class Iu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Tr([]),this._offsets=[0],this;let i,s;t[0]instanceof Tr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof _l)return[u];if(u instanceof Iu)return u.batches;if(u instanceof Nr){if(u.type instanceof fa)return[new _l(new Tr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Tr(l.map((h,p)=>new Fr(String(h),c[p].type))),[,d]=rB(f,c);return d.length===0?[new _l(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Tr([]),!(i instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof _l))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Uz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??NAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=RAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?XX.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Iu(n,r.map(i=>new _l(n,i)))}slice(t,n){const r=this.schema;[t,n]=AAe({length:this.numRows},t,n);const i=PAe(this.data,this._offsets,t,n);return new Iu(r,i.map(s=>new _l(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=rB(r,a)}return new Iu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Iu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Iu(...rB(s,o))}}hIe=Symbol.toStringTag;Iu[hIe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=uE(KX),e.get=uE(el.getVisitFn(re.Struct)),e.set=DAe(Mc.getVisitFn(re.Struct)),e.indexOf=OAe(h$.getVisitFn(re.Struct)),e.getByteLength=uE(Dh.getVisitFn(re.Struct)),"Table"))(Iu.prototype);var pIe;let _l=class F2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Tr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new fa(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ofe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Fr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Tr(r),a=aa({type:new fa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=ofe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=mIe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return el.visit(this.data,t)}set(t,n){return Mc.visit(this.data,t,n)}indexOf(t,n){return h$.visit(this.data,t,n)}getByteLength(t){return Dh.visit(this.data,t)}[Symbol.iterator](){return XX.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new Iu(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new F2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Tr(s,new Map(this.schema.metadata)),i=aa({type:new fa(s),children:o})}return new F2(r,i)}select(t){const n=this.schema.select(t),r=new fa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new F2(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new fa(n.fields),length:this.numRows,children:r});return new F2(n,i)}};pIe=Symbol.toStringTag;_l[pIe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(_l.prototype);function ofe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new fa(i),length:n,children:s})]}function mIe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])mIe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class ybt extends _l{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new fa(t.fields),nullCount:0,children:n});super(t,r)}}var E$;(function(e){e[e.BUFFER=0]="BUFFER"})(E$||(E$={}));var x$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(x$||(x$={}));class $g{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+zr),(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):x$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):E$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,x$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,E$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return $g.startBodyCompression(t),$g.addCodec(t,n),$g.addMethod(t,r),$g.endBodyCompression(t)}}let gIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},yIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Rp=class zz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new zz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+zr),(n||new zz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new yIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new gIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new $g).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},lw=class Vz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Vz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+zr),(n||new Vz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Rp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var S$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(S$||(S$={}));let bg=class Ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+zr),(n||new Ad).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ux.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):S$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ux.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,S$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Ad.startMessage(t),Ad.addVersion(t,n),Ad.addHeaderType(t,r),Ad.addHeader(t,i),Ad.addBodyLength(t,s),Ad.addCustomMetadata(t,o),Ad.endMessage(t)}};class vbt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return mv.startNull(n),mv.endNull(n)}visitInt(t,n){return bl.startInt(n),bl.addBitWidth(n,t.bitWidth),bl.addIsSigned(n,t.isSigned),bl.endInt(n)}visitFloat(t,n){return Kd.startFloatingPoint(n),Kd.addPrecision(n,t.precision),Kd.endFloatingPoint(n)}visitBinary(t,n){return dv.startBinary(n),dv.endBinary(n)}visitBool(t,n){return hv.startBool(n),hv.endBool(n)}visitUtf8(t,n){return yv.startUtf8(n),yv.endUtf8(n)}visitDecimal(t,n){return xu.startDecimal(n),xu.addScale(n,t.scale),xu.addPrecision(n,t.precision),xu.addBitWidth(n,t.bitWidth),xu.endDecimal(n)}visitDate(t,n){return ND.startDate(n),ND.addUnit(n,t.unit),ND.endDate(n)}visitTime(t,n){return M2.startTime(n),M2.addUnit(n,t.unit),M2.addBitWidth(n,t.bitWidth),M2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return L2.startTimestamp(n),L2.addUnit(n,t.unit),r!==void 0&&L2.addTimezone(n,r),L2.endTimestamp(n)}visitInterval(t,n){return Xd.startInterval(n),Xd.addUnit(n,t.unit),Xd.endInterval(n)}visitDuration(t,n){return Wd.startDuration(n),Wd.addUnit(n,t.unit),Wd.endDuration(n)}visitList(t,n){return pv.startList(n),pv.endList(n)}visitStruct(t,n){return gv.startStruct_(n),gv.endStruct_(n)}visitUnion(t,n){D1.startTypeIdsVector(n,t.typeIds.length);const r=D1.createTypeIdsVector(n,t.typeIds);return D1.startUnion(n),D1.addMode(n,t.mode),D1.addTypeIds(n,r),D1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return zp.startDictionaryEncoding(n),zp.addId(n,BigInt(t.id)),zp.addIsOrdered(n,t.isOrdered),r!==void 0&&zp.addIndexType(n,r),zp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Gd.startFixedSizeBinary(n),Gd.addByteWidth(n,t.byteWidth),Gd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Yd.startFixedSizeList(n),Yd.addListSize(n,t.listSize),Yd.endFixedSizeList(n)}visitMap(t,n){return PD.startMap(n),PD.addKeysSorted(n,t.keysSorted),PD.endMap(n)}}const iB=new vbt;function bbt(e,t=new Map){return new Tr(wbt(e,t),OD(e.metadata),t)}function vIe(e){return new Bl(e.count,bIe(e.columns),_Ie(e.columns))}function _bt(e){return new Oh(vIe(e.data),e.id,e.isDelta)}function wbt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function afe(e,t){return(e.children||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function bIe(e){return(e||[]).reduce((t,n)=>[...t,new ty(n.count,Ebt(n.VALIDITY)),...bIe(n.children)],[])}function _Ie(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new nh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new nh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new nh(t.length,i.OFFSET.length)),i.DATA&&t.push(new nh(t.length,i.DATA.length)),t=_Ie(i.children,t)}return t}function Ebt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function xbt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=lfe(e,afe(e,t)),i=new Fr(e.name,o,e.nullable,OD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?ufe(r):new K0,a=new Q0(t.get(n),r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,OD(e.metadata))):(r=(r=s.indexType)?ufe(r):new K0,t.set(n,o=lfe(e,afe(e,t))),a=new Q0(o,r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,OD(e.metadata))),i||null}function OD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function ufe(e){return new nu(e.isSigned,e.bitWidth)}function lfe(e,t){const n=e.type.name;switch(n){case"NONE":return new Rm;case"null":return new Rm;case"binary":return new sI;case"utf8":return new rx;case"bool":return new oI;case"list":return new ox((t||[])[0]);case"struct":return new fa(t||[]);case"struct_":return new fa(t||[])}switch(n){case"int":{const r=e.type;return new nu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new X0(Do[r.precision])}case"decimal":{const r=e.type;return new u$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ix(Nh[r.unit])}case"time":{const r=e.type;return new Nm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new l$(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new sx(Ph[r.unit])}case"duration":{const r=e.type;return new c$(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new aI(Zu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new f$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ax(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new uI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Sbt=HAe,Tbt=m$;class Qd{static fromJSON(t,n){const r=new Qd(0,Va.V5,n);return r._createHeader=Cbt(t,n),r}static decode(t){t=new Tbt(Pr(t));const n=bg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Qd(r,i,s);return o._createHeader=Abt(n,s),o}static encode(t){const n=new Sbt;let r=-1;return t.isSchema()?r=Tr.encode(n,t.header()):t.isRecordBatch()?r=Bl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Oh.encode(n,t.header())),bg.startMessage(n),bg.addVersion(n,Va.V5),bg.addHeader(n,r),bg.addHeaderType(n,t.headerType),bg.addBodyLength(n,BigInt(t.bodyLength)),bg.finishMessageBuffer(n,bg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Tr)return new Qd(0,Va.V5,Qs.Schema,t);if(t instanceof Bl)return new Qd(n,Va.V5,Qs.RecordBatch,t);if(t instanceof Oh)return new Qd(n,Va.V5,Qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Qs.Schema}isRecordBatch(){return this.headerType===Qs.RecordBatch}isDictionaryBatch(){return this.headerType===Qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Qf(t)}}class Bl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Qf(t)}}class Oh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Qf(n)}}class nh{constructor(t,n){this.offset=Qf(t),this.length=Qf(n)}}class ty{constructor(t,n){this.length=Qf(t),this.nullCount=Qf(n)}}function Cbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.fromJSON(e);case Qs.RecordBatch:return Bl.fromJSON(e);case Qs.DictionaryBatch:return Oh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}function Abt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.decode(e.header(new Od),new Map,e.version());case Qs.RecordBatch:return Bl.decode(e.header(new Rp),e.version());case Qs.DictionaryBatch:return Oh.decode(e.header(new lw),e.version())}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}Fr.encode=Fbt;Fr.decode=Mbt;Fr.fromJSON=xbt;Tr.encode=Lbt;Tr.decode=Ibt;Tr.fromJSON=bbt;Bl.encode=jbt;Bl.decode=kbt;Bl.fromJSON=vIe;Oh.encode=Bbt;Oh.decode=Rbt;Oh.fromJSON=_bt;ty.encode=Ubt;ty.decode=Pbt;nh.encode=zbt;nh.decode=Nbt;function Ibt(e,t=new Map,n=Va.V5){const r=$bt(e,t);return new Tr(r,$D(e),t,n)}function kbt(e,t=Va.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Bl(e.length(),Dbt(e),Obt(e,t))}function Rbt(e,t=Va.V5){return new Oh(Bl.decode(e.data(),t),e.id(),e.isDelta())}function Nbt(e){return new nh(e.offset(),e.length())}function Pbt(e){return new ty(e.length(),e.nullCount())}function Dbt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ty.decode(n));return t}function Obt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Va.V4&&(r.bb_pos+=8*(i+1)),n[++s]=nh.decode(r));return n}function $bt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Fr.decode(r,t));return n}function cfe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Fr.decode(r,t));return n}function Mbt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=dfe(e,cfe(e,t)),r=new Fr(e.name(),i,e.nullable(),$D(e))):t.has(n=Qf(a.id()))?(s=(s=a.indexType())?ffe(s):new K0,o=new Q0(t.get(n),s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),$D(e))):(s=(s=a.indexType())?ffe(s):new K0,t.set(n,i=dfe(e,cfe(e,t))),o=new Q0(i,s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),$D(e))),r||null}function $D(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ffe(e){return new nu(e.isSigned(),e.bitWidth())}function dfe(e,t){const n=e.typeType();switch(n){case bi.NONE:return new Rm;case bi.Null:return new Rm;case bi.Binary:return new sI;case bi.Utf8:return new rx;case bi.Bool:return new oI;case bi.List:return new ox((t||[])[0]);case bi.Struct_:return new fa(t||[])}switch(n){case bi.Int:{const r=e.type(new bl);return new nu(r.isSigned(),r.bitWidth())}case bi.FloatingPoint:{const r=e.type(new Kd);return new X0(r.precision())}case bi.Decimal:{const r=e.type(new xu);return new u$(r.scale(),r.precision(),r.bitWidth())}case bi.Date:{const r=e.type(new ND);return new ix(r.unit())}case bi.Time:{const r=e.type(new M2);return new Nm(r.unit(),r.bitWidth())}case bi.Timestamp:{const r=e.type(new L2);return new l$(r.unit(),r.timezone())}case bi.Interval:{const r=e.type(new Xd);return new sx(r.unit())}case bi.Duration:{const r=e.type(new Wd);return new c$(r.unit())}case bi.Union:{const r=e.type(new D1);return new aI(r.mode(),r.typeIdsArray()||[],t||[])}case bi.FixedSizeBinary:{const r=e.type(new Gd);return new f$(r.byteWidth())}case bi.FixedSizeList:{const r=e.type(new Yd);return new ax(r.listSize(),(t||[])[0])}case bi.Map:{const r=e.type(new PD);return new uI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${bi[n]}" (${n})`)}function Lbt(e,t){const n=t.fields.map(s=>Fr.encode(e,s));Od.startFieldsVector(e,n.length);const r=Od.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Od.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Rs.startKeyValue(e),Rs.addKey(e,a),Rs.addValue(e,u),Rs.endKeyValue(e)})):-1;return Od.startSchema(e),Od.addFields(e,r),Od.addEndianness(e,Vbt?lx.Little:lx.Big),i!==-1&&Od.addCustomMetadata(e,i),Od.endSchema(e)}function Fbt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=iB.visit(s,e),r=iB.visit(s.dictionary,e)):r=iB.visit(s,e);const a=(s.children||[]).map(c=>Fr.encode(e,c)),u=lc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?lc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Rs.startKeyValue(e),Rs.addKey(e,d),Rs.addValue(e,h),Rs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),lc.startField(e),lc.addType(e,r),lc.addTypeType(e,o),lc.addChildren(e,u),lc.addNullable(e,!!t.nullable),n!==-1&&lc.addName(e,n),i!==-1&&lc.addDictionary(e,i),l!==-1&&lc.addCustomMetadata(e,l),lc.endField(e)}function jbt(e,t){const n=t.nodes||[],r=t.buffers||[];Rp.startNodesVector(e,n.length);for(const o of n.slice().reverse())ty.encode(e,o);const i=e.endVector();Rp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())nh.encode(e,o);const s=e.endVector();return Rp.startRecordBatch(e),Rp.addLength(e,BigInt(t.length)),Rp.addNodes(e,i),Rp.addBuffers(e,s),Rp.endRecordBatch(e)}function Bbt(e,t){const n=Bl.encode(e,t.data);return lw.startDictionaryBatch(e),lw.addId(e,BigInt(t.id)),lw.addIsDelta(e,t.isDelta),lw.addData(e,n),lw.endDictionaryBatch(e)}function Ubt(e,t){return yIe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function zbt(e,t){return gIe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Vbt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Hz="ARROW1",tQ=new Uint8Array(Hz.length);for(let e=0;e<Hz.length;e+=1)tQ[e]=Hz.codePointAt(e);tQ.length;class cs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof _l?s.data.children:s.data),r=new cs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new ty(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||Uf.call(this,i<=0?new Uint8Array(0):d$(t.offset,r,t.nullBitmap)),this.nodes.push(new ty(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Uf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new nh(this._byteLength,t)),this._byteLength+=t,this}function Hbt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Uf.call(this,i),n.mode===Zu.Sparse)return qz.call(this,e);if(n.mode===Zu.Dense){if(e.offset<=0)return Uf.call(this,s),qz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Uf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function qbt(e){let t;return e.nullCount>=e.length?Uf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Uf.call(this,d$(e.offset,e.length,t)):Uf.call(this,kAe(e.values))}function sg(e){return Uf.call(this,e.values.subarray(0,e.length*e.stride))}function wIe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Uf.call(this,xCe(-i,t+1,r)),Uf.call(this,n.subarray(i,i+o)),this}function nQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Uf.call(this,xCe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function qz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}cs.prototype.visitBool=qbt;cs.prototype.visitInt=sg;cs.prototype.visitFloat=sg;cs.prototype.visitUtf8=wIe;cs.prototype.visitBinary=wIe;cs.prototype.visitFixedSizeBinary=sg;cs.prototype.visitDate=sg;cs.prototype.visitTimestamp=sg;cs.prototype.visitTime=sg;cs.prototype.visitDecimal=sg;cs.prototype.visitList=nQ;cs.prototype.visitStruct=qz;cs.prototype.visitUnion=Hbt;cs.prototype.visitInterval=sg;cs.prototype.visitDuration=sg;cs.prototype.visitFixedSizeList=nQ;cs.prototype.visitMap=nQ;class EIe extends WAe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new nB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,zy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return J6(t)?t.then(n=>this.writeAll(n)):Z6(t)?oQ(this,t):sQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof nB?this._sink=t:(this._sink=new nB,t&&Qyt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Jyt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Uz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Iu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof _l&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Uz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof _l?t instanceof ybt||this._writeRecordBatch(t):t instanceof Iu?this.writeAll(t.batches):mX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Qd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Qs.RecordBatch?this._recordBatchBlocks.push(new Z0(a,t.bodyLength,this._position)):t.headerType===Qs.DictionaryBatch&&this._dictionaryBlocks.push(new Z0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Pr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(tQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=cs.assemble(t),o=new Bl(t.numRows,r,i),a=Qd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=cs.assemble(new hr([t])),u=new Bl(t.length,s,o),l=new Oh(u,n,r),c=Qd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class rQ extends EIe{static writeAll(t,n){const r=new rQ(n);return J6(t)?t.then(i=>r.writeAll(i)):Z6(t)?oQ(r,t):sQ(r,t)}}class iQ extends EIe{static writeAll(t){const n=new iQ;return J6(t)?t.then(r=>n.writeAll(r)):Z6(t)?oQ(n,t):sQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Bz.encode(new Bz(t,Va.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function sQ(e,t){let n=t;t instanceof Iu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function oQ(e,t){var n,r,i,s,o,a,u;return Fp(this,void 0,void 0,function*(){try{for(n=!0,r=bC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Wbt(e,t="stream"){return(t==="stream"?rQ:iQ).writeAll(e).toUint8Array(!0)}function aQ(e,t=1){return(e*t+63&-64||64)/t}function ny(e,t,n=e.BYTES_PER_ELEMENT){return new e(aQ(t,n))}function uQ(e){return e instanceof Nr?e:new Nr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Gbt(e){return new hr([uQ(e)])}const lQ=new TextEncoder;function Ybt(e,t,n){const r=lQ.encode(n);return e.set(r,t),r.length}function Kbt(e,t,n){return lQ.encodeInto(n,e.subarray(t)).written}const Xbt=lQ.encodeInto?Kbt:Ybt;function hfe(e,t){const n=ny(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function Qbt(e,t){const n=ny(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function Jbt(e,t){const n=ny(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Zbt(e,t){const n=ny(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function e_t(e){const t=w$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function t_t(e,t,n){const r=ny(Int32Array,t+1),i=ny(Uint8Array,3*n);let s=0;return{set(o,a){s+=Xbt(i,s,o),r[a+1]=s},data:()=>{const o=aQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function n_t(e,t){const n=[],r=ny(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:r_t(e.dictionary,n,o)})}}function r_t(e,t,n){const r=t_t(e,t.length,n);return t.forEach(r.set),Gbt(r.data())}function i_t(e,t){const n=ny(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function s_t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?hfe:null;break;case re.Float:r=e.precision>0?hfe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?n_t:null;break;case re.Bool:r=Qbt;break;case re.Date:r=e.unit?Zbt:Jbt;break}return r==null?e_t(e):n?i_t(r(e,t),t):r(e,t)}function o_t(e,t){const n=e.length,r=aQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),uQ({type:t,length:n,buffers:[null,i]})}function xIe(e,t,n,r,i=!0){const s=s_t(r,e,i);return t(n,s.set),uQ(s.data())}function cQ(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new sI;case re.Bool:return new oI;case re.DateDay:return new h1t;case re.DateMillisecond:case re.Date:return new p1t;case re.Dictionary:return new Q0(new rx,new K0);case re.Float16:return new qCe;case re.Float32:return new TX;case re.Float64:case re.Float:return new CX;case re.Int8:return new vX;case re.Int16:return new bX;case re.Int32:case re.Int:return new K0;case re.Int64:return new _X;case re.IntervalDayTime:return new b1t;case re.Interval:case re.IntervalYearMonth:return new _1t;case re.Null:return new Rm;case re.TimeMicrosecond:return new y1t;case re.TimeMillisecond:case re.Time:return new g1t;case re.TimeNanosecond:return new v1t;case re.TimeSecond:return new m1t;case re.Uint8:return new wX;case re.Uint16:return new EX;case re.Uint32:return new xX;case re.Uint64:return new SX;case re.Utf8:return new rx;default:xn(`Unsupported type code: ${kh(e)}. Use a data type constructor instead?`)}}function a_t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function SIe(e,t){const n=Wz();return e(t,n.add),n}function Wz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(km(t))++e.dates,a_t(t)&&++e.utcdays;else if(fv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Wz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Wz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return cQ(u_t(e))}};return e}function u_t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Fr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new ax(e.minlen,n):new ox(n)}else if(e.structs===t){const n=e.struct_prof;return new fa(Object.keys(n).map(r=>Fr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function l_t(e,t,n,r,i,s=!0){if(i=cQ(i),!i){const o=SIe(r,t);s=o.nulls>0,i=o.type()}return xIe(n,r,t,i,s)}function c_t(e,t,n,r,i,s=!0){i=cQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=f_t(o);if(u&&a&&pfe(u.type,i))return u;const l=o.data;if($k(l)){const c=d_t(l);if(a&&c&&pfe(c,i))return o_t(l,c);i=i||c,s=!1}if(!i){const c=SIe(r,o);s=c.nulls>0,i=c.type()}return xIe(n,r,o,i,s)}function f_t(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function d_t(e){const n={Float32Array:TX,Float64Array:CX,Int8Array:vX,Int16Array:bX,Int32Array:K0,Uint8Array:wX,Uint16Array:EX,Uint32Array:xX,BigInt64Array:_X,BigUint64Array:SX}[e.constructor.name];return n?new n:null}function pfe(e,t){return!e||!t?!0:e.compareTo(t)}function h_t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function p_t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&fv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const m_t=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function g_t(){try{return Iu}catch{m_t()}}function TIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=y_t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=g_t();return new u(a)}function y_t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=gi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:l_t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:h_t(e,r,i)};if(v_t(e))return{dataFrom:c_t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:p_t(e,r,i)};xn("Unsupported input data type")}function v_t(e){return e&&gi(e.reify)}function b_t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return Wbt(TIe(e,r),n)}function __t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function w_t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&km(u))++i,__t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function u4(e,t){return gi(t)?t(e):t||e.columnNames()}function CIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=w_t(E_t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function E_t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function fQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function x_t(e,t={}){const n=u4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":km(l)?X6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return fQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function AIe(e,t={}){if(gi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(km(e))return t.utc?X6(e):K2e(e);{const r=JSON.stringify(e,(s,o)=>$k(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+"…"+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function l4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function S_t(e,t={}){const n=u4(e,t.columns),{align:r,format:i}=CIe(e,n,t),s=T_t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(AIe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return fQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function T_t(e){return l4(e.style,t=>gi(t)?t:()=>t)}function C_t(e,t=!0,n=!1){return e===void 0||e?t:n}const A_t=e=>km(e)?X6(e,!0):e;function I_t(e,t={}){const n=C_t(t.schema),r=t.format||{},i=u4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||A_t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function k_t(e,t={}){const n=u4(e,t.columns),{align:r,format:i}=CIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return fQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(AIe(u,i[l]))+"|"}}),a+`
`}function IIe(e,t){for(const[n,r]of Q6(t))e.set(n,r);return e}function R_t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Pm(e,t,n=new Map){return t=tu(t)?e.columnName(t):t,Bo(t)?n.set(t,t):dr(t)?t.forEach(r=>Pm(e,r,n)):gi(t)?Pm(e,t(e),n):wa(t)?IIe(n,t):xn(`Invalid column selection: ${kh(t)}`),n}function c4(e,t){return e.toObject=t,e}function kIe(e){return dr(e)?e.map(kIe):e&&e.toObject?e.toObject():e}function cx(){return c4(e=>e.columnNames(),()=>({all:[]}))}function RIe(...e){return e=e.flat(),c4(t=>{const n=Pm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:kIe(e)}))}function N_t(e,t){return c4(n=>{let r=tu(e)?e:n.columnIndex(e),i=tu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function P_t(e){return Bo(e)&&(e=RegExp(R_t(e))),c4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function D_t(e){return $k(e.data)?e.data.constructor:Array}class Vp extends X0t{static from(t,n){return new Vp(Z0t(t,n),n)}static new(t,n){if(t instanceof Vp)return t;const r={},i=[];for(const[s,o]of Q6(t))r[s]=o,i.push(s);return new Vp(r,n||i)}constructor(t,n,r,i,s,o){l4(t,J0t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Vp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Iyt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Zl(r).groupby(r.groups());return t.forEach(s=>{s=Vp.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return mfe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Pm(this,t.columns||cx()),o=_Ce(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Ryt(this,u,a,n)}return a}*[Symbol.iterator](){const t=mfe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(D_t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=kyt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return TIe(this,t)}toArrowBuffer(t){return b_t(this,t)}toCSV(t){return x_t(this,t)}toHTML(t){return S_t(this,t)}toJSON(t){return I_t(this,t)}toMarkdown(t){return k_t(this,t)}}function mfe(e){let t=e._builder;if(!t){const n=_Ce(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class O_t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=$_t[e.type];s&&s(e,t,n)}const aP=(e,t,n)=>{er(e.argument,t,n,e)},sB=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},gfe=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},oB=(e,t,n)=>{$d(e.params,t,n,e),er(e.body,t,n,e)},yfe=(e,t,n)=>{er(e.callee,t,n,e),$d(e.arguments,t,n,e)},$d=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},$_t={TemplateLiteral:(e,t,n)=>{$d(e.expressions,t,n,e),$d(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:yfe,NewExpression:yfe,ArrayExpression:(e,t,n)=>{$d(e.elements,t,n,e)},AssignmentExpression:sB,AwaitExpression:aP,BinaryExpression:sB,LogicalExpression:sB,UnaryExpression:aP,UpdateExpression:aP,ConditionalExpression:gfe,ObjectExpression:(e,t,n)=>{$d(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:oB,FunctionExpression:oB,FunctionDeclaration:oB,VariableDeclaration:(e,t,n)=>{$d(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{$d(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:gfe,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),$d(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),$d(e.consequent,t,n,e)},ReturnStatement:aP,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function NIe(e){delete e.start,delete e.end,delete e.optional}function vfe(e){NIe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function M_t(e){return er(e,null,{Column:vfe,Constant:vfe,Default:NIe}),e}function Ps(e,t){return t&&t.type===e}function L_t(e){return Ps(Dyt,e)||Ps(Pyt,e)}function F_t(e){return gi(e)?e:()=>e}const j_t="Escaped functions are not valid as rollup or pivot values.";function B_t(e,t,n){e.aggronly&&xn(j_t);const r="(row,data)=>fn("+bCe(e.table.columnNames())+",$)";return{escape:hX.escape(r,F_t(t.expr),n)}}var U_t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],PIe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],z_t="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",DIe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",aB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},uB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",V_t={5:uB,"5module":uB+" export import",6:uB+" const class extends export import super"},H_t=/^in(stanceof)?$/,q_t=new RegExp("["+DIe+"]"),W_t=new RegExp("["+DIe+z_t+"]");function Gz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Dm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&q_t.test(String.fromCharCode(e)):t===!1?!1:Gz(e,PIe)}function fx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&W_t.test(String.fromCharCode(e)):t===!1?!1:Gz(e,PIe)||Gz(e,U_t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ic(e,t){return new or(e,{beforeExpr:!0,binop:t})}var sc={beforeExpr:!0},mu={startsExpr:!0},dQ={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,dQ[e]=new or(e,t)}var K={num:new or("num",mu),regexp:new or("regexp",mu),string:new or("string",mu),name:new or("name",mu),privateId:new or("privateId",mu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",sc),semi:new or(";",sc),colon:new or(":",sc),dot:new or("."),question:new or("?",sc),questionDot:new or("?."),arrow:new or("=>",sc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",sc),backQuote:new or("`",mu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ic("||",1),logicalAND:ic("&&",2),bitwiseOR:ic("|",3),bitwiseXOR:ic("^",4),bitwiseAND:ic("&",5),equality:ic("==/!=/===/!==",6),relational:ic("</>/<=/>=",7),bitShift:ic("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ic("%",10),star:ic("*",10),slash:ic("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:ic("??",1),_break:Wn("break"),_case:Wn("case",sc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",sc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",sc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",mu),_if:Wn("if"),_return:Wn("return",sc),_switch:Wn("switch"),_throw:Wn("throw",sc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",mu),_super:Wn("super",mu),_class:Wn("class",mu),_extends:Wn("extends",sc),_export:Wn("export"),_import:Wn("import",mu),_null:Wn("null",mu),_true:Wn("true",mu),_false:Wn("false",mu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Kc=/\r\n?|\n|\u2028|\u2029/,G_t=new RegExp(Kc.source,"g");function IS(e){return e===10||e===13||e===8232||e===8233}function OIe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(IS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var $Ie=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,yc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,MIe=Object.prototype,Y_t=MIe.hasOwnProperty,K_t=MIe.toString,zk=Object.hasOwn||function(e,t){return Y_t.call(e,t)},bfe=Array.isArray||function(e){return K_t.call(e)==="[object Array]"},_fe=Object.create(null);function t0(e){return _fe[e]||(_fe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function ry(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var X_t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,lI=function(t,n){this.line=t,this.column=n};lI.prototype.offset=function(t){return new lI(this.line,this.column+t)};var f4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function LIe(e,t){for(var n=1,r=0;;){var i=OIe(e,r,t);if(i<0)return new lI(n,t-r);++n,r=i}}var Yz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},wfe=!1;function Q_t(e){var t={};for(var n in Yz)t[n]=e&&zk(e,n)?e[n]:Yz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!wfe&&typeof console=="object"&&console.warn&&(wfe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),bfe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return bfe(t.onComment)&&(t.onComment=J_t(t,t.onComment)),t}function J_t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new f4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var cI=1,kS=2,hQ=4,FIe=8,jIe=16,BIe=32,pQ=64,UIe=128,Vk=256,mQ=cI|kS|Vk;function gQ(e,t){return kS|(e?hQ:0)|(t?FIe:0)}var T$=0,yQ=1,og=2,zIe=3,VIe=4,HIe=5,Bs=function(t,n,r){this.options=t=Q_t(t),this.sourceFile=t.sourceFile,this.keywords=t0(V_t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=aB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=t0(i);var s=(i?i+" ":"")+aB.strict;this.reservedWordsStrict=t0(s),this.reservedWordsStrictBind=t0(s+" "+aB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Kc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(cI),this.regexpState=null,this.privateNameStack=[]},ep={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Bs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ep.inFunction.get=function(){return(this.currentVarScope().flags&kS)>0};ep.inGenerator.get=function(){return(this.currentVarScope().flags&FIe)>0&&!this.currentVarScope().inClassFieldInit};ep.inAsync.get=function(){return(this.currentVarScope().flags&hQ)>0&&!this.currentVarScope().inClassFieldInit};ep.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Vk)return!1;if(t.flags&kS)return(t.flags&hQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ep.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&pQ)>0||n||this.options.allowSuperOutsideMethod};ep.allowDirectSuper.get=function(){return(this.currentThisScope().flags&UIe)>0};ep.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ep.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(kS|Vk))>0||n};ep.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Vk)>0};Bs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Bs.parse=function(t,n){return new this(n,t).parse()};Bs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Bs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Bs.prototype,ep);var uu=Bs.prototype,Z_t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;uu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){yc.lastIndex=e,e+=yc.exec(this.input)[0].length;var t=Z_t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){yc.lastIndex=e+t[0].length;var n=yc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Kc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,yc.lastIndex=e,e+=yc.exec(this.input)[0].length,this.input[e]===";"&&e++}};uu.eat=function(e){return this.type===e?(this.next(),!0):!1};uu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};uu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};uu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};uu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Kc.test(this.input.slice(this.lastTokEnd,this.start))};uu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};uu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};uu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};uu.expect=function(e){this.eat(e)||this.unexpected()};uu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var d4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};uu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};uu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};uu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};uu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Bs.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var vQ={kind:"loop"},ewt={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;yc.lastIndex=this.pos;var t=yc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Dm(r,!0)){for(var i=n+1;fx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!H_t.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;yc.lastIndex=this.pos;var e=yc.exec(this.input),t=this.pos+e[0].length,n;return!Kc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(fx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){yc.lastIndex=this.pos;var o=yc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(vQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(vQ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new d4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,MC|(n?0:Kz),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(ewt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),Kc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var twt=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?BIe:0),this.checkLValPattern(e,t?VIe:og),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(vQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?yQ:og,!1)};var MC=1,Kz=2,qIe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Kz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&MC&&(e.id=t&qIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Kz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?yQ:og:zIe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gQ(e.async,e.generator)),t&MC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&MC?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&nwt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&C$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&C$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(C$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&C$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Vk|pQ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,og,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];zk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function nwt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function C$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,MC|qIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),zk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=twt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return X_t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Xc=Bs.prototype;Xc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Xc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Xc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Xc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Xc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Xc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Xc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Xc.parseBindingListItem=function(e){return e};Xc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Xc.checkLValSimple=function(e,t,n){t===void 0&&(t=T$);var r=t!==T$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===og&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(zk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==HIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Xc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=T$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Xc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=T$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var of=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ti={b_stat:new of("{",!1),b_expr:new of("{",!0),b_tmpl:new of("${",!1),p_stat:new of("(",!1),p_expr:new of("(",!0),q_tmpl:new of("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new of("function",!1),f_expr:new of("function",!0),f_expr_gen:new of("function",!0,!1,null,!0),f_gen:new of("function",!1,!1,null,!0)},RS=Bs.prototype;RS.initialContext=function(){return[Ti.b_stat]};RS.curContext=function(){return this.context[this.context.length-1]};RS.braceIsBlock=function(e){var t=this.curContext();return t===Ti.f_expr||t===Ti.f_stat?!0:e===K.colon&&(t===Ti.b_stat||t===Ti.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Kc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ti.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};RS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};RS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};RS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ti.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ti.b_stat:Ti.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ti.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ti.p_stat:Ti.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ti.p_stat)&&!(e===K._return&&Kc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ti.b_stat)?this.context.push(Ti.f_expr):this.context.push(Ti.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ti.q_tmpl?this.context.pop():this.context.push(Ti.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ti.f_expr?this.context[t]=Ti.f_expr_gen:this.context[t]=Ti.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var un=Bs.prototype;un.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};un.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};un.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new d4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};un.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};un.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};un.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};un.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};un.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&WIe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function WIe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&WIe(e.expression)}un.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};un.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};un.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};un.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};un.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new d4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};un.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ti.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ti.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};un.parseExprAtomDefault=function(){this.unexpected()};un.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};un.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};un.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};un.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};un.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};un.shouldParseArrow=function(e){return!this.canInsertSemicolon()};un.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new d4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};un.parseParenItem=function(e){return e};un.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var rwt=[];un.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=rwt,this.finishNode(e,"NewExpression")};un.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};un.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};un.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Kc.test(this.input.slice(this.lastTokEnd,this.start))};un.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};un.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};un.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};un.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};un.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};un.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};un.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gQ(t,r.generator)|pQ|(n?UIe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};un.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(gQ(n,!1)|jIe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};un.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,HIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};un.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};un.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,yQ,t?null:n)}};un.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};un.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};un.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};un.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};un.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};un.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};un.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var A$=Bs.prototype;A$.raise=function(e,t){var n=LIe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};A$.raiseRecoverable=A$.raise;A$.curPosition=function(){if(this.options.locations)return new lI(this.curLine,this.pos-this.lineStart)};var qy=Bs.prototype,iwt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};qy.enterScope=function(e){this.scopeStack.push(new iwt(e))};qy.exitScope=function(){this.scopeStack.pop()};qy.treatFunctionsAsVarInScope=function(e){return e.flags&kS||!this.inModule&&e.flags&cI};qy.declareName=function(e,t,n){var r=!1;if(t===og){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&cI&&delete this.undefinedExports[e]}else if(t===VIe){var s=this.currentScope();s.lexical.push(e)}else if(t===zIe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&BIe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&cI&&delete this.undefinedExports[e],u.flags&mQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};qy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};qy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};qy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&mQ)return t}};qy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&mQ&&!(t.flags&jIe))return t}};var h4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new f4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Hk=Bs.prototype;Hk.startNode=function(){return new h4(this,this.start,this.startLoc)};Hk.startNodeAt=function(e,t){return new h4(this,e,t)};function GIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Hk.finishNode=function(e,t){return GIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Hk.finishNodeAt=function(e,t,n,r){return GIe.call(this,e,t,n,r)};Hk.copyNode=function(e){var t=new h4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var YIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",KIe=YIe+" Extended_Pictographic",XIe=KIe,QIe=XIe+" EBase EComp EMod EPres ExtPict",JIe=QIe,swt=JIe,owt={9:YIe,10:KIe,11:XIe,12:QIe,13:JIe,14:swt},awt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",uwt={9:"",10:"",11:"",12:"",13:"",14:awt},Efe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ZIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",eke=ZIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",tke=eke+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",nke=tke+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",rke=nke+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",lwt=rke+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",cwt={9:ZIe,10:eke,11:tke,12:nke,13:rke,14:lwt},ike={};function fwt(e){var t=ike[e]={binary:t0(owt[e]+" "+Efe),binaryOfStrings:t0(uwt[e]),nonBinary:{General_Category:t0(Efe),Script:t0(cwt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var lB=0,xfe=[9,10,11,12,13,14];lB<xfe.length;lB+=1){var dwt=xfe[lB];fwt(dwt)}var Ct=Bs.prototype,tp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=ike[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};tp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};tp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};tp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};tp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};tp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};tp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};tp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};tp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};tp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return ske(t)?(e.lastIntValue=t,e.advance(),!0):!1};function ske(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!ske(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ry(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ry(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),hwt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function hwt(e){return Dm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),pwt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function pwt(e){return fx(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!p4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return oke(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function oke(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&mwt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function mwt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var ake=0,Om=1,wc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(gwt(t))return e.lastIntValue=-1,e.advance(),Om;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===wc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return ake};function gwt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Om}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return ake};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){zk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Om;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return wc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";uke(t=e.current());)e.lastStringValue+=ry(t),e.advance();return e.lastStringValue!==""};function uke(e){return oke(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";ywt(t=e.current());)e.lastStringValue+=ry(t),e.advance();return e.lastStringValue!==""};function ywt(e){return uke(e)||p4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===wc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Om:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Om)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||fke(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Om,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===wc&&(t=wc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==wc&&(t=Om);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===wc&&(t=wc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Om:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===wc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===wc&&(t=wc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Om:wc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&vwt(n)||bwt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function vwt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function bwt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return _wt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function _wt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return p4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;p4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function p4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;lke(n=e.current());)e.lastIntValue=16*e.lastIntValue+cke(n),e.advance();return e.pos!==t};function lke(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function cke(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return fke(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function fke(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!lke(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+cke(i),e.advance()}return!0};var bQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new f4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Bs.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new bQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new bQ(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Dm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=OIe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!IS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&$Ie.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Kc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Dm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ry(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ry(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Kc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new tp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function wwt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function dke(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=dke(this.input.slice(t,this.pos)),++this.pos):Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=dke(this.input.slice(t,this.pos));return++this.pos,Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=wwt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(IS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var hke={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===hke)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw hke;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(IS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ry(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return IS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(fx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Dm:fx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ry(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=dQ[e]),this.finishToken(t,e)};var Ewt="8.11.3";Bs.acorn={Parser:Bs,version:Ewt,defaultOptions:Yz,Position:lI,SourceLocation:f4,getLineInfo:LIe,Node:h4,TokenType:or,tokTypes:K,keywordTypes:dQ,TokContext:of,tokContexts:Ti,isIdentifierChar:fx,isIdentifierStart:Dm,Token:bQ,isNewLine:IS,lineBreak:Kc,lineBreakG:G_t,nonASCIIwhitespace:$Ie};function xwt(e,t){return Bs.parse(e,t)}const _Q={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Swt={ecmaVersion:11},Sfe="$",Twt="d",Cwt="d1",Awt="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),Iwt=So("Aggregate function"),kwt=So("Window function"),Rwt="Invalid argument",wQ="Invalid column reference",Nwt=wQ+" (must be input to an aggregate function)",pke="Invalid function call",Pwt="Invalid member expression",Dwt="Invalid operator parameter",Owt="Invalid param reference",$wt="Invalid variable reference",Mwt="Variable not accessible in operator call",Lwt="Unsupported variable declaration",Fwt="Unsupported destructuring pattern",mke="Table expressions do not support closures",gke="Use aq.escape(fn) to use a function as-is (including closures)",jwt="use table.params({ name: value }) to define dynamic parameters",Bwt="use aq.addFunction(name, fn) to add new op functions",Uwt=`
Note: ${mke}. ${gke}, or ${jwt}.`,yke=`
Note: ${mke}. ${gke}, or ${Bwt}.`,zwt=`The ${yCe} method is not valid in multi-table expressions.`;function Vwt(e,t){const n=Hwt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,L_t(r)?(Wwt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Cwt),e.scope.add(e.tuple2=Awt),e.scope.add(e.$param=Sfe)):(e.scope.add(e.tuple=Twt),e.scope.add(e.$param=Sfe)),er(r,e,EQ),e.root}function Hwt(e){try{const t=e.field?qwt(e):dr(e)?kh(e):e;return xwt(`expr=(${t})`,Swt).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function qwt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const EQ={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){Jz(e.id,t)},Identifier(e,t,n){_ke(e,t,n)&&!t.scope.has(e.name)&&t.error(e,$wt,Uwt)},CallExpression(e,t){const n=vke(e.callee),r=pCe(n)||mCe(n);if(r){if((t.join||t.aggregate===!1)&&fX(n)&&Iwt(e,t),(t.join||t.window===!1)&&dX(n)&&kwt(e,t),t.$op=1,t.ast)Qz(e,n,t),e.arguments.forEach(i=>er(i,t,Xz));else{const i=t.op(Gwt(t,r,n,e.arguments));Object.assign(e,{type:lCe,name:i.id})}return t.$op=0,!1}else hCe(n)?Qz(e,n,t):t.error(e,pke,yke)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ps(T0,r))return;const{name:s}=r;if(bke(e)&&Ps(T0,i)&&Xf(_Q,i.name)){xke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Tfe(e,o,t,wke,n);if(s===t.$param)return Tfe(e,o,t,Kwt);t.paramsRef.has(s)?fI(e,t.paramsRef.get(s)):t.columnRef.has(s)?Eke(r,s,t,e):Xf(t.params,s)&&fI(r,s)}};function Tfe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ps(xS,s))a=s.value;else try{er(s,n,EQ,e),a=n.param(s)}catch{n.error(e,Pwt)}return r(e,a,t,n,i),!1}const Xz={...EQ,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){_ke(e,t,n)&&t.error(e,Mwt)},CallExpression(e,t){const n=vke(e.callee);hCe(n)?Qz(e,n,t):t.error(e,pke,yke)}};function Wwt(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(UT(t,n[0],"tuple1",i(1)),r>1&&UT(t,n[1],"tuple2",i(2)),r>2&&UT(t,n[2],"$param",s)):(UT(t,n[0],"tuple",i(0)),r>1&&UT(t,n[1],"$param",s))),t.root=e.body}function UT(e,t,n,r){Ps(T0,t)?(e.scope.add(t.name),e[n]=t.name):Ps(aCe,t)&&t.properties.forEach(i=>{const s=Ps(T0,i.key)?i.key.name:Ps(xS,i.key)?i.key.value:e.error(i,Rwt);Ps(T0,i.value)||e.error(i.value,Fwt),r(i.value.name,s)})}function Gwt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,Xz),i.push(e.field(u))):l<a?(er(u,e,Xz),s.push(e.param(u))):e.error(u,Dwt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function vke(e){return Ps(T0,e)?e.name:Ps(oCe,e)?bke(e)?Ywt(e.property.name):e.property.name:null}function bke(e){return Ps(T0,e.object)&&e.object.name==="Math"}function Ywt(e){return e==="max"?"greatest":e==="min"?"least":e}function _ke(e,t,n){const{name:r}=e;if(!(Ps(oCe,n)&&n.property===e)){if(!(Ps(uCe,n)&&n.key===e))if(t.paramsRef.has(r))fI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))Eke(e,r,t,n);else if(Xf(t.params,r))fI(e,r);else if(Xf(_Q,r))xke(e,r);else return!0}}function wke(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,wQ),r.aggronly&&!r.$op&&r.error(e,Nwt),gCe(e,t,n,o,i)}function Eke(e,t,n,r){const[i,s]=n.columnRef.get(t);wke(e,i,s,n,r)}function Kwt(e,t,n,r){r.params&&!Xf(r.params,t)&&r.error(e,Owt),fI(e,t)}function fI(e,t){e.type=Fyt,e.name=t}function xke(e,t){e.type=$yt,e.name=t,e.raw=_Q[t]}function Qz(e,t,n){if(t===yCe){const r=n.table;r||n.error(e,zwt),vCe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=tu(s)?r.columnName(s):s;return r.column(o)||n.error(i,wQ),o}):r.columnNames())}else e.callee={type:Lyt,name:t}}function Jz(e,t){Ps(T0,e)?t.scope.add(e.name):Ps(Nyt,e)?e.elements.forEach(n=>Jz(n,t)):Ps(aCe,e)?e.properties.forEach(n=>Jz(n.value,t)):t.error(e.id,Lwt)}const Xwt={[Mk]:1,[lCe]:1};function tl(e,t={}){const n=t.generate||s$,r=t.compiler||hX,i=Jwt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=Qwt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ps(xS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?M_t(g):f(n(g),i));u.push(y),Xwt[g.type]&&y!==g&&wa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);xn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of Q6(e))d.value(m+"",g.escape?B_t(d,g,i):Vwt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function Qwt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function Jwt(e){return(e.table?cB(e.table):e.join?{...cB(e.join[1]),...cB(e.join[0])}:{})||{}}function cB(e){return e&&gi(e.params)?e.params():{}}const Ske="Expr",af="ExprList",Tke="ExprNumber",j2="ExprObject",Dw="JoinKeys",I$="JoinValues",cc="Options",xQ="OrderKeys",Cg="SelectionList",W1="TableRef",Ow="TableRefList",Zwt="Descending",eEt="Query",tEt="Selection",nEt="Verb",rEt="Window";function m4(e,t){return e&&e.expr?new Cfe({...e,...t}):new Cfe(t,e)}class Cfe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...gi(this.expr)?{func:!0}:{}}}}function iEt(e){return m4(e,{desc:!0})}function eb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return m4(e,t?{expr:t,...r}:r)}function sEt(e,t,n){return m4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function oEt(e){const t=n=>n;return t.toString=()=>e,t}function Afe(e,t){return t=t&&gi(t.query)?t.query():t,t&&gi(t.evaluate)?t.evaluate(null,e):e(t)}function Cke(e){return wa(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function dI(e){return e&&gi(e.toObject)?e.toObject():gi(e)?{expr:String(e),func:!0}:dr(e)?e.map(dI):wa(e)?l4(e,t=>dI(t)):e}function SQ(e){return dr(e)?e.map(SQ):wa(e)?dr(e.verbs)?CQ.from(e):dr(e.all)?cx():dr(e.range)?N_t(...e.range):dr(e.match)?P_t(RegExp(...e.match)):dr(e.not)?RIe(e.not.map(dI)):aEt(e):e}function aEt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=eb(n):e.func===!0&&(t=n=oEt(n)),wa(e.window)){const{frame:r,peers:i}=e.window;t=n=sEt(n,r,i)}e.desc===!0&&(t=iEt(n))}return e===t?l4(e,r=>SQ(r)):t}function uEt(e){return dr(e)?e.map(lEt):e}function lEt(e){const t=[];return Ju(e).forEach(n=>{tu(n)?t.push(n):Bo(n)?t.push(eb(n,null)):wa(n)&&n.expr||gi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function cEt(e){return dr(e)?e.map(fEt):e}function fEt(e,t){return t<2?Ju(e):e}function dEt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(wa(r)&&!gi(r))for(const i in r)t.push(r[i]);else n=tu(r)?r:Bo(r)?eb(n):gi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const hEt={[Ske]:Rke,[af]:dx,[Tke]:bEt,[j2]:iy,[Dw]:_Et,[I$]:wEt,[xQ]:dx,[Cg]:yEt};function pEt(e,t,n){return t===W1?Ife(e):t===Ow?e.map(Ife):Ake(dI(e),t,n)}function Ake(e,t,n){return t===cc?e&&mEt(e,n):hEt[t](e)}function mEt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?Ake(i,t[r]):i}return n}function gEt(e,t){return tl({expr:e},{...t,ast:!0}).exprs[0]}function TQ(e){return{type:Mk,name:e}}function Ike(e){return{type:Mk,index:e}}function iy(e,t){if(Bo(e))return gEt(e,t);if(e.expr){let n;if(e.field===!0?n=TQ(e.expr):e.func===!0&&(n=iy(e.expr,t)),n)return e.desc&&(n={type:Zwt,expr:n}),e.window&&(n={type:rEt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...iy(e[n],t),as:n}))}function kke(e){const t=tEt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:dx(e.not)}:e.range?{type:t,operator:"range",arguments:dx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function yEt(e){return Ju(e).map(vEt).flat()}function vEt(e){return Cke(e)?kke(e):tu(e)?Ike(e):Bo(e)?TQ(e):wa(e)?Object.keys(e).map(t=>({type:Mk,name:t,as:e[t]})):xn("Invalid input")}function Rke(e){return Cke(e)?kke(e):tu(e)?Ike(e):Bo(e)?TQ(e):wa(e)?iy(e):xn("Invalid input")}function dx(e){return Ju(e).map(Rke).flat()}function bEt(e){return tu(e)?e:iy(e)}function _Et(e){return dr(e)?e.map(dx):iy(e,{join:!0})}function wEt(e){return dr(e)?e.map((t,n)=>n<2?dx(t):iy(t,{join:!0})):iy(e,{join:!0})}function Ife(e){return e&&gi(e.toAST)?e.toAST():e}class Nke{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Dw?uEt(a):o===I$?cEt(a):o===xQ?dEt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Zz[t.verb],r=(n.schema||[]).map(({name:i})=>SQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===W1?Afe(n,o):s===Ow?o.map(a=>Afe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=dI(this[n])}),t}toAST(){const t={type:nEt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=pEt(this[n],r,i)}),t}}function Lr(e,t){return Object.assign((...n)=>new Nke(e,t,n),{schema:t})}const Zz={count:Lr("count",[{name:"options",type:cc}]),derive:Lr("derive",[{name:"values",type:j2},{name:"options",type:cc,props:{before:Cg,after:Cg}}]),filter:Lr("filter",[{name:"criteria",type:j2}]),groupby:Lr("groupby",[{name:"keys",type:af}]),orderby:Lr("orderby",[{name:"keys",type:xQ}]),relocate:Lr("relocate",[{name:"columns",type:Cg},{name:"options",type:cc,props:{before:Cg,after:Cg}}]),rename:Lr("rename",[{name:"columns",type:Cg}]),rollup:Lr("rollup",[{name:"values",type:j2}]),sample:Lr("sample",[{name:"size",type:Tke},{name:"options",type:cc,props:{weight:Ske}}]),select:Lr("select",[{name:"columns",type:Cg}]),ungroup:Lr("ungroup"),unorder:Lr("unorder"),reify:Lr("reify"),dedupe:Lr("dedupe",[{name:"keys",type:af,default:[]}]),impute:Lr("impute",[{name:"values",type:j2},{name:"options",type:cc,props:{expand:af}}]),fold:Lr("fold",[{name:"values",type:af},{name:"options",type:cc}]),pivot:Lr("pivot",[{name:"keys",type:af},{name:"values",type:af},{name:"options",type:cc}]),spread:Lr("spread",[{name:"values",type:af},{name:"options",type:cc}]),unroll:Lr("unroll",[{name:"values",type:af},{name:"options",type:cc,props:{drop:af}}]),lookup:Lr("lookup",[{name:"table",type:W1},{name:"on",type:Dw},{name:"values",type:af}]),join:Lr("join",[{name:"table",type:W1},{name:"on",type:Dw},{name:"values",type:I$},{name:"options",type:cc}]),cross:Lr("cross",[{name:"table",type:W1},{name:"values",type:I$},{name:"options",type:cc}]),semijoin:Lr("semijoin",[{name:"table",type:W1},{name:"on",type:Dw}]),antijoin:Lr("antijoin",[{name:"table",type:W1},{name:"on",type:Dw}]),concat:Lr("concat",[{name:"tables",type:Ow}]),union:Lr("union",[{name:"tables",type:Ow}]),intersect:Lr("intersect",[{name:"tables",type:Ow}]),except:Lr("except",[{name:"tables",type:Ow}])};let CQ=class Pke extends G2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new Pke(t.map(Nke.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return kfe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return kfe(this,"toAST",{type:eEt})}};function kfe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function EEt(e,t){return new CQ(e._verbs.concat(t),e._params,e._table)}for(const e in Zz){const t=Zz[e];CQ.prototype["__"+e]=function(n,...r){return EEt(n,t(...r))}}function NS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function xEt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function AQ(e,t){const n=Zl();return t.forEach((r,i)=>{const s=Bo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Dke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Pm(e,t);const o=[...Pm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),AQ(e,u)}function qk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function IQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function SEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function TEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function uP(e){return nI(e)?e:+e}function CEt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return uP(e[0]);if(t>=1)return uP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=uP(e[i]);return nI(s)?s:s+(uP(e[i+1])-s)*(r-i)}class AEt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:SEt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:TEt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(IQ)),CEt(this._sorted,t)}}const k$=(e,t,n)=>NS(t,"{"+qk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function IEt(e,t){const{ops:n,output:r}=kEt(e,t),i=e[0].fields,s=i.length,o=s===0?kQ:s===1?REt:s===2?NEt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function kEt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=pCe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class kQ extends O_t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new AEt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class REt extends kQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=k$(n,s,"add"),this._rem=k$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Df(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Df(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class NEt extends kQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=k$(n,s,"add"),this._rem=k$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Df(i)&&Df(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Df(i)&&Df(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Zb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=PS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function PS(e,t,n){if(!t.length)return n;const r=Oke(t),i=e.groups(),s=i?i.size:1;return n=n||K6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=Mke(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=$ke(e,o);o.write(a,n,0)}),n}function Oke(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(IEt(r[i],t));return n}function $ke(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function Mke(e,t,n){const{keys:r,size:i}=n,s=K6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function Lke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function Fke(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Rfe=Fke(IQ);function PEt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?NS(["w","r","k"],"{"+qk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Rfe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Rfe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const x=i[E],S=a[E];for(let C=_;C<p.i0;++C)x.rem(S,s[C],e);for(let C=w;C<p.i1;++C)x.add(S,s[C],e);x.write(S,u,l)}return h(p,u,l),u}};return p}const DEt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),OEt=e=>!!e.peers;function $Et(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=mCe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function MEt(e,t,n,r={},i){const s=e.data(),o=LEt(i,s),a=o.length,u=NS(["r","d","op"],"{"+qk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=FEt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function LEt(e,t){const n={};return e.forEach(r=>{const i=DEt(r),s=OEt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});fX(r.name)?a.push(r):u.push($Et(r))}),Object.values(n).map(r=>PEt(t,r.frame,r.peers,r.winOps,Oke(r.aggOps,r.frame[0]!=null?-1:1)))}function FEt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function jEt(e){return dX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function RQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Zl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=BEt(r),c=e.isGrouped()?e.groups().size:1,f=PS(e,u,K6(r.length,()=>Array(c)));return l.length?MEt(e,a,n,f,l):UEt(e,a,n,f),e.create(o)}function BEt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(jEt(s)?n:t).push(s)}return[t,n]}function UEt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function zEt(e,t,n={}){const r=RQ(e,tl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Dke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function VEt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const lP=2147483648,HEt=4294967295;class jke{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&lP>>>t}set(t){this._bits[t>>5]|=lP>>>t}clear(t){this._bits[t>>5]&=~(lP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&HEt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=lP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function qEt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new jke(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function WEt(e,t){const n=tl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=RQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return qEt(e,r)}function Bke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Zb(e,r,n),l=Zl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let x=0;x<g;++x)d[x].length=m+E,d[x].fill(f[x].get(w),m,m+E)},_=p?(w,E)=>{for(let x=0;x<E;++x)p[w+x]=x}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((x,S)=>{const C=Ju(w(x,S)),A=Math.min(C.length,s);v(x,A);for(let k=0;k<A;++k)E[m+k]=C[k];_(m,A),m+=A})}else e.scan((w,E)=>{let x=0;const S=u.map(C=>{const A=Ju(C(w,E));return x=Math.min(Math.max(x,A.length),s),A});v(w,x);for(let C=0;C<y;++C){const A=h[C],k=S[C];for(let N=0;N<x;++N)A[m+N]=k[N]}_(m,x),m+=x});return e.create(l.new())}function GEt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Zb(e,r,n);return Bke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=tu(o)?t.columnName(o):o,Bo(o)?i.set(o,eb(o)):gi(o)?Pm(t,o).forEach(s):wa(o)?IIe(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Ju(n).forEach(s),r.preparse&&r.preparse(i),tl(i,{table:t,...r})}function YEt(e,t,n){return GEt(e,Jf("fold",e,t),n)}function Nfe(e,t,n,r){const i=n&&n.length;return KEt(i?XEt(e,n,r):e,t,i)}function KEt(e,{names:t,exprs:n,ops:r},i){const s=Zb(e,r,n),o=i?null:Zl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Df(p)?p:d(h)})}),i?e:e.create(o)}function XEt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=o$(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Zl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=o$(o.map((p,m)=>g=>g[m])),h=NS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Pfe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Pfe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Pfe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function NQ(e,{names:t,exprs:n,ops:r}){const i=Zl(),s=e.groups();return s&&Lke(i,s),QEt(t,n,s,PS(e,r),i),e.create(i.new())}function QEt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function JEt(e,t,n={}){if(t=tl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${kh(r)}`)),n.expand){const r={preparse:ZEt,aggronly:!0},i=Jf("impute",e,n.expand,r),s=NQ(e.ungroup(),i);return Nfe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Nfe(e,t)}function ZEt(e){e.forEach((t,n)=>t.field?e.set(n,nCe(t+"")):0)}function ext(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function Uke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function txt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function nxt(e,t){const n=["i","a","j","b"];return NS(n,"{"+qk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function rxt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Zl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=nxt(g,y);if((dr(n)?sxt:ixt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function ixt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function sxt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(x,S,C,A)=>e(C,A,x,S));const w=txt(v,m,g),E=p.length;for(let x=0;x<E;++x){const S=p[x],C=w.get(d(S,f));if(C){const A=C.length;for(let k=0;k<A;++k){const N=C[k];_(S,f,v[N],m),y[N]=1}h[x]=1}}}function R$(e,t,n){const r=new Map;Ju(n).forEach((s,o)=>{s=tu(s)?t.columnName(s):s,Bo(s)?r.set(o,eb(s)):gi(s)||wa(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=tl(r,{table:t,aggregate:!1,window:!1});return o$(i.exprs,!0)}function oxt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function PQ(e,t,n){if(n)Bo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=oxt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function zke(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[R$("join",e,n),R$("join",t,r)]}const axt={aggregate:!1,window:!1},uxt={...axt,index:1};function Dfe(e,t,n,r,i={}){n=PQ(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Ju);o=zke(e,t,a,u),r||(r=lxt(e,a,u,i))}else o=tl({on:n},s).exprs[0],r||(r=[cx(),cx()]);return rxt(e,t,o,cxt(e,t,r,s,i&&i.suffix),i)}function lxt(e,t,n,r){const i=[];t.forEach((o,a)=>Bo(o)&&o===n[a]?i.push(o):0);const s=RIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${kh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,cx()]:[cx(),s]}function cxt(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Jf("join",e,n[0],r)),u--&&(o=Jf("join",t,n[1],uxt)),u--&&(a=tl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Ofe(s.names,l,i[0]||"_1"),i[1]!==""&&Ofe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return tl(n,r)}function Ofe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function fxt(e,t,n,r={}){const i=new jke(e.totalRows());return(dr(n)?dxt:hxt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function dxt(e,t,n,[r,i]){const s=Uke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function hxt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function $fe(e,t,n,r){n=PQ(e,t,n);const i=dr(n)?zke(e,t,...n.map(Ju)):tl({on:n},{join:[e,t]}).exprs[0];return fxt(e,t,i,r)}function pxt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Zl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=Uke(t,r),c=NS(["lr","rr","data"],"{"+qk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Zb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function mxt(e,t,n,r){return n=PQ(e,t,n),pxt(e,t,[R$("lookup",e,n[0]),R$("lookup",t,n[1])],Jf("lookup",t,r))}const eV=(e,t)=>e??t;function gxt(e,t,n,r={}){const{keys:i,keyColumn:s}=yxt(e,t,r),o=eV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>PS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(vxt(n,a,e.groups(),u))}function yxt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=eV(n.sort,!0),s=eV(n.keySeparator,"_"),o=Zb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=PS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function vxt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Zl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&Lke(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function bxt(e,t,n,r){return gxt(e,Jf("fold",e,t),Jf("fold",e,n,{preparse:_xt,aggronly:!0}),r)}function _xt(e){e.forEach((t,n)=>t.field?e.set(n,Z2e(t+"")):0)}function wxt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),AQ(e,Pm(e,t,n))}function Mfe(e,t){return NQ(e,tl(t,{table:e,aggronly:!0,window:!1}))}function Ext(e,t,n,r){return(t?r?Sxt:xxt:r?Cxt:Txt)(e.length,e,n,r)}function xxt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*ES()|0];return t}function Sxt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=Fke(IQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*ES())];return t}function Txt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*ES();s<e&&(t[s|0]=n[i])}return t}function Cxt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(ES())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function Axt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=ES()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function Ixt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):Ext(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&Axt(u),e.reify(u)}function kxt(e,t,n={}){return Ixt(e,Rxt(e,t),Nxt(e,n.weight),n)}const Vke=e=>t=>e.get(t)||0;function Rxt(e,t){return tu(t)?()=>t:Vke(NQ(e,tl({size:t},{table:e,window:!1})).column("size"))}function Nxt(e,t){return t==null?null:(t=tu(t)?e.columnName(t):t,Vke(Bo(t)?e.column(t):RQ(e,tl({w:t},{table:e}),{drop:!0}).column("w")))}function Pxt(e,t){return AQ(e,Pm(e,t))}function Dxt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Zb(e,r,n),l=Zl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=Oxt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function Oxt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Ju(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function $xt(e,t,n){return Dxt(e,Jf("spread",e,t),n)}function Mxt(e,t){return e.concat(t).dedupe()}function Lxt(e,t,n){return Bke(e,Jf("unroll",e,t),n&&n.drop?{...n,drop:Jf("unroll",e,n.drop).names}:n)}function Fxt(e,t){return e.create({groups:jxt(e,t)})}function jxt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Zb(e,r,n);const o=o$(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Bxt(e,t){return Fxt(e,Jf("groupby",e,t))}function Uxt(e,t){return e.create({order:t})}const zxt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Vxt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=tl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([s$(p,{index:"a",op:o}),s$(p,{index:"b",op:a})])},window:!1}),l=PS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=zxt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Hxt(e,t){return Uxt(e,qxt(e,t))}function qxt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(wa(o)&&!gi(o))for(const a in o)i(o[a]);else i(tu(o)?eb(s,e.columnName(o)):Bo(o)?eb(s):gi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),Vxt(e,r)}function Wxt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Zl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Gxt(e,t){const n=Zl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?Mke(e,t,r):[$ke(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Yxt(e){return e.isGrouped()?e.create({groups:null}):e}function Kxt(e){return e.isOrdered()?e.create({order:null}):e}const Xxt={__antijoin:(e,t,n)=>$fe(e,t,n,{anti:!0}),__count:(e,t={})=>Mfe(e,{[t.as||"count"]:eCe()}),__cross:(e,t,n,r)=>Dfe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Wxt,__dedupe:xEt,__derive:zEt,__except:VEt,__filter:WEt,__fold:YEt,__impute:JEt,__intersect:ext,__join:Dfe,__lookup:mxt,__pivot:bxt,__relocate:Dke,__rename:wxt,__rollup:Mfe,__sample:kxt,__select:Pxt,__semijoin:$fe,__spread:$xt,__union:Mxt,__unroll:Lxt,__groupby:Bxt,__orderby:Hxt,__ungroup:Yxt,__unorder:Kxt,__reduce:Gxt};Object.assign(Vp.prototype,Xxt);function Qxt(e,t){return Vp.from(e,t)}function fB(e){return m4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}Vp.prototype;function Cf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sy(e){return!!e&&!!e[wi]}function $m(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===oSt}(e)||Array.isArray(e)||!!e[Vfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Vfe])||DQ(e)||OQ(e))}function tb(e,t,n){n===void 0&&(n=!1),DS(e)===0?(n?Object.keys:cE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function DS(e){var t=e[wi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:DQ(e)?2:OQ(e)?3:0}function lE(e,t){return DS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Jxt(e,t){return DS(e)===2?e.get(t):e[t]}function Hke(e,t,n){var r=DS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function DQ(e){return iSt&&e instanceof Map}function OQ(e){return sSt&&e instanceof Set}function $1(e){return e.o||e.t}function $Q(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Gke(e);delete t[wi];for(var n=cE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function MQ(e,t){return t===void 0&&(t=!1),LQ(e)||sy(e)||!$m(e)||(DS(e)>1&&(e.set=e.add=e.clear=e.delete=Zxt),Object.freeze(e),t&&tb(e,function(n,r){return MQ(r,!0)},!0)),e}function Zxt(){Cf(2)}function LQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function hh(e){var t=iV[e];return t||Cf(18,e),t}function eSt(e,t){iV[e]||(iV[e]=t)}function tV(){return hI}function dB(e,t){t&&(hh("Patches"),e.u=[],e.s=[],e.v=t)}function N$(e){nV(e),e.p.forEach(tSt),e.p=null}function nV(e){e===hI&&(hI=e.l)}function Lfe(e){return hI={p:[],l:hI,h:e,m:!0,_:0}}function tSt(e){var t=e[wi];t.i===0||t.i===1?t.j():t.g=!0}function hB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||hh("ES5").S(t,e,r),r?(n[wi].P&&(N$(t),Cf(4)),$m(e)&&(e=P$(t,e),t.l||D$(t,e)),t.u&&hh("Patches").M(n[wi].t,e,t.u,t.s)):e=P$(t,n,[]),N$(t),t.u&&t.v(t.u,t.s),e!==Wke?e:void 0}function P$(e,t,n){if(LQ(t))return t;var r=t[wi];if(!r)return tb(t,function(a,u){return Ffe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return D$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=$Q(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),tb(s,function(a,u){return Ffe(e,r,i,a,u,n,o)}),D$(e,i,!1),n&&e.u&&hh("Patches").N(r,n,e.u,e.s)}return r.o}function Ffe(e,t,n,r,i,s,o){if(sy(i)){var a=P$(e,i,s&&t&&t.i!==3&&!lE(t.R,r)?s.concat(r):void 0);if(Hke(n,r,a),!sy(a))return;e.m=!1}else o&&n.add(i);if($m(i)&&!LQ(i)){if(!e.h.D&&e._<1)return;P$(e,i),t&&t.A.l||D$(e,i)}}function D$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&MQ(t,n)}function pB(e,t){var n=e[wi];return(n?$1(n):e)[t]}function jfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hg(e){e.P||(e.P=!0,e.l&&Hg(e.l))}function mB(e){e.o||(e.o=$Q(e.t))}function rV(e,t,n){var r=DQ(t)?hh("MapSet").F(t,n):OQ(t)?hh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:tV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=pI;o&&(u=[a],l=B2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):hh("ES5").J(t,n);return(n?n.A:tV()).p.push(r),r}function nSt(e){return sy(e)||Cf(22,e),function t(n){if(!$m(n))return n;var r,i=n[wi],s=DS(n);if(i){if(!i.P&&(i.i<4||!hh("ES5").K(i)))return i.t;i.I=!0,r=Bfe(n,s),i.I=!1}else r=Bfe(n,s);return tb(r,function(o,a){i&&Jxt(i.t,o)===a||Hke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Bfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return $Q(e)}function rSt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[wi];return pI.get(u,s)},set:function(u){var l=this[wi];pI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][wi];if(!a.P)switch(a.i){case 5:r(a)&&Hg(a);break;case 4:n(a)&&Hg(a)}}}function n(s){for(var o=s.t,a=s.k,u=cE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==wi){var f=o[c];if(f===void 0&&!lE(o,c))return!0;var d=a[c],h=d&&d[wi];if(h?h.t!==f:!qke(d,f))return!0}}var p=!!o[wi];return u.length!==cE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};eSt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Gke(f);delete p[wi];for(var m=cE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:tV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,wi,{value:l,writable:!0}),u},S:function(s,o,a){a?sy(o)&&o[wi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[wi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)tb(d,function(_){_!==wi&&(f[_]!==void 0||lE(f,_)?h[_]||u(d[_]):(h[_]=!0,Hg(c)))}),tb(f,function(_){d[_]!==void 0||lE(d,_)||(h[_]=!1,Hg(c))});else if(p===5){if(r(c)&&(Hg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Ufe,hI,FQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",iSt=typeof Map<"u",sSt=typeof Set<"u",zfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wke=FQ?Symbol.for("immer-nothing"):((Ufe={})["immer-nothing"]=!0,Ufe),Vfe=FQ?Symbol.for("immer-draftable"):"__$immer_draftable",wi=FQ?Symbol.for("immer-state"):"__$immer_state",oSt=""+Object.prototype.constructor,cE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Gke=Object.getOwnPropertyDescriptors||function(e){var t={};return cE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},iV={},pI={get:function(e,t){if(t===wi)return e;var n=$1(e);if(!lE(n,t))return function(i,s,o){var a,u=jfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$m(r)?r:r===pB(e.t,t)?(mB(e),e.o[t]=rV(e.A.h,r,e)):r},has:function(e,t){return t in $1(e)},ownKeys:function(e){return Reflect.ownKeys($1(e))},set:function(e,t,n){var r=jfe($1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=pB($1(e),t),s=i==null?void 0:i[wi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(qke(n,i)&&(n!==void 0||lE(e.t,t)))return!0;mB(e),Hg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return pB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,mB(e),Hg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Cf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Cf(12)}},B2={};tb(pI,function(e,t){B2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),B2.deleteProperty=function(e,t){return B2.set.call(this,e,t,void 0)},B2.set=function(e,t,n){return pI.set.call(this,e[0],t,n,e[0])};var aSt=function(){function e(n){var r=this;this.O=zfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Cf(6),o!==void 0&&typeof o!="function"&&Cf(7),$m(i)){var c=Lfe(r),f=rV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?N$(c):nV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return dB(c,o),hB(m,c)},function(m){throw N$(c),m}):(dB(c,o),hB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Wke&&(l=void 0),r.D&&MQ(l,!0),o){var h=[],p=[];hh("Patches").M(i,l,h,p),o(h,p)}return l}Cf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$m(n)||Cf(8),sy(n)&&(n=nSt(n));var r=Lfe(this),i=rV(this,n,void 0);return i[wi].C=!0,nV(r),i},t.finishDraft=function(n,r){var i=n&&n[wi],s=i.A;return dB(s,r),hB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!zfe&&Cf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=hh("Patches").$;return sy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ul=new aSt,uSt=Ul.produce;Ul.produceWithPatches.bind(Ul);Ul.setAutoFreeze.bind(Ul);Ul.setUseProxies.bind(Ul);Ul.applyPatches.bind(Ul);Ul.createDraft.bind(Ul);Ul.finishDraft.bind(Ul);const Yke=uSt;function mI(e){"@babel/helpers - typeof";return mI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mI(e)}function lSt(e,t){if(mI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cSt(e){var t=lSt(e,"string");return mI(t)=="symbol"?t:t+""}function fSt(e,t,n){return(t=cSt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hfe(Object(n),!0).forEach(function(r){fSt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Wfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gB=function(){return Math.random().toString(36).substring(7).split("").join(".")},O$={INIT:"@@redux/INIT"+gB(),REPLACE:"@@redux/REPLACE"+gB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gB()}};function dSt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Kke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(Kke)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!dSt(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:O$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Wfe]=function(){return this},m}return d({type:O$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Wfe]=p,r}function hSt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:O$.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:O$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function pSt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{hSt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function $$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function mSt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=$$.apply(void 0,a)(i.dispatch),qfe(qfe({},i),{},{dispatch:s})}}}function Xke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var sV=Xke();sV.withExtraArgument=Xke;var Qke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},nb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},gSt=Object.defineProperty,ySt=Object.defineProperties,vSt=Object.getOwnPropertyDescriptors,Gfe=Object.getOwnPropertySymbols,bSt=Object.prototype.hasOwnProperty,_St=Object.prototype.propertyIsEnumerable,Yfe=function(e,t,n){return t in e?gSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C0=function(e,t){for(var n in t||(t={}))bSt.call(t,n)&&Yfe(e,n,t[n]);if(Gfe)for(var r=0,i=Gfe(t);r<i.length;r++){var n=i[r];_St.call(t,n)&&Yfe(e,n,t[n])}return e},yB=function(e,t){return ySt(e,vSt(t))},Gk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},wSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$$:$$.apply(null,arguments)};function Jke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var ESt=function(e){return e&&typeof e.match=="function"};function ph(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return C0(C0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function xSt(e){return Jke(e)&&"type"in e}var SSt=function(e){Qke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nb([void 0],n[0].concat(this)))):new(t.bind.apply(t,nb([void 0],n.concat(this))))},t}(Array),TSt=function(e){Qke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nb([void 0],n[0].concat(this)))):new(t.bind.apply(t,nb([void 0],n.concat(this))))},t}(Array);function oV(e){return $m(e)?Yke(e,function(){}):e}function CSt(e){return typeof e=="boolean"}function ASt(){return function(t){return ISt(t)}}function ISt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new SSt;return n&&(CSt(n)?r.push(sV):r.push(sV.withExtraArgument(n.extraArgument))),r}var kSt=!0;function RSt(e){var t=ASt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Jke(i))h=pSt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=mSt.apply(void 0,p),g=$$;u&&(g=wSt(C0({trace:!kSt},typeof u=="object"&&u)));var y=new TSt(m),v=y;Array.isArray(d)?v=nb([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return Kke(h,c,_)}function Zke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function NSt(e){return typeof e=="function"}function PSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Zke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(NSt(e))u=function(){return oV(e())};else{var l=oV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=nb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(sy(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if($m(p))return Yke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function DSt(e,t){return e+"/"+t}function OSt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:oV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=DSt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?ph(d,p):ph(d)});function u(){var c=typeof e.extraReducers=="function"?Zke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=C0(C0({},d),o);return PSt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var x=E[w];v.addMatcher(x.matcher,x.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var $St="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eRe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=$St[Math.random()*64|0];return t},MSt=["name","message","stack","code"],vB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Kfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),LSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=MSt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=ph(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:yB(C0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=ph(t+"/pending",function(l,c,f){return{payload:void 0,meta:yB(C0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=ph(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||LSt)(l||"Rejected"),meta:yB(C0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):eRe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return Gk(this,null,function(){var v,_,w,E,x,S,C;return Wk(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),jSt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([x,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new vB(k,N)},fulfillWithValue:function(k,N){return new Kfe(k,N)}})).then(function(k){if(k instanceof vB)throw k;return k instanceof Kfe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return S=A.sent(),w=S instanceof vB?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(FSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function FSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function jSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var BSt=function(e,t){return ESt(e)?e.match(t):e(t)};function Xfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return BSt(r,n)})}}var jQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},aV=function(){},tRe=function(e,t){return t===void 0&&(t=aV),e.catch(t),e},nRe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},fE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},USt="task",rRe="listener",iRe="completed",BQ="cancelled",zSt="task-"+BQ,VSt="task-"+iRe,sRe=rRe+"-"+BQ,HSt=rRe+"-"+iRe,g4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=USt+" "+BQ+" (reason: "+t+")"}return e}(),dE=function(e){if(e.aborted)throw new g4(e.reason)};function oRe(e,t){var n=aV;return new Promise(function(r,i){var s=function(){return i(new g4(e.reason))};if(e.aborted){s();return}n=nRe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=aV})}var qSt=function(e,t){return Gk(void 0,null,function(){var n,r;return Wk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof g4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},M$=function(e){return function(t){return tRe(oRe(e,t).then(function(n){return dE(e),n}))}},aRe=function(e){var t=M$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},WSt=Object.assign,Qfe={},Yk="listenerMiddleware",GSt=function(e,t){var n=function(r){return nRe(e,function(){return fE(r,e.reason)})};return function(r,i){jQ(r,"taskExecutor");var s=new AbortController;n(s);var o=qSt(function(){return Gk(void 0,null,function(){var a;return Wk(this,function(u){switch(u.label){case 0:return dE(e),dE(s.signal),[4,r({pause:M$(s.signal),delay:aRe(s.signal),signal:s.signal})];case 1:return a=u.sent(),dE(s.signal),[2,a]}})})},function(){return fE(s,VSt)});return i!=null&&i.autoJoin&&t.push(o),{result:M$(e)(o),cancel:function(){fE(s,zSt)}}}},YSt=function(e,t){var n=function(r,i){return Gk(void 0,null,function(){var s,o,a,u;return Wk(this,function(l){switch(l.label){case 0:dE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,oRe(t,Promise.race(a))];case 2:return u=l.sent(),dE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return tRe(n(r,i))}},uRe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=ph(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return jQ(s,"options.listener"),{predicate:i,type:t,effect:s}},KSt=function(e){var t=uRe(e),n=t.type,r=t.predicate,i=t.effect,s=eRe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},uV=function(e){e.pending.forEach(function(t){fE(t,sRe)})},XSt=function(e){return function(){e.forEach(uV),e.clear()}},Jfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},QSt=ph(Yk+"/add"),JSt=ph(Yk+"/removeAll"),ZSt=ph(Yk+"/remove"),eTt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,nb([Yk+"/error"],e))};function tTt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?eTt:i;jQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&uV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=KSt(h)),o(p)},l=function(h){var p=uRe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&uV(v)),!!v},c=function(h,p,m,g){return Gk(t,null,function(){var y,v,_,w;return Wk(this,function(E){switch(E.label){case 0:y=new AbortController,v=YSt(u,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,WSt({},m,{getOriginalState:g,condition:function(x,S){return v(x,S).then(Boolean)},take:v,delay:aRe(y.signal),pause:M$(y.signal),extra:r,signal:y.signal,fork:GSt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,S,C){x!==y&&(fE(x,sRe),C.delete(x))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof g4||Jfe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),fE(y,HSt),h.pending.delete(y),[7];case 6:return[2]}})})},f=XSt(n),d=function(h){return function(p){return function(m){if(!xSt(m))return p(m);if(QSt.match(m))return u(m.payload);if(JSt.match(m)){f();return}if(ZSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Qfe)throw new Error(Yk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,x=w;E<x.length;E++){var S=x[E],C=!1;try{C=S.predicate(m,_,g)}catch(A){C=!1,Jfe(s,A,{raisedBy:"predicate"})}C&&c(S,m,h,y)}}finally{g=Qfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Zfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);rSt();function nTt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let cP;const rTt=new Uint8Array(16);function iTt(){if(!cP&&(cP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cP(rTt)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function sTt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const oTt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ede={randomUUID:oTt};function tde(e,t,n){if(ede.randomUUID&&!t&&!e)return ede.randomUUID();e=e||{};const r=e.random||(e.rng||iTt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sTt(r)}class mh{static get(){let t=tde();for(;this.ids.has(t);)t=tde();return this.ids.set(t,!0),t}}mh.ids=new Map;function gh(e){return"parent"in e}function aTt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:mh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:mh.get(),createdOn:Date.now(),val:r}]:[];return{id:mh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function uTt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:mh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:mh.get(),createdOn:Date.now(),val:s}]:[];return{id:mh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=yTt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function rb(e){return!!e&&!!e[zl]}function oy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===vTt}(e)||Array.isArray(e)||!!e[LC]||!!(!((t=e.constructor)===null||t===void 0)&&t[LC])||y4(e)||v4(e))}function hx(e,t,n){n===void 0&&(n=!1),ay(e)===0?(n?Object.keys:WQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ay(e){var t=e[zl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:y4(e)?2:v4(e)?3:0}function gI(e,t){return ay(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MD(e,t){return ay(e)===2?e.get(t):e[t]}function lRe(e,t,n){var r=ay(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function lTt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function y4(e){return mTt&&e instanceof Map}function v4(e){return gTt&&e instanceof Set}function M1(e){return e.o||e.t}function UQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=bTt(e);delete t[zl];for(var n=WQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function zQ(e,t){return t===void 0&&(t=!1),VQ(e)||rb(e)||!oy(e)||(ay(e)>1&&(e.set=e.add=e.clear=e.delete=cTt),Object.freeze(e),t&&hx(e,function(n,r){return zQ(r,!0)},!0)),e}function cTt(){qi(2)}function VQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function yh(e){var t=dV[e];return t||qi(18,e),t}function fTt(e,t){dV[e]||(dV[e]=t)}function nde(){return{}.NODE_ENV==="production"||px||qi(0),px}function bB(e,t){t&&(yh("Patches"),e.u=[],e.s=[],e.v=t)}function L$(e){lV(e),e.p.forEach(dTt),e.p=null}function lV(e){e===px&&(px=e.l)}function rde(e){return px={p:[],l:px,h:e,m:!0,_:0}}function dTt(e){var t=e[zl];t.i===0||t.i===1?t.j():t.O=!0}function _B(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||yh("ES5").S(t,e,r),r?(n[zl].P&&(L$(t),qi(4)),oy(e)&&(e=F$(t,e),t.l||j$(t,e)),t.u&&yh("Patches").M(n[zl].t,e,t.u,t.s)):e=F$(t,n,[]),L$(t),t.u&&t.v(t.u,t.s),e!==qQ?e:void 0}function F$(e,t,n){if(VQ(t))return t;var r=t[zl];if(!r)return hx(t,function(s,o){return ide(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return j$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=UQ(r.k):r.o;hx(r.i===3?new Set(i):i,function(s,o){return ide(e,r,i,s,o,n)}),j$(e,i,!1),n&&e.u&&yh("Patches").R(r,n,e.u,e.s)}return r.o}function ide(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&qi(5),rb(i)){var o=F$(e,i,s&&t&&t.i!==3&&!gI(t.D,r)?s.concat(r):void 0);if(lRe(n,r,o),!rb(o))return;e.m=!1}if(oy(i)&&!VQ(i)){if(!e.h.F&&e._<1)return;F$(e,i),t&&t.A.l||j$(e,i)}}function j$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&zQ(t,n)}function wB(e,t){var n=e[zl];return(n?M1(n):e)[t]}function sde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function cV(e){e.P||(e.P=!0,e.l&&cV(e.l))}function EB(e){e.o||(e.o=UQ(e.t))}function fV(e,t,n){var r=y4(t)?yh("MapSet").N(t,n):v4(t)?yh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:nde(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=hV;o&&(u=[a],l=U2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):yh("ES5").J(t,n);return(n?n.A:nde()).p.push(r),r}function hTt(e){return rb(e)||qi(22,e),function t(n){if(!oy(n))return n;var r,i=n[zl],s=ay(n);if(i){if(!i.P&&(i.i<4||!yh("ES5").K(i)))return i.t;i.I=!0,r=ode(n,s),i.I=!1}else r=ode(n,s);return hx(r,function(o,a){i&&MD(i.t,o)===a||lRe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ode(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return UQ(e)}function pTt(){function e(r){if(!oy(r))return r;if(Array.isArray(r))return r.map(e);if(y4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(v4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return gI(r,LC)&&(i[LC]=r[LC]),i}function t(r){return rb(r)?e(r):r}var n="add";fTt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ay(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||qi(24),typeof u=="function"&&f==="prototype"&&qi(24),typeof(u=MD(u,f))!="object"&&qi(15,o.join("/"))}var d=ay(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;hx(a.D,function(h,p){var m=MD(f,h),g=MD(d,h),y=p?gI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===qQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var ade,px,HQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mTt=typeof Map<"u",gTt=typeof Set<"u",ude=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qQ=HQ?Symbol.for("immer-nothing"):((ade={})["immer-nothing"]=!0,ade),LC=HQ?Symbol.for("immer-draftable"):"__$immer_draftable",zl=HQ?Symbol.for("immer-state"):"__$immer_state",yTt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},vTt=""+Object.prototype.constructor,WQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,bTt=Object.getOwnPropertyDescriptors||function(e){var t={};return WQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},dV={},hV={get:function(e,t){if(t===zl)return e;var n=M1(e);if(!gI(n,t))return function(i,s,o){var a,u=sde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!oy(r)?r:r===wB(e.t,t)?(EB(e),e.o[t]=fV(e.A.h,r,e)):r},has:function(e,t){return t in M1(e)},ownKeys:function(e){return Reflect.ownKeys(M1(e))},set:function(e,t,n){var r=sde(M1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=wB(M1(e),t),s=i==null?void 0:i[zl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(lTt(n,i)&&(n!==void 0||gI(e.t,t)))return!0;EB(e),cV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return wB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,EB(e),cV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=M1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qi(12)}},U2={};hx(hV,function(e,t){U2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),U2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&qi(13),U2.set.call(this,e,t,void 0)},U2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&qi(14),hV.set.call(this,e[0],t,n,e[0])};var _Tt=function(){function e(n){var r=this;this.g=ude,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&qi(6),o!==void 0&&typeof o!="function"&&qi(7),oy(i)){var c=rde(r),f=fV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?L$(c):lV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return bB(c,o),_B(m,c)},function(m){throw L$(c),m}):(bB(c,o),_B(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===qQ&&(l=void 0),r.F&&zQ(l,!0),o){var h=[],p=[];yh("Patches").M(i,l,h,p),o(h,p)}return l}qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){oy(n)||qi(8),rb(n)&&(n=hTt(n));var r=rde(this),i=fV(this,n,void 0);return i[zl].C=!0,lV(r),i},t.finishDraft=function(n,r){var i=n&&n[zl];({}).NODE_ENV!=="production"&&(i&&i.C||qi(9),i.I&&qi(10));var s=i.A;return bB(s,r),_B(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ude&&qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yh("Patches").$;return rb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vl=new _Tt,wTt=Vl.produce;Vl.produceWithPatches.bind(Vl);Vl.setAutoFreeze.bind(Vl);Vl.setUseProxies.bind(Vl);Vl.applyPatches.bind(Vl);Vl.createDraft.bind(Vl);Vl.finishDraft.bind(Vl);function ETt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=aTt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return OSt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:mh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:mh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function xTt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=ETt(e),s=tTt();s.startListening({matcher:Xfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Xfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=RSt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:mh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var STt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TTt=Object.prototype.hasOwnProperty;function pV(e,t){return TTt.call(e,t)}function mV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)pV(e,i)&&r.push(i);return r}function Lu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function L1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function cRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function yV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(yV(e[t]))return!0}else if(typeof e=="object"){for(var r=mV(e),i=r.length,s=0;s<i;s++)if(yV(e[r[s]]))return!0}}return!1}function lde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var fRe=function(e){STt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,lde(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=lde(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=fRe,CTt=Lu,$w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=B$(n,this.path);r&&(r=Lu(r));var i=Iv(n,{op:"remove",path:this.from}).removed;return Iv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=B$(n,this.from);return Iv(n,{op:"add",path:this.path,value:Lu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:yI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ATt={add:function(e,t,n){return gV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:$w.move,copy:$w.copy,test:$w.test,_get:$w._get};function B$(e,t){if(t=="")return e;var n={op:"_get",path:t};return Iv(e,n),n.value}function Iv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):U$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=B$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=yI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Lu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=U$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=cRe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!gV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);gV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ATt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=$w[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function b4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Lu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Iv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ITt(e,t,n){var r=Iv(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function U$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if($w[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&yV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=dRe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function dRe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)b4(Lu(t),Lu(e),n||!0);else{n=n||U$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function yI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!yI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!yI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const kTt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:yI,applyOperation:Iv,applyPatch:b4,applyReducer:ITt,deepClone:CTt,getValueByPointer:B$,validate:dRe,validator:U$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var GQ=new WeakMap,RTt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),NTt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function PTt(e){return GQ.get(e)}function DTt(e,t){return e.observers.get(t)}function OTt(e,t){e.observers.delete(t.callback)}function $Tt(e,t){t.unobserve()}function MTt(e,t){var n=[],r,i=PTt(e);if(!i)i=new RTt(e),GQ.set(e,i);else{var s=DTt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Lu(e),t){r.callback=t,r.next=null;var o=function(){vV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){vV(r),clearTimeout(r.next),OTt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new NTt(t,r)),r}function vV(e,t){t===void 0&&(t=!1);var n=GQ.get(e.object);YQ(n.value,e.object,e.patches,"",t),e.patches.length&&b4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function YQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=mV(t),o=mV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(pV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?YQ(c,f,n,r+"/"+L1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+L1(l),value:Lu(c)}),n.push({op:"replace",path:r+"/"+L1(l),value:Lu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+L1(l),value:Lu(c)}),n.push({op:"remove",path:r+"/"+L1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!pV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+L1(l),value:Lu(t[l])})}}}function hRe(e,t,n){n===void 0&&(n=!1);var r=[];return YQ(e,t,r,"",n),r}const LTt=Object.freeze(Object.defineProperty({__proto__:null,compare:hRe,generate:vV,observe:MTt,unobserve:$Tt},Symbol.toStringTag,{value:"Module"}));Object.assign({},kTt,LTt,{JsonPatchError:fRe,deepClone:Lu,escapePathComponent:L1,unescapePathComponent:cRe});var z2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(z2||{});function LD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=pRe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=LD(i,t);return b4(a,Lu(o),!0,!1).newDocument}function FTt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function KQ({registry:e,initialState:t}){let n=!1;const r=nTt(),i=xTt(t);function s(c){return i.backend.nodes[c]}r.listen(z2.TRAVERSAL_START,()=>{n=!0}),r.listen(z2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return LD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=LD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=hRe(y,f);if(FTt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=uTt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=LD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(z2.TRAVERSAL_START);const f=pRe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);BTt(p,m)?gh(p)&&d.push(...p.sideEffects.undo):gh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(z2.TRAVERSAL_END)},undo(){const{current:c}=i;return gh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return mRe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function jTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;gh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)gh(r)&&(r=n[r.parent]),gh(i)&&(i=n[i.parent]);return r.id}function pRe(e,t,n){const r=jTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),gh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),gh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function BTt(e,t){if(gh(e)&&e.parent===t.id)return!0;if(gh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function mRe(e,t){return{...e,children:e.children.map(n=>mRe(t[n],t)),name:`${e.label}`}}pTt();function UTt(e){return e.length===2?wTt(e):e}class Kk{static create(){return new Kk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:UTt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),ph(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var zTt="Expected a function",cde=NaN,VTt="[object Symbol]",HTt=/^\s+|\s+$/g,qTt=/^[-+]0x[0-9a-f]+$/i,WTt=/^0b[01]+$/i,GTt=/^0o[0-7]+$/i,YTt=parseInt,KTt=typeof to=="object"&&to&&to.Object===Object&&to,XTt=typeof self=="object"&&self&&self.Object===Object&&self,QTt=KTt||XTt||Function("return this")(),JTt=Object.prototype,ZTt=JTt.toString,e2t=Math.max,t2t=Math.min,xB=function(){return QTt.Date.now()};function n2t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(zTt);t=fde(t)||0,bV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?e2t(fde(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(x){var S=r,C=i;return r=i=void 0,l=x,o=e.apply(C,S),o}function p(x){return l=x,a=setTimeout(y,t),c?h(x):o}function m(x){var S=x-u,C=x-l,A=t-S;return f?t2t(A,s-C):A}function g(x){var S=x-u,C=x-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var x=xB();if(g(x))return v(x);a=setTimeout(y,m(x))}function v(x){return a=void 0,d&&r?h(x):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(xB())}function E(){var x=xB(),S=g(x);if(r=arguments,i=this,u=x,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=w,E}function bV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function r2t(e){return!!e&&typeof e=="object"}function i2t(e){return typeof e=="symbol"||r2t(e)&&ZTt.call(e)==VTt}function fde(e){if(typeof e=="number")return e;if(i2t(e))return cde;if(bV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(HTt,"");var n=WTt.test(e);return n||GTt.test(e)?YTt(e.slice(2),n?2:8):qTt.test(e)?cde:+e}var s2t=n2t;const df=Kl(s2t);function gRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Dc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const o2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:gRe},Symbol.toStringTag,{value:"Module"})),SB=15;function yRe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=rs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<SB&&Math.abs(t(g[r.y])-p[1])<SB);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),b.jsx("circle",{style:{cursor:l?"pointer":"default"},r:SB,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const a2t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:yRe},Symbol.toStringTag,{value:"Module"})),yi={top:15,left:100,right:15,bottom:70};function _V({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Sv(),[c]=Sv(),[f]=Sv(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-yi.left-yi.right,[l]),m=I.useMemo(()=>u-yi.top-yi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return Yb(k2e).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,O]=B7(k),D=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=B7(D);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=_-y;return p<=0?null:i.dataType==="date"?tI([yi.left,p+yi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Kf([yi.left,p+yi.left]).domain([y-k/10,_+k/10]).nice()},[i.dataType,p,_,y]),x=I.useMemo(()=>{const k=w-v;return m<=0?null:Kf([m+yi.top,yi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=I.useMemo(()=>{if(!E||!x)return()=>null;if(r==="Axis Selection"){const k=idt().extent([[yi.left,yi.top+m-5],[yi.left+p,yi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,x,O.mode)}),N=sdt().extent([[yi.left-5,yi.top],[yi.left+5,yi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,x,O.mode)});return c.current&&f.current&&(rs(f.current).call(N),rs(c.current).call(k),t.hasBrush||(rs(f.current).call(N.move,[x(w),x(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"drag"))),()=>{rs(f.current).call(N.move,[x(w),x(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),x(w)],[E(new Date("2015-12-31")),x(v)]],E,x,"clear")}}if(r==="Rectangular Selection"){const k=odt().extent([[yi.left,yi.top],[yi.left+p,yi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,x,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(rs(a.current).call(k.move,null),e(null))});return rs(a.current).call(k),()=>{rs(a.current).call(k.move,null),n([[null,null],[null,null]],E,x,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),x(w)],[E(_),x(v)]],E,x,null),()=>n([[E(y),x(w)],[E(_),x(v)]],E,x,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),x(w)],[E(_),x(v)]],E,x,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,E,w,v,x]),C=I.useMemo(()=>o.length===0?null:new Set(o),[o]),A=I.useMemo(()=>!E||!x?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return b.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:x(k[i.y])},N)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,x]);return I.useEffect(()=>{r==="Axis Selection"&&Xlt(".handle").style("fill","darkgrey")},[t,r]),b.jsxs(Nf,{children:[b.jsxs(ls,{children:[b.jsx(fn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?b.jsx(bY,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),b.jsxs(ls,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&x?b.jsxs("g",{children:[b.jsx(gRe,{yScale:x,label:i.y,horizontalPosition:yi.left,xRange:E.range()}),b.jsx(uX,{xScale:E,yRange:x.range(),isDate:i.dataType==="date",vertPosition:m+yi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,A,b.jsx("g",{id:"brushXRef",ref:c}),b.jsx("g",{id:"brushYRef",ref:f}),E&&x&&r==="Paintbrush Selection"?b.jsx(yRe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:x}):null]}),r==="Slider Selection"&&E&&x?b.jsxs(Nf,{style:{flexGrow:1},gap:50,children:[b.jsxs(Nf,{gap:0,children:[b.jsx(Xe,{children:i.x}),b.jsx($A,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,x,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),b.jsxs(Nf,{gap:0,children:[b.jsx(Xe,{children:i.y}),b.jsx($A,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],onChange:k=>{n([[t.x1,x(k[1])],[t.x2,x(k[0])]],E,x,"drag")},style:{width:"300px"},marks:x.ticks(5).map(k=>({value:k,label:k})),value:[x.invert(t.y2),x.invert(t.y1)]})]})]}):null]})]})}const u2t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:_V,default:_V},Symbol.toStringTag,{value:"Module"}));function dde({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{DK(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?Qxt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=Kk.create(),y=g.register("brush",(x,S)=>(x.all={brush:S},x)),v=g.register("brushMove",(x,S)=>(x.all={brush:S},x)),_=g.register("brushResize",(x,S)=>(x.all={brush:S},x)),w=g.register("brushClear",(x,S)=>(x.all={brush:S},x)),E=KQ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>df(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,_,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),x=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(_==="clear")A=u;else if(w){const N=new Set(w);A=u.filter(fB(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(fB(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(x)&&N[e.y]>=S&&N[e.y]<=C)):A=u.filter(fB(N=>N[e.x]>=E&&N[e.x]<=x&&N[e.y]>=S&&N[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?A==null?void 0:A.array("id"):[]};s(k),_==="drag"||_==="handle"?d(_,k):_==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?b.jsxs(Nf,{gap:"xs",children:[b.jsx(_V,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),b.jsx(Nz,{data:o,parameters:e,barsTable:p})]}):b.jsx(od,{})}const l2t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:dde,default:dde},Symbol.toStringTag,{value:"Module"})),c2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),hde=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},OS=e=>{const t=I.useRef(null),n=hde(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=hde({...n,width:n.width||r,height:n.height||s});return[t,a]},f2t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:OS},Symbol.toStringTag,{value:"Module"}));function vRe({data:e,xScale:t,yScale:n,height:r}){return b.jsx("g",{children:e.map((i,s)=>b.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const d2t=Object.freeze(Object.defineProperty({__proto__:null,Bars:vRe},Symbol.toStringTag,{value:"Module"}));function XQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Kf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(0,${a})`,children:[b.jsx("line",{x2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const h2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:XQ},Symbol.toStringTag,{value:"Module"}));function bRe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=bS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsx("g",{transform:`translate(${a}, 10)`,children:b.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const p2t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:bRe},Symbol.toStringTag,{value:"Module"})),m2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function g2t({parameters:e}){const[n,r]=OS(m2t),i=bS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Kf().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(bRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(XQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(vRe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const y2t=Object.freeze(Object.defineProperty({__proto__:null,default:g2t},Symbol.toStringTag,{value:"Module"}));function _Re({data:e}){return b.jsx("g",{children:e.map(({bubble:t},n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const v2t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:_Re},Symbol.toStringTag,{value:"Module"}));function QQ({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const b2t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:QQ},Symbol.toStringTag,{value:"Module"})),_2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},w2t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=n2e().size([t-10,n-10]).padding(1.5),o=M6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},E2t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function x2t({parameters:e}){const[t,n]=OS(_2t),r=w2t(e,n.width,n.height),i=E2t(r,e.selectedIndices);return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[b.jsx(_Re,{data:r}),b.jsx(QQ,{positions:i})]})})})}const S2t=Object.freeze(Object.defineProperty({__proto__:null,default:x2t},Symbol.toStringTag,{value:"Module"}));function wRe({arcs:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const T2t=Object.freeze(Object.defineProperty({__proto__:null,Slices:wRe},Symbol.toStringTag,{value:"Module"}));function ERe({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("g",{transform:`translate(${t.centroid()})`,children:b.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const C2t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:ERe},Symbol.toStringTag,{value:"Module"})),A2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},I2t=O2e().value(e=>e.value),zT=150;function k2t({parameters:e}){const[t,n]=OS(A2t),r=I2t(e.data),i=r.map(o=>e$().innerRadius(0).outerRadius(zT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>e$().outerRadius(zT+10).innerRadius(zT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft+zT,n.marginTop+zT].join(",")})`,children:[b.jsx(wRe,{arcs:i}),b.jsx(ERe,{positions:s})]})})})}const R2t=Object.freeze(Object.defineProperty({__proto__:null,default:k2t},Symbol.toStringTag,{value:"Module"}));function xRe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Kf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(${a}, 0)`,children:[b.jsx("line",{y2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const N2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:xRe},Symbol.toStringTag,{value:"Module"}));function SRe({data:e,barWidth:t,yScale:n}){return b.jsx("g",{children:e.map((r,i)=>b.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const P2t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:SRe},Symbol.toStringTag,{value:"Module"})),D2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function O2t({parameters:e}){const[n,r]=OS(D2t),i=bS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Kf().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,w)=>Number(_)+Number(w))/100,y={};p.forEach((_,w)=>{y[String.fromCharCode(w+65)]=_/g});const v=[y];return q0t().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(xRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:"translate(0, 0)",children:b.jsx(XQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsxs("g",{transform:"translate(0, 0)",children:[b.jsx(SRe,{data:c,barWidth:f,yScale:s}),b.jsx(QQ,{positions:d})]})]})})})}const $2t=Object.freeze(Object.defineProperty({__proto__:null,default:O2t},Symbol.toStringTag,{value:"Module"})),M2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function L2t({parameters:e,setAnswer:t}){const[n,r]=OS(M2t),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=Kk.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=KQ({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=rs("#movingCircle"),g=rs("#clickAccuracySvg"),y=G7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;rs(n.current).select("circle").transition().duration(y).ease(Hft).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:b.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[b.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),b.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),b.jsxs(pe,{children:["Adjust speed (px/s):",b.jsx(a6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const F2t=Object.freeze(Object.defineProperty({__proto__:null,default:L2t},Symbol.toStringTag,{value:"Module"}));function pde({rankings:e}){return b.jsx("div",{style:{fontFamily:"sans-serif"},children:b.jsx("div",{children:e.map((t,n)=>b.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function j2t({parameters:e,setAnswer:t}){const n=Ly(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=Gxe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=QUe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),b.jsxs("div",{children:[b.jsxs(Ha,{children:[b.jsxs(Ha.Col,{span:2,children:[b.jsx(pde,{rankings:a==="r1"?e.data.r1:e.data.r2}),b.jsx(fn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?b.jsx(xae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),b.jsxs(Ha.Col,{span:2,children:[b.jsx(pde,{rankings:a==="r1"?e.data.r2:e.data.r1}),b.jsx(fn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?b.jsx(xae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&b.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const B2t=Object.freeze(Object.defineProperty({__proto__:null,default:j2t},Symbol.toStringTag,{value:"Module"})),U2t={Public:"#1f77b4",Private:"#ff7f0e",Foreign:"#2ca02c",Other:"#d62728",Proprietary:"#9467bd"};function mde({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i,s]=I.useState(null);return I.useEffect(()=>{DK(`./data/${r}.csv`).then(o=>{if(o.length===0){console.warn("Empty data received for",r);return}n(o)})},[r]),I.useEffect(()=>{if(t){const o=rs(i);o.selectAll("*").remove();const a={top:20,right:30,bottom:60,left:60},u=800-a.left-a.right,l=400-a.top-a.bottom,c=o.append("g").attr("transform",`translate(${a.left},${a.top})`),f=bS().domain(t.map(h=>h[e.y])).range([0,u]).padding(.1),d=Kf().domain([0,ch(t,h=>+h[e.x])||0]).nice().range([l,0]);c.append("g").attr("transform",`translate(0,${l})`).call(hut(f).tickSize(5)),c.append("g").call(put(d)),c.append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",-a.left+15).attr("x",-(l/2)).attr("text-anchor","middle").attr("font-size","12px").text(`${e.x} (Billion USD)`),c.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",h=>f(h[e.y])||0).attr("y",h=>d(+h[e.x])).attr("width",f.bandwidth()).attr("height",h=>l-d(+h[e.x])).attr("fill",h=>U2t[h[e.y]]||"#ccc")}},[t,i,e]),b.jsxs(Nf,{children:[b.jsxs($b,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[b.jsx(ui,{order:3,children:"Debt by School Type"}),b.jsx("svg",{ref:s,width:800,height:400})]}),t===null&&b.jsx(od,{})]})}const z2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:mde,default:mde},Symbol.toStringTag,{value:"Module"})),V2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},j_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},TRe=[vo.DustyCoral,j_.LightTealDarker,j_.DarkOrangeDarker,vo.Purple,vo.DarkOliveGreen,vo.Blue,vo.Maroon,j_.CamelDarker,vo.MidnightBlue,vo.DarkCopper,j_.PeachDarker,vo.Mauve,j_.TurquoiseDarker,vo.OliveGreen,vo.Cherry,vo.Teal,vo.RustyOrange,vo.Denim,vo.TealishGreen,vo.Copper,vo.DarkMauve,j_.LimeDarker,vo.Coral],H2t=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:TRe},Symbol.toStringTag,{value:"Module"}));function wV({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=I.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=u=>{const l=Jb("%b %e, %Y");return i?l(u).toString():jy(".2s")(parseFloat(String(u)))};return b.jsxs(b.Fragment,{children:[s&&b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),r.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${l}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),s&&b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}),b.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:b.jsx(Dc,{children:b.jsx(ai,{withinPortal:!0,label:String(u),children:b.jsxs(Xe,{px:2,size:"xs",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[a(i?new Date(u):u)," "]})})})})]},`${u}tick`))]})}const q2t=Object.freeze(Object.defineProperty({__proto__:null,XAxis:wV,default:wV},Symbol.toStringTag,{value:"Module"}));function CRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Dc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const W2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:CRe},Symbol.toStringTag,{value:"Module"})),ea={top:30,left:100,right:110,bottom:80};function EV({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const a=I.useMemo(()=>{const v=r.filter(_=>i==null?void 0:i.includes(_.name)).map(_=>_.group);return r.filter(_=>v.includes(_.group)&&!(i!=null&&i.includes(_.name))).map(_=>_.name)},[i,r]),u=I.useMemo(()=>{const v=r.map(E=>E.group),_=t.filter(E=>v.includes(String(E[e.group_var]))),w=Xat(_,E=>({mean:aSe(E,x=>+x[e.y_var]),upperq:VA(E,.75,x=>+x[e.y_var]),lowerq:VA(E,.25,x=>+x[e.y_var])}),E=>E[e.x_var]);return Array.from(w,([E,x])=>({date:E,mean:x.mean,upperq:x.upperq,lowerq:x.lowerq}))},[t,e,r]),l=n==="clean_data"?800-ea.left-ea.right-60:800-ea.left-ea.right,c=400-ea.top-ea.bottom,{yMin:f,yMax:d}=I.useMemo(()=>{let v=[];switch(o){case"super_data":v=(i==null?void 0:i.concat(a))??[];break;default:v=i??[];break}const _=t.filter(C=>v.includes(String(C[e.cat_var]))).map(C=>+C[e.y_var]).filter(C=>C!==null),[w,E]=B7(_),x=g3(u,C=>C.lowerq)??w,S=ch(u,C=>C.upperq)??E;return{yMin:o==="super_summ"?Math.min(w,x):w,yMax:o==="super_summ"?Math.max(E,S):E}},[t,i,o,u,a,e]),h=I.useMemo(()=>s?tI().range([ea.left,l+ea.left]).domain(s):tI().range([ea.left,l+ea.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[l,s,e]),p=I.useMemo(()=>Kf().range([c+ea.top,ea.top]).domain([f,d]).nice(),[c,d,f]),m=I.useMemo(()=>{const v=Array.from(new Set(t.map(_=>String(_[e.cat_var]))));return Yb(TRe).domain(v)},[t,e]),g=I.useMemo(()=>{if(!h||!p)return[];const v=rX().x(_=>h(QK("%Y-%m-%d")(String(_[e.x_var])))).y(_=>p(+_[e.y_var])).curve($2e);return i==null?void 0:i.map(_=>({GroupOne:_,path:v(t.filter(w=>w[e.cat_var]===_))}))},[t,h,p,i,e]),y=I.useMemo(()=>h.ticks(6).map(v=>({value:Jb("%b %e, %Y")(v),offset:h(v)})),[h]);return(i==null?void 0:i.length)===0?b.jsx(Dc,{style:{width:"800px",height:"400px"},children:b.jsx(Xe,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):b.jsxs("svg",{style:{height:"400px",width:"800px"},children:[b.jsxs("g",{id:"axes",children:[b.jsx(wV,{isDate:!0,xScale:h,yRange:p.range(),vertPosition:c+ea.top,ticks:y}),b.jsx(CRe,{label:"loan balance",yScale:p,horizontalPosition:ea.left,xRange:h.range()})]}),g==null?void 0:g.map(v=>b.jsx("g",{children:b.jsx("path",{id:`${v.GroupOne}`,fill:"none",stroke:m(v.GroupOne),strokeWidth:2,d:v.path})},`${v.GroupOne}_g`)),b.jsx("g",{transform:`translate(${l+ea.left+20}, ${ea.top})`,children:Array.from(new Set(t.map(v=>v[e.cat_var]))).map((v,_)=>b.jsxs("g",{transform:`translate(0, ${_*20})`,children:[b.jsx("rect",{width:15,height:15,fill:m(String(v))}),b.jsx("text",{x:20,y:15,style:{fontSize:"12px",fill:"black"},children:v})]},v))})]})}const G2t=Object.freeze(Object.defineProperty({__proto__:null,LineChart:EV,default:EV},Symbol.toStringTag,{value:"Module"}));function xV({parameters:e,setRange:t,trackRange:n}){const r=tI().domain([new Date(e.start_date),new Date(e.end_date)]).range([0,100]);function i(l){return r.invert(l)}function s(l){const c=i(l);return Jb("%b %e, %Y")(c)}const o={marginTop:"20px",marginBottom:"20px"},a={marginBottom:"5px",fontWeight:"bold",color:"#4a5568"},u={paddingLeft:"30px"};return b.jsxs(pe,{style:u,children:[b.jsx(Xe,{style:[a,{marginBottom:30}],children:"Select Date Range:"}),b.jsx($A,{style:o,defaultValue:[0,100],label:l=>s(l),labelAlwaysOn:!0,step:1,min:0,max:100,disabled:!e.allow_time_slider,onChange:([l,c])=>{const f=[i(l),i(c)];t(f),n(f)},thumbSize:16,thumbToLabel:"Date Range",marks:[{value:0,label:s(0)},{value:100,label:s(100)}]})]})}const Y2t=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:xV,default:xV},Symbol.toStringTag,{value:"Module"}));function gde({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i]=I.useState(e.initial_selection),[s,o]=I.useState(null),[a,u]=I.useState([new Date(e.start_date),new Date(e.end_date)]),[l]=I.useState(e.guardrail);I.useEffect(()=>{DK(`./data/${r}.csv`).then(m=>{n(m),o(Array.from(new Set(m.map(g=>JSON.stringify({name:g[e.cat_var],group:g[e.group_var]})))).map(g=>JSON.parse(g)))})},[r,e]);const c=I.useMemo(()=>t&&a?t.filter(m=>{const g=new Date(m[e.x_var]);return g.getTime()>=a[0].getTime()&&g.getTime()<=a[1].getTime()}):null,[t,a,e.x_var]),{actions:f,trrack:d}=I.useMemo(()=>{const m=Kk.create(),g=m.register("selection",(_,w)=>(_.selection=w,_)),y=m.register("range",(_,w)=>(_.range=w,_)),v=KQ({registry:m,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:g,range:y},trrack:v}},[e.end_date,e.start_date]),h=I.useCallback(m=>{d.apply("Change daterange",f.range([m[0].toISOString().slice(0,10),m[1].toISOString().slice(0,10)]))},[d,f]),p=I.useMemo(()=>df(h,200),[h]);return c&&s&&a&&i?b.jsx("div",{children:b.jsxs("div",{children:[b.jsx("div",{children:b.jsx("h3",{children:"Loan Balance over Time"})}),b.jsxs("div",{children:[b.jsx(EV,{parameters:e,data:c,dataname:r,items:s,selection:i,range:a,guardrail:l}),e.allow_time_slider&&b.jsx("div",{style:{width:"700px"},children:b.jsx(xV,{parameters:e,setRange:u,trackRange:p})})]})]})}):b.jsx("div",{children:"Loading..."})}const K2t=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:gde,default:gde},Symbol.toStringTag,{value:"Module"})),yde=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},JQ=e=>{const t=I.useRef(null),n=yde(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=yde({...n,width:n.width||r,height:n.height||s});return[t,a]},X2t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:JQ},Symbol.toStringTag,{value:"Module"}));function ARe({data:e,radius:t,colors:n}){if(e.length===0)return null;const{totalPaid:r=0,remainingBalance:i=0}=e[0]||{},s=r+i,o=s?r/s:0;if(o>=1)return b.jsx("svg",{width:t*2+100,height:t*2+100,style:{border:"1px solid #ddd"},children:b.jsxs("g",{transform:`translate(${t+50}, ${t+50})`,children:[b.jsx("circle",{cx:0,cy:0,r:t,fill:n[0]}),b.jsx("text",{x:0,y:0,fill:"white",fontSize:"16",textAnchor:"middle",alignmentBaseline:"middle",children:"100%"})]})});const a=o*360,u=l=>{const f=(l-90)*Math.PI/180;return{x:t*Math.cos(f),y:t*Math.sin(f)}};return b.jsx("svg",{width:t*2+100,height:t*2+100,style:{border:"1px solid #ddd"},children:b.jsxs("g",{transform:`translate(${t+50}, ${t+50})`,children:[b.jsx("path",{d:`M 0 0 
                        L ${u(0).x} ${u(0).y} 
                        A ${t} ${t} 0 ${a>180?1:0} 1 
                        ${u(a).x} ${u(a).y} 
                        Z`,fill:n[0]}),b.jsx("path",{d:`M 0 0 
                        L ${u(a).x} ${u(a).y} 
                        A ${t} ${t} 0 ${360-a>180?1:0} 1 
                        ${u(360).x} ${u(360).y} 
                        Z`,fill:n[1]}),b.jsx("text",{x:u(a/1.4).x*.6,y:u(a/1.4).y*.6,fill:"white",fontSize:"16",textAnchor:"middle",children:`${(o*100).toFixed(1)}%`})]})})}const Q2t=Object.freeze(Object.defineProperty({__proto__:null,default:ARe},Symbol.toStringTag,{value:"Module"})),vde="answer-array",uf={chartContainer:{height:"400px",width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},chartWrapper:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"20px"},extraPaymentOptions:{marginTop:"50px",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"center",gap:"20px"},radioLabel:{fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",padding:"8px 8px",borderRadius:"8px",border:"1px solid #4e79a7",backgroundColor:"#f9f9f9",transition:"background-color 0.3s ease"},radioButton:{width:"18px",height:"18px",cursor:"pointer"},nextYearButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#0077A9",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},disabledButton:{marginTop:"15px",padding:"8px 20px",cursor:"not-allowed",backgroundColor:"#cccccc",color:"white",border:"none",borderRadius:"8px"},legendItem:{display:"flex",alignItems:"center",fontSize:"14px"},legendColorBox:{width:"15px",height:"15px",backgroundColor:"currentColor",marginRight:"5px"},paidOffMessage:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},submitButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},alignRight:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",position:"absolute",top:"120px",right:"200px"},visWrapper:{backgroundColor:"#f0f0f0",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",margin:0,padding:0},sideBar:{fontSize:"16px",fontWeight:"bold",padding:0,margin:0}};let VT=!1;const TB=[];function J2t({extraPayment:e,setExtraPayment:t}){return b.jsxs("div",{style:uf.extraPaymentOptions,children:[b.jsx("h3",{children:"How much extra do you want to pay each month?"}),b.jsx("input",{type:"number",value:e,max:200,onChange:r=>{const i=Math.min(parseFloat(r.target.value),200);t(i)}})]})}function Z2t({setAnswer:e}){var w;const[o,a]=I.useState([]),[u,l]=I.useState(0),[c,f]=I.useState(Array(10).fill(0)),[d,h]=JQ({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:450,width:800});I.useEffect(()=>{a((()=>{const x=[];let S=3e4,C=0;for(let A=2025;A<2035&&!(S<=0);A+=1){const k=S*.065,O=4173.14+c[A-2025]*12,D=Math.min(S+k,O);S=Math.max(0,S+k-D),C+=D,x.push({year:A,totalPaid:C,remainingBalance:S,interest:k,total_payment:C})}return x})())},[c]);function p(){e({status:!0,answers:{[vde]:TB}}),VT=!0}function m(){TB[u]=c[u];const E=u+1,S=(o[u]||{remainingBalance:0}).remainingBalance??0,C=(c[u]??0)*12;(E>=10||typeof S=="number"&&typeof C=="number"&&S+C<=4100)&&(e({status:!0,answers:{[vde]:TB}}),VT=!0),l(E)}const g=o[u]||{remainingBalance:0},y=c[u]??0,v=g.remainingBalance??0,_=typeof u=="number"&&u>=o.length||typeof v=="number"&&typeof y=="number"&&v+y*12<=0;return I.useEffect(()=>{_&&u!==0&&!VT&&p()},[_]),b.jsxs("div",{style:uf.chartContainer,children:[b.jsxs("h3",{children:["Year:",u+2025]}),!VT,b.jsx("div",{ref:d,style:uf.chartWrapper,children:VT?b.jsx("div",{style:uf.paidOffMessage,children:"Congratulations! Your loan has been paid off."}):b.jsxs(b.Fragment,{children:[b.jsx("svg",{width:h.width,height:h.height,style:uf.visWrapper,children:b.jsx("g",{transform:"translate(0, 0)",children:o.length>0&&u<o.length?b.jsx(ARe,{data:[o[u]],radius:160,colors:["#06945D","#0077A9"]}):b.jsx("text",{children:"No data available for this year."})})}),b.jsxs("div",{style:uf.alignRight,children:[b.jsx("p",{style:uf.sideBar,children:"Current Balance"}),b.jsx("h1",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format((w=o[u])==null?void 0:w.remainingBalance)}),b.jsx("p",{style:uf.sideBar,children:" Miniumum Payment per Month"}),b.jsx("h1",{children:"$341.00"}),b.jsx("p",{style:uf.sideBar,children:" Monthly Payment"}),b.jsx("h1",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(341+c[u])})]}),b.jsx(J2t,{extraPayment:c[u],setExtraPayment:E=>{const x=[...c],S=typeof E=="function"?E(x[u]):E;x[u]=S,f(x)}}),b.jsx("button",{type:"button",style:_?uf.disabledButton:uf.nextYearButton,onClick:m,disabled:_,children:"Next Year"})]})})]})}const eCt=Object.freeze(Object.defineProperty({__proto__:null,default:Z2t},Symbol.toStringTag,{value:"Module"}));function IRe({data:e,barHeight:t,barWidth:n,colors:r}){const{totalPaid:i=0,remainingBalance:s=0}=e[0]||{},o=i+s,a=o?i/o*n:0,u=o?s/o*n:0,l=o?Math.round(i/o*100):0,c=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y),[f,d]=I.useState(null),[h,p]=I.useState(null),m=(y,v,_,w)=>{p(w),d({content:_,x:y+2,y:v-10})},g=()=>{d(null),p(null)};return e.length===0?null:b.jsxs("svg",{width:n+500,height:t+600,style:{border:"1px solid #ddd"},children:[b.jsxs("g",{transform:"translate(20, 20)})",children:[b.jsx("rect",{x:0,y:50,width:n-10,height:t-10,fill:h==="remaining"?"#46A3CA":r[1],onMouseEnter:()=>m(a+u/2,t/2,[`Remaining Percent: ${Math.round(s/o*100)}%`],"remaining"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"},rx:20,ry:20}),b.jsx("rect",{x:0,y:50,width:a-10,height:t-10,fill:h==="paid"?"#2DB681":r[0],onMouseEnter:()=>m(a/2,t/2,[`Paid Percent: ${l}%`],"paid"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"},rx:20,ry:20,stroke:"white",strokeWidth:2}),b.jsx("text",{children:b.jsx("tspan",{x:10,y:t/2+50,fill:"white",style:{fontSize:Se(16),fontWeight:600},children:c(i)})}),b.jsx("text",{children:b.jsx("tspan",{x:10+a,y:t/2+50,fill:"white",style:{fontSize:Se(16),fontWeight:600},children:c(s)})})]}),f&&b.jsx("text",{x:f.x,y:f.y,fill:"black",fontSize:"13",textAnchor:"middle",children:f.content.map((y,v)=>b.jsx("tspan",{x:f.x,dy:v===0?"0":"15",children:y},v))})]})}const tCt=Object.freeze(Object.defineProperty({__proto__:null,default:IRe},Symbol.toStringTag,{value:"Module"})),bde="answer-array",F1={chartContainer:{height:"50px",width:"1200px",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},chartWrapper:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"10px",marginBottom:"50px"},extraPaymentOptions:{marginTop:"10px",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"center",gap:"20px"},radioLabel:{fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",padding:"8px 8px",borderRadius:"8px",border:"1px solid #4e79a7",backgroundColor:"#f9f9f9",transition:"background-color 0.3s ease"},radioButton:{width:"18px",height:"18px",cursor:"pointer"},nextYearButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#0077A9",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},disabledButton:{marginTop:"15px",padding:"8px 20px",cursor:"not-allowed",backgroundColor:"#cccccc",color:"white",border:"none",borderRadius:"8px"},paidOffMessage:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},submitButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"}};let B_=!1;const CB=[];function nCt({extraPayment:e,setExtraPayment:t}){return b.jsxs("div",{style:F1.extraPaymentOptions,children:[b.jsx("h3",{children:"How much extra do you want to pay each month?"}),b.jsx("input",{type:"number",value:e,min:0,max:200,onChange:r=>{const i=Math.min(parseFloat(r.target.value),200);t(i)}})]})}function rCt({setAnswer:e}){const[o,a]=I.useState([]),[u,l]=I.useState(0),[c,f]=I.useState(Array(10).fill(0)),[d,h]=JQ({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:100,width:800});I.useEffect(()=>{a((()=>{const E=[];let x=3e4,S=0;for(let C=2025;C<2035&&!(x<=0);C+=1){const A=x*.065,N=4173.14+c[C-2025]*12,O=Math.min(x+A,N);x=Math.max(0,x+A-O),S+=O,E.push({year:C,totalPaid:S,remainingBalance:x,interest:A,total_payment:S})}return E})())},[c]);function p(){e({status:!0,answers:{[bde]:CB}}),B_=!0}function m(){CB[u]=c[u];const w=u+1,x=(o[u]||{remainingBalance:0}).remainingBalance??0,S=(c[u]??0)*12;(w>=10||typeof x=="number"&&typeof S=="number"&&x+S<=4100)&&(e({status:!0,answers:{[bde]:CB}}),B_=!0),l(w)}const g=o[u]||{remainingBalance:0},y=c[u]??0,v=g.remainingBalance??0,_=typeof u=="number"&&u>=o.length||typeof v=="number"&&typeof y=="number"&&v+y*12<=0;return I.useEffect(()=>{_&&u!==0&&!B_&&p()},[_]),b.jsxs("div",{style:F1.chartContainer,children:[b.jsx("h2",{children:"Loan Balance and Payments Over Time"}),b.jsxs("h3",{children:["Year:",u+2025]}),!B_,b.jsx("div",{ref:d,style:F1.chartWrapper,children:B_?b.jsx("div",{style:F1.paidOffMessage,children:"Congratulations! Your loan has been paid off."}):b.jsxs(b.Fragment,{children:[b.jsxs("svg",{width:h.width+100,height:h.height+100,style:F1.chartWrapper,children:[b.jsxs("g",{transform:"translate(200, 200})",children:[b.jsx("rect",{x:620,y:0,width:15,height:15,fill:"#06945D"}),b.jsx("text",{x:640,y:12,fontSize:"12",fill:"black",children:"Total Paid"}),b.jsx("rect",{x:700,y:0,width:15,height:15,fill:"#0077A9"}),b.jsx("text",{x:720,y:12,fontSize:"12",fill:"black",children:"Remaining Balance"})]}),b.jsx("g",{children:o.length>0&&u<o.length?b.jsx(IRe,{data:[o[u]],barWidth:h.width,barHeight:h.height,colors:["#06945D","#0077A9"]}):b.jsx("text",{children:"No data available for this year."})})]}),b.jsx(nCt,{extraPayment:c[u],setExtraPayment:w=>{const E=[...c],x=typeof w=="function"?w(E[u]):w;E[u]=x,f(E)}}),b.jsx("button",{type:"button",style:_?F1.disabledButton:F1.nextYearButton,onClick:m,disabled:B_,children:"Next Year"})]})})]})}const iCt=Object.freeze(Object.defineProperty({__proto__:null,default:rCt},Symbol.toStringTag,{value:"Module"}));function kRe({size:e}){const t=[{label:"loan",value:500,color:"#ff6f61"},{label:"housing",value:2200,color:"#69b578"},{label:"Transport",value:500,color:"#58A0D7"},{label:"essentials",value:1050,color:"#ffbf00"},{label:"other",value:750,color:"#9c88d2"}],n=O2e().value(s=>s.value),r=e$().innerRadius(0).outerRadius(e/4),i=n(t);return b.jsxs("svg",{width:e,height:e/2,viewBox:`0 0 ${e} ${e/2}`,children:[b.jsxs("g",{id:"sidebarpie",transform:`translate(${e/4}, ${e/4})`,children:[i.map((s,o)=>b.jsx("path",{d:r(s)||void 0,fill:t[o].color,children:b.jsx("title",{children:`${s.data.label}: ${(s.data.value/yK(t,a=>a.value)*100).toFixed(1)}%`})},o)),i.map((s,o)=>{const[a,u]=r.centroid(s);return b.jsxs("text",{style:{fontSize:".75em"},transform:`translate(${a-15},${u-5})`,children:[" ",`$${s.data.value}`]},o)})]}),b.jsxs("g",{transform:`translate(${2.35*e/4}, ${e/9})`,children:[b.jsx("circle",{r:10,fill:"#ff6f61"}),b.jsx("text",{x:13,y:3,children:"Loan"}),b.jsx("circle",{cy:25,r:10,fill:"#69b578"}),b.jsx("text",{x:13,y:28,children:"Housing"}),b.jsx("circle",{cy:50,r:10,fill:"#58A0D7"}),b.jsx("text",{x:13,y:55,children:"Transport"}),b.jsx("circle",{cy:75,r:10,fill:"#ffbf00"}),b.jsx("text",{x:13,y:80,children:"Essentials"}),b.jsx("circle",{cy:100,r:10,fill:"#9c88d2"}),b.jsx("text",{x:13,y:105,children:"Other"})]})]})}const sCt=Object.freeze(Object.defineProperty({__proto__:null,default:kRe},Symbol.toStringTag,{value:"Module"})),_de=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":Y0t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":l2t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":a2t,"../public/demo-brush-interactions/assets/Scatter.tsx":u2t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":W0t,"../public/demo-brush-interactions/assets/YAxis.tsx":o2t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":G0t,"../public/demo-brush-interactions/assets/types.ts":c2t,"../public/demo-cleveland/assets/BarChart.tsx":y2t,"../public/demo-cleveland/assets/BubbleChart.tsx":S2t,"../public/demo-cleveland/assets/PieChart.tsx":R2t,"../public/demo-cleveland/assets/StackedBarChart.tsx":$2t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":d2t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":v2t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":b2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":N2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":h2t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":p2t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":T2t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":C2t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":P2t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":f2t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":F2t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":B2t,"../public/demo-mqp-study/assets/Bar.tsx":z2t,"../public/demo-mqp-study/assets/ChartParam.ts":V2t,"../public/demo-mqp-study/assets/Color.tsx":H2t,"../public/demo-mqp-study/assets/DataExplorer.tsx":K2t,"../public/demo-mqp-study/assets/LineChart.tsx":G2t,"../public/demo-mqp-study/assets/PieChartLoanSimulation.tsx":eCt,"../public/demo-mqp-study/assets/RangeSelector.tsx":Y2t,"../public/demo-mqp-study/assets/StackedBarChart.tsx":iCt,"../public/demo-mqp-study/assets/XAxis.tsx":q2t,"../public/demo-mqp-study/assets/YAxis.tsx":W2t,"../public/demo-mqp-study/assets/chartcomponents/PieChart.tsx":Q2t,"../public/demo-mqp-study/assets/chartcomponents/SideBarPie.tsx":sCt,"../public/demo-mqp-study/assets/chartcomponents/StackedBars.tsx":tCt,"../public/demo-mqp-study/assets/hooks/useChartDimensions.tsx":X2t});function oCt({currentConfig:e}){const t=Zm(),n=Ly(),r=`../public/${e.path}`,i=r in _de?_de[r].default:null,s=Qh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Xh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return b.jsx(I.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:i?b.jsx(i,{parameters:e.parameters,setAnswer:u}):b.jsx(Wv,{path:e.path})})}function aCt({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await gK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?b.jsx(Qa,{text:t}):b.jsx(Wv,{path:e.path})}const uCt={},lCt=Object.freeze(Object.defineProperty({__proto__:null,default:uCt},Symbol.toStringTag,{value:"Module"})),cCt=h8e(lCt);var fCt=cCt;function dCt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function hCt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function pCt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function mCt(e){return e.__COMMENTS__}function gCt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var _4={EOL:fCt.EOL||`
`,tryParseNumber:dCt,createComment:hCt,removeComment:pCt,getComment:mCt,forceComment:gCt},yCt="3.2.1";function vCt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return wde}else if(e.length===0)return wde;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return _Ct(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),bCt.bind(null,n)}function bCt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function wde(){}function _Ct(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function RRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}RRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function NRe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}NRe.description="parse hexadecimal numbers prefixed with 0x";function PRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}PRe.description="support ISO dates";var ZQ={loadDsf:vCt,std:{math:RRe,hex:NRe,date:PRe}},wCt=function(e,t){var n=_4,r=ZQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),P;o>="0"&&o<="9"?P=H-48:o>="a"&&o<="f"?P=H-97+10:o>="A"&&o<="F"?P=H-65+10:d("Bad \\u char "+o),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,P,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function x(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function S($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var P=w(U);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function C(){switch(v(),o){case"{":return S();case"[":return x();case"'":case'"':return m(!0);default:return _()}}function A($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(x(),$);default:return A(C(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(x(),$)}try{return A(S(!0),$)}catch(F){c();try{return A(C(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?N():k()},ECt=function(e,t){var n=_4,r=ZQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",x=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(x,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,A.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(x.lastIndex=0,C.lastIndex=0,x.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(x.lastIndex=0,$(g.qkey,x.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function ce(gn){return gn&&!ne(gn)}function de(gn,An,nr){if(!gn)return"";gn=n.forceComment(gn);var rr,zo=gn.length;for(rr=0;rr<zo&&gn[rr]<=" ";rr++);return nr&&rr>0&&(gn=gn.substr(rr)),rr<zo?An+$(g.rem,gn):gn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Ke=s+be,Ue=s+O,yt=q||u?"":Ke,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,ge,ht,vt,me,Ae,He,ut,_t,Ln;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(He=ve.a[ge]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[ge],it.push(H(me,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof me){case"string":D=0,c=!0,d=0,ke.push(H(me,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(D+=g.com[0].length-g.com[2]),We+=D}ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Cr=ve?ve.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Cr.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Cr.concat(Fn);for(ge=0,ht=cr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=cr[ge],ve?(He=ve.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[vt],Ae=H(me,ve&&ut),it.push(U(vt)+g.col[0]+(ne(Ae)?"":" ")+Ae+(_e?h:"")),ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof me){case"string":D=0,c=!0,d=0,Ae=H(me,!1),c=ze,d=ct,ke.push(U(vt)+g.col[0]+" "+Ae+(_e?g.com[0]:""));break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}D+=g.col[0].length-g.col[2],_e&&(D+=g.com[0].length-g.com[2]),We+=D}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}w=r.loadDsf(p,"stringify");var P="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(P=z[0]+`
`),P+=H(e,null,!0,!0),z&&(P+=z[1]||""),P},hE=_4;function FC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function SV(e,t){if(!(e===null||typeof e!="object")){var n=hE.getComment(e);n&&hE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Ede(o.a,r,n.a[r],SV(e[r]))&&(s=!0);!s&&n.e&&(o.e=FC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Ede(o.s,l,n.c[l],SV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=FC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=FC(n.r[0],n.r[1])),s?o:void 0}}function xCt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function SCt(e,t){var n=[];if(TV(e,t,n,[]),n.length>0){var r=z$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+xCt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),z$(t,r,1)}}function Ede(e,t,n,r){var i=FC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function jC(e,t){var n=FC(t.b,t.a);return n.path=e,n}function BC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(jC(s,o)),BC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(jC(u,l)),BC(l.x,t,u))});e.e&&t.push(jC(n,e.e))}}function TV(e,t,n,r){if(e){if(t===null||typeof t!="object"){BC(e,n,r);return}var i,s=hE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],TV(u.x,t[i],n,l)):(n.push(jC(l,u)),BC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],TV(d.x,t[c],n,f))):d&&(n.push(jC(f,d)),BC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function z$(e,t,n){var r=hE.createComment(e,hE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=hE.forceComment(t)),r.r[n]||""}var TCt={extract:function(e){return SV(e,!0)},merge:SCt,header:function(e,t){return z$(e,t,0)},footer:function(e,t){return z$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var xde=_4,CCt=yCt,Sde=wCt,Tde=ECt,ACt=TCt,ICt=ZQ,eJ={parse:Sde,stringify:Tde,endOfLine:function(){return xde.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(xde.EOL=e)},version:CCt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Sde(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Tde(e,t)}},comments:ACt,dsf:ICt.std},CV={exports:{}},DRe={},zf={},mx={},Xk={},Dn={},vI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(vI);var AV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=vI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(AV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=vI,n=AV;var r=vI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=AV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return D(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=D(super.names,this.from);return D(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class x extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}x.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new _(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new C;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new A(de),G(de)}return ne&&(this._currNode=ce.finally=new k,this.code(ne)),this._endBlockNode(A,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new x(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function D(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Yr=Dn,kCt=vI;function RCt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=RCt;function NCt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ORe(e,t),!$Re(t,e.self.RULES.all))}wt.alwaysValidSchema=NCt;function ORe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||FRe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=ORe;function $Re(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=$Re;function PCt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=PCt;function DCt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Yr._)`${n}`}return(0,Yr._)`${e}${t}${(0,Yr.getProperty)(r)}`}wt.schemaRefOrVal=DCt;function OCt(e){return MRe(decodeURIComponent(e))}wt.unescapeFragment=OCt;function $Ct(e){return encodeURIComponent(tJ(e))}wt.escapeFragment=$Ct;function tJ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=tJ;function MRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=MRe;function MCt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=MCt;function Cde({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Yr.Name?(s instanceof Yr.Name?e(i,s,o):t(i,s,o),o):s instanceof Yr.Name?(t(i,o,s),s):n(s,o);return a===Yr.Name&&!(u instanceof Yr.Name)?r(i,u):u}}wt.mergeEvaluated={props:Cde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Yr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Yr._)`${n} || {}`).code((0,Yr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Yr._)`${n} || {}`),nJ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:LRe}),items:Cde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Yr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Yr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function LRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Yr._)`{}`);return t!==void 0&&nJ(e,n,t),n}wt.evaluatedPropsToName=LRe;function nJ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Yr._)`${t}${(0,Yr.getProperty)(r)}`,!0))}wt.setEvaluated=nJ;const Ade={};function LCt(e,t){return e.scopeValue("func",{ref:t,code:Ade[t.code]||(Ade[t.code]=new kCt._Code(t.code))})}wt.useFunc=LCt;var IV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(IV||(wt.Type=IV={}));function FCt(e,t,n){if(e instanceof Yr.Name){const r=t===IV.Num;return n?r?(0,Yr._)`"[" + ${e} + "]"`:(0,Yr._)`"['" + ${e} + "']"`:r?(0,Yr._)`"/" + ${e}`:(0,Yr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Yr.getProperty)(e).toString():"/"+tJ(e)}wt.getErrorPath=FCt;function FRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=FRe;var np={};Object.defineProperty(np,"__esModule",{value:!0});const ta=Dn,jCt={data:new ta.Name("data"),valCxt:new ta.Name("valCxt"),instancePath:new ta.Name("instancePath"),parentData:new ta.Name("parentData"),parentDataProperty:new ta.Name("parentDataProperty"),rootData:new ta.Name("rootData"),dynamicAnchors:new ta.Name("dynamicAnchors"),vErrors:new ta.Name("vErrors"),errors:new ta.Name("errors"),this:new ta.Name("this"),self:new ta.Name("self"),scope:new ta.Name("scope"),json:new ta.Name("json"),jsonPos:new ta.Name("jsonPos"),jsonLen:new ta.Name("jsonLen"),jsonPart:new ta.Name("jsonPart")};np.default=jCt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=np;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:E,compositeRule:x,allErrors:S}=w,C=f(g,y,v);_??(x||S)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:E,allErrors:x}=_,S=f(g,y,v);u(w,S),E||x||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(x,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${x}.schema`,v),g.assign((0,t._)`${x}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:E,schemaValue:x,it:S}=g,{opts:C,propertyName:A,topSchemaRef:k,schemaPath:N}=S;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&_.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&_.push([c.schema,x],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),A&&_.push([c.propertyName,A])}})(Xk);Object.defineProperty(mx,"__esModule",{value:!0});mx.boolOrEmptySchema=mx.topBoolOrEmptySchema=void 0;const BCt=Xk,UCt=Dn,zCt=np,VCt={message:"boolean schema is false"};function HCt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?jRe(e,!1):typeof n=="object"&&n.$async===!0?t.return(zCt.default.data):(t.assign((0,UCt._)`${r}.errors`,null),t.return(!0))}mx.topBoolOrEmptySchema=HCt;function qCt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),jRe(e)):n.var(t,!0)}mx.boolOrEmptySchema=qCt;function jRe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,BCt.reportError)(i,VCt,void 0,t)}var ks={},ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.getRules=ib.isJSONType=void 0;const WCt=["string","number","integer","boolean","null","object","array"],GCt=new Set(WCt);function YCt(e){return typeof e=="string"&&GCt.has(e)}ib.isJSONType=YCt;function KCt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}ib.getRules=KCt;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.shouldUseRule=um.shouldUseGroup=um.schemaHasRulesForType=void 0;function XCt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&BRe(e,r)}um.schemaHasRulesForType=XCt;function BRe(e,t){return t.rules.some(n=>URe(e,n))}um.shouldUseGroup=BRe;function URe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}um.shouldUseRule=URe;Object.defineProperty(ks,"__esModule",{value:!0});ks.reportTypeError=ks.checkDataTypes=ks.checkDataType=ks.coerceAndCheckDataType=ks.getJSONTypes=ks.getSchemaTypes=ks.DataType=void 0;const QCt=ib,JCt=um,ZCt=Xk,wn=Dn,zRe=wt;var pE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(pE||(ks.DataType=pE={}));function eAt(e){const t=VRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ks.getSchemaTypes=eAt;function VRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(QCt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ks.getJSONTypes=VRe;function tAt(e,t){const{gen:n,data:r,opts:i}=e,s=nAt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,JCt.schemaHasRulesForType)(e,t[0]));if(o){const a=rJ(t,r,i.strictNumbers,pE.Wrong);n.if(a,()=>{s.length?rAt(e,t,s):iJ(e)})}return o}ks.coerceAndCheckDataType=tAt;const HRe=new Set(["string","number","integer","boolean","null"]);function nAt(e,t){return t?e.filter(n=>HRe.has(n)||t==="array"&&n==="array"):[]}function rAt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,wn._)`typeof ${i}`),a=r.let("coerced",(0,wn._)`undefined`);s.coerceTypes==="array"&&r.if((0,wn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,wn._)`${i}[0]`).assign(o,(0,wn._)`typeof ${i}`).if(rJ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,wn._)`${a} !== undefined`);for(const l of n)(HRe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),iJ(e),r.endIf(),r.if((0,wn._)`${a} !== undefined`,()=>{r.assign(i,a),iAt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,wn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,wn._)`"" + ${i}`).elseIf((0,wn._)`${i} === null`).assign(a,(0,wn._)`""`);return;case"number":r.elseIf((0,wn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,wn._)`+${i}`);return;case"integer":r.elseIf((0,wn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,wn._)`+${i}`);return;case"boolean":r.elseIf((0,wn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,wn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,wn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,wn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,wn._)`[${i}]`)}}}function iAt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,wn._)`${t} !== undefined`,()=>e.assign((0,wn._)`${t}[${n}]`,r))}function kV(e,t,n,r=pE.Correct){const i=r===pE.Correct?wn.operators.EQ:wn.operators.NEQ;let s;switch(e){case"null":return(0,wn._)`${t} ${i} null`;case"array":s=(0,wn._)`Array.isArray(${t})`;break;case"object":s=(0,wn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,wn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,wn._)`typeof ${t} ${i} ${e}`}return r===pE.Correct?s:(0,wn.not)(s);function o(a=wn.nil){return(0,wn.and)((0,wn._)`typeof ${t} == "number"`,a,n?(0,wn._)`isFinite(${t})`:wn.nil)}}ks.checkDataType=kV;function rJ(e,t,n,r){if(e.length===1)return kV(e[0],t,n,r);let i;const s=(0,zRe.toHash)(e);if(s.array&&s.object){const o=(0,wn._)`typeof ${t} != "object"`;i=s.null?o:(0,wn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=wn.nil;s.number&&delete s.integer;for(const o in s)i=(0,wn.and)(i,kV(o,t,n,r));return i}ks.checkDataTypes=rJ;const sAt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,wn._)`{type: ${e}}`:(0,wn._)`{type: ${t}}`};function iJ(e){const t=oAt(e);(0,ZCt.reportError)(t,sAt)}ks.reportTypeError=iJ;function oAt(e){const{gen:t,data:n,schema:r}=e,i=(0,zRe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var w4={};Object.defineProperty(w4,"__esModule",{value:!0});w4.assignDefaults=void 0;const U_=Dn,aAt=wt;function uAt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Ide(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Ide(e,s,i.default))}w4.assignDefaults=uAt;function Ide(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,U_._)`${s}${(0,U_.getProperty)(t)}`;if(i){(0,aAt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,U_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,U_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,U_._)`${a} = ${(0,U_.stringify)(n)}`)}var rh={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateUnion=Nn.validateArray=Nn.usePattern=Nn.callValidateCode=Nn.schemaProperties=Nn.allSchemaProperties=Nn.noPropertyInData=Nn.propertyInData=Nn.isOwnProperty=Nn.hasPropFunc=Nn.reportMissingProp=Nn.checkMissingProp=Nn.checkReportMissingProp=void 0;const li=Dn,sJ=wt,_g=np,lAt=wt;function cAt(e,t){const{gen:n,data:r,it:i}=e;n.if(aJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,li._)`${t}`},!0),e.error()})}Nn.checkReportMissingProp=cAt;function fAt({gen:e,data:t,it:{opts:n}},r,i){return(0,li.or)(...r.map(s=>(0,li.and)(aJ(e,t,s,n.ownProperties),(0,li._)`${i} = ${s}`)))}Nn.checkMissingProp=fAt;function dAt(e,t){e.setParams({missingProperty:t},!0),e.error()}Nn.reportMissingProp=dAt;function qRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,li._)`Object.prototype.hasOwnProperty`})}Nn.hasPropFunc=qRe;function oJ(e,t,n){return(0,li._)`${qRe(e)}.call(${t}, ${n})`}Nn.isOwnProperty=oJ;function hAt(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} !== undefined`;return r?(0,li._)`${i} && ${oJ(e,t,n)}`:i}Nn.propertyInData=hAt;function aJ(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} === undefined`;return r?(0,li.or)(i,(0,li.not)(oJ(e,t,n))):i}Nn.noPropertyInData=aJ;function WRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Nn.allSchemaProperties=WRe;function pAt(e,t){return WRe(t).filter(n=>!(0,sJ.alwaysValidSchema)(e,t[n]))}Nn.schemaProperties=pAt;function mAt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,li._)`${e}, ${t}, ${r}${i}`:t,f=[[_g.default.instancePath,(0,li.strConcat)(_g.default.instancePath,s)],[_g.default.parentData,o.parentData],[_g.default.parentDataProperty,o.parentDataProperty],[_g.default.rootData,_g.default.rootData]];o.opts.dynamicRef&&f.push([_g.default.dynamicAnchors,_g.default.dynamicAnchors]);const d=(0,li._)`${c}, ${n.object(...f)}`;return u!==li.nil?(0,li._)`${a}.call(${u}, ${d})`:(0,li._)`${a}(${d})`}Nn.callValidateCode=mAt;const gAt=(0,li._)`new RegExp`;function yAt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,li._)`${i.code==="new RegExp"?gAt:(0,lAt.useFunc)(e,i)}(${n}, ${r})`})}Nn.usePattern=yAt;function vAt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,li._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:sJ.Type.Num},s),t.if((0,li.not)(s),a)})}}Nn.validateArray=vAt;function bAt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,sJ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,li._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,li.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Nn.validateUnion=bAt;Object.defineProperty(rh,"__esModule",{value:!0});rh.validateKeywordUsage=rh.validSchemaType=rh.funcKeywordCode=rh.macroKeywordCode=void 0;const La=Dn,G1=np,_At=Nn,wAt=Xk;function EAt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=GRe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:La.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}rh.macroKeywordCode=EAt;function xAt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;TAt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=GRe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&kde(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&kde(e),g(()=>SAt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,La._)`await `),v=>r.assign(f,!1).if((0,La._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,La._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,La._)`${c}.errors`;return r.assign(y,null),m(La.nil),y}function m(y=t.async?(0,La._)`await `:La.nil){const v=u.opts.passContext?G1.default.this:G1.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,La._)`${y}${(0,_At.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,La.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}rh.funcKeywordCode=xAt;function kde(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,La._)`${r.parentData}[${r.parentDataProperty}]`))}function SAt(e,t){const{gen:n}=e;n.if((0,La._)`Array.isArray(${t})`,()=>{n.assign(G1.default.vErrors,(0,La._)`${G1.default.vErrors} === null ? ${t} : ${G1.default.vErrors}.concat(${t})`).assign(G1.default.errors,(0,La._)`${G1.default.vErrors}.length`),(0,wAt.extendErrors)(e)},()=>e.error())}function TAt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function GRe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,La.stringify)(n)})}function CAt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}rh.validSchemaType=CAt;function AAt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}rh.validateKeywordUsage=AAt;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.extendSubschemaMode=A0.extendSubschemaData=A0.getSubschema=void 0;const Jd=Dn,YRe=wt;function IAt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Jd._)`${e.schemaPath}${(0,Jd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Jd._)`${e.schemaPath}${(0,Jd.getProperty)(t)}${(0,Jd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,YRe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}A0.getSubschema=IAt;function kAt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Jd._)`${t.data}${(0,Jd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Jd.str)`${l}${(0,YRe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Jd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Jd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}A0.extendSubschemaData=kAt;function RAt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}A0.extendSubschemaMode=RAt;var Ao={},KRe={exports:{}},n0=KRe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};FD(t,r,i,e,"",e)};n0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};n0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};n0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};n0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function FD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in n0.arrayKeywords)for(var d=0;d<f.length;d++)FD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in n0.propsKeywords){if(f&&typeof f=="object")for(var h in f)FD(e,t,n,f[h],i+"/"+c+"/"+NAt(h),s,i,c,r,h)}else(c in n0.keywords||e.allKeys&&!(c in n0.skipKeywords))&&FD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function NAt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var PAt=KRe.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const DAt=wt,OAt=mK,$At=PAt,MAt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function LAt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!RV(e):t?XRe(e)<=t:!1}Ao.inlineRef=LAt;const FAt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function RV(e){for(const t in e){if(FAt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(RV)||typeof n=="object"&&RV(n))return!0}return!1}function XRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!MAt.has(n)&&(typeof e[n]=="object"&&(0,DAt.eachItem)(e[n],r=>t+=XRe(r)),t===1/0))return 1/0}return t}function QRe(e,t="",n){n!==!1&&(t=mE(t));const r=e.parse(t);return JRe(e,r)}Ao.getFullPath=QRe;function JRe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=JRe;const jAt=/#\/?$/;function mE(e){return e?e.replace(jAt,""):""}Ao.normalizeId=mE;function BAt(e,t,n){return n=mE(n),e.resolve(t,n)}Ao.resolveUrl=BAt;const UAt=/^[a-z_][-a-z0-9._]*$/i;function zAt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=mE(e[n]||t),s={"":i},o=QRe(r,i,!1),a={},u=new Set;return $At(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=mE(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==mE(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!UAt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!OAt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=zAt;Object.defineProperty(zf,"__esModule",{value:!0});zf.getData=zf.KeywordCxt=zf.validateFunctionCode=void 0;const ZRe=mx,Rde=ks,uJ=um,V$=ks,VAt=w4,UC=rh,AB=A0,Dt=Dn,sn=np,HAt=Ao,lm=wt,HT=Xk;function qAt(e){if(nNe(e)&&(rNe(e),tNe(e))){YAt(e);return}eNe(e,()=>(0,ZRe.topBoolOrEmptySchema)(e))}zf.validateFunctionCode=qAt;function eNe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${Nde(n,i)}`),GAt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${sn.default.data}, ${WAt(i)}`,r.$async,()=>e.code(Nde(n,i)).code(s))}function WAt(e){return(0,Dt._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Dt._)`, ${sn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function GAt(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Dt._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Dt._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Dt._)`""`),e.var(sn.default.parentData,(0,Dt._)`undefined`),e.var(sn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`{}`)})}function YAt(e){const{schema:t,opts:n,gen:r}=e;eNe(e,()=>{n.$comment&&t.$comment&&sNe(e),ZAt(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&KAt(e),iNe(e),nIt(e)})}function KAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function Nde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function XAt(e,t){if(nNe(e)&&(rNe(e),tNe(e))){QAt(e,t);return}(0,ZRe.boolOrEmptySchema)(e,t)}function tNe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function nNe(e){return typeof e.schema!="boolean"}function QAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&sNe(e),eIt(e),tIt(e);const s=r.const("_errs",sn.default.errors);iNe(e,s),r.var(t,(0,Dt._)`${s} === ${sn.default.errors}`)}function rNe(e){(0,lm.checkUnknownRules)(e),JAt(e)}function iNe(e,t){if(e.opts.jtd)return Pde(e,[],!1,t);const n=(0,Rde.getSchemaTypes)(e.schema),r=(0,Rde.coerceAndCheckDataType)(e,n);Pde(e,n,!r,t)}function JAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,lm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function ZAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,lm.checkStrictMode)(e,"default is ignored in the schema root")}function eIt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,HAt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function tIt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function sNe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function nIt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Dt._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&rIt(e),t.return((0,Dt._)`${sn.default.errors} === 0`))}function rIt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function Pde(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,lm.schemaHasRulesButRef)(s,c))){i.block(()=>uNe(e,"$ref",c.all.$ref.definition));return}u.jtd||iIt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,uJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,V$.checkDataType)(d.type,o,u.strictNumbers)),Dde(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,V$.reportTypeError)(e)),i.endIf()):Dde(e,d),a||i.if((0,Dt._)`${sn.default.errors} === ${r||0}`))}}function Dde(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,VAt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,uJ.shouldUseRule)(r,s)&&uNe(e,s.keyword,s.definition,t.type)})}function iIt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(sIt(e,t),e.opts.allowUnionTypes||oIt(e,t),aIt(e,e.dataTypes))}function sIt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{oNe(e.dataTypes,n)||lJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),lIt(e,t)}}function oIt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&lJ(e,"use allowUnionTypes to allow union type keyword")}function aIt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,uJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>uIt(t,o))&&lJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function uIt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function oNe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function lIt(e,t){const n=[];for(const r of e.dataTypes)oNe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function lJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,lm.checkStrictMode)(e,t,e.opts.strictTypes)}class aNe{constructor(t,n,r){if((0,UC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,lm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",lNe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,UC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?HT.reportExtraError:HT.reportError)(this,this.def.error,n)}$dataError(){(0,HT.reportError)(this,this.def.$dataError||HT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,HT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,V$.checkDataTypes)(u,n,s.opts.strictNumbers,V$.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,AB.getSubschema)(this.it,t);(0,AB.extendSubschemaData)(r,this.it,t),(0,AB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return XAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=lm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=lm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}zf.KeywordCxt=aNe;function uNe(e,t,n,r){const i=new aNe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,UC.funcKeywordCode)(i,n):"macro"in n?(0,UC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,UC.funcKeywordCode)(i,n)}const cIt=/^\/(?:[^~]|~0|~1)*$/,fIt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function lNe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!cIt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=fIt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,lm.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}zf.getData=lNe;var Qk={};Object.defineProperty(Qk,"__esModule",{value:!0});class dIt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Qk.default=dIt;var $S={};Object.defineProperty($S,"__esModule",{value:!0});const IB=Ao;class hIt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,IB.resolveUrl)(t,n,r),this.missingSchema=(0,IB.normalizeId)((0,IB.getFullPath)(t,this.missingRef))}}$S.default=hIt;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.resolveSchema=Ru.getCompilingSchema=Ru.resolveRef=Ru.compileSchema=Ru.SchemaEnv=void 0;const nf=Dn,pIt=Qk,h1=np,Af=Ao,Ode=wt,mIt=zf;class E4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Af.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Ru.SchemaEnv=E4;function cJ(e){const t=cNe.call(this,e);if(t)return t;const n=(0,Af.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new nf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:pIt.default,code:(0,nf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:h1.default.data,parentData:h1.default.parentData,parentDataProperty:h1.default.parentDataProperty,dataNames:[h1.default.data],dataPathArr:[nf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,nf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:nf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,nf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,mIt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(h1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${h1.default.self}`,`${h1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof nf.Name?void 0:p,items:m instanceof nf.Name?void 0:m,dynamicProps:p instanceof nf.Name,dynamicItems:m instanceof nf.Name},h.source&&(h.source.evaluated=(0,nf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Ru.compileSchema=cJ;function gIt(e,t,n){var r;n=(0,Af.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=bIt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new E4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=yIt.call(this,s)}Ru.resolveRef=gIt;function yIt(e){return(0,Af.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:cJ.call(this,e)}function cNe(e){for(const t of this._compilations)if(vIt(t,e))return t}Ru.getCompilingSchema=cNe;function vIt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function bIt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||x4.call(this,e,t)}function x4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Af._getFullPath)(this.opts.uriResolver,n);let i=(0,Af.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return kB.call(this,n,e);const s=(0,Af.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=x4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:kB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||cJ.call(this,o),s===(0,Af.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Af.resolveUrl)(this.opts.uriResolver,i,l)),new E4({schema:a,schemaId:u,root:e,baseId:i})}return kB.call(this,n,o)}}Ru.resolveSchema=x4;const _It=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function kB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Ode.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!_It.has(a)&&l&&(t=(0,Af.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Ode.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Af.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=x4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new E4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const wIt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",EIt="Meta-schema for $data reference (JSON AnySchema extension proposal)",xIt="object",SIt=["$data"],TIt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},CIt=!1,AIt={$id:wIt,description:EIt,type:xIt,required:SIt,properties:TIt,additionalProperties:CIt};var fJ={},NV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(to,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Te=1;Te<Ce;++Te)ee[Te]=ee[Te].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Te=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Te+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ir=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Ce+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+Ir),Hr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),ki=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),Hs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Jr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),mo=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Li=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),Fi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Vo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ra=i([Hr,Jn,ki,Hs,Jr,mo,Li,Fi,Vo].join("|")),qs=i(i(pn+"|"+Te)+"+");i("[vV]"+Ce+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Te+"|"+r(pn,St))+"*");var tc=i(Te+"|"+r(pn,St,"[\\:\\@]"));return i(i(Te+"|"+r(pn,St,"[\\@]"))+"+"),i(i(tc+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,Ht),"g"),PCT_ENCODED:new RegExp(Te,"g"),IPV4ADDRESS:new RegExp("^("+Ir+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ra+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Te=!0,ot=!1,St=void 0;try{for(var Ht=ee[Symbol.iterator](),On;!(Te=(On=Ht.next()).done)&&(Ce.push(On.value),!(ae&&Ce.length===ae));Te=!0);}catch(jn){ot=!0,St=jn}finally{try{!Te&&Ht.return&&Ht.return()}finally{if(ot)throw St}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,E=128,x="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function M(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Te=oe.split("."),ot=F(Te,ee).join(".");return Ce+ot}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Te=oe.charCodeAt(ae++);if(Te>=55296&&Te<=56319&&ae<Ce){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Te&1023)<<10)+(ot&1023)+65536):(ee.push(Te),ae--)}else ee.push(Te)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ce){var Te=0;for(ee=Ce?O(ee/_):ee>>1,ee+=O(ee/ae);ee>N*y>>1;Te+=m)ee=O(ee/N);return O(Te+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Te=0,ot=E,St=w,Ht=ee.lastIndexOf(x);Ht<0&&(Ht=0);for(var On=0;On<Ht;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Ht>0?Ht+1:0;jn<Ce;){for(var pn=Te,ir=1,Ir=m;;Ir+=m){jn>=Ce&&$("invalid-input");var Vt=H(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Te)/ir))&&$("overflow"),Te+=Vt*ir;var sr=Ir<=St?g:Ir>=St+y?y:Ir-St;if(Vt<sr)break;var Hr=m-sr;ir>O(p/Hr)&&$("overflow"),ir*=Hr}var Jn=ae.length+1;St=z(Te-pn,Jn,pn==0),O(Te/Jn)>p-ot&&$("overflow"),ot+=O(Te/Jn),Te%=Jn,ae.splice(Te++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Te=E,ot=0,St=w,Ht=!0,On=!1,jn=void 0;try{for(var pn=ee[Symbol.iterator](),ir;!(Ht=(ir=pn.next()).done);Ht=!0){var Ir=ir.value;Ir<128&&ae.push(D(Ir))}}catch(Oe){On=!0,jn=Oe}finally{try{!Ht&&pn.return&&pn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(x);sr<Ce;){var Hr=p,Jn=!0,ki=!1,Hs=void 0;try{for(var Jr=ee[Symbol.iterator](),mo;!(Jn=(mo=Jr.next()).done);Jn=!0){var Li=mo.value;Li>=Te&&Li<Hr&&(Hr=Li)}}catch(Oe){ki=!0,Hs=Oe}finally{try{!Jn&&Jr.return&&Jr.return()}finally{if(ki)throw Hs}}var Fi=sr+1;Hr-Te>O((p-ot)/Fi)&&$("overflow"),ot+=(Hr-Te)*Fi,Te=Hr;var Vo=!0,Ra=!1,qs=void 0;try{for(var tc=ee[Symbol.iterator](),wd;!(Vo=(wd=tc.next()).done);Vo=!0){var Y=wd.value;if(Y<Te&&++ot>p&&$("overflow"),Y==Te){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(D(P(fe+ye%le,0))),se=O(ye/le)}ae.push(D(P(se,0))),St=z(ot,Fi,sr==Vt),ot=0,++sr}}}catch(Oe){Ra=!0,qs=Oe}finally{try{!Vo&&tc.return&&tc.return()}finally{if(Ra)throw qs}}++ot,++Te}return ae.join("")},q=function(ee){return M(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Te=parseInt(oe.substr(ae+1,2),16);if(Te<128)ee+=String.fromCharCode(Te),ae+=3;else if(Te>=194&&Te<224){if(Ce-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Te&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Te>=224){if(Ce-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Te&15)<<12|(St&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ce){var Te=he(Ce);return Te.match(ee.UNRESERVED)?Te:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Te=Ce[1];return Te?Te.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Te=Ce[1],ot=Ce[2];if(Te){for(var St=Te.toLowerCase().split("::").reverse(),Ht=d(St,2),On=Ht[0],jn=Ht[1],pn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Ir=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=Ir?7:8,sr=ir.length-Vt,Hr=Array(Vt),Jn=0;Jn<Vt;++Jn)Hr[Jn]=pn[Jn]||ir[sr+Jn]||"";Ir&&(Hr[Vt-1]=be(Hr[Vt-1],ee));var ki=Hr.reduce(function(Fi,Vo,Ra){if(!Vo||Vo==="0"){var qs=Fi[Fi.length-1];qs&&qs.index+qs.length===Ra?qs.length++:Fi.push({index:Ra,length:1})}return Fi},[]),Hs=ki.sort(function(Fi,Vo){return Vo.length-Fi.length})[0],Jr=void 0;if(Hs&&Hs.length>1){var mo=Hr.slice(0,Hs.index),Li=Hr.slice(Hs.index+Hs.length);Jr=mo.join(":")+"::"+Li.join(":")}else Jr=Hr.join(":");return ot&&(Jr+="%"+ot),Jr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Te=oe.match(Ue);if(Te){yt?(ae.scheme=Te[1],ae.userinfo=Te[3],ae.host=Te[4],ae.port=parseInt(Te[5],10),ae.path=Te[6]||"",ae.query=Te[7],ae.fragment=Te[8],isNaN(ae.port)&&(ae.port=Te[5])):(ae.scheme=Te[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Te[3]:void 0,ae.host=oe.indexOf("//")!==-1?Te[4]:void 0,ae.port=parseInt(Te[5],10),ae.path=Te[6]||"",ae.query=oe.indexOf("?")!==-1?Te[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Te[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Te[4]:void 0)),ae.host&&(ae.host=Ke(be(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ce.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ve(ae,c)}else ve(ae,Ce);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(Ke(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Te,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Te=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Te&&Te.serialize&&Te.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Te&&Te.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Te||!Te.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ce.push(St)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Te={};return Ce||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Te.scheme=ee.scheme,Te.userinfo=ee.userinfo,Te.host=ee.host,Te.port=ee.port,Te.path=We(ee.path||""),Te.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Te.userinfo=ee.userinfo,Te.host=ee.host,Te.port=ee.port,Te.path=We(ee.path||""),Te.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Te.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Te.path="/"+ee.path:oe.path?Te.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Te.path=ee.path,Te.path=We(Te.path)),Te.query=ee.query):(Te.path=oe.path,ee.query!==void 0?Te.query=ee.query:Te.query=oe.query),Te.userinfo=oe.userinfo,Te.host=oe.host,Te.port=oe.port),Te.scheme=oe.scheme),Te.fragment=ee.fragment,Te}function vt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return ge(ht(it(oe,Ce),it(ee,Ce),Ce,!0),Ce)}function me(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Cr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=Cr(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(Cr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Te=d(Ce,2),ot=Te[0],St=Te[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},gn={},An="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),zo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(An,"g"),gs=new RegExp(rr,"g"),pp=new RegExp(r("[^]",zo,"[\\.]",'[\\"]',In),"g"),cl=new RegExp(r("[^]",An,Mi),"g"),_d=cl;function xr(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ii={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Te=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var ot=!1,St={},Ht=Ce.query.split("&"),On=0,jn=Ht.length;On<jn;++On){var pn=Ht[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),Ir=0,Vt=ir.length;Ir<Vt;++Ir)Te.push(ir[Ir]);break;case"subject":Ce.subject=ut(pn[1],ae);break;case"body":Ce.body=ut(pn[1],ae);break;default:ot=!0,St[ut(pn[0],ae)]=ut(pn[1],ae);break}}ot&&(Ce.headers=St)}Ce.query=void 0;for(var sr=0,Hr=Te.length;sr<Hr;++sr){var Jn=Te[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(ki){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+ki}Te[sr]=Jn.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Te=a(ee.to);if(Te){for(var ot=0,St=Te.length;ot<St;++ot){var Ht=String(Te[ot]),On=Ht.lastIndexOf("@"),jn=Ht.slice(0,On).replace(gs,xr).replace(gs,o).replace(pp,de),pn=Ht.slice(On+1);try{pn=ae.iri?ne.toUnicode(pn):ne.toASCII(ut(pn,ae).toLowerCase())}catch(sr){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Te[ot]=jn+"@"+pn}Ce.path=Te.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Ir=[];for(var Vt in ir)ir[Vt]!==gn[Vt]&&Ir.push(Vt.replace(gs,xr).replace(gs,o).replace(cl,de)+"="+ir[Vt].replace(gs,xr).replace(gs,o).replace(_d,de));return Ir.length&&(Ce.query=Ir.join("&")),Ce}},Qr=/^([^\:]+)\:(.*)/,cu={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(Qr),Te=ee;if(Ce){var ot=ae.scheme||Te.scheme||"urn",St=Ce[1].toLowerCase(),Ht=Ce[2],On=ot+":"+(ae.nid||St),jn=ce[On];Te.nid=St,Te.nss=Ht,Te.path=void 0,jn&&(Te=jn.parse(Te,ae))}else Te.error=Te.error||"URN can not be parsed.";return Te},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Te=ee.nid,ot=Ce+":"+(ae.nid||Te),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Ht=ee,On=ee.nss;return Ht.path=(Te||ae.nid)+":"+On,Ht}},Ia=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ka={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ia))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ii.scheme]=Ii,ce[cu.scheme]=cu,ce[ka.scheme]=ka,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=me,n.equal=Ae,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(NV,NV.exports);var IIt=NV.exports;Object.defineProperty(fJ,"__esModule",{value:!0});const fNe=IIt;fNe.code='require("ajv/dist/runtime/uri").default';fJ.default=fNe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=zf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Qk,i=$S,s=ib,o=Ru,a=Dn,u=Ao,l=ks,c=wt,f=AIt,d=fJ,h=(P,z)=>new RegExp(P,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(P){var z,W,j,q,G,ne,ce,de,he,ve,Ie,be,Ke,Ue,yt,it,_e,ke,ze,ct,Ot,We,ge,ht,vt;const me=P.strict,Ae=(z=P.code)===null||z===void 0?void 0:z.optimize,He=Ae===!0||Ae===void 0?1:Ae||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:me)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=P.strictNumbers)!==null&&ce!==void 0?ce:me)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=P.strictTypes)!==null&&he!==void 0?he:me)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:me)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Ke=P.strictRequired)!==null&&Ke!==void 0?Ke:me)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=P.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=P.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=P.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=P.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ge=P.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,..._(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=x.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=x.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,z,W,j="error"){for(const q in P){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function x(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function S(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const z in P)this.addSchema(P[z],z)}function C(){for(const P in this.opts.formats){const z=this.opts.formats[P];z&&this.addFormat(P,z)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in P){const W=P[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const P={...this.opts};for(const z of p)delete P[z];return P}const N={log(){},warn(){},error(){}};function O(P){if(P===!1)return N;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,z){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!z)return;const ce={keyword:P,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[P]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(P,z,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,z):(P.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:z}=P;z!==void 0&&(P.$data&&this.opts.$data&&(z=H(z)),P.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,U]}}})(DRe);var dJ={},hJ={},pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const kIt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};pJ.default=kIt;var sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.callRef=sb.getValidate=void 0;const RIt=$S,$de=Nn,bu=Dn,z_=np,Mde=Ru,fP=wt,NIt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Mde.resolveRef.call(u,l,i,n);if(c===void 0)throw new RIt.default(r.opts.uriResolver,i,n);if(c instanceof Mde.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return jD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return jD(e,(0,bu._)`${p}.validate`,l,l.$async)}function d(p){const m=dNe(e,p);jD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,bu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:bu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function dNe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,bu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}sb.getValidate=dNe;function jD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?z_.default.this:bu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,bu._)`await ${(0,$de.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,bu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,$de.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,bu._)`${p}.errors`;i.assign(z_.default.vErrors,(0,bu._)`${z_.default.vErrors} === null ? ${m} : ${z_.default.vErrors}.concat(${m})`),i.assign(z_.default.errors,(0,bu._)`${z_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=fP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,bu._)`${p}.evaluated.props`);s.props=fP.mergeEvaluated.props(i,y,s.props,bu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=fP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,bu._)`${p}.evaluated.items`);s.items=fP.mergeEvaluated.items(i,y,s.items,bu.Name)}}}sb.callRef=jD;sb.default=NIt;Object.defineProperty(hJ,"__esModule",{value:!0});const PIt=pJ,DIt=sb,OIt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",PIt.default,DIt.default];hJ.default=OIt;var mJ={},gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const H$=Dn,wg=H$.operators,q$={maximum:{okStr:"<=",ok:wg.LTE,fail:wg.GT},minimum:{okStr:">=",ok:wg.GTE,fail:wg.LT},exclusiveMaximum:{okStr:"<",ok:wg.LT,fail:wg.GTE},exclusiveMinimum:{okStr:">",ok:wg.GT,fail:wg.LTE}},$It={message:({keyword:e,schemaCode:t})=>(0,H$.str)`must be ${q$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,H$._)`{comparison: ${q$[e].okStr}, limit: ${t}}`},MIt={keyword:Object.keys(q$),type:"number",schemaType:"number",$data:!0,error:$It,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,H$._)`${n} ${q$[t].fail} ${r} || isNaN(${n})`)}};gJ.default=MIt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const zC=Dn,LIt={message:({schemaCode:e})=>(0,zC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,zC._)`{multipleOf: ${e}}`},FIt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:LIt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,zC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,zC._)`${o} !== parseInt(${o})`;e.fail$data((0,zC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};yJ.default=FIt;var vJ={},bJ={};Object.defineProperty(bJ,"__esModule",{value:!0});function hNe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}bJ.default=hNe;hNe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(vJ,"__esModule",{value:!0});const Y1=Dn,jIt=wt,BIt=bJ,UIt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Y1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Y1._)`{limit: ${e}}`},zIt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:UIt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Y1.operators.GT:Y1.operators.LT,o=i.opts.unicode===!1?(0,Y1._)`${n}.length`:(0,Y1._)`${(0,jIt.useFunc)(e.gen,BIt.default)}(${n})`;e.fail$data((0,Y1._)`${o} ${s} ${r}`)}};vJ.default=zIt;var _J={};Object.defineProperty(_J,"__esModule",{value:!0});const VIt=Nn,W$=Dn,HIt={message:({schemaCode:e})=>(0,W$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,W$._)`{pattern: ${e}}`},qIt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:HIt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,W$._)`(new RegExp(${i}, ${o}))`:(0,VIt.usePattern)(e,r);e.fail$data((0,W$._)`!${a}.test(${t})`)}};_J.default=qIt;var wJ={};Object.defineProperty(wJ,"__esModule",{value:!0});const VC=Dn,WIt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,VC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,VC._)`{limit: ${e}}`},GIt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:WIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?VC.operators.GT:VC.operators.LT;e.fail$data((0,VC._)`Object.keys(${n}).length ${i} ${r}`)}};wJ.default=GIt;var EJ={};Object.defineProperty(EJ,"__esModule",{value:!0});const qT=Nn,HC=Dn,YIt=wt,KIt={message:({params:{missingProperty:e}})=>(0,HC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,HC._)`{missingProperty: ${e}}`},XIt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:KIt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,YIt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(HC.nil,f);else for(const h of n)(0,qT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,qT.checkMissingProp)(e,n,h)),(0,qT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,qT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,qT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,HC.not)(p),()=>{e.error(),t.break()})},HC.nil)}}};EJ.default=XIt;var xJ={};Object.defineProperty(xJ,"__esModule",{value:!0});const qC=Dn,QIt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,qC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,qC._)`{limit: ${e}}`},JIt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:QIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?qC.operators.GT:qC.operators.LT;e.fail$data((0,qC._)`${n}.length ${i} ${r}`)}};xJ.default=JIt;var SJ={},Jk={};Object.defineProperty(Jk,"__esModule",{value:!0});const pNe=mK;pNe.code='require("ajv/dist/runtime/equal").default';Jk.default=pNe;Object.defineProperty(SJ,"__esModule",{value:!0});const RB=ks,wo=Dn,ZIt=wt,ekt=Jk,tkt={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},nkt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:tkt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,RB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,RB.checkDataTypes)(l,g,a.opts.strictNumbers,RB.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,ZIt.useFunc)(t,ekt.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};SJ.default=nkt;var TJ={};Object.defineProperty(TJ,"__esModule",{value:!0});const PV=Dn,rkt=wt,ikt=Jk,skt={message:"must be equal to constant",params:({schemaCode:e})=>(0,PV._)`{allowedValue: ${e}}`},okt={keyword:"const",$data:!0,error:skt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,PV._)`!${(0,rkt.useFunc)(t,ikt.default)}(${n}, ${i})`):e.fail((0,PV._)`${s} !== ${n}`)}};TJ.default=okt;var CJ={};Object.defineProperty(CJ,"__esModule",{value:!0});const V2=Dn,akt=wt,ukt=Jk,lkt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,V2._)`{allowedValues: ${e}}`},ckt={keyword:"enum",schemaType:"array",$data:!0,error:lkt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,akt.useFunc)(t,ukt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,V2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,V2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,V2._)`${l()}(${n}, ${h}[${p}])`:(0,V2._)`${n} === ${m}`}}};CJ.default=ckt;Object.defineProperty(mJ,"__esModule",{value:!0});const fkt=gJ,dkt=yJ,hkt=vJ,pkt=_J,mkt=wJ,gkt=EJ,ykt=xJ,vkt=SJ,bkt=TJ,_kt=CJ,wkt=[fkt.default,dkt.default,hkt.default,pkt.default,mkt.default,gkt.default,ykt.default,vkt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},bkt.default,_kt.default];mJ.default=wkt;var AJ={},MS={};Object.defineProperty(MS,"__esModule",{value:!0});MS.validateAdditionalItems=void 0;const K1=Dn,DV=wt,Ekt={message:({params:{len:e}})=>(0,K1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,K1._)`{limit: ${e}}`},xkt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Ekt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,DV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}mNe(e,r)}};function mNe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,K1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,K1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,DV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,K1._)`${a} <= ${t.length}`);n.if((0,K1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:DV.Type.Num},l),o.allErrors||n.if((0,K1.not)(l),()=>n.break())})}}MS.validateAdditionalItems=mNe;MS.default=xkt;var IJ={},LS={};Object.defineProperty(LS,"__esModule",{value:!0});LS.validateTuple=void 0;const Lde=Dn,BD=wt,Skt=Nn,Tkt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return gNe(e,"additionalItems",t);n.items=!0,!(0,BD.alwaysValidSchema)(n,t)&&e.ok((0,Skt.validateArray)(e))}};function gNe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=BD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Lde._)`${s}.length`);n.forEach((f,d)=>{(0,BD.alwaysValidSchema)(a,f)||(r.if((0,Lde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,BD.checkStrictMode)(a,g,d.strictTuples)}}}LS.validateTuple=gNe;LS.default=Tkt;Object.defineProperty(IJ,"__esModule",{value:!0});const Ckt=LS,Akt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ckt.validateTuple)(e,"items")};IJ.default=Akt;var kJ={};Object.defineProperty(kJ,"__esModule",{value:!0});const Fde=Dn,Ikt=wt,kkt=Nn,Rkt=MS,Nkt={message:({params:{len:e}})=>(0,Fde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Fde._)`{limit: ${e}}`},Pkt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Nkt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Ikt.alwaysValidSchema)(r,t)&&(i?(0,Rkt.validateAdditionalItems)(e,i):e.ok((0,kkt.validateArray)(e)))}};kJ.default=Pkt;var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0});const dc=Dn,dP=wt,Dkt={message:({params:{min:e,max:t}})=>t===void 0?(0,dc.str)`must contain at least ${e} valid item(s)`:(0,dc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,dc._)`{minContains: ${e}}`:(0,dc._)`{minContains: ${e}, maxContains: ${t}}`},Okt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Dkt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,dc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,dP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,dP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,dP.alwaysValidSchema)(s,n)){let m=(0,dc._)`${c} >= ${o}`;a!==void 0&&(m=(0,dc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,dc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:dP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,dc._)`${m}++`),a===void 0?t.if((0,dc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,dc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,dc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};RJ.default=Okt;var yNe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Nn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(yNe);var NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});const vNe=Dn,$kt=wt,Mkt={message:"property name must be valid",params:({params:e})=>(0,vNe._)`{propertyName: ${e.propertyName}}`},Lkt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Mkt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,$kt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,vNe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};NJ.default=Lkt;var S4={};Object.defineProperty(S4,"__esModule",{value:!0});const hP=Nn,lf=Dn,Fkt=np,pP=wt,jkt={message:"must NOT have additional properties",params:({params:e})=>(0,lf._)`{additionalProperty: ${e.additionalProperty}}`},Bkt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jkt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,pP.alwaysValidSchema)(o,n))return;const l=(0,hP.allSchemaProperties)(r.properties),c=(0,hP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,lf._)`${s} === ${Fkt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,pP.schemaRefOrVal)(o,r.properties,"properties");y=(0,hP.isOwnProperty)(t,v,g)}else l.length?y=(0,lf.or)(...l.map(v=>(0,lf._)`${g} === ${v}`)):y=lf.nil;return c.length&&(y=(0,lf.or)(y,...c.map(v=>(0,lf._)`${(0,hP.usePattern)(e,v)}.test(${g})`))),(0,lf.not)(y)}function h(g){t.code((0,lf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,pP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,lf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,lf.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:pP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};S4.default=Bkt;var PJ={};Object.defineProperty(PJ,"__esModule",{value:!0});const Ukt=zf,jde=Nn,NB=wt,Bde=S4,zkt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Bde.default.code(new Ukt.KeywordCxt(s,Bde.default,"additionalProperties"));const o=(0,jde.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=NB.mergeEvaluated.props(t,(0,NB.toHash)(o),s.props));const a=o.filter(f=>!(0,NB.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,jde.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};PJ.default=zkt;var DJ={};Object.defineProperty(DJ,"__esModule",{value:!0});const Ude=Nn,mP=Dn,zde=wt,Vde=wt,Vkt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Ude.allSchemaProperties)(n),u=a.filter(m=>(0,zde.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof mP.Name)&&(s.props=(0,Vde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,zde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,mP._)`${(0,Ude.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Vde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,mP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,mP.not)(c),()=>t.break())})})}}};DJ.default=Vkt;var OJ={};Object.defineProperty(OJ,"__esModule",{value:!0});const Hkt=wt,qkt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Hkt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};OJ.default=qkt;var $J={};Object.defineProperty($J,"__esModule",{value:!0});const Wkt=Nn,Gkt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Wkt.validateUnion,error:{message:"must match a schema in anyOf"}};$J.default=Gkt;var MJ={};Object.defineProperty(MJ,"__esModule",{value:!0});const UD=Dn,Ykt=wt,Kkt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,UD._)`{passingSchemas: ${e.passing}}`},Xkt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Kkt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Ykt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,UD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,UD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,UD.Name)})})}}};MJ.default=Xkt;var LJ={};Object.defineProperty(LJ,"__esModule",{value:!0});const Qkt=wt,Jkt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Qkt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};LJ.default=Jkt;var FJ={};Object.defineProperty(FJ,"__esModule",{value:!0});const G$=Dn,bNe=wt,Zkt={message:({params:e})=>(0,G$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,G$._)`{failingKeyword: ${e.ifClause}}`},eRt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Zkt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,bNe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Hde(r,"then"),s=Hde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,G$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,G$._)`${c}`):e.setParams({ifClause:c})}}}};function Hde(e,t){const n=e.schema[t];return n!==void 0&&!(0,bNe.alwaysValidSchema)(e,n)}FJ.default=eRt;var jJ={};Object.defineProperty(jJ,"__esModule",{value:!0});const tRt=wt,nRt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,tRt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};jJ.default=nRt;Object.defineProperty(AJ,"__esModule",{value:!0});const rRt=MS,iRt=IJ,sRt=LS,oRt=kJ,aRt=RJ,uRt=yNe,lRt=NJ,cRt=S4,fRt=PJ,dRt=DJ,hRt=OJ,pRt=$J,mRt=MJ,gRt=LJ,yRt=FJ,vRt=jJ;function bRt(e=!1){const t=[hRt.default,pRt.default,mRt.default,gRt.default,yRt.default,vRt.default,lRt.default,cRt.default,uRt.default,fRt.default,dRt.default];return e?t.push(iRt.default,oRt.default):t.push(rRt.default,sRt.default),t.push(aRt.default),t}AJ.default=bRt;var BJ={},UJ={};Object.defineProperty(UJ,"__esModule",{value:!0});const ts=Dn,_Rt={message:({schemaCode:e})=>(0,ts.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ts._)`{format: ${e}}`},wRt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:_Rt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ts._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ts._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ts._)`${m}.type || "string"`).assign(y,(0,ts._)`${m}.validate`),()=>n.assign(g,(0,ts._)`"string"`).assign(y,m)),e.fail$data((0,ts.or)(v(),_()));function v(){return u.strictSchema===!1?ts.nil:(0,ts._)`${o} && !${y}`}function _(){const w=c.$async?(0,ts._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ts._)`${y}(${r})`,E=(0,ts._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ts._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const x=E instanceof RegExp?(0,ts.regexpCode)(E):u.code.formats?(0,ts._)`${u.code.formats}${(0,ts.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:x});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ts._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ts._)`await ${y}(${r})`}return typeof g=="function"?(0,ts._)`${y}(${r})`:(0,ts._)`${y}.test(${r})`}}}};UJ.default=wRt;Object.defineProperty(BJ,"__esModule",{value:!0});const ERt=UJ,xRt=[ERt.default];BJ.default=xRt;var gx={};Object.defineProperty(gx,"__esModule",{value:!0});gx.contentVocabulary=gx.metadataVocabulary=void 0;gx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];gx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(dJ,"__esModule",{value:!0});const SRt=hJ,TRt=mJ,CRt=AJ,ARt=BJ,qde=gx,IRt=[SRt.default,TRt.default,(0,CRt.default)(),ARt.default,qde.metadataVocabulary,qde.contentVocabulary];dJ.default=IRt;var zJ={},T4={};Object.defineProperty(T4,"__esModule",{value:!0});T4.DiscrError=void 0;var Wde;(function(e){e.Tag="tag",e.Mapping="mapping"})(Wde||(T4.DiscrError=Wde={}));Object.defineProperty(zJ,"__esModule",{value:!0});const cw=Dn,OV=T4,Gde=Ru,kRt=$S,RRt=wt,NRt={message:({params:{discrError:e,tagName:t}})=>e===OV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,cw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},PRt={keyword:"discriminator",type:"object",schemaType:"object",error:NRt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,cw._)`${n}${(0,cw.getProperty)(a)}`);t.if((0,cw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:OV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,cw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:OV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,cw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,RRt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=Gde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof Gde.SchemaEnv&&(E=E.schema),E===void 0)throw new kRt.default(s.opts.uriResolver,s.baseId,S)}const x=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(x,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const x of w.enum)_(x,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};zJ.default=PRt;const DRt="http://json-schema.org/draft-07/schema#",ORt="http://json-schema.org/draft-07/schema#",$Rt="Core schema meta-schema",MRt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},LRt=["object","boolean"],FRt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},jRt={$schema:DRt,$id:ORt,title:$Rt,definitions:MRt,type:LRt,properties:FRt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=DRe,r=dJ,i=zJ,s=jRt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=zf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Qk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=$S;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(CV,CV.exports);var BRt=CV.exports;const _Ne=Kl(BRt),URt="#/definitions/StudyConfig",zRt="http://json-schema.org/draft-07/schema#",VRt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},HRt={$ref:URt,$schema:zRt,definitions:VRt},qRt="#/definitions/GlobalConfig",WRt="http://json-schema.org/draft-07/schema#",GRt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},YRt={$ref:qRt,$schema:WRt,definitions:GRt},wNe=new _Ne;wNe.addSchema(YRt);const Yde=wNe.getSchema("#/definitions/GlobalConfig"),ENe=new _Ne;ENe.addSchema(HRt);const PB=ENe.getSchema("#/definitions/StudyConfig");function KRt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function C4(e){return e.baseComponent!==void 0}function XRt(e){const t=eJ.parse(e),n=Yde(t),r=KRt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Yde.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function xNe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):xNe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function QRt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;C4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=Bxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return xNe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function JRt(e){let t=!1,n;try{n=eJ.parse(e),t=PB(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=QRt(n);r=[...PB.errors||[],...s],i=o}else r=PB.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function SNe(){const e=Zm(),{setAlertModal:t}=Xh(),n=Qh();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Kde=Object.prototype.hasOwnProperty;function Xde(e,t,n){for(n of e.keys())if(WC(n,t))return n}function WC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&WC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Xde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Xde(t,i),!i)||!WC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Kde.call(e,n)&&++r&&!Kde.call(t,n)||!(n in t)||!WC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function ZRt(e){var t=I.useRef(e),n=I.useRef(0);return WC(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function eNt(e,t){return I.useEffect(e,ZRt(t))}const tNt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return eNt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Qde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],TNe=["participantId","trialId","trialOrder","responseId"];function VJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function nNt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Tm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=C4(u)&&u.baseComponent&&n.baseComponents?hK({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function rNt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...TNe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await nNt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function iNt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Qde].filter(h=>h!=="meta")),a=Cs(),{value:u,status:l,error:c}=tNt(rNt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);VJ(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return b.jsxs(Yi,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(cY,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Qde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:b.jsx(DQe,{}),variant:"filled"}),b.jsx(Nl,{h:"md"}),b.jsxs(pe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?b.jsxs(qt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(qt.Thead,{children:b.jsx(qt.Tr,{children:u.header.map(h=>b.jsx(qt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!TNe.includes(h)&&b.jsx(Lb,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(jY,{size:16})})]})},h))})}),b.jsx(qt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>b.jsx(qt.Tr,{children:u.header.map(m=>b.jsx(qt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?b.jsx(nS,{variant:"light",children:c.message}):null,b.jsx(Ll,{visible:l==="pending"||l==="idle"})]}),b.jsx(Nl,{h:"sm"}),b.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(Xe,{children:d})}),b.jsx(Nl,{h:"md"}),b.jsxs(ls,{justify:"right",children:[b.jsx(fn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(fn,{leftSection:b.jsx(Wwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function sNt(){const e=H0(),{storageEngine:t}=Cs(),{answers:n}=Yc(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),SNe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(_),o(w)}}v()},[t]);const c=I.useCallback(async()=>{VJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Wb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(Dc,{style:{height:"100%"},children:b.jsx(Nt,{direction:"column",children:r||!g?b.jsx(Xe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(Qa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(Nl,{h:"lg"}),b.jsx(Dc,{children:b.jsx(od,{color:"blue"})})]})})})}function oNt(){return b.jsx(Xe,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function aNt(){var d;const e=H0(),t=Zm(),n=Ly()||"Notfound",r=e.components[n],i=pK();SNe();const{storageEngine:s}=Cs(),o=Qh(),{setAlertModal:a}=Xh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return b.jsx(sNt,{});if(n==="__trainingFailed")return b.jsx(oNt,{});if(n==="Notfound")return b.jsx(Wv,{email:e.uiConfig.contactEmail});const u=C4(r)&&e.baseComponents?hK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return b.jsxs(b.Fragment,{children:[c==="aboveStimulus"&&b.jsx(Qa,{text:l}),b.jsx(h3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),b.jsxs(I.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&b.jsx(aCt,{currentConfig:u}),u.type==="website"&&b.jsx(Bat,{currentConfig:u}),u.type==="image"&&b.jsx(zat,{currentConfig:u}),u.type==="react-component"&&b.jsx(oCt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&b.jsx(Qa,{text:l}),b.jsx(h3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function $V(e){const[t]=MY();return b.jsx($Y,{...e,to:{pathname:e.to,search:t.toString()}})}function CNe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=CNe(o,t,n,r),r.includes(o.orderPath))break}return i}function ANe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=ANe(s,r)}}),n}function uNt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function lNt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Wb(),c=Yh(),f=Zm(),[d,{close:h,open:p}]=CL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?CNe(n,e,r,a.orderPath):-1,{trialId:y}=Em(),v=y===e,_=s?f===g:f===`reviewer-${e}`,w=u?v:_,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return b.jsxs(Po,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[b.jsx(Po.Target,{children:b.jsx(pe,{onMouseEnter:p,onMouseLeave:h,children:b.jsx(e6,{active:w,style:{lineHeight:"32px",height:"32px"},label:b.jsxs(pe,{children:[i&&b.jsx(_Qe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?b.jsx(Xe,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):b.jsx(Xe,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&b.jsx(Po.Dropdown,{onMouseLeave:h,children:b.jsx(Xe,{size:"sm",children:b.jsxs(pe,{children:[m.description&&b.jsxs(pe,{children:[b.jsx(Xe,{fw:900,display:"inline-block",mr:2,children:"Description:"}),b.jsx(Xe,{fw:400,component:"span",children:m.description})]}),m.meta&&b.jsxs(Xe,{children:[b.jsx(Xe,{fw:"900",component:"span",children:"Task Meta: "}),b.jsx(Xe,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function Y$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=x0(e.components);return n&&r&&(o=uNt(x0(e.components),x0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),b.jsx(b.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return b.jsx(lNt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Tm(c).length-ANe(u,c):0,d=Tm(u);return b.jsx(e6,{label:b.jsxs(pe,{style:{opacity:f>0?1:.5},children:[b.jsx(Xe,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?b.jsx(vQe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&b.jsxs(_0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&b.jsx(_0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:b.jsx(pe,{style:{borderLeft:"1px solid #e9ecef"},children:b.jsx(Y$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function INe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Jde({text:e}){return b.jsx(ai,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:b.jsx(Vwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function cNt(){const{sequence:e,metadata:t}=Yc(f=>f),{toggleStudyBrowser:n}=Xh(),r=H0(),i=Qh(),s=Wb(),o=Lwe(`/${s}`),{storageEngine:a}=Cs(),u=I.useMemo(()=>{let f=x0(r.sequence);return f=fK(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return b.jsxs(pi.Aside,{p:"0",children:[b.jsx(pi.Section,{children:b.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[b.jsx(Xe,{size:"md",fw:700,pt:3,children:"Study Browser"}),b.jsx(fn,{variant:"light",leftSection:b.jsx(FY,{size:14}),onClick:()=>INe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),b.jsx(Gm,{onClick:()=>i(n()),mt:1})]})}),b.jsx(pi.Section,{grow:!0,component:bm,p:"xs",pt:0,children:b.jsxs(ns,{value:l,onChange:c,children:[b.jsx(pe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:b.jsxs(ns.List,{grow:!0,children:[b.jsxs(ns.Tab,{value:"participant",children:["Participant View",b.jsx(Jde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),b.jsxs(ns.Tab,{value:"allTrials",children:["All Trials View",b.jsx(Jde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),b.jsx(ns.Panel,{value:"participant",children:b.jsx(Y$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),b.jsx(ns.Panel,{value:"allTrials",children:b.jsx(Y$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function fNt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Yc(E=>E),i=dK(),s=Qh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Xh(),{storageEngine:u}=Cs(),l=Zm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Wb(),y=Lwe(`/${g}`),v=I.useRef(null),[_,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),b.jsx(pi.Header,{p:"md",children:b.jsxs(Ha,{mt:-7,align:"center",children:[b.jsx(Ha.Col,{span:4,children:b.jsxs(Nt,{align:"center",children:[b.jsx(Dy,{w:40,src:`${Vu}${p}`,alt:"Study Logo"}),b.jsx(Nl,{w:"md"}),b.jsx(ui,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),b.jsx(Ha.Col,{span:4,children:m&&b.jsx(aS,{radius:"md",size:"lg",value:f})}),b.jsx(Ha.Col,{span:4,children:b.jsxs(ls,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(ai,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data.",children:b.jsx(_0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(fn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),b.jsxs(Cu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[b.jsx(Cu.Target,{children:b.jsx(Lb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(IQe,{})})}),b.jsxs(Cu.Dropdown,{children:[e&&b.jsx(Cu.Item,{leftSection:b.jsx(BQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),b.jsx(Cu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(OQe,{size:14}),children:"Contact"}),e&&b.jsx(Cu.Item,{leftSection:b.jsx(FY,{size:14}),onClick:()=>INe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function kNe(e,t){var n;return C4(e)&&t.baseComponents?hK({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function dNt(){var u;const e=(u=H0())==null?void 0:u.uiConfig.sidebar,t=H0(),n=Ly(),r=t.components[n],i=I.useMemo(()=>r?kNe(r,t):null,[r,t]),s=pK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&b.jsxs(pi.Section,{bg:"gray.3",p:"md",children:[b.jsxs(Xe,{c:"gray.9",children:[b.jsx(Xe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(Qa,{text:o})]}),b.jsx(kRe,{size:300})]}),b.jsx(pi.Section,{p:"md",children:b.jsx(h3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(h3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function hNt(){const{showHelpText:e,config:t}=Yc(u=>u),n=Qh(),{toggleShowHelpText:r}=Xh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await gK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),b.jsx(Yi,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?b.jsx(Qa,{text:i}):b.jsx(Wv,{path:t.uiConfig.helpTextPath})})}function pNt(){const{alertModal:e}=Yc(o=>o),{setAlertModal:t}=Xh(),n=Qh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),b.jsx(Yi,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:b.jsxs(nS,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(yQe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(Xe,{my:"md",children:e.message}),b.jsx(ls,{w:"100%",justify:"end",children:b.jsx(fn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function mNt(){const e=I.useRef([]),t=H0(),n=t.uiConfig.windowEventDebounceTime??100,r=Yc(d=>d.showStudyBrowser);I.useEffect(()=>{const d=df(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=df(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=df(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=df(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=df(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=df(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=df(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),_=df(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=df(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Cs(),o=Wb(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return b.jsx(Wxe.Provider,{value:e,children:b.jsxs(pi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[b.jsx(dNt,{}),b.jsx(cNt,{}),b.jsx(fNt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),b.jsx(hNt,{}),b.jsx(pNt,{}),b.jsx(pi.Main,{children:b.jsx(nQe,{})})]})})}function gNt(e,t=!1){return typeof e=="number"?Zde(e,t):Zde(e.length,t).map(r=>r.map(i=>e[i]))}function Zde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function RNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=RNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function yNt(e,t){const n=x0(e);return RNe(n,t,"root")}function NNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&NNe(s,t,i,o)})}function vNt(e){const t=[];return NNe(e,t,"",0),t}function ehe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return gNt(i.sort(()=>.5-Math.random()),!0)}function bNt(e){const n=vNt(e.sequence).map(s=>({[s]:ehe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=yNt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=ehe(e,o))})}),i}var _Nt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function wNt(e){const t=await(await fetch(`${Vu}${e}`)).text();return JRt(t)}async function A4(e,t){const n=t.configsList.find(r=>Ywe(r)===e);if(n){const r=t.configs[n];return await wNt(`${r.path}`)}return null}async function ENt(e){const t={},n=e.configsList.filter(i=>_Nt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>A4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function xNt({globalConfig:e}){const t=Wb(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{A4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=Cs(),[c]=MY();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await bNt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(x=>""),v=y instanceof Response?await y.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,_,m),E=await sat(t,n,w.sequence,_,w.answers);u(E),o([{element:b.jsx(mNt,{}),children:[{path:"/",element:b.jsx($V,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(ui,{order:2,mb:8,children:"Error loading config"}),b.jsx(R7,{issues:n.errors,type:"error"})]}):b.jsx(aNt,{})}]}])}h()},[l,n,t,c]);const f=jwe(s);let d=null;return i?s.length===0?d=b.jsx(Ll,{visible:!0}):d=f&&a?b.jsx(qxe.Provider,{value:a,children:b.jsx(Zst,{store:a.store,children:f})}):b.jsx(Wv,{}):d=b.jsx(Wv,{}),d}var the={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},SNt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},HJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(PNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):SNt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new TNt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class TNt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CNt=function(e){const t=PNe(e);return HJ.encodeByteArray(t,!0)},K$=function(e){return CNt(e).replace(/\./g,"")},DNe=function(e){try{return HJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ONe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANt=()=>ONe().__FIREBASE_DEFAULTS__,INt=()=>{if(typeof process>"u"||typeof the>"u")return;const e=the.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kNt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&DNe(e[1]);return t&&JSON.parse(t)},I4=()=>{try{return ANt()||INt()||kNt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},$Ne=e=>{var t,n;return(n=(t=I4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},RNt=e=>{const t=$Ne(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},MNe=()=>{var e;return(e=I4())===null||e===void 0?void 0:e.config},LNe=e=>{var t;return(t=I4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NNt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[K$(JSON.stringify(n)),K$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PNt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function DNt(){var e;const t=(e=I4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ONt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $Nt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MNt(){const e=Fo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function LNt(){return!DNt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qJ(){try{return typeof indexedDB=="object"}catch{return!1}}function FNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jNt="FirebaseError";class rp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=jNt,Object.setPrototypeOf(this,rp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FS.prototype.create)}}class FS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?BNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rp(i,a,r)}}function BNt(e,t){return e.replace(UNt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const UNt=/\{\$([^}]+)}/g;function zNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _I(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(nhe(s)&&nhe(o)){if(!_I(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nhe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function VNt(e,t){const n=new HNt(e,t);return n.subscribe.bind(n)}class HNt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=DB),i.error===void 0&&(i.error=DB),i.complete===void 0&&(i.complete=DB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function DB(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GNt=1e3,YNt=2,KNt=4*60*60*1e3,XNt=.5;function QNt(e,t=GNt,n=YNt){const r=t*Math.pow(n,e),i=Math.round(XNt*r*(Math.random()-.5)*2);return Math.min(KNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e){return e&&e._delegate?e._delegate:e}class $h{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new bI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ePt(t))try{this.getOrInitializeService({instanceIdentifier:j1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=j1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=j1){return this.instances.has(t)}getOptions(t=j1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=j1){return this.component?this.component.multipleInstances?t:j1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZNt(e){return e===j1?void 0:e}function ePt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tPt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new JNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const nPt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},rPt=Gn.INFO,iPt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},sPt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=iPt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class k4{constructor(t){this.name=t,this._logLevel=rPt,this._logHandler=sPt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?nPt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const oPt=(e,t)=>t.some(n=>e instanceof n);let rhe,ihe;function aPt(){return rhe||(rhe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uPt(){return ihe||(ihe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FNe=new WeakMap,MV=new WeakMap,jNe=new WeakMap,OB=new WeakMap,WJ=new WeakMap;function lPt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(I0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&FNe.set(n,e)}).catch(()=>{}),WJ.set(t,e),t}function cPt(e){if(MV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});MV.set(e,t)}let LV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return MV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||jNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function fPt(e){LV=e(LV)}function dPt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call($B(this),t,...n);return jNe.set(r,t.sort?t.sort():[t]),I0(r)}:uPt().includes(e)?function(...t){return e.apply($B(this),t),I0(FNe.get(this))}:function(...t){return I0(e.apply($B(this),t))}}function hPt(e){return typeof e=="function"?dPt(e):(e instanceof IDBTransaction&&cPt(e),oPt(e,aPt())?new Proxy(e,LV):e)}function I0(e){if(e instanceof IDBRequest)return lPt(e);if(OB.has(e))return OB.get(e);const t=hPt(e);return t!==e&&(OB.set(e,t),WJ.set(t,e)),t}const $B=e=>WJ.get(e);function pPt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=I0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(I0(o.result),u.oldVersion,u.newVersion,I0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const mPt=["get","getKey","getAll","getAllKeys","count"],gPt=["put","add","delete","clear"],MB=new Map;function she(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(MB.get(t))return MB.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=gPt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mPt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return MB.set(t,s),s}fPt(e=>({...e,get:(t,n,r)=>she(t,n)||e.get(t,n,r),has:(t,n)=>!!she(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yPt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vPt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vPt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const FV="@firebase/app",ohe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new k4("@firebase/app"),bPt="@firebase/app-compat",_Pt="@firebase/analytics-compat",wPt="@firebase/analytics",EPt="@firebase/app-check-compat",xPt="@firebase/app-check",SPt="@firebase/auth",TPt="@firebase/auth-compat",CPt="@firebase/database",APt="@firebase/database-compat",IPt="@firebase/functions",kPt="@firebase/functions-compat",RPt="@firebase/installations",NPt="@firebase/installations-compat",PPt="@firebase/messaging",DPt="@firebase/messaging-compat",OPt="@firebase/performance",$Pt="@firebase/performance-compat",MPt="@firebase/remote-config",LPt="@firebase/remote-config-compat",FPt="@firebase/storage",jPt="@firebase/storage-compat",BPt="@firebase/firestore",UPt="@firebase/vertexai-preview",zPt="@firebase/firestore-compat",VPt="firebase",HPt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="[DEFAULT]",qPt={[FV]:"fire-core",[bPt]:"fire-core-compat",[wPt]:"fire-analytics",[_Pt]:"fire-analytics-compat",[xPt]:"fire-app-check",[EPt]:"fire-app-check-compat",[SPt]:"fire-auth",[TPt]:"fire-auth-compat",[CPt]:"fire-rtdb",[APt]:"fire-rtdb-compat",[IPt]:"fire-fn",[kPt]:"fire-fn-compat",[RPt]:"fire-iid",[NPt]:"fire-iid-compat",[PPt]:"fire-fcm",[DPt]:"fire-fcm-compat",[OPt]:"fire-perf",[$Pt]:"fire-perf-compat",[MPt]:"fire-rc",[LPt]:"fire-rc-compat",[FPt]:"fire-gcs",[jPt]:"fire-gcs-compat",[BPt]:"fire-fst",[zPt]:"fire-fst-compat",[UPt]:"fire-vertex","fire-js":"fire-js",[VPt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=new Map,WPt=new Map,BV=new Map;function ahe(e,t){try{e.container.addComponent(t)}catch(n){ob.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Mm(e){const t=e.name;if(BV.has(t))return ob.debug(`There were multiple attempts to register component ${t}.`),!1;BV.set(t,e);for(const n of X$.values())ahe(n,e);for(const n of WPt.values())ahe(n,e);return!0}function jS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ih(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},k0=new FS("app","Firebase",GPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YPt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $h("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw k0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=HPt;function BNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:jV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw k0.create("bad-app-name",{appName:String(i)});if(n||(n=MNe()),!n)throw k0.create("no-options");const s=X$.get(i);if(s){if(_I(n,s.options)&&_I(r,s.config))return s;throw k0.create("duplicate-app",{appName:i})}const o=new tPt(i);for(const u of BV.values())o.addComponent(u);const a=new YPt(n,r,o);return X$.set(i,a),a}function GJ(e=jV){const t=X$.get(e);if(!t&&e===jV&&MNe())return BNe();if(!t)throw k0.create("no-app",{appName:e});return t}function Vf(e,t,n){var r;let i=(r=qPt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ob.warn(a.join(" "));return}Mm(new $h(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KPt="firebase-heartbeat-database",XPt=1,wI="firebase-heartbeat-store";let LB=null;function UNe(){return LB||(LB=pPt(KPt,XPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(wI)}catch(n){console.warn(n)}}}}).catch(e=>{throw k0.create("idb-open",{originalErrorMessage:e.message})})),LB}async function QPt(e){try{const n=(await UNe()).transaction(wI),r=await n.objectStore(wI).get(zNe(e));return await n.done,r}catch(t){if(t instanceof rp)ob.warn(t.message);else{const n=k0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ob.warn(n.message)}}}async function uhe(e,t){try{const r=(await UNe()).transaction(wI,"readwrite");await r.objectStore(wI).put(t,zNe(e)),await r.done}catch(n){if(n instanceof rp)ob.warn(n.message);else{const r=k0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ob.warn(r.message)}}}function zNe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPt=1024,ZPt=30*24*60*60*1e3;class eDt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nDt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lhe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ZPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lhe(),{heartbeatsToSend:r,unsentEntries:i}=tDt(this._heartbeatsCache.heartbeats),s=K$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function lhe(){return new Date().toISOString().substring(0,10)}function tDt(e,t=JPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),che(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),che(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nDt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qJ()?FNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return uhe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return uhe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function che(e){return K$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rDt(e){Mm(new $h("platform-logger",t=>new yPt(t),"PRIVATE")),Mm(new $h("heartbeat",t=>new eDt(t),"PRIVATE")),Vf(FV,ohe,e),Vf(FV,ohe,"esm2017"),Vf("fire-js","")}rDt("");function VNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iDt=VNe,HNe=new FS("auth","Firebase",VNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=new k4("@firebase/auth");function sDt(e,...t){Q$.logLevel<=Gn.WARN&&Q$.warn(`Auth (${e_}): ${e}`,...t)}function zD(e,...t){Q$.logLevel<=Gn.ERROR&&Q$.error(`Auth (${e_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(e,...t){throw KJ(e,...t)}function Hf(e,...t){return KJ(e,...t)}function YJ(e,t,n){const r=Object.assign(Object.assign({},iDt()),{[t]:n});return new FS("auth","Firebase",r).create(t,{appName:e.name})}function R0(e){return YJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oDt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Mh(e,"argument-error"),YJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function KJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return HNe.create(e,...t)}function on(e,t,...n){if(!e)throw KJ(t,...n)}function Jp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zD(t),new Error(t)}function Lm(e,t){e||Jp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function aDt(){return fhe()==="http:"||fhe()==="https:"}function fhe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uDt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aDt()||ONt()||"connection"in navigator)?navigator.onLine:!0}function lDt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Lm(n>t,"Short delay should be less than long delay!"),this.isMobile=PNt()||$Nt()}get(){return uDt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(e,t){Lm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cDt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fDt=new eR(3e4,6e4);function R4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function BS(e,t,n,r,i={}){return WNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Zk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),qNe.fetch()(YNe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function WNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},cDt),t);try{const i=new dDt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw gP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw gP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw YJ(e,c,l);Mh(e,c)}}catch(i){if(i instanceof rp)throw i;Mh(e,"network-request-failed",{message:String(i)})}}async function GNe(e,t,n,r,i={}){const s=await BS(e,t,n,r,i);return"mfaPendingCredential"in s&&Mh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function YNe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?XJ(e.config,i):`${e.config.apiScheme}://${i}`}class dDt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hf(this.auth,"network-request-failed")),fDt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hDt(e,t){return BS(e,"POST","/v1/accounts:delete",t)}async function KNe(e,t){return BS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function pDt(e,t=!1){const n=ii(e),r=await n.getIdToken(t),i=QJ(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:GC(FB(i.auth_time)),issuedAtTime:GC(FB(i.iat)),expirationTime:GC(FB(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function FB(e){return Number(e)*1e3}function QJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return zD("JWT malformed, contained fewer than 3 sections"),null;try{const i=DNe(n);return i?JSON.parse(i):(zD("Failed to decode base64 JWT payload"),null)}catch(i){return zD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dhe(e){const t=QJ(e);return on(t,"internal-error"),on(typeof t.exp<"u","internal-error"),on(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof rp&&mDt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function mDt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gDt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=GC(this.lastLoginAt),this.creationTime=GC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await EI(e,KNe(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?XNe(s.providerUserInfo):[],a=vDt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function yDt(e){const t=ii(e);await J$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function vDt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function XNe(e){return e.map(t=>{var{providerId:n}=t,r=lk(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bDt(e,t){const n=await WNe(e,{},async()=>{const r=Zk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=YNe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _Dt(e,t){return BS(e,"POST","/v2/accounts:revokeToken",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){on(t.idToken,"internal-error"),on(typeof t.idToken<"u","internal-error"),on(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):dhe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){on(t.length!==0,"internal-error");const n=dhe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await bDt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gE;return r&&(on(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new gE,this.toJSON())}_performRefresh(){return Jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t){on(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Zp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=lk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gDt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await EI(this,this.stsTokenManager.getToken(this.auth,t));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return pDt(this,t)}reload(){return yDt(this)}_assign(t){this!==t&&(on(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Zp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await J$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ih(this.auth.app))return Promise.reject(R0(this.auth));const t=await this.getIdToken();return await EI(this,hDt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:S}=n;on(_&&S,t,"internal-error");const C=gE.fromJSON(this.name,S);on(typeof _=="string",t,"internal-error"),Eg(f,t.name),Eg(d,t.name),on(typeof w=="boolean",t,"internal-error"),on(typeof E=="boolean",t,"internal-error"),Eg(h,t.name),Eg(p,t.name),Eg(m,t.name),Eg(g,t.name),Eg(y,t.name),Eg(v,t.name);const A=new Zp({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new gE;i.updateFromServerResponse(n);const s=new Zp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await J$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new gE;a.updateFromIdToken(r);const u=new Zp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new zV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hhe=new Map;function em(e){Lm(e instanceof Function,"Expected a class definition");let t=hhe.get(e);return t?(Lm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hhe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}QNe.type="NONE";const phe=QNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(e,t,n){return`firebase:${e}:${t}:${n}`}class yE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=VD(this.userKey,i.apiKey,s),this.fullPersistenceKey=VD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Zp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new yE(em(phe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||em(phe);const o=VD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Zp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new yE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new yE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mhe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ePe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(JNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nPe(t))return"Blackberry";if(rPe(t))return"Webos";if(JJ(t))return"Safari";if((t.includes("chrome/")||ZNe(t))&&!t.includes("edge/"))return"Chrome";if(tPe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JNe(e=Fo()){return/firefox\//i.test(e)}function JJ(e=Fo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ZNe(e=Fo()){return/crios\//i.test(e)}function ePe(e=Fo()){return/iemobile/i.test(e)}function tPe(e=Fo()){return/android/i.test(e)}function nPe(e=Fo()){return/blackberry/i.test(e)}function rPe(e=Fo()){return/webos/i.test(e)}function N4(e=Fo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wDt(e=Fo()){var t;return N4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function EDt(){return MNt()&&document.documentMode===10}function iPe(e=Fo()){return N4(e)||tPe(e)||rPe(e)||nPe(e)||/windows phone/i.test(e)||ePe(e)}function xDt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sPe(e,t=[]){let n;switch(e){case"Browser":n=mhe(Fo());break;case"Worker":n=`${mhe(Fo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${e_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SDt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TDt(e,t={}){return BS(e,"GET","/v2/passwordPolicy",R4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CDt=6;class ADt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:CDt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IDt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ghe(this),this.idTokenSubscription=new ghe(this),this.beforeStateQueue=new SDt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=em(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await KNe(this,{idToken:t}),r=await Zp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ih(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await J$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lDt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ih(this.app))return Promise.reject(R0(this));const n=t?ii(t):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&on(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ih(this.app)?Promise.reject(R0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ih(this.app)?Promise.reject(R0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(em(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await TDt(this),n=new ADt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new FS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _Dt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&em(t)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await yE.create(this,[em(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=sPe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&sDt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tR(e){return ii(e)}class ghe{constructor(t){this.auth=t,this.observer=null,this.addObserver=VNt(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kDt(e){ZJ=e}function RDt(e){return ZJ.loadJS(e)}function NDt(){return ZJ.gapiScript}function PDt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DDt(e,t){const n=jS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_I(s,t??{}))return i;Mh(i,"already-initialized")}return n.initialize({options:t})}function ODt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(em);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function $Dt(e,t,n){const r=tR(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=oPe(t),{host:o,port:a}=MDt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),LDt()}function oPe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function MDt(e){const t=oPe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:yhe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:yhe(o)}}}function yhe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function LDt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aPe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jp("not implemented")}_getIdTokenResponse(t){return Jp("not implemented")}_linkToIdToken(t,n){return Jp("not implemented")}_getReauthenticationResolver(t){return Jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(e,t){return GNe(e,"POST","/v1/accounts:signInWithIdp",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FDt="http://localhost";class ab extends aPe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ab(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=lk(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ab(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return vE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,vE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,vE(t,n)}buildRequest(){const t={requestUri:FDt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Zk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR extends eZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends nR{constructor(){super("facebook.com")}static credential(t){return ab._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.FACEBOOK_SIGN_IN_METHOD="facebook.com";qg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends nR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ab._fromParams({providerId:Hp.PROVIDER_ID,signInMethod:Hp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hp.credentialFromTaggedObject(t)}static credentialFromError(t){return Hp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Hp.credential(n,r)}catch{return null}}}Hp.GOOGLE_SIGN_IN_METHOD="google.com";Hp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends nR{constructor(){super("github.com")}static credential(t){return ab._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wg.credential(t.oauthAccessToken)}catch{return null}}}Wg.GITHUB_SIGN_IN_METHOD="github.com";Wg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends nR{constructor(){super("twitter.com")}static credential(t,n){return ab._fromParams({providerId:Gg.PROVIDER_ID,signInMethod:Gg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gg.credentialFromTaggedObject(t)}static credentialFromError(t){return Gg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gg.credential(n,r)}catch{return null}}}Gg.TWITTER_SIGN_IN_METHOD="twitter.com";Gg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jDt(e,t){return GNe(e,"POST","/v1/accounts:signUp",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Zp._fromIdTokenResponse(t,r,i),o=vhe(r);return new uy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=vhe(r);return new uy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function vhe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BDt(e){var t;if(ih(e.app))return Promise.reject(R0(e));const n=tR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new uy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await jDt(n,{returnSecureToken:!0}),i=await uy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$ extends rp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Z$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Z$(t,n,r,i)}}function uPe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Z$._fromErrorAndOperation(e,s,t,r):s})}async function UDt(e,t,n=!1){const r=await EI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zDt(e,t,n=!1){const{auth:r}=e;if(ih(r.app))return Promise.reject(R0(r));const i="reauthenticate";try{const s=await EI(e,uPe(r,i,t,e),n);on(s.idToken,r,"internal-error");const o=QJ(s.idToken);on(o,r,"internal-error");const{sub:a}=o;return on(e.uid===a,r,"user-mismatch"),uy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VDt(e,t,n=!1){if(ih(e.app))return Promise.reject(R0(e));const r="signIn",i=await uPe(e,r,t),s=await uy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function HDt(e,t,n,r){return ii(e).onIdTokenChanged(t,n,r)}function qDt(e,t,n){return ii(e).beforeAuthStateChanged(t,n)}function WDt(e,t,n,r){return ii(e).onAuthStateChanged(t,n,r)}function GDt(e){return ii(e).signOut()}const eM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lPe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eM,"1"),this.storage.removeItem(eM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YDt(){const e=Fo();return JJ(e)||N4(e)}const KDt=1e3,XDt=10;class cPe extends lPe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=YDt()&&xDt(),this.fallbackToPolling=iPe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);EDt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,XDt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},KDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}cPe.type="LOCAL";const QDt=cPe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fPe extends lPe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}fPe.type="SESSION";const dPe=fPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JDt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new P4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await JDt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}P4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZDt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=tZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){return window}function eOt(e){vh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hPe(){return typeof vh().WorkerGlobalScope<"u"&&typeof vh().importScripts=="function"}async function tOt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nOt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function rOt(){return hPe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pPe="firebaseLocalStorageDb",iOt=1,tM="firebaseLocalStorage",mPe="fbase_key";class rR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function D4(e,t){return e.transaction([tM],t?"readwrite":"readonly").objectStore(tM)}function sOt(){const e=indexedDB.deleteDatabase(pPe);return new rR(e).toPromise()}function VV(){const e=indexedDB.open(pPe,iOt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(tM,{keyPath:mPe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(tM)?t(r):(r.close(),await sOt(),t(await VV()))})})}async function bhe(e,t,n){const r=D4(e,!0).put({[mPe]:t,value:n});return new rR(r).toPromise()}async function oOt(e,t){const n=D4(e,!1).get(t),r=await new rR(n).toPromise();return r===void 0?null:r.value}function _he(e,t){const n=D4(e,!0).delete(t);return new rR(n).toPromise()}const aOt=800,uOt=3;class gPe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>uOt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hPe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P4._getInstance(rOt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await tOt(),!this.activeServiceWorker)return;this.sender=new ZDt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nOt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await VV();return await bhe(t,eM,"1"),await _he(t,eM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bhe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>oOt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_he(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=D4(i,!1).getAll();return new rR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aOt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gPe.type="LOCAL";const lOt=gPe;new eR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yPe(e,t){return t?em(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ extends aPe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return vE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return vE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return vE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function cOt(e){return VDt(e.auth,new nZ(e),e.bypassAuthState)}function fOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),zDt(n,new nZ(e),e.bypassAuthState)}async function dOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),UDt(n,new nZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return cOt;case"linkViaPopup":case"linkViaRedirect":return dOt;case"reauthViaPopup":case"reauthViaRedirect":return fOt;default:Mh(this.auth,"internal-error")}}resolve(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hOt=new eR(2e3,1e4);async function pOt(e,t,n){if(ih(e.app))return Promise.reject(Hf(e,"operation-not-supported-in-this-environment"));const r=tR(e);oDt(e,t,eZ);const i=yPe(r,n);return new vv(r,"signInViaPopup",t,i).executeNotNull()}class vv extends vPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,vv.currentPopupAction&&vv.currentPopupAction.cancel(),vv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return on(t,this.auth,"internal-error"),t}async onExecution(){Lm(this.filter.length===1,"Popup operations only handle one event");const t=tZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hOt.get())};t()}}vv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mOt="pendingRedirect",HD=new Map;class gOt extends vPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=HD.get(this.auth._key());if(!t){try{const r=await yOt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}HD.set(this.auth._key(),t)}return this.bypassAuthState||HD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yOt(e,t){const n=_Ot(t),r=bOt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function vOt(e,t){HD.set(e._key(),t)}function bOt(e){return em(e._redirectPersistence)}function _Ot(e){return VD(mOt,e.config.apiKey,e.name)}async function wOt(e,t,n=!1){if(ih(e.app))return Promise.reject(R0(e));const r=tR(e),i=yPe(r,t),o=await new gOt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EOt=10*60*1e3;class xOt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SOt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!bPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=EOt&&this.cachedEventUids.clear(),this.cachedEventUids.has(whe(t))}saveEventToCache(t){this.cachedEventUids.add(whe(t)),this.lastProcessedEventTime=Date.now()}}function whe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function bPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function SOt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TOt(e,t={}){return BS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const COt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AOt=/^https?/;async function IOt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await TOt(e);for(const n of t)try{if(kOt(n))return}catch{}Mh(e,"unauthorized-domain")}function kOt(e){const t=UV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AOt.test(n))return!1;if(COt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ROt=new eR(3e4,6e4);function Ehe(){const e=vh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function NOt(e){return new Promise((t,n)=>{var r,i,s;function o(){Ehe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ehe(),n(Hf(e,"network-request-failed"))},timeout:ROt.get()})}if(!((i=(r=vh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=vh().gapi)===null||s===void 0)&&s.load)o();else{const a=PDt("iframefcb");return vh()[a]=()=>{gapi.load?o():n(Hf(e,"network-request-failed"))},RDt(`${NDt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw qD=null,t})}let qD=null;function POt(e){return qD=qD||NOt(e),qD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DOt=new eR(5e3,15e3),OOt="__/auth/iframe",$Ot="emulator/auth/iframe",MOt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LOt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FOt(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?XJ(t,$Ot):`https://${e.config.authDomain}/${OOt}`,r={apiKey:t.apiKey,appName:e.name,v:e_},i=LOt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Zk(r).slice(1)}`}async function jOt(e){const t=await POt(e),n=vh().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:FOt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MOt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Hf(e,"network-request-failed"),a=vh().setTimeout(()=>{s(o)},DOt.get());function u(){vh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BOt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UOt=500,zOt=600,VOt="_blank",HOt="http://localhost";class xhe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qOt(e,t,n,r=UOt,i=zOt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},BOt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Fo().toLowerCase();n&&(a=ZNe(l)?VOt:n),JNe(l)&&(t=t||HOt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(wDt(l)&&a!=="_self")return WOt(t||"",a),new xhe(null);const f=window.open(t||"",a,c);on(f,e,"popup-blocked");try{f.focus()}catch{}return new xhe(f)}function WOt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GOt="__/auth/handler",YOt="emulator/auth/handler",KOt=encodeURIComponent("fac");async function She(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:e_,eventId:i};if(t instanceof eZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof nR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${KOt}=${encodeURIComponent(u)}`:"";return`${XOt(e)}?${Zk(a).slice(1)}${l}`}function XOt({config:e}){return e.emulator?XJ(e,YOt):`https://${e.authDomain}/${GOt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="webStorageSupport";class QOt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dPe,this._completeRedirectFn=wOt,this._overrideRedirectResult=vOt}async _openPopup(t,n,r,i){var s;Lm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await She(t,n,r,UV(),i);return qOt(t,o,tZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await She(t,n,r,UV(),i);return eOt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Lm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await jOt(t),r=new xOt(t);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(jB,{type:jB},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[jB];o!==void 0&&n(!!o),Mh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IOt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return iPe()||JJ()||N4()}}const _Pe=QOt;var The="@firebase/auth",Che="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JOt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZOt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e3t(e){Mm(new $h("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;on(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sPe(e)},l=new IDt(r,i,s,u);return ODt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Mm(new $h("auth-internal",t=>{const n=tR(t.getProvider("auth").getImmediate());return(r=>new JOt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vf(The,Che,ZOt(e)),Vf(The,Che,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3t=5*60,n3t=LNe("authIdTokenMaxAge")||t3t;let Ahe=null;const r3t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>n3t)return;const i=n==null?void 0:n.token;Ahe!==i&&(Ahe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nM(e=GJ()){const t=jS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=DDt(e,{popupRedirectResolver:_Pe,persistence:[lOt,QDt,dPe]}),r=LNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=r3t(s.toString());qDt(n,o,()=>o(n.currentUser)),HDt(n,a=>o(a))}}const i=$Ne("auth");return i&&$Dt(n,`http://${i}`),n}function i3t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}kDt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Hf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",i3t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e3t("Browser");var s3t="firebase",o3t="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vf(s3t,o3t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wPe="firebasestorage.googleapis.com",EPe="storageBucket",a3t=2*60*1e3,u3t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends rp{constructor(t,n,r=0){super(BB(t),`Firebase Storage: ${n} (${BB(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ji.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return BB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qi||(Qi={}));function BB(e){return"storage/"+e}function rZ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ji(Qi.UNKNOWN,e)}function l3t(e){return new Ji(Qi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function c3t(e){return new Ji(Qi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function f3t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ji(Qi.UNAUTHENTICATED,e)}function d3t(){return new Ji(Qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h3t(e){return new Ji(Qi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function p3t(){return new Ji(Qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m3t(){return new Ji(Qi.CANCELED,"User canceled the upload/download.")}function g3t(e){return new Ji(Qi.INVALID_URL,"Invalid URL '"+e+"'.")}function y3t(e){return new Ji(Qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function v3t(){return new Ji(Qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EPe+"' property when initializing the app?")}function b3t(){return new Ji(Qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _3t(){return new Ji(Qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w3t(e){return new Ji(Qi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function HV(e){return new Ji(Qi.INVALID_ARGUMENT,e)}function xPe(){return new Ji(Qi.APP_DELETED,"The Firebase app was deleted.")}function E3t(e){return new Ji(Qi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function YC(e,t){return new Ji(Qi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function WT(e){throw new Ji(Qi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Wa.makeFromUrl(t,n)}catch{return new Wa(t,"")}if(r.path==="")return r;throw y3t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===wPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const E=_[w],x=E.regex.exec(t);if(x){const S=x[E.indices.bucket];let C=x[E.indices.path];C||(C=""),r=new Wa(S,C),E.postModify(r);break}}if(r==null)throw g3t(t);return r}}class x3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function T3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3t(e){return e!==void 0}function A3t(e){return typeof e=="object"&&!Array.isArray(e)}function iZ(e){return typeof e=="string"||e instanceof String}function Ihe(e){return sZ()&&e instanceof Blob}function sZ(){return typeof Blob<"u"}function qV(e,t,n,r){if(r<t)throw HV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw HV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function SPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kv;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(kv||(kv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new yP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===kv.NO_ERROR,u=s.getStatus();if(!a||I3t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===kv.ABORT;r(!1,new yP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new yP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());C3t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=rZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?xPe():m3t();o(u)}else{const u=p3t();o(u)}};this.canceled_?n(!1,new yP(!1,null,!0)):this.backoffId_=S3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&T3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function R3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function N3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function P3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function D3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function O3t(e,t,n,r,i,s,o=!0){const a=SPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return P3t(l,t),R3t(l,n),N3t(l,s),D3t(l,r),new k3t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M3t(...e){const t=$3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(sZ())return new Blob(e);throw new Ji(Qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function L3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3t(e){if(typeof atob>"u")throw w3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class UB{constructor(t,n){this.data=t,this.contentType=n||null}}function j3t(e,t){switch(e){case sh.RAW:return new UB(TPe(t));case sh.BASE64:case sh.BASE64URL:return new UB(CPe(e,t));case sh.DATA_URL:return new UB(U3t(t),z3t(t))}throw rZ()}function TPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function B3t(e){let t;try{t=decodeURIComponent(e)}catch{throw YC(sh.DATA_URL,"Malformed data URL.")}return TPe(t)}function CPe(e,t){switch(e){case sh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw YC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case sh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw YC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=F3t(t)}catch(i){throw i.message.includes("polyfill")?i:YC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class APe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw YC(sh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=V3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function U3t(e){const t=new APe(e);return t.base64?CPe(sh.BASE64,t.rest):B3t(t.rest)}function z3t(e){return new APe(e).contentType}function V3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,n){let r=0,i="";Ihe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ihe(this.data_)){const r=this.data_,i=L3t(r,t,n);return i===null?null:new Yg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Yg(r,!0)}}static getBlob(...t){if(sZ()){const n=t.map(r=>r instanceof Yg?r.data_:r);return new Yg(M3t.apply(null,n))}else{const n=t.map(o=>iZ(o)?j3t(sh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(e){let t;try{t=JSON.parse(e)}catch{return null}return A3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function q3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function IPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3t(e,t){return t}class Da{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||W3t}}let vP=null;function G3t(e){return!iZ(e)||e.length<2?e:IPe(e)}function kPe(){if(vP)return vP;const e=[];e.push(new Da("bucket")),e.push(new Da("generation")),e.push(new Da("metageneration")),e.push(new Da("name","fullPath",!0));function t(s,o){return G3t(o)}const n=new Da("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Da("size");return i.xform=r,e.push(i),e.push(new Da("timeCreated")),e.push(new Da("updated")),e.push(new Da("md5Hash",null,!0)),e.push(new Da("cacheControl",null,!0)),e.push(new Da("contentDisposition",null,!0)),e.push(new Da("contentEncoding",null,!0)),e.push(new Da("contentLanguage",null,!0)),e.push(new Da("contentType",null,!0)),e.push(new Da("metadata","customMetadata",!0)),vP=e,vP}function Y3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Wa(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function K3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Y3t(r,e),r}function RPe(e,t,n){const r=oZ(t);return r===null?null:K3t(e,r,n)}function X3t(e,t,n,r){const i=oZ(t);if(i===null||!iZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=iR(d,n,r),p=SPe({alt:"media",token:l});return h+p})[0]}function Q3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const khe="prefixes",Rhe="items";function J3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[khe])for(const i of n[khe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Wa(t,s));r.prefixes.push(o)}if(n[Rhe])for(const i of n[Rhe]){const s=e._makeStorageReference(new Wa(t,i.name));r.items.push(s)}return r}function Z3t(e,t,n){const r=oZ(n);return r===null?null:J3t(e,t,r)}class O4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(e){if(!e)throw rZ()}function e$t(e,t){function n(r,i){const s=RPe(e,i,t);return aZ(s!==null),s}return n}function t$t(e,t){function n(r,i){const s=Z3t(e,t,i);return aZ(s!==null),s}return n}function n$t(e,t){function n(r,i){const s=RPe(e,i,t);return aZ(s!==null),X3t(s,i,e.host,e._protocol)}return n}function uZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=d3t():i=f3t():n.getStatus()===402?i=c3t(e.bucket):n.getStatus()===403?i=h3t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function NPe(e){const t=uZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=l3t(e.path)),s.serverResponse=i.serverResponse,s}return n}function r$t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=iR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new O4(a,u,t$t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=uZ(t),c}function i$t(e,t,n){const r=t.fullServerUrl(),i=iR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new O4(i,s,n$t(e,n),o);return a.errorHandler=NPe(t),a}function s$t(e,t){const n=t.fullServerUrl(),r=iR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new O4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=NPe(t),a}function o$t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function a$t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=o$t(null,t)),r}function u$t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=a$t(t,r,i),c=Q3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Yg.getBlob(f,r,d);if(h===null)throw b3t();const p={name:l.fullPath},m=iR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new O4(m,g,e$t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=uZ(t),v}class l$t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kv.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kv.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kv.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw WT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw WT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw WT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw WT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw WT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class c$t extends l$t{initXhr(){this.xhr_.responseType="text"}}function $4(){return new c$t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t,n){this._service=t,n instanceof Wa?this._location=n:this._location=Wa.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ub(t,n)}get root(){const t=new Wa(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IPe(this._location.path)}get storage(){return this._service}get parent(){const t=H3t(this._location.path);if(t===null)return null;const n=new Wa(this._location.bucket,t);return new ub(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw E3t(t)}}function f$t(e,t,n){e._throwIfRoot("uploadBytes");const r=u$t(e.storage,e._location,kPe(),new Yg(t,!0),n);return e.storage.makeRequestWithTokens(r,$4).then(i=>({metadata:i,ref:e}))}function d$t(e){const t={prefixes:[],items:[]};return PPe(e,t).then(()=>t)}async function PPe(e,t,n){const i=await h$t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await PPe(e,t,i.nextPageToken)}function h$t(e,t){t!=null&&typeof t.maxResults=="number"&&qV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=r$t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,$4)}function p$t(e){e._throwIfRoot("getDownloadURL");const t=i$t(e.storage,e._location,kPe());return e.storage.makeRequestWithTokens(t,$4).then(n=>{if(n===null)throw _3t();return n})}function m$t(e){e._throwIfRoot("deleteObject");const t=s$t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,$4)}function g$t(e,t){const n=q3t(e._location.path,t),r=new Wa(e._location.bucket,n);return new ub(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$t(e){return/^[A-Za-z]+:\/\//.test(e)}function v$t(e,t){return new ub(e,t)}function DPe(e,t){if(e instanceof lZ){const n=e;if(n._bucket==null)throw v3t();const r=new ub(n,n._bucket);return t!=null?DPe(r,t):r}else return t!==void 0?g$t(e,t):e}function b$t(e,t){if(t&&y$t(t)){if(e instanceof lZ)return v$t(e,t);throw HV("To use ref(service, url), the first argument must be a Storage instance.")}else return DPe(e,t)}function Nhe(e,t){const n=t==null?void 0:t[EPe];return n==null?null:Wa.makeFromBucketSpec(n,e)}function _$t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:NNt(i,e.app.options.projectId))}class lZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=wPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a3t,this._maxUploadRetryTime=u3t,this._requests=new Set,i!=null?this._bucket=Wa.makeFromBucketSpec(i,this._host):this._bucket=Nhe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Wa.makeFromBucketSpec(this._url,t):this._bucket=Nhe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ub(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new x3t(xPe());{const o=O3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Phe="@firebase/storage",Dhe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OPe="storage";function zB(e,t,n){return e=ii(e),f$t(e,t,n)}function GT(e){return e=ii(e),d$t(e)}function VB(e){return e=ii(e),p$t(e)}function Ohe(e){return e=ii(e),m$t(e)}function oc(e,t){return e=ii(e),b$t(e,t)}function w$t(e=GJ(),t){e=ii(e);const r=jS(e,OPe).getImmediate({identifier:t}),i=RNt("storage");return i&&E$t(r,...i),r}function E$t(e,t,n,r={}){_$t(e,t,n,r)}function x$t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new lZ(n,r,i,t,e_)}function S$t(){Mm(new $h(OPe,x$t,"PUBLIC").setMultipleInstances(!0)),Vf(Phe,Dhe,""),Vf(Phe,Dhe,"esm2017")}S$t();var $he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rv,$Pe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(k,N,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return C.prototype[N].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var k=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)k[N]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],N=S.g[2];var O=S.g[3],D=C+(O^A&(N^O))+k[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[2]+606105819&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[3]+3250441966&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[6]+2821735955&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[7]+4249261313&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[10]+4294925233&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[11]+2304563134&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[14]+2792965006&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[15]+1236535329&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(N^O&(A^N))+k[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[11]+643717713&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[0]+3921069994&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[15]+3634488961&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[4]+3889429448&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[3]+4107603335&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[8]+1163531501&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[7]+1735328473&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[12]+2368359562&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(A^N^O)+k[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[11]+1839030562&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[14]+4259657740&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[7]+4139469664&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[10]+3200236656&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[3]+3572445317&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[6]+76029189&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[15]+530742520&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[2]+3299628645&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(N^(A|~O))+k[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[14]+2878612391&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[5]+4237533241&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[10]+4293915773&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[1]+2240044497&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[6]+2734768916&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[13]+1309151649&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[2]+718787259&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,k=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=A;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(k[N++]=S.charCodeAt(O++),N==this.blockSize){i(this,k),N=0;break}}else for(;O<C;)if(k[N++]=S[O++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var k=0;32>k;k+=8)S[A++]=this.g[C]>>>k&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],k=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;k&&O==C||(A[N]=O,k=!1)}this.g=A}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],A=1,k=0;S>=A;k++)C[k]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),k=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),D=parseInt(S.substring(N,N+O),C);8>O?(O=l(Math.pow(C,O)),k=k.j(O).add(l(D))):(k=k.j(A),k=k.add(l(D)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var k=this.i(A);S+=(0<=k?k:4294967296+k)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),A=this,k="";;){var N=w(A,C).g;A=y(A,N.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=N,p(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],k=0;k<C;k++)A[k]=~S.g[k];return new o(A,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0,N=0;N<=C;N++){var O=k+(this.i(N)&65535)+(S.i(N)&65535),D=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=D>>>16,O&=65535,D&=65535,A[N]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],k=0;k<2*C;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var O=this.i(k)>>>16,D=this.i(k)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;A[2*k+2*N]+=D*F,v(A,2*k+2*N),A[2*k+2*N+1]+=O*F,v(A,2*k+2*N+1),A[2*k+2*N+1]+=D*$,v(A,2*k+2*N+1),A[2*k+2*N+2]+=O*$,v(A,2*k+2*N+2)}for(k=0;k<C;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=C;k<2*C;k++)A[k]=0;return new o(A,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function _(S,C){this.g=S,this.h=C}function w(S,C){if(p(C))throw Error("division by zero");if(p(S))return new _(f,f);if(m(S))return C=w(g(S),C),new _(g(C.g),g(C.h));if(m(C))return C=w(S,g(C)),new _(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=C;0>=k.l(S);)A=E(A),k=E(k);var N=x(A,1),O=x(k,1);for(k=x(k,2),A=x(A,2);!p(k);){var D=O.add(k);0>=D.l(S)&&(N=N.add(A),O=D),k=x(k,1),A=x(A,1)}return C=y(S,N.j(C)),new _(N,C)}for(N=f;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(A),D=O.j(C);m(D)||0<D.l(S);)A-=k,O=l(A),D=O.j(C);p(O)&&(O=d),N=N.add(O),S=y(S,D)}return new _(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)&S.i(k);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)|S.i(k);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)^S.i(k);return new o(A,this.h^S.h)};function E(S){for(var C=S.g.length+1,A=[],k=0;k<C;k++)A[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(A,S.h)}function x(S,C){var A=C>>5;C%=32;for(var k=S.g.length-A,N=[],O=0;O<k;O++)N[O]=0<C?S.i(O+A)>>>C|S.i(O+A+1)<<32-C:S.i(O+A);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$Pe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Rv=o}).apply(typeof $he<"u"?$he:typeof self<"u"?self:typeof window<"u"?window:{});var bP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MPe,LPe,H2,FPe,WD,WV,jPe,BPe,UPe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,L,V){return T==Array.prototype||T==Object.prototype||(T[L]=V.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof bP=="object"&&bP];for(var L=0;L<T.length;++L){var V=T[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(T,L){if(L)e:{var V=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var we=T[Q];if(!(we in V))break e;V=V[we]}T=T[T.length-1],Q=V[T],L=L(Q),L!=Q&&L!=null&&t(V,T,{configurable:!0,writable:!0,value:L})}}function s(T,L){T instanceof String&&(T+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<T.length){var De=V++;return{value:L(De,T[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(T){return T||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var L=typeof T;return L=L!="object"?L:T?Array.isArray(T)?"array":L:"null",L=="array"||L=="object"&&typeof T.length=="number"}function l(T){var L=typeof T;return L=="object"&&T!=null||L=="function"}function c(T,L,V){return T.call.apply(T.bind,arguments)}function f(T,L,V){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),T.apply(L,we)}}return function(){return T.apply(L,arguments)}}function d(T,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,L){function V(){}V.prototype=L.prototype,T.aa=L.prototype,T.prototype=new V,T.prototype.constructor=T,T.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)ft[Gr-2]=arguments[Gr];return L.prototype[we].apply(Q,ft)}}function m(T){const L=T.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=T[Q];return V}return[]}function g(T,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=T.length||0,De=Q.length||0;T.length=we+De;for(let ft=0;ft<De;ft++)T[we+ft]=Q[ft]}else T.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(T){return/^[\s\xa0]*$/.test(T)}function _(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function x(T,L,V){for(const Q in T)L.call(V,T[Q],Q,T)}function S(T,L){for(const V in T)L.call(void 0,T[V],V,T)}function C(T){const L={};for(const V in T)L[V]=T[V];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(T,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)T[V]=Q[V];for(let De=0;De<A.length;De++)V=A[De],Object.prototype.hasOwnProperty.call(Q,V)&&(T[V]=Q[V])}}function N(T){var L=1;T=T.split(":");const V=[];for(;0<L&&T.length;)V.push(T.shift()),L--;return T.length&&V.push(T.join(":")),V}function O(T){a.setTimeout(()=>{throw T},0)}function D(){var T=H;let L=null;return T.g&&(L=T.g,T.g=T.g.next,T.g||(T.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,T=>T.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,P=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(z)}};var z=()=>{for(var T;T=D();){try{T.h.call(T.g)}catch(V){O(V)}var L=F;L.j(T),100>L.h&&(L.h++,T.next=L.g,L.g=T)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,L){this.type=T,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,L=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return T}();function G(T,L){if(j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var V=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=L,L=T.relatedTarget){if(E){e:{try{w(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=T.fromElement:V=="mouseout"&&(L=T.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ne[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(T,L,V,Q,we){this.listener=T,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ie(T){this.src=T,this.g={},this.h=0}Ie.prototype.add=function(T,L,V,Q,we){var De=T.toString();T=this.g[De],T||(T=this.g[De]=[],this.h++);var ft=Ke(T,L,Q,we);return-1<ft?(L=T[ft],V||(L.fa=!1)):(L=new he(L,this.src,De,!!Q,we),L.fa=V,T.push(L)),L};function be(T,L){var V=L.type;if(V in T.g){var Q=T.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ve(L),T.g[V].length==0&&(delete T.g[V],T.h--))}}function Ke(T,L,V,Q){for(var we=0;we<T.length;++we){var De=T[we];if(!De.da&&De.listener==L&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(T,L,V,Q,we){if(Array.isArray(L)){for(var De=0;De<L.length;De++)it(T,L[De],V,Q,we);return null}return V=vt(V),T&&T[ce]?T.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(T,L,V,!1,Q,we)}function _e(T,L,V,Q,we,De){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Gr=ge(T);if(Gr||(T[Ue]=Gr=new Ie(T)),V=Gr.add(L,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=T,Q.listener=V,T.addEventListener)q||(we=ft),we===void 0&&(we=!1),T.addEventListener(L.toString(),Q,we);else if(T.attachEvent)T.attachEvent(Ot(L.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function T(V){return L.call(T.src,T.listener,V)}const L=We;return T}function ze(T,L,V,Q,we){if(Array.isArray(L))for(var De=0;De<L.length;De++)ze(T,L[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),T&&T[ce]?(T=T.i,L=String(L).toString(),L in T.g&&(De=T.g[L],V=Ke(De,V,Q,we),-1<V&&(ve(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete T.g[L],T.h--)))):T&&(T=ge(T))&&(L=T.g[L.toString()],T=-1,L&&(T=Ke(L,V,Q,we)),(V=-1<T?L[T]:null)&&ct(V))}function ct(T){if(typeof T!="number"&&T&&!T.da){var L=T.src;if(L&&L[ce])be(L.i,T);else{var V=T.type,Q=T.proxy;L.removeEventListener?L.removeEventListener(V,Q,T.capture):L.detachEvent?L.detachEvent(Ot(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,T),V.h==0&&(V.src=null,L[Ue]=null)):ve(T)}}}function Ot(T){return T in yt?yt[T]:yt[T]="on"+T}function We(T,L){if(T.da)T=!0;else{L=new G(L,this);var V=T.listener,Q=T.ha||T.src;T.fa&&ct(T),T=V.call(Q,L)}return T}function ge(T){return T=T[Ue],T instanceof Ie?T:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(T){return typeof T=="function"?T:(T[ht]||(T[ht]=function(L){return T.handleEvent(L)}),T[ht])}function me(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(me,W),me.prototype[ce]=!0,me.prototype.removeEventListener=function(T,L,V,Q){ze(this,T,L,V,Q)};function Ae(T,L){var V,Q=T.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(T=T.M,Q=L.type||L,typeof L=="string")L=new j(L,T);else if(L instanceof j)L.target=L.target||T;else{var we=L;L=new j(Q,T),k(L,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=L.g=V[De];we=He(ft,Q,!0,L)&&we}if(ft=L.g=T,we=He(ft,Q,!0,L)&&we,we=He(ft,Q,!1,L)&&we,V)for(De=0;De<V.length;De++)ft=L.g=V[De],we=He(ft,Q,!1,L)&&we}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var T=this.i,L;for(L in T.g){for(var V=T.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete T.g[L],T.h--}}this.F=null},me.prototype.K=function(T,L,V,Q){return this.i.add(String(T),L,!1,V,Q)},me.prototype.L=function(T,L,V,Q){return this.i.add(String(T),L,!0,V,Q)};function He(T,L,V,Q){if(L=T.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,De=0;De<L.length;++De){var ft=L[De];if(ft&&!ft.da&&ft.capture==V){var Gr=ft.listener,go=ft.ha||ft.src;ft.fa&&be(T.i,ft),we=Gr.call(go,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(T,L,V){if(typeof T=="function")V&&(T=d(T,V));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(T,L||0)}function _t(T){T.g=ut(()=>{T.g=null,T.i&&(T.i=!1,_t(T))},T.l);const L=T.h;T.h=null,T.m.apply(null,L)}class Ln extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(T){W.call(this),this.h=T,this.g={}}p(Cr,W);var Fn=[];function cr(T){x(T.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},T),T.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),cr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,An=a.JSON.parse,nr=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function rr(){}rr.prototype.h=null;function zo(T){return T.h||(T.h=T.i())}function $i(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Ar(){j.call(this,"c")}p(Ar,j);var gs={},pp=null;function cl(){return pp=pp||new me}gs.La="serverreachability";function _d(T){j.call(this,gs.La,T)}p(_d,j);function xr(T){const L=cl();Ae(L,new _d(L))}gs.STAT_EVENT="statevent";function Ii(T,L){j.call(this,gs.STAT_EVENT,T),this.stat=L}p(Ii,j);function Qr(T){const L=cl();Ae(L,new Ii(L,T))}gs.Ma="timingevent";function cu(T,L){j.call(this,gs.Ma,T),this.size=L}p(cu,j);function Ia(T,L){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},L)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function oe(T,L,V,Q,we,De){T.info(function(){if(T.g)if(De)for(var ft="",Gr=De.split("&"),go=0;go<Gr.length;go++){var fr=Gr[go].split("=");if(1<fr.length){var Wo=fr[0];fr=fr[1];var Go=Wo.split("_");ft=2<=Go.length&&Go[1]=="type"?ft+(Wo+"="+fr+"&"):ft+(Wo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(T,L,V,Q,we,De,ft){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+De+" "+ft})}function ae(T,L,V,Q){T.info(function(){return"XMLHTTP TEXT ("+L+"): "+Te(T,V)+(Q?" "+Q:"")})}function Ce(T,L){T.info(function(){return"TIMEOUT: "+L})}ka.prototype.info=function(){};function Te(T,L){if(!T.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(T=0;T<V.length;T++)if(Array.isArray(V[T])){var Q=V[T];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return gn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ht=new On;function jn(T,L,V,Q){this.j=T,this.i=L,this.l=V,this.R=Q||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},Ir={};function Vt(T,L,V){T.L=1,T.v=Bn(Ge(L)),T.m=V,T.P=!0,sr(T,null)}function sr(T,L){T.F=Date.now(),ki(T),T.A=Ge(T.v);var V=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),eN(V.i,"t",Q),T.C=0,V=T.j.J,T.h=new pn,T.g=Gie(T.j,V?L:null,!T.m),0<T.O&&(T.M=new Ln(d(T.Y,T,T.g),T.O)),L=T.U,V=T.g,Q=T.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var De=0;De<we.length;De++){var ft=it(V,we[De],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,L)):(T.u="GET",T.g.ea(T.A,T.u,null,L)),xr(),oe(T.i,T.u,T.A,T.l,T.R,T.m)}jn.prototype.ca=function(T){T=T.target;const L=this.M;L&&Zi(T)==3?L.j():this.Y(T)},jn.prototype.Y=function(T){try{if(T==this.g)e:{const Go=Zi(this.g);var L=this.g.Ba();const S_=this.g.Z();if(!(3>Go)&&(Go!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Go!=4||L==7||(L==8||0>=S_?xr(3):xr(2)),Jr(this);var V=this.g.Z();this.X=V;t:if(Hr(this)){var Q=qo(this.g);T="";var we=Q.length,De=Zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),mo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,T+=this.h.i.decode(Q[L],{stream:!(De&&L==we-1)});Q.length=0,this.h.g+=T,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Go,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,go=this.g;if((Gr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var fr=Gr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Qr(12),Li(this),mo(this);break e}}if(this.P){V=!0;let ef;for(;!this.J&&this.C<ft.length;)if(ef=Jn(this,ft),ef==Ir){Go==4&&(this.s=4,Qr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(ef==ir){this.s=4,Qr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,ef,null),Fi(this,ef);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Go!=4||ft.length!=0||this.h.h||(this.s=1,Qr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),mo(this);else if(0<ft.length&&!this.W){this.W=!0;var Wo=this.j;Wo.g==this&&Wo.ba&&!Wo.M&&(Wo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),ej(Wo),Wo.M=!0,Qr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Go==4&&Li(this),this.o&&!this.J&&(Go==4?Vie(this.j,this):(this.o=!1,ki(this)))}else c1(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Li(this),mo(this)}}}catch{}finally{}};function Hr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Jn(T,L){var V=T.C,Q=L.indexOf(`
`,V);return Q==-1?Ir:(V=Number(L.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>L.length?Ir:(L=L.slice(Q,Q+V),T.C=Q+V,L)))}jn.prototype.cancel=function(){this.J=!0,Li(this)};function ki(T){T.S=Date.now()+T.I,Hs(T,T.I)}function Hs(T,L){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ia(d(T.ba,T),L)}function Jr(T){T.B&&(a.clearTimeout(T.B),T.B=null)}jn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ce(this.i,this.A),this.L!=2&&(xr(),Qr(17)),Li(this),this.s=2,mo(this)):Hs(this,this.S-T)};function mo(T){T.j.G==0||T.J||Vie(T.j,T)}function Li(T){Jr(T);var L=T.M;L&&typeof L.ma=="function"&&L.ma(),T.M=null,cr(T.U),T.g&&(L=T.g,T.g=null,L.abort(),L.ma())}function Fi(T,L){try{var V=T.j;if(V.G!=0&&(V.g==T||wd(V.h,T))){if(!T.K&&wd(V.h,T)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<T.F)aN(V),sN(V);else break e;Z5(V),Qr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ia(d(V.Za,V),6e3));if(1>=tc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else f1(V,11)}else if((T.K||V.g==T)&&aN(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let fr=we[L];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const Wo=fr[3];Wo!=null&&(V.la=Wo,V.j.info("VER="+V.la));const Go=fr[4];Go!=null&&(V.Aa=Go,V.j.info("SVER="+V.Aa));const S_=fr[5];S_!=null&&typeof S_=="number"&&0<S_&&(Q=1.5*S_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const ef=T.g;if(ef){const lN=ef.g?ef.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lN){var De=Q.h;De.g||lN.indexOf("spdy")==-1&&lN.indexOf("quic")==-1&&lN.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const tj=ef.g?ef.g.getResponseHeader("X-HTTP-Session-Id"):null;tj&&(Q.ya=tj,Pt(Q.I,Q.D,tj))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-T.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=T;if(Q.qa=Wie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Gr=ft,go=Q.L;go&&(Gr.I=go),Gr.B&&(Jr(Gr),ki(Gr)),Q.g=ft}else Uie(Q);0<V.i.length&&oN(V)}else fr[0]!="stop"&&fr[0]!="close"||f1(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?f1(V,7):E_(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}xr(4)}catch{}}var Vo=class{constructor(T,L){this.g=T,this.map=L}};function Ra(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qs(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function tc(T){return T.h?1:T.g?T.g.size:0}function wd(T,L){return T.h?T.h==L:T.g?T.g.has(L):!1}function Y(T,L){T.g?T.g.add(L):T.h=L}function se(T,L){T.h&&T.h==L?T.h=null:T.g&&T.g.has(L)&&T.g.delete(L)}Ra.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Z(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let L=T.i;for(const V of T.g.values())L=L.concat(V.D);return L}return m(T.i)}function fe(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var L=[],V=T.length,Q=0;Q<V;Q++)L.push(T[Q]);return L}L=[],V=0;for(Q in T)L[V++]=T[Q];return L}function ye(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var L=[];T=T.length;for(var V=0;V<T;V++)L.push(V);return L}L=[],V=0;for(const Q in T)L[V++]=Q;return L}}}function le(T,L){if(T.forEach&&typeof T.forEach=="function")T.forEach(L,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,L,void 0);else for(var V=ye(T),Q=fe(T),we=Q.length,De=0;De<we;De++)L.call(void 0,Q[De],V&&V[De],T)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(T,L){if(T){T=T.split("&");for(var V=0;V<T.length;V++){var Q=T[V].indexOf("="),we=null;if(0<=Q){var De=T[V].substring(0,Q);we=T[V].substring(Q+1)}else De=T[V];L(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof qe){this.h=T.h,st(this,T.j),this.o=T.o,this.g=T.g,Et(this,T.s),this.l=T.l;var L=T.i,V=new nc;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),mn(this,V),this.m=T.m}else T&&(L=String(T).match(Oe))?(this.h=!1,st(this,L[1]||"",!0),this.o=kr(L[2]||""),this.g=kr(L[3]||"",!0),Et(this,L[4]),this.l=kr(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=kr(L[7]||"")):(this.h=!1,this.i=new nc(null,this.h))}qe.prototype.toString=function(){var T=[],L=this.j;L&&T.push(Rr(L,Ed,!0),":");var V=this.g;return(V||L=="file")&&(T.push("//"),(L=this.o)&&T.push(Rr(L,Ed,!0),"@"),T.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&T.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&T.push("/"),T.push(Rr(V,V.charAt(0)=="/"?dT:mp,!0))),(V=this.i.toString())&&T.push("?",V),(V=this.m)&&T.push("#",Rr(V,ZR)),T.join("")};function Ge(T){return new qe(T)}function st(T,L,V){T.j=V?kr(L,!0):L,T.j&&(T.j=T.j.replace(/:$/,""))}function Et(T,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);T.s=L}else T.s=null}function mn(T,L,V){L instanceof nc?(T.i=L,hT(T.i,T.h)):(V||(L=Rr(L,o1)),T.i=new nc(L,T.h))}function Pt(T,L,V){T.i.set(L,V)}function Bn(T){return Pt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function kr(T,L){return T?L?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Rr(T,L,V){return typeof T=="string"?(T=encodeURI(T).replace(L,Ho),V&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Ho(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Ed=/[#\/\?@]/g,mp=/[#\?:]/g,dT=/[#\?]/g,o1=/[#\?@]/g,ZR=/#/g;function nc(T,L){this.h=this.g=null,this.i=T||null,this.j=!!L}function fu(T){T.g||(T.g=new Map,T.h=0,T.i&&Ve(T.i,function(L,V){T.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=nc.prototype,e.add=function(T,L){fu(this),this.i=null,T=yp(this,T);var V=this.g.get(T);return V||this.g.set(T,V=[]),V.push(L),this.h+=1,this};function gp(T,L){fu(T),L=yp(T,L),T.g.has(L)&&(T.i=null,T.h-=T.g.get(L).length,T.g.delete(L))}function __(T,L){return fu(T),L=yp(T,L),T.g.has(L)}e.forEach=function(T,L){fu(this),this.g.forEach(function(V,Q){V.forEach(function(we){T.call(L,we,Q,this)},this)},this)},e.na=function(){fu(this);const T=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=T[Q];for(let De=0;De<we.length;De++)V.push(L[Q])}return V},e.V=function(T){fu(this);let L=[];if(typeof T=="string")__(this,T)&&(L=L.concat(this.g.get(yp(this,T))));else{T=Array.from(this.g.values());for(let V=0;V<T.length;V++)L=L.concat(T[V])}return L},e.set=function(T,L){return fu(this),this.i=null,T=yp(this,T),__(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[L]),this.h+=1,this},e.get=function(T,L){return T?(T=this.V(T),0<T.length?String(T[0]):L):L};function eN(T,L,V){gp(T,L),0<V.length&&(T.i=null,T.g.set(yp(T,L),m(V)),T.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),T.push(we)}}return this.i=T.join("&")};function yp(T,L){return L=String(L),T.j&&(L=L.toLowerCase()),L}function hT(T,L){L&&!T.j&&(fu(T),T.i=null,T.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(gp(this,Q),eN(this,we,V))},T)),T.j=L}function tN(T,L){const V=new ka;if(a.Image){const Q=new Image;Q.onload=h(du,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(du,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(du,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(du,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else L(!1)}function vp(T,L){const V=new ka,Q=new AbortController,we=setTimeout(()=>{Q.abort(),du(V,"TestPingServer: timeout",!1,L)},1e4);fetch(T,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?du(V,"TestPingServer: ok",!0,L):du(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),du(V,"TestPingServer: error",!1,L)})}function du(T,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function J5(){this.g=new nr}function nN(T,L,V){const Q=V||"";try{le(T,function(we,De){let ft=we;l(we)&&(ft=gn(we)),L.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function a1(T){this.l=T.Ub||null,this.j=T.eb||!1}p(a1,rr),a1.prototype.g=function(){return new u1(this.l,this.j)},a1.prototype.i=function(T){return function(){return T}}({});function u1(T,L){me.call(this),this.D=T,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(u1,me),e=u1.prototype,e.open=function(T,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=L,this.readyState=1,gg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(L.body=T),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,l1(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,gg(this)),this.g&&(this.readyState=3,gg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rN(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function rN(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var L=T.value?T.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!T.done}))&&(this.response=this.responseText+=L)}T.done?l1(this):gg(this),this.readyState==3&&rN(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,l1(this))},e.Qa=function(T){this.g&&(this.response=T,l1(this))},e.ga=function(){this.g&&l1(this)};function l1(T){T.readyState=4,T.l=null,T.j=null,T.v=null,gg(T)}e.setRequestHeader=function(T,L){this.u.append(T,L)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,T.push(V[0]+": "+V[1]),V=L.next();return T.join(`\r
`)};function gg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(u1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function iN(T){let L="";return x(T,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(T,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=iN(V),typeof T=="string"?V!=null&&encodeURIComponent(String(V)):Pt(T,L,V))}function ue(T){me.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,me);var Re=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);L=L?L.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?zo(this.o):zo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(T),!0),this.B=!1}catch(De){$n(this,De);return}if(T=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(T),this.u=!1}catch(De){$n(this,De)}};function $n(T,L){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=L,T.m=5,Sr(T),Un(T)}function Sr(T){T.A||(T.A=!0,Ae(T,"complete"),Ae(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Ae(this,"complete"),Ae(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||Zi(T)!=4||T.Z()!=2)){if(T.u&&Zi(T)==4)ut(T.Ea,0,T);else if(Ae(T,"readystatechange"),Zi(T)==4){T.h=!1;try{const ft=T.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(T.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ae(T,"complete"),Ae(T,"success");else{T.m=6;try{var De=2<Zi(T)?T.g.statusText:""}catch{De=""}T.l=De+" ["+T.Z()+"]",Sr(T)}}finally{Un(T)}}}}function Un(T,L){if(T.g){Wr(T);const V=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,L||Ae(T,"ready");try{V.onreadystatechange=Q}catch{}}}function Wr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function Zi(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var L=this.g.responseText;return T&&L.indexOf(T)==0&&(L=L.substring(T.length)),An(L)}};function qo(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function c1(T){const L={};T=(T.g&&2<=Zi(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var V=N(T[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=L[we]||[];L[we]=De,De.push(V)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bp(T,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[T]||L}function w_(T){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bp("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bp("baseRetryDelayMs",5e3,T),this.cb=bp("retryDelaySeedMs",1e4,T),this.Wa=bp("forwardChannelMaxRetries",2,T),this.wa=bp("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(T&&T.concurrentRequestLimit),this.Da=new J5,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=w_.prototype,e.la=8,e.G=1,e.connect=function(T,L,V,Q){Qr(0),this.W=T,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Wie(this,null,this.W),oN(this)};function E_(T){if(Fie(T),T.G==3){var L=T.U++,V=Ge(T.I);if(Pt(V,"SID",T.K),Pt(V,"RID",L),Pt(V,"TYPE","terminate"),pT(T,V),L=new jn(T,T.j,L),L.L=2,L.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=Gie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),ki(L)}qie(T)}function sN(T){T.g&&(ej(T),T.g.cancel(),T.g=null)}function Fie(T){sN(T),T.u&&(a.clearTimeout(T.u),T.u=null),aN(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function oN(T){if(!qs(T.h)&&!T.s){T.s=!0;var L=T.Ga;B||P(),U||(B(),U=!0),H.add(L,T),T.B=0}}function u8e(T,L){return tc(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=L.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ia(d(T.Ga,T,L),Hie(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const we=new jn(this,this.j,T);let De=this.o;if(this.S&&(De?(De=C(De),k(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Bie(this,we,L),V=Ge(this.I),Pt(V,"RID",T),Pt(V,"CVER",22),this.D&&Pt(V,"X-HTTP-Session-Id",this.D),pT(this,V),De&&(this.O?L="headers="+encodeURIComponent(String(iN(De)))+"&"+L:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Pt(V,"TYPE","init"),this.P?(Pt(V,"$req",L),Pt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(T?jie(this,T):this.i.length==0||qs(this.h)||jie(this))};function jie(T,L){var V;L?V=L.l:V=T.U++;const Q=Ge(T.I);Pt(Q,"SID",T.K),Pt(Q,"RID",V),Pt(Q,"AID",T.T),pT(T,Q),T.m&&T.o&&te(Q,T.m,T.o),V=new jn(T,T.j,V,T.B+1),T.m===null&&(V.H=T.o),L&&(T.i=L.D.concat(T.i)),L=Bie(T,V,1e3),V.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,V),Vt(V,Q,L)}function pT(T,L){T.H&&x(T.H,function(V,Q){Pt(L,Q,V)}),T.l&&le({},function(V,Q){Pt(L,Q,V)})}function Bie(T,L,V){V=Math.min(T.i.length,V);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var we=T.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Gr=!0;for(let go=0;go<V;go++){let fr=we[go].g;const Wo=we[go].map;if(fr-=De,0>fr)De=Math.max(0,we[go].g-100),Gr=!1;else try{nN(Wo,ft,"req"+fr+"_")}catch{Q&&Q(Wo)}}if(Gr){Q=ft.join("&");break e}}}return T=T.i.splice(0,V),L.D=T,Q}function Uie(T){if(!T.g&&!T.u){T.Y=1;var L=T.Fa;B||P(),U||(B(),U=!0),H.add(L,T),T.v=0}}function Z5(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ia(d(T.Fa,T),Hie(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,zie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ia(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qr(10),sN(this),zie(this))};function ej(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function zie(T){T.g=new jn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var L=Ge(T.qa);Pt(L,"RID","rpc"),Pt(L,"SID",T.K),Pt(L,"AID",T.T),Pt(L,"CI",T.F?"0":"1"),!T.F&&T.ja&&Pt(L,"TO",T.ja),Pt(L,"TYPE","xmlhttp"),pT(T,L),T.m&&T.o&&te(L,T.m,T.o),T.L&&(T.g.I=T.L);var V=T.g;T=T.ia,V.L=1,V.v=Bn(Ge(L)),V.m=null,V.P=!0,sr(V,T)}e.Za=function(){this.C!=null&&(this.C=null,sN(this),Z5(this),Qr(19))};function aN(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function Vie(T,L){var V=null;if(T.g==L){aN(T),ej(T),T.g=null;var Q=2}else if(wd(T.h,L))V=L.D,se(T.h,L),Q=1;else return;if(T.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=T.B;Q=cl(),Ae(Q,new cu(Q,V)),oN(T)}else Uie(T);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&u8e(T,L)||Q==2&&Z5(T)))switch(V&&0<V.length&&(L=T.h,L.i=L.i.concat(V)),we){case 1:f1(T,5);break;case 4:f1(T,10);break;case 3:f1(T,6);break;default:f1(T,2)}}}function Hie(T,L){let V=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(V*=2),V*L}function f1(T,L){if(T.j.info("Error code "+L),L==2){var V=d(T.fb,T),Q=T.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?tN(Q.toString(),V):vp(Q.toString(),V)}else Qr(2);T.G=0,T.l&&T.l.sa(L),qie(T),Fie(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),Qr(2)):(this.j.info("Failed to ping google.com"),Qr(1))};function qie(T){if(T.G=0,T.ka=[],T.l){const L=Z(T.h);(L.length!=0||T.i.length!=0)&&(g(T.ka,L),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function Wie(T,L,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&st(De,Q),L&&(De.g=L),we&&Et(De,we),V&&(De.l=V),Q=De}return V=T.D,L=T.ya,V&&L&&Pt(Q,V,L),Pt(Q,"VER",T.la),pT(T,Q),Q}function Gie(T,L,V){if(L&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=T.Ca&&!T.pa?new ue(new a1({eb:V})):new ue(T.pa),L.Ha(T.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yie(){}e=Yie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function uN(){}uN.prototype.g=function(T,L){return new fl(T,L)};function fl(T,L){me.call(this),this.g=new w_(L),this.l=T,this.h=L&&L.messageUrlParams||null,T=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(T?T["X-WebChannel-Content-Type"]=L.messageContentType:T={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(T?T["X-WebChannel-Client-Profile"]=L.va:T={"X-WebChannel-Client-Profile":L.va}),this.g.S=T,(T=L&&L.Sb)&&!v(T)&&(this.g.m=T),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,T=this.h,T!==null&&L in T&&(T=this.h,L in T&&delete T[L])),this.j=new x_(this)}p(fl,me),fl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fl.prototype.close=function(){E_(this.g)},fl.prototype.o=function(T){var L=this.g;if(typeof T=="string"){var V={};V.__data__=T,T=V}else this.u&&(V={},V.__data__=gn(T),T=V);L.i.push(new Vo(L.Ya++,T)),L.G==3&&oN(L)},fl.prototype.N=function(){this.g.l=null,delete this.j,E_(this.g),delete this.g,fl.aa.N.call(this)};function Kie(T){Mi.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var L=T.__sm__;if(L){e:{for(const V in L){T=V;break e}T=void 0}(this.i=T)&&(T=this.i,L=L!==null&&T in L?L[T]:void 0),this.data=L}else this.data=T}p(Kie,Mi);function Xie(){Ar.call(this),this.status=1}p(Xie,Ar);function x_(T){this.g=T}p(x_,Yie),x_.prototype.ua=function(){Ae(this.g,"a")},x_.prototype.ta=function(T){Ae(this.g,new Kie(T))},x_.prototype.sa=function(T){Ae(this.g,new Xie)},x_.prototype.ra=function(){Ae(this.g,"b")},uN.prototype.createWebChannel=uN.prototype.g,fl.prototype.send=fl.prototype.o,fl.prototype.open=fl.prototype.m,fl.prototype.close=fl.prototype.close,UPe=function(){return new uN},BPe=function(){return cl()},jPe=gs,WV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,WD=ot,St.COMPLETE="complete",FPe=St,$i.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",me.prototype.listen=me.prototype.K,H2=$i,LPe=a1,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,MPe=ue}).apply(typeof bP<"u"?bP:typeof self<"u"?self:typeof window<"u"?window:{});const Mhe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_u.UNAUTHENTICATED=new _u(null),_u.GOOGLE_CREDENTIALS=new _u("google-credentials-uid"),_u.FIRST_PARTY=new _u("first-party-uid"),_u.MOCK_USER=new _u("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let US="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new k4("@firebase/firestore");function YT(){return lb.logLevel}function It(e,...t){if(lb.logLevel<=Gn.DEBUG){const n=t.map(cZ);lb.debug(`Firestore (${US}): ${e}`,...n)}}function Fm(e,...t){if(lb.logLevel<=Gn.ERROR){const n=t.map(cZ);lb.error(`Firestore (${US}): ${e}`,...n)}}function xI(e,...t){if(lb.logLevel<=Gn.WARN){const n=t.map(cZ);lb.warn(`Firestore (${US}): ${e}`,...n)}}function cZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(e="Unexpected state"){const t=`FIRESTORE (${US}) INTERNAL ASSERTION FAILED: `+e;throw Fm(t),new Error(t)}function ri(e,t){e||an()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends rp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class C$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_u.UNAUTHENTICATED))}shutdown(){}}class A$t{constructor(t){this.t=t,this.currentUser=_u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ri(typeof r.accessToken=="string"),new T$t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ri(t===null||typeof t=="string"),new _u(t)}}class I$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=_u.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class k$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new I$t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(_u.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R$t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N$t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ri(typeof n.token=="string"),this.R=n.token,new R$t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zPe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=P$t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function yx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ls.fromMillis(Date.now())}static fromDate(t){return Ls.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ls(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Ls(0,0))}static max(){return new dn(new Ls(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n,r){n===void 0?n=0:n>t.length&&an(),r===void 0?r=t.length-n:r>t.length-n&&an(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return SI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof SI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ci extends SI{construct(t,n,r){return new ci(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ci(n)}static emptyPath(){return new ci([])}}const D$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends SI{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return D$t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ci.fromString(t))}static fromName(t){return new Ut(ci.fromString(t).popFirst(5))}static empty(){return new Ut(ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ci.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ci.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ci(t.slice()))}}function O$t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Ls(n+1,0):new Ls(n,r));return new ly(i,Ut.empty(),t)}function $$t(e){return new ly(e.readTime,e.key,-1)}class ly{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ly(dn.min(),Ut.empty(),-1)}static max(){return new ly(dn.max(),Ut.empty(),-1)}}function M$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==L$t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function j$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}fZ.oe=-1;function M4(e){return e==null}function rM(e){return e===0&&1/e==-1/0}function B$t(e){return typeof e=="number"&&Number.isInteger(e)&&!rM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function t_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function VPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _P(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _P(this.root,t,this.comparator,!1)}getReverseIterator(){return new _P(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _P(this.root,t,this.comparator,!0)}}class _P{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const t=this.left.check();if(t!==this.right.check())throw an();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fhe(this.data.getIterator())}getIteratorFrom(t){return new Fhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oo(this.comparator);return n.data=t,n}}class Fhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new Al([])}unionWith(t){let n=new Oo(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Al(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return yx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HPe("Invalid base64 string: "+s):s}}(t);return new Ea(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ea(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ea.EMPTY_BYTE_STRING=new Ea("");const U$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cy(e){if(ri(!!e),typeof e=="string"){let t=0;const n=U$t.exec(e);if(ri(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function cb(e){return typeof e=="string"?Ea.fromBase64String(e):Ea.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hZ(e){const t=e.mapValue.fields.__previous_value__;return dZ(t)?hZ(t):t}function TI(e){const t=cy(e.mapValue.fields.__local_write_time__.timestampValue);return new Ls(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z$t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class CI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new CI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof CI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dZ(e)?4:V$t(e)?9007199254740991:10:an()}function Lh(e,t){if(e===t)return!0;const n=fb(e);if(n!==fb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return TI(e).isEqual(TI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cy(i.timestampValue),a=cy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return cb(i.bytesValue).isEqual(cb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _s(i.geoPointValue.latitude)===_s(s.geoPointValue.latitude)&&_s(i.geoPointValue.longitude)===_s(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _s(i.integerValue)===_s(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_s(i.doubleValue),a=_s(s.doubleValue);return o===a?rM(o)===rM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return yx(e.arrayValue.values||[],t.arrayValue.values||[],Lh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Lhe(o)!==Lhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Lh(o[u],a[u])))return!1;return!0}(e,t);default:return an()}}function AI(e,t){return(e.values||[]).find(n=>Lh(n,t))!==void 0}function vx(e,t){if(e===t)return 0;const n=fb(e),r=fb(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_s(s.integerValue||s.doubleValue),u=_s(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return jhe(e.timestampValue,t.timestampValue);case 4:return jhe(TI(e),TI(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=cb(s),u=cb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(_s(s.latitude),_s(o.latitude));return a!==0?a:vr(_s(s.longitude),_s(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=vx(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===wP.mapValue&&o===wP.mapValue)return 0;if(s===wP.mapValue)return 1;if(o===wP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=vx(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw an()}}function jhe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=cy(e),r=cy(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function bx(e){return GV(e)}function GV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=cy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return cb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=GV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${GV(n.fields[o])}`;return i+"}"}(e.mapValue):an()}function Bhe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function YV(e){return!!e&&"integerValue"in e}function pZ(e){return!!e&&"arrayValue"in e}function Uhe(e){return!!e&&"nullValue"in e}function zhe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function GD(e){return!!e&&"mapValue"in e}function KC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return t_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=KC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=KC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function V$t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t){this.value=t}static empty(){return new Nu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!GD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=KC(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=KC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());GD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Lh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];GD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){t_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Nu(KC(this.value))}}function qPe(e){const t=[];return t_(e.fields,(n,r)=>{const i=new Io([n]);if(GD(r)){const s=qPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Al(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ca(t,0,dn.min(),dn.min(),dn.min(),Nu.empty(),0)}static newFoundDocument(t,n,r,i){return new ca(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ca(t,2,n,dn.min(),dn.min(),Nu.empty(),0)}static newUnknownDocument(t,n){return new ca(t,3,n,dn.min(),dn.min(),Nu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iM=class{constructor(t,n){this.position=t,this.inclusive=n}};function Vhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=vx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Lh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t,n="asc"){this.field=t,this.dir=n}}function H$t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WPe=class{};class Es extends WPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new W$t(t,n,r):n==="array-contains"?new K$t(t,r):n==="in"?new X$t(t,r):n==="not-in"?new Q$t(t,r):n==="array-contains-any"?new J$t(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new G$t(t,r):new Y$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vx(n,this.value)):n!==null&&fb(this.value)===fb(n)&&this.matchesComparison(vx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zf extends WPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Zf(t,n)}matches(t){return GPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GPe(e){return e.op==="and"}function YPe(e){return q$t(e)&&GPe(e)}function q$t(e){for(const t of e.filters)if(t instanceof Zf)return!1;return!0}function KV(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+bx(e.value);if(YPe(e))return e.filters.map(t=>KV(t)).join(",");{const t=e.filters.map(n=>KV(n)).join(",");return`${e.op}(${t})`}}function KPe(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&Lh(r.value,i.value)}(e,t):e instanceof Zf?function(r,i){return i instanceof Zf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KPe(o,i.filters[a]),!0):!1}(e,t):void an()}function XPe(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${bx(n.value)}`}(e):e instanceof Zf?function(n){return n.op.toString()+" {"+n.getFilters().map(XPe).join(" ,")+"}"}(e):"Filter"}class W$t extends Es{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class G$t extends Es{constructor(t,n){super(t,"in",n),this.keys=QPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Y$t extends Es{constructor(t,n){super(t,"not-in",n),this.keys=QPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function QPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class K$t extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return pZ(n)&&AI(n.arrayValue,this.value)}}class X$t extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&AI(this.value.arrayValue,n)}}class Q$t extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(AI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!AI(this.value.arrayValue,n)}}class J$t extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!pZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>AI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function qhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Z$t(e,t,n,r,i,s,o)}function mZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>KV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),M4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>bx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>bx(r)).join(",")),t.ue=n}return t.ue}function gZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!H$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!KPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hhe(e.startAt,t.startAt)&&Hhe(e.endAt,t.endAt)}function XV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eMt(e,t,n,r,i,s,o,a){return new zS(e,t,n,r,i,s,o,a)}function yZ(e){return new zS(e)}function Whe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function JPe(e){return e.collectionGroup!==null}function XC(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oo(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new II(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new II(Io.keyField(),r))}return t.ce}function bh(e){const t=hn(e);return t.le||(t.le=tMt(t,XC(e))),t.le}function tMt(e,t){if(e.limitType==="F")return qhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new II(i.field,s)});const n=e.endAt?new iM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new iM(e.startAt.position,e.startAt.inclusive):null;return qhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function QV(e,t){const n=e.filters.concat([t]);return new zS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function JV(e,t,n){return new zS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function L4(e,t){return gZ(bh(e),bh(t))&&e.limitType===t.limitType}function ZPe(e){return`${mZ(bh(e))}|lt:${e.limitType}`}function fw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XPe(i)).join(", ")}]`),M4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bx(i)).join(",")),`Target(${r})`}(bh(e))}; limitType=${e.limitType})`}function F4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of XC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Vhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,XC(r),i)||r.endAt&&!function(o,a,u){const l=Vhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,XC(r),i))}(e,t)}function nMt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function eDe(e){return(t,n)=>{let r=!1;for(const i of XC(e)){const s=rMt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rMt(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?vx(u,l):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){t_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return VPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iMt=new Oi(Ut.comparator);function jm(){return iMt}const tDe=new Oi(Ut.comparator);function q2(...e){let t=tDe;for(const n of e)t=t.insert(n.key,n);return t}function nDe(e){let t=tDe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function bv(){return QC()}function rDe(){return QC()}function QC(){return new VS(e=>e.toString(),(e,t)=>e.isEqual(t))}const sMt=new Oi(Ut.comparator),oMt=new Oo(Ut.comparator);function zn(...e){let t=oMt;for(const n of e)t=t.add(n);return t}const aMt=new Oo(vr);function uMt(){return aMt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iDe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rM(t)?"-0":t}}function sDe(e){return{integerValue:""+e}}function lMt(e,t){return B$t(t)?sDe(t):iDe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this._=void 0}}function cMt(e,t,n){return e instanceof kI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dZ(s)&&(s=hZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof RI?aDe(e,t):e instanceof NI?uDe(e,t):function(i,s){const o=oDe(i,s),a=Ghe(o)+Ghe(i.Pe);return YV(o)&&YV(i.Pe)?sDe(a):iDe(i.serializer,a)}(e,t)}function fMt(e,t,n){return e instanceof RI?aDe(e,t):e instanceof NI?uDe(e,t):n}function oDe(e,t){return e instanceof sM?function(r){return YV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class kI extends j4{}class RI extends j4{constructor(t){super(),this.elements=t}}function aDe(e,t){const n=lDe(t);for(const r of e.elements)n.some(i=>Lh(i,r))||n.push(r);return{arrayValue:{values:n}}}class NI extends j4{constructor(t){super(),this.elements=t}}function uDe(e,t){let n=lDe(t);for(const r of e.elements)n=n.filter(i=>!Lh(i,r));return{arrayValue:{values:n}}}class sM extends j4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Ghe(e){return _s(e.integerValue||e.doubleValue)}function lDe(e){return pZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMt{constructor(t,n){this.field=t,this.transform=n}}function hMt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof RI&&i instanceof RI||r instanceof NI&&i instanceof NI?yx(r.elements,i.elements,Lh):r instanceof sM&&i instanceof sM?Lh(r.Pe,i.Pe):r instanceof kI&&i instanceof kI}(e.transform,t.transform)}class pMt{constructor(t,n){this.version=t,this.transformResults=n}}class Wu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wu}static exists(t){return new Wu(void 0,t)}static updateTime(t){return new Wu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function YD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class B4{}function cDe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new U4(e.key,Wu.none()):new aR(e.key,e.data,Wu.none());{const n=e.data,r=Nu.empty();let i=new Oo(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wy(e.key,r,new Al(i.toArray()),Wu.none())}}function mMt(e,t,n){e instanceof aR?function(i,s,o){const a=i.value.clone(),u=Khe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Wy?function(i,s,o){if(!YD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Khe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(fDe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function JC(e,t,n,r){return e instanceof aR?function(s,o,a,u){if(!YD(s.precondition,o))return a;const l=s.value.clone(),c=Xhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wy?function(s,o,a,u){if(!YD(s.precondition,o))return a;const l=Xhe(s.fieldTransforms,u,o),c=o.data;return c.setAll(fDe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return YD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function gMt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=oDe(r.transform,i||null);s!=null&&(n===null&&(n=Nu.empty()),n.set(r.field,s))}return n||null}function Yhe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yx(r,i,(s,o)=>hMt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class aR extends B4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wy extends B4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fDe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Khe(e,t,n){const r=new Map;ri(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,fMt(o,a,n[i]))}return r}function Xhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,cMt(s,o,t))}return r}class U4 extends B4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yMt extends B4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vMt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&mMt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=JC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=JC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=rDe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=cDe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&yx(this.mutations,t.mutations,(n,r)=>Yhe(n,r))&&yx(this.baseMutations,t.baseMutations,(n,r)=>Yhe(n,r))}}class vZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ri(t.mutations.length===r.length);let i=function(){return sMt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bMt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Mt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,Zn;function wMt(e){switch(e){default:return an();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function dDe(e){if(e===void 0)return Fm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case vs.OK:return Be.OK;case vs.CANCELLED:return Be.CANCELLED;case vs.UNKNOWN:return Be.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Be.INTERNAL;case vs.UNAVAILABLE:return Be.UNAVAILABLE;case vs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case vs.NOT_FOUND:return Be.NOT_FOUND;case vs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case vs.ABORTED:return Be.ABORTED;case vs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case vs.DATA_LOSS:return Be.DATA_LOSS;default:return an()}}(Zn=vs||(vs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EMt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xMt=new Rv([4294967295,4294967295],0);function Qhe(e){const t=EMt().encode(e),n=new $Pe;return n.update(t),new Uint8Array(n.digest())}function Jhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Rv([n,r],0),new Rv([i,s],0)]}class bZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new W2(`Invalid padding: ${n}`);if(r<0)throw new W2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new W2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new W2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Rv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Rv.fromNumber(r)));return i.compare(xMt)===1&&(i=new Rv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Qhe(t),[r,i]=Jhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new bZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Qhe(t),[r,i]=Jhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class W2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,uR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new z4(dn.min(),i,new Oi(vr),jm(),zn())}}class uR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new uR(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class hDe{constructor(t,n){this.targetId=t,this.me=n}}class pDe{constructor(t,n,r=Ea.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Zhe{constructor(){this.fe=0,this.ge=tpe(),this.pe=Ea.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:an()}}),new uR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=tpe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ri(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SMt{constructor(t){this.Le=t,this.Be=new Map,this.ke=jm(),this.qe=epe(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:an()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(XV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ca.newNoDocument(o,dn.min()))}else ri(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=cb(r).toUint8Array()}catch(u){if(u instanceof HPe)return xI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new bZ(o,i,s)}catch(u){return xI(u instanceof W2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&XV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ca.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new z4(t,n,this.Qe,this.ke,r);return this.ke=jm(),this.qe=epe(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Zhe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Oo(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Zhe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function epe(){return new Oi(Ut.comparator)}function tpe(){return new Oi(Ut.comparator)}const TMt={asc:"ASCENDING",desc:"DESCENDING"},CMt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AMt={and:"AND",or:"OR"};class IMt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ZV(e,t){return e.useProto3Json||M4(t)?t:{value:t}}function oM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function mDe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kMt(e,t){return oM(e,t.toTimestamp())}function _h(e){return ri(!!e),dn.fromTimestamp(function(n){const r=cy(n);return new Ls(r.seconds,r.nanos)}(e))}function _Z(e,t){return eH(e,t).canonicalString()}function eH(e,t){const n=function(i){return new ci(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function gDe(e){const t=ci.fromString(e);return ri(wDe(t)),t}function tH(e,t){return _Z(e.databaseId,t.path)}function HB(e,t){const n=gDe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(vDe(n))}function yDe(e,t){return _Z(e.databaseId,t)}function RMt(e){const t=gDe(e);return t.length===4?ci.emptyPath():vDe(t)}function nH(e){return new ci(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vDe(e){return ri(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function npe(e,t,n){return{name:tH(e,t),fields:n.value.mapValue.fields}}function NMt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ri(c===void 0||typeof c=="string"),Ea.fromBase64String(c||"")):(ri(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ea.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:dDe(l.code);return new bt(c,l.message||"")}(o);n=new pDe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=HB(e,r.document.name),s=_h(r.document.updateTime),o=r.document.createTime?_h(r.document.createTime):dn.min(),a=new Nu({mapValue:{fields:r.document.fields}}),u=ca.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new KD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=HB(e,r.document),s=r.readTime?_h(r.readTime):dn.min(),o=ca.newNoDocument(i,s),a=r.removedTargetIds||[];n=new KD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=HB(e,r.document),s=r.removedTargetIds||[];n=new KD([],s,i,null)}else{if(!("filter"in t))return an();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _Mt(i,s),a=r.targetId;n=new hDe(a,o)}}return n}function PMt(e,t){let n;if(t instanceof aR)n={update:npe(e,t.key,t.value)};else if(t instanceof U4)n={delete:tH(e,t.key)};else if(t instanceof Wy)n={update:npe(e,t.key,t.data),updateMask:UMt(t.fieldMask)};else{if(!(t instanceof yMt))return an();n={verify:tH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof kI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof RI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof NI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw an()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kMt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:an()}(e,t.precondition)),n}function DMt(e,t){return e&&e.length>0?(ri(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?_h(i.updateTime):_h(s);return o.isEqual(dn.min())&&(o=_h(s)),new pMt(o,i.transformResults||[])}(n,t))):[]}function OMt(e,t){return{documents:[yDe(e,t.path)]}}function $Mt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yDe(e,i);const s=function(l){if(l.length!==0)return _De(Zf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:dw(d.field),direction:FMt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ZV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function MMt(e){let t=RMt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ri(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=bDe(f);return d instanceof Zf&&YPe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new II(hw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,M4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new iM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new iM(h,d)}(n.endAt)),eMt(t,i,o,s,a,"F",u,l)}function LMt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function bDe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hw(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hw(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hw(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hw(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(hw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Zf.create(n.compositeFilter.filters.map(r=>bDe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return an()}}(n.compositeFilter.op))}(e):an()}function FMt(e){return TMt[e]}function jMt(e){return CMt[e]}function BMt(e){return AMt[e]}function dw(e){return{fieldPath:e.canonicalString()}}function hw(e){return Io.fromServerFormat(e.fieldPath)}function _De(e){return e instanceof Es?function(n){if(n.op==="=="){if(zhe(n.value))return{unaryFilter:{field:dw(n.field),op:"IS_NAN"}};if(Uhe(n.value))return{unaryFilter:{field:dw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zhe(n.value))return{unaryFilter:{field:dw(n.field),op:"IS_NOT_NAN"}};if(Uhe(n.value))return{unaryFilter:{field:dw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dw(n.field),op:jMt(n.op),value:n.value}}}(e):e instanceof Zf?function(n){const r=n.getFilters().map(i=>_De(i));return r.length===1?r[0]:{compositeFilter:{op:BMt(n.op),filters:r}}}(e):an()}function UMt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function wDe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ea.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new r0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zMt{constructor(t){this.ct=t}}function VMt(e){const t=MMt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?JV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HMt{constructor(){this._n=new qMt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(ly.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(ly.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class qMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Oo(ci.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Oo(ci.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new _x(0)}static Ln(){return new _x(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WMt{constructor(){this.changes=new VS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&JC(r.mutation,i,Al.empty(),Ls.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=bv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=q2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=bv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=jm();const o=QC(),a=function(){return QC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Wy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),JC(c.mutation,l,c.mutation.getFieldMask(),Ls.now())):o.set(l.key,Al.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new GMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=QC();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Al.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=rDe();c.forEach(d=>{if(!s.has(d)){const h=cDe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):JPe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(bv());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:nDe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=q2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=q2();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new zS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ca.newInvalidDocument(c)))});let a=q2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&JC(c.mutation,l,Al.empty(),Ls.now()),F4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_h(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:VMt(i.bundledQuery),readTime:_h(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XMt{constructor(){this.overlays=new Oi(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=bv();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=bv(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=bv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=bv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bMt(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(){this.Pr=new Oo(Ks.Ir),this.Tr=new Oo(Ks.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ks(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ks(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new ci([])),r=new Ks(n,t),i=new Ks(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new ci([])),r=new Ks(n,t),i=new Ks(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ks(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ks{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Oo(Ks.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vMt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ks(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ks(n,0),i=new Ks(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Oo(vr);return n.forEach(i=>{const s=new Ks(i,0),o=new Ks(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Ks(new Ut(s),0);let a=new Oo(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ri(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Ks(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ks(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JMt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():ca.newInvalidDocument(n))}getEntries(t,n){let r=jm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ca.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=jm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||M$t($$t(c),r)<=0||(i.has(c.key)||F4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){an()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new ZMt(this)}getSize(t){return Qe.resolve(this.size)}}class ZMt extends WMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eLt{constructor(t){this.persistence=t,this.Mr=new VS(n=>mZ(n),gZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new wZ,this.targetCount=0,this.Lr=_x.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new _x(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tLt{constructor(t,n){this.Br={},this.overlays={},this.kr=new fZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new eLt(this),this.indexManager=new HMt,this.remoteDocumentCache=function(i){return new JMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new zMt(n),this.$r=new KMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new XMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new QMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new nLt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class nLt extends F$t{constructor(t){super(),this.currentSequenceNumber=t}}class EZ{constructor(t){this.persistence=t,this.zr=new wZ,this.jr=null}static Hr(t){return new EZ(t)}get Jr(){if(this.jr)return this.jr;throw an()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rLt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iLt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return LNt()?8:j$t(Fo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rLt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(YT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",fw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(YT()<=Gn.DEBUG&&It("QueryEngine","Query:",fw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(YT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",fw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bh(n))):Qe.resolve())}ji(t,n){if(Whe(n))return Qe.resolve(null);let r=bh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=JV(n,null,"F"),r=bh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,JV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Whe(n)||i.isEqual(dn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(YT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fw(n)),this.es(t,o,n,O$t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Oo(eDe(t));return n.forEach((i,s)=>{F4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return YT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",fw(n)),this.zi.getDocumentsMatchingQuery(t,n,ly.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sLt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new VS(s=>mZ(s),gZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function oLt(e,t,n,r){return new sLt(e,t,n,r)}async function EDe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function aLt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ri(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function xDe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function uLt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ea.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=jm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(lLt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function lLt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=jm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function cLt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function fLt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new r0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function rH(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!oR(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function rpe(e,t,n){const r=hn(e);let i=dn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,bh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:zn())).next(a=>(dLt(r,nMt(t),a),{documents:a,hs:s})))}function dLt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class ipe{constructor(){this.activeTargetIds=uMt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hLt{constructor(){this.no=new ipe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ipe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pLt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EP=null;function qB(){return EP===null?EP=function(){return 268435456+Math.round(2147483648*Math.random())}():EP++,"0x"+EP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mLt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gLt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="WebChannelConnection";class yLt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=qB(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw xI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+US}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=mLt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=qB();return new Promise((o,a)=>{const u=new MPe;u.setWithCredentials(!0),u.listenOnce(FPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case WD.NO_ERROR:const c=u.getResponseJson();It(na,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case WD.TIMEOUT:It(na,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case WD.HTTP_ERROR:const f=u.getStatus();if(It(na,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{It(na,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(na,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=qB(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=UPe(),a=BPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new LPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(na,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new gLt({lo:g=>{h?It(na,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(na,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(na,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,H2.EventType.OPEN,()=>{h||(It(na,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,H2.EventType.CLOSE,()=>{h||(h=!0,It(na,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,H2.EventType.ERROR,g=>{h||(h=!0,xI(na,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,H2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ri(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){It(na,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let x=function(A){const k=vs[A];if(k!==void 0)return dDe(k)}(E),S=w.message;x===void 0&&(x=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(x,S)),f.close()}else It(na,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,jPe.STAT_EVENT,g=>{g.stat===WV.PROXY?It(na,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===WV.NOPROXY&&It(na,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function WB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(e){return new IMt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SDe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TDe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new SDe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Fm(n.toString()),Fm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vLt extends TDe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=NMt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?_h(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=nH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=XV(u)?{documents:OMt(s,u)}:{query:$Mt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mDe(s,o.resumeToken);const l=ZV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=oM(s,o.snapshotVersion.toTimestamp());const l=ZV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=LMt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=nH(this.serializer),n.removeTarget=t,this.i_(n)}}class bLt extends TDe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ri(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=DMt(t.writeResults,t.commitTime),r=_h(t.commitTime);return this.listener.A_(r,n)}return ri(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=nH(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>PMt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Lt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,eH(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,eH(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class wLt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Fm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ELt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{n_(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await cR(l),l.N_.set("Unknown"),l.M_.delete(4),await lR(l)}(this))})}),this.N_=new wLt(r,i)}}async function lR(e){if(n_(e))for(const t of e.x_)await t(!0)}async function cR(e){for(const t of e.x_)await t(!1)}function CDe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),AZ(n)?CZ(n):HS(n).Xo()&&TZ(n,t))}function SZ(e,t){const n=hn(e),r=HS(n);n.F_.delete(t),r.Xo()&&ADe(n,t),n.F_.size===0&&(r.Xo()?r.n_():n_(n)&&n.N_.set("Unknown"))}function TZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}HS(e).P_(t)}function ADe(e,t){e.L_.xe(t),HS(e).I_(t)}function CZ(e){e.L_=new SMt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),HS(e).start(),e.N_.w_()}function AZ(e){return n_(e)&&!HS(e).Zo()&&e.F_.size>0}function n_(e){return hn(e).M_.size===0}function IDe(e){e.L_=void 0}async function xLt(e){e.N_.set("Online")}async function SLt(e){e.F_.forEach((t,n)=>{TZ(e,t)})}async function TLt(e,t){IDe(e),AZ(e)?(e.N_.D_(t),CZ(e)):e.N_.set("Unknown")}async function CLt(e,t,n){if(e.N_.set("Online"),t instanceof pDe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await aM(e,r)}else if(t instanceof KD?e.L_.Ke(t):t instanceof hDe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await xDe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ea.EMPTY_BYTE_STRING,c.snapshotVersion)),ADe(s,u);const f=new r0(c.target,u,l,c.sequenceNumber);TZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await aM(e,r)}}async function aM(e,t,n){if(!oR(t))throw t;e.M_.add(1),await cR(e),e.N_.set("Offline"),n||(n=()=>xDe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await lR(e)})}function kDe(e,t){return t().catch(n=>aM(e,n,t))}async function H4(e){const t=hn(e),n=fy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;ALt(t);)try{const i=await cLt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,ILt(t,i)}catch(i){await aM(t,i)}RDe(t)&&NDe(t)}function ALt(e){return n_(e)&&e.v_.length<10}function ILt(e,t){e.v_.push(t);const n=fy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function RDe(e){return n_(e)&&!fy(e).Zo()&&e.v_.length>0}function NDe(e){fy(e).start()}async function kLt(e){fy(e).V_()}async function RLt(e){const t=fy(e);for(const n of e.v_)t.d_(n.mutations)}async function NLt(e,t,n){const r=e.v_.shift(),i=vZ.from(r,t,n);await kDe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await H4(e)}async function PLt(e,t){t&&fy(e).E_&&await async function(r,i){if(function(o){return wMt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();fy(r).t_(),await kDe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await H4(r)}}(e,t),RDe(e)&&NDe(e)}async function ope(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=n_(n);n.M_.add(3),await cR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await lR(n)}async function DLt(e,t){const n=hn(e);t?(n.M_.delete(2),await lR(n)):t||(n.M_.add(2),await cR(n),n.N_.set("Unknown"))}function HS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new vLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:xLt.bind(null,e),To:SLt.bind(null,e),Ao:TLt.bind(null,e),h_:CLt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),AZ(e)?CZ(e):e.N_.set("Unknown")):(await e.B_.stop(),IDe(e))})),e.B_}function fy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new bLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:kLt.bind(null,e),Ao:PLt.bind(null,e),R_:RLt.bind(null,e),A_:NLt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await H4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new IZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kZ(e,t){if(Fm("AsyncQueue",`${t}: ${e}`),oR(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=q2(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new bE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof bE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new bE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ape{constructor(){this.q_=new Oi(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):an():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class wx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wx(t,n,bE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&L4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OLt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class $Lt{constructor(){this.queries=new VS(t=>ZPe(t),L4),this.onlineState="Unknown",this.z_=new Set}}async function PDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new OLt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=kZ(o,`Initialization of query '${fw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&RZ(n)}async function DDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MLt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&RZ(n)}function LLt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function RZ(e){e.z_.forEach(t=>{t.next()})}var iH,upe;(upe=iH||(iH={})).J_="default",upe.Cache="cache";class ODe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new wx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=wx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==iH.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $De{constructor(t){this.key=t}}class MDe{constructor(t){this.key=t}}class FLt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=eDe(t),this.Ta=new bE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new ape,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=F4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new wx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ape,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new MDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new $De(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return wx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class jLt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class BLt{constructor(t){this.key=t,this.wa=!1}}class ULt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new VS(a=>ZPe(a),L4),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Ut.comparator),this.Fa=new Map,this.Ma=new wZ,this.xa={},this.Oa=new Map,this.Na=_x.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function zLt(e,t,n=!0){const r=zDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await LDe(r,t,n,!0),i}async function VLt(e,t){const n=zDe(e);await LDe(n,t,!0,!1)}async function LDe(e,t,n,r){const i=await fLt(e.localStore,bh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await HLt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&CDe(e.remoteStore,i),a}async function HLt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await rpe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,_)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(_,m.isPrimaryClient,w,E);return cpe(m,g.targetId,x.fa),x.snapshot}(e,f,d,h);const s=await rpe(e.localStore,t,!0),o=new FLt(t,s.hs),a=o.da(s.documents),u=uR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);cpe(e,n,l.fa);const c=new jLt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function qLt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!L4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&SZ(r.remoteStore,i.targetId),sH(r,i.targetId)}).catch(sR)):(sH(r,i.targetId),await rH(r.localStore,i.targetId,!0))}async function WLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),SZ(n.remoteStore,r.targetId))}async function GLt(e,t,n){const r=e6t(e);try{const i=await function(o,a){const u=hn(o),l=Ls.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=jm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=gMt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Wy(v.key,_,qPe(_.value.mapValue),Wu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:nDe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await fR(r,i.changes),await H4(r.remoteStore)}catch(i){const s=kZ(i,"Failed to persist write");n.reject(s)}}async function FDe(e,t){const n=hn(e);try{const r=await uLt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ri(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ri(o.wa):i.removedDocuments.size>0&&(ri(o.wa),o.wa=!1))}),await fR(n,r,t)}catch(r){await sR(r)}}function lpe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&RZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function YLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Ut.comparator);o=o.insert(s,ca.newNoDocument(s,dn.min()));const a=zn().add(s),u=new z4(dn.min(),new Map,new Oi(vr),o,a);await FDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),NZ(r)}else await rH(r.localStore,t,!1).then(()=>sH(r,t,n)).catch(sR)}async function KLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await aLt(n.localStore,t);BDe(n,r,null),jDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fR(n,i)}catch(i){await sR(i)}}async function XLt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ri(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);BDe(r,t,n),jDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fR(r,i)}catch(i){await sR(i)}}function jDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function BDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function sH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||UDe(e,r)})}function UDe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(SZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),NZ(e))}function cpe(e,t,n){for(const r of n)r instanceof $De?(e.Ma.addReference(r.key,t),QLt(e,r)):r instanceof MDe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||UDe(e,r.key)):an()}function QLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),NZ(e))}function NZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(ci.fromString(t)),r=e.Na.next();e.Fa.set(r,new BLt(n)),e.va=e.va.insert(n,r),CDe(e.remoteStore,new r0(bh(yZ(n.path)),r,"TargetPurposeLimboResolution",fZ.oe))}}async function fR(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=xZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!oR(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function JLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await EDe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await fR(n,r.us)}}function ZLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function zDe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=FDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YLt.bind(null,t),t.Sa.h_=MLt.bind(null,t.eventManager),t.Sa.ka=LLt.bind(null,t.eventManager),t}function e6t(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XLt.bind(null,t),t}class fpe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=V4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return oLt(this.persistence,new iLt,t.initialUser,this.serializer)}createPersistence(t){return new tLt(EZ.Hr,this.serializer)}createSharedClientState(t){return new hLt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class t6t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lpe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JLt.bind(null,this.syncEngine),await DLt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $Lt}()}createDatastore(t){const n=V4(t.databaseInfo.databaseId),r=function(s){return new yLt(s)}(t.databaseInfo);return function(s,o,a,u){return new _Lt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new ELt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>lpe(this.syncEngine,n,0),function(){return spe.D()?new spe:new pLt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new ULt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await cR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Fm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_u.UNAUTHENTICATED,this.clientId=zPe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=kZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function GB(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await EDe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dpe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await HDe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ope(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ope(t.remoteStore,i)),e._onlineComponents=t}function r6t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function HDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await GB(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!r6t(n))throw n;xI("Error using user provided cache. Falling back to memory cache: "+n),await GB(e,new fpe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await GB(e,new fpe);return e._offlineComponents}async function PZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await dpe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await dpe(e,new t6t))),e._onlineComponents}function i6t(e){return HDe(e).then(t=>t.persistence)}function s6t(e){return PZ(e).then(t=>t.remoteStore)}function o6t(e){return PZ(e).then(t=>t.syncEngine)}async function qDe(e){const t=await PZ(e),n=t.eventManager;return n.onListen=zLt.bind(null,t.syncEngine),n.onUnlisten=qLt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=VLt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=WLt.bind(null,t.syncEngine),n}function a6t(e){return e.asyncQueue.enqueue(async()=>{const t=await i6t(e),n=await s6t(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),lR(s)}(n)})}function u6t(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new VDe({next:d=>{o.enqueueAndForget(()=>DDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ODe(yZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return PDe(s,f)}(await qDe(e),e.asyncQueue,t,n,r)),r.promise}function l6t(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new VDe({next:d=>{o.enqueueAndForget(()=>DDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ODe(a,c,{includeMetadataChanges:!0,ra:!0});return PDe(s,f)}(await qDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GDe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function c6t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ppe(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function mpe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function q4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":an()}function ed(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=q4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gpe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}c6t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class DZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gpe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gpe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new C$t;switch(r.type){case"firstParty":return new k$t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hpe.get(n);r&&(It("ComponentProvider","Removing Datastore"),hpe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new r_(this.firestore,t,this._query)}}class Ka{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new N0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ka(this.firestore,t,this._key)}}class N0 extends r_{constructor(t,n,r){super(t,n,yZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ka(this.firestore,null,new Ut(t))}withConverter(t){return new N0(this.firestore,t,this._path)}}function rf(e,t,...n){if(e=ii(e),GDe("collection","path",t),e instanceof DZ){const r=ci.fromString(t,...n);return mpe(r),new N0(e,null,r)}{if(!(e instanceof Ka||e instanceof N0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return mpe(r),new N0(e.firestore,null,r)}}function ys(e,t,...n){if(e=ii(e),arguments.length===1&&(t=zPe.newId()),GDe("doc","path",t),e instanceof DZ){const r=ci.fromString(t,...n);return ppe(r),new Ka(e,null,new Ut(r))}{if(!(e instanceof Ka||e instanceof N0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return ppe(r),new Ka(e.firestore,e instanceof N0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new SDe(this,"async_queue_retry"),this.hu=()=>{const n=WB();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=WB();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=WB();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new cm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!oR(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=IZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&an()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Gy extends DZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new f6t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||YDe(this),this._firestoreClient.terminate()}}function d6t(e,t,n){n||(n="(default)");const r=jS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(_I(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function dR(e){return e._firestoreClient||YDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function YDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new z$t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,WDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new n6t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function h6t(e){return a6t(dR(e=ed(e,Gy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ex(Ea.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ex(Ea.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6t=/^__.*__$/;class m6t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Wy(t,this.data,this.fieldMask,n,this.fieldTransforms):new aR(t,this.data,n,this.fieldTransforms)}}class KDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Wy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function XDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class $Z{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new $Z(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return uM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(XDe(this.fu)&&p6t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class g6t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||V4(t)}Fu(t,n,r,i=!1){return new $Z({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function G4(e){const t=e._freezeSettings(),n=V4(e._databaseId);return new g6t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function QDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);LZ("Data must be an object, but it was:",o,r);const a=eOe(r,o);let u,l;if(s.merge)u=new Al(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=oH(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);nOe(c,d)||c.push(d)}u=new Al(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new m6t(new Nu(a),u,l)}class Y4 extends W4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Y4}}class MZ extends W4{_toFieldTransform(t){return new dMt(t.path,new kI)}isEqual(t){return t instanceof MZ}}function JDe(e,t,n,r){const i=e.Fu(1,t,n);LZ("Data must be an object, but it was:",i,r);const s=[],o=Nu.empty();t_(r,(u,l)=>{const c=FZ(t,u,n);l=ii(l);const f=i.Su(c);if(l instanceof Y4)s.push(c);else{const d=pR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Al(s);return new KDe(o,a,i.fieldTransforms)}function ZDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[oH(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(oH(t,s[d])),u.push(s[d+1]);const l=[],c=Nu.empty();for(let d=a.length-1;d>=0;--d)if(!nOe(l,a[d])){const h=a[d];let p=u[d];p=ii(p);const m=o.Su(h);if(p instanceof Y4)l.push(h);else{const g=pR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Al(l);return new KDe(c,f,o.fieldTransforms)}function y6t(e,t,n,r=!1){return pR(n,e.Fu(r?4:3,t))}function pR(e,t){if(tOe(e=ii(e)))return LZ("Unsupported field value:",t,e),eOe(e,t);if(e instanceof W4)return function(r,i){if(!XDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=pR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lMt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ls.fromDate(r);return{timestampValue:oM(i.serializer,s)}}if(r instanceof Ls){const s=new Ls(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oM(i.serializer,s)}}if(r instanceof OZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ex)return{bytesValue:mDe(i.serializer,r._byteString)};if(r instanceof Ka){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_Z(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${q4(r)}`)}(e,t)}function eOe(e,t){const n={};return VPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):t_(e,(r,i)=>{const s=pR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function tOe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ls||e instanceof OZ||e instanceof Ex||e instanceof Ka||e instanceof W4)}function LZ(e,t,n){if(!tOe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=q4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function oH(e,t,n){if((t=ii(t))instanceof hR)return t._internalPath;if(typeof t=="string")return FZ(e,t);throw uM("Field path arguments must be of type string or ",e,!1,void 0,n)}const v6t=new RegExp("[~\\*/\\[\\]]");function FZ(e,t,n){if(t.search(v6t)>=0)throw uM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hR(...t.split("."))._internalPath}catch{throw uM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function uM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function nOe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rOe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ka(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new b6t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(K4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class b6t extends rOe{data(){return super.data()}}function K4(e,t){return typeof t=="string"?FZ(e,t):t instanceof hR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jZ{}class iOe extends jZ{}function ype(e,t,...n){let r=[];t instanceof jZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof BZ).length,a=s.filter(u=>u instanceof X4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class X4 extends iOe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new X4(t,n,r)}_apply(t){const n=this._parse(t);return sOe(t._query,n),new r_(t.firestore,t.converter,QV(t._query,n))}_parse(t){const n=G4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){bpe(f,c);const h=[];for(const p of f)h.push(vpe(u,s,p));d={arrayValue:{values:h}}}else d=vpe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||bpe(f,c),d=y6t(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function w6t(e,t,n){const r=t,i=K4("where",e);return X4._create(i,r,n)}class BZ extends jZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new BZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)sOe(o,u),o=QV(o,u)}(t._query,n),new r_(t.firestore,t.converter,QV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class UZ extends iOe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new UZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new II(s,o)}(t._query,this._field,this._direction);return new r_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function E6t(e,t="asc"){const n=t,r=K4("orderBy",e);return UZ._create(r,n)}function vpe(e,t,n){if(typeof(n=ii(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JPe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ci.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bhe(e,new Ut(r))}if(n instanceof Ka)return Bhe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q4(n)}.`)}function bpe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sOe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class x6t{convertValue(t,n="none"){switch(fb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(cb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw an()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return t_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new OZ(_s(t.latitude),_s(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=hZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(TI(t));default:return null}}convertTimestamp(t){const n=cy(t);return new Ls(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ci.fromString(t);ri(wDe(r));const i=new CI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Fm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oOe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class aOe extends rOe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new XD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(K4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class XD extends aOe{data(t={}){return super.data(t)}}class S6t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new G2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new XD(this._firestore,this._userDataWriter,r.key,r,new G2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new XD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new G2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new XD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new G2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:T6t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function T6t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(e){e=ed(e,Ka);const t=ed(e.firestore,Gy);return u6t(dR(t),e._key).then(n=>I6t(t,e,n))}class uOe extends x6t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ex(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ka(this.firestore,null,n)}}function KT(e){e=ed(e,r_);const t=ed(e.firestore,Gy),n=dR(t),r=new uOe(t);return _6t(e._query),l6t(n,e._query).then(i=>new S6t(t,r,e,i))}function gu(e,t,n){e=ed(e,Ka);const r=ed(e.firestore,Gy),i=oOe(e.converter,t,n);return Q4(r,[QDe(G4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wu.none())])}function C6t(e,t,n,...r){e=ed(e,Ka);const i=ed(e.firestore,Gy),s=G4(i);let o;return o=typeof(t=ii(t))=="string"||t instanceof hR?ZDe(s,"updateDoc",e._key,t,n,r):JDe(s,"updateDoc",e._key,t),Q4(i,[o.toMutation(e._key,Wu.exists(!0))])}function A6t(e){return Q4(ed(e.firestore,Gy),[new U4(e._key,Wu.none())])}function Q4(e,t){return function(r,i){const s=new cm;return r.asyncQueue.enqueueAndForget(async()=>GLt(await o6t(r),i,s)),s.promise}(dR(e),t)}function I6t(e,t,n){const r=n.docs.get(t._key),i=new uOe(e);return new aOe(e,i,t._key,r,new G2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=G4(t)}set(t,n,r){this._verifyNotCommitted();const i=KB(t,this._firestore),s=oOe(i.converter,n,r),o=QDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=KB(t,this._firestore);let o;return o=typeof(n=ii(n))=="string"||n instanceof hR?ZDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):JDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=KB(t,this._firestore);return this._mutations=this._mutations.concat(new U4(n._key,Wu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function KB(e,t){if((e=ii(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function R6t(){return new MZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pe(e){return dR(e=ed(e,Gy)),new k6t(e,t=>Q4(e,t))}(function(t,n=!0){(function(i){US=i})(e_),Mm(new $h("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Gy(new A$t(r.getProvider("auth-internal")),new N$t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new CI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vf(Mhe,"4.6.3",t),Vf(Mhe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=new Map,lOe={activated:!1,tokenObservers:[]},N6t={initialized:!1,enabled:!1};function Fs(e){return aH.get(e)||Object.assign({},lOe)}function P6t(e,t){return aH.set(e,t),aH.get(e)}function J4(){return N6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cOe="https://content-firebaseappcheck.googleapis.com/v1",D6t="exchangeRecaptchaV3Token",O6t="exchangeDebugToken",wpe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new bI,this.pending.promise.catch(n=>{}),await L6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new bI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function L6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Fu=new FS("appCheck","AppCheck",F6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Epe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function zZ(e){if(!Fs(e).activated)throw Fu.create("use-before-activation",{appName:e.name})}function fOe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=xP(n)+"d:"),r&&(o+=xP(r)+"h:"),o+=xP(i)+"m:"+xP(s)+"s",o}function xP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Fu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Fu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Fu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Fu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function j6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${cOe}/projects/${n}/apps/${r}:${D6t}?key=${i}`,body:{recaptcha_v3_token:t}}}function dOe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${cOe}/projects/${n}/apps/${r}:${O6t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6t="firebase-app-check-database",U6t=1,PI="firebase-app-check-store",hOe="debug-token";let SP=null;function pOe(){return SP||(SP=new Promise((e,t)=>{try{const n=indexedDB.open(B6t,U6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Fu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(PI,{keyPath:"compositeKey"})}}}catch(n){t(Fu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),SP)}function z6t(e){return gOe(yOe(e))}function V6t(e,t){return mOe(yOe(e),t)}function H6t(e){return mOe(hOe,e)}function q6t(){return gOe(hOe)}async function mOe(e,t){const r=(await pOe()).transaction(PI,"readwrite"),s=r.objectStore(PI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Fu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function gOe(e){const n=(await pOe()).transaction(PI,"readonly"),i=n.objectStore(PI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Fu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function yOe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new k4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6t(e){if(qJ()){let t;try{t=await z6t(e)}catch(n){DI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function XB(e,t){return qJ()?V6t(e,t).catch(n=>{DI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function G6t(){let e;try{e=await q6t()}catch{}if(e)return e;{const t=WNt();return H6t(t).catch(n=>DI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HZ(){return J4().enabled}async function qZ(){const e=J4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Y6t(){const e=ONe(),t=J4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new bI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(G6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6t={error:"UNKNOWN_ERROR"};function X6t(e){return HJ.encodeString(JSON.stringify(e),!1)}async function uH(e,t=!1){const n=e.app;zZ(n);const r=Fs(n);let i=r.token,s;if(i&&!Mw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Mw(u)?i=u:await XB(n,void 0))}if(!t&&i&&Mw(i))return{token:i.token};let o=!1;if(HZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=VZ(dOe(n,await qZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await XB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Fs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?DI.warn(u.message):DI.error(u),s=u}let a;return i?s?Mw(i)?a={token:i.token,internalError:s}:a=Spe(s):(a={token:i.token},r.token=i,await XB(n,i)):a=Spe(s),o&&_Oe(n,a),a}async function Q6t(e){const t=e.app;zZ(t);const{provider:n}=Fs(t);if(HZ()){const r=await qZ(),{token:i}=await VZ(dOe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function vOe(e,t,n,r){const{app:i}=e,s=Fs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Mw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),xpe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>xpe(e))}function bOe(e,t){const n=Fs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xpe(e){const{app:t}=e,n=Fs(t);let r=n.tokenRefresher;r||(r=J6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function J6t(e){const{app:t}=e;return new M6t(async()=>{const n=Fs(t);let r;if(n.token?r=await uH(e,!0):r=await uH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Fs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wpe.RETRIAL_MIN_WAIT,wpe.RETRIAL_MAX_WAIT)}function _Oe(e,t){const n=Fs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Mw(e){return e.expireTimeMillis-Date.now()>0}function Spe(e){return{token:X6t(K6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Fs(this.app);for(const n of t)bOe(this.app,n.next);return Promise.resolve()}}function e4t(e,t){return new Z6t(e,t)}function t4t(e){return{getToken:t=>uH(e,t),getLimitedUseToken:()=>Q6t(e),addTokenListener:t=>vOe(e,"INTERNAL",t),removeTokenListener:t=>bOe(e.app,t)}}const n4t="@firebase/app-check",r4t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4t="https://www.google.com/recaptcha/api.js";function s4t(e,t){const n=new bI,r=Fs(e);r.reCAPTCHAState={initialized:n};const i=o4t(e),s=Epe(!1);return s?Tpe(e,t,s,i,n):l4t(()=>{const o=Epe(!1);if(!o)throw new Error("no recaptcha");Tpe(e,t,o,i,n)}),n.promise}function Tpe(e,t,n,r,i){n.ready(()=>{u4t(e,t,n,r),i.resolve(n)})}function o4t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function a4t(e){zZ(e);const n=await Fs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Fs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function u4t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Fs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Fs(e).reCAPTCHAState.succeeded=!1}}),s=Fs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function l4t(e){const t=document.createElement("script");t.src=i4t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;f4t(this._throttleData);const i=await a4t(this._app).catch(o=>{throw Fu.create("recaptcha-error")});if(!(!((t=Fs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Fu.create("recaptcha-error");let s;try{s=await VZ(j6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=c4t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Fu.create("throttled",{time:fOe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=jS(t,"heartbeat"),s4t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof WZ?this._siteKey===t._siteKey:!1}}function c4t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+$6t,httpStatus:e};{const n=t?t.backoffCount:0,r=QNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function f4t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Fu.create("throttled",{time:fOe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4t(e=GJ(),t){e=ii(e);const n=jS(e,"app-check");if(J4().initialized||Y6t(),HZ()&&qZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Fu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return h4t(e,t.provider,t.isTokenAutoRefreshEnabled),Fs(e).isTokenAutoRefreshEnabled&&vOe(r,"INTERNAL",()=>{}),r}function h4t(e,t,n){const r=P6t(e,Object.assign({},lOe));r.activated=!0,r.provider=t,r.cachedTokenPromise=W6t(e).then(i=>(i&&Mw(i)&&(r.token=i,_Oe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const p4t="app-check",Cpe="app-check-internal";function m4t(){Mm(new $h(p4t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return e4t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Cpe).initialize()})),Mm(new $h(Cpe,e=>{const t=e.getProvider("app-check").getImmediate();return t4t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Vf(n4t,r4t)}m4t();function TP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wOe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof TP=="function"&&TP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof TP=="function"&&TP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,x){if(typeof E!="function"&&this.state===l||typeof x!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:x;h(S,C,this.outcome)}else this.queue.push(new d(S,E,x));return S};function d(E,x,S){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,x,S){s(function(){var C;try{C=x(S)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,x){var S=g(p,x);if(S.status==="error")return a.reject(E,S.value);var C=S.value;if(C)m(E,C);else{E.state=l,E.outcome=x;for(var A=-1,k=E.queue.length;++A<k;)E.queue[A].callFulfilled(x)}return E},a.reject=function(E,x){E.state=u,E.outcome=x;for(var S=-1,C=E.queue.length;++S<C;)E.queue[S].callRejected(x);return E};function p(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function m(E,x){var S=!1;function C(O){S||(S=!0,a.reject(E,O))}function A(O){S||(S=!0,a.resolve(E,O))}function k(){x(A,C)}var N=g(k);N.status==="error"&&C(N.value)}function g(E,x){var S={};try{S.value=E(x),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var x=new this(o);return a.reject(x,E)}f.all=_;function _(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),k=0,N=-1,O=new this(o);++N<S;)D(E[N],N);return O;function D($,F){x.resolve($).then(M,function(B){C||(C=!0,a.reject(O,B))});function M(B){A[F]=B,++k===S&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,k=new this(o);++A<S;)N(E[A]);return k;function N(O){x.resolve(O).then(function(D){C||(C=!0,a.resolve(k,D))},function(D){C||(C=!0,a.reject(k,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",E="readwrite";function x(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),k(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=x(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function P(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,D(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ye.forages.length;Ve++){var qe=ye.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,D(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var mn=Ge[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ye(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var mn=Et.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,Et.key,st++);Pt!==void 0?ye(Pt):Et.continue()}else ye()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,_.call(se)==="[object Blob]"?C(Ve.db).then(function(qe){return qe?se:M(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var mn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;Oe(Pt)}}catch(Pt){Oe(Pt)}})}).catch(Oe)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ye()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ye(Ge)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ye(qe.error)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ge?ye(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ye(qe.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):D(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ye=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;A(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var mn=st[Et];mn._dbInfo.db=null,mn._dbInfo.version=qe}var Pt=new f(function(Bn,kr){var Rr=u.open(Y.name,qe);Rr.onerror=function(Ho){var Ed=Rr.result;Ed.close(),kr(Ho)},Rr.onupgradeneeded=function(){var Ho=Rr.result;Ho.deleteObjectStore(Y.storeName)},Rr.onsuccess=function(){var Ho=Rr.result;Ho.close(),Bn(Ho)}});return Pt.then(function(Bn){Ge.db=Bn;for(var kr=0;kr<st.length;kr++){var Rr=st[kr];Rr._dbInfo.db=Bn,k(Rr._dbInfo)}}).catch(function(Bn){throw(N(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ye=Oe.then(function(Ve){A(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var mn=new f(function(Pt,Bn){var kr=u.deleteDatabase(Y.name);kr.onerror=function(){var Rr=kr.result;Rr&&Rr.close(),Bn(kr.error)},kr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},kr.onsuccess=function(){var Rr=kr.result;Rr&&Rr.close(),Pt(Rr)}});return mn.then(function(Pt){qe.db=Pt;for(var Bn=0;Bn<Ge.length;Bn++){var kr=Ge[Bn];k(kr._dbInfo)}}).catch(function(Pt){throw(N(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",ge="ui08",ht="uic8",vt="si16",me="si32",Ae="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Cr=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|Oe>>4,st[ye++]=(Oe&15)<<4|Ve>>2,st[ye++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=Cr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Cr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=We:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ae:Z==="[object Int32Array]"?ye+=me:Z==="[object Uint32Array]"?ye+=He:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function An(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ae:return new Uint16Array(le);case me:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:gn,deserialize:An,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function zo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ye}function $i(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ye,le)},le)},le):le(Oe,Ve)},le)}function In(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,mn=0;mn<Et;mn++){var Pt=st.item(mn),Bn=Pt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Pt.key,mn+1),Bn!==void 0){ye(Bn);return}}ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(Oe,Ve){ye.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ye._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(mn){$i(mn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Pt,Bn){Ve(Bn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ye,[Y,qe,Z,fe-1]));return}Ve(mn)}})})}).catch(Ve)});return d(le,Z),le}function gs(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function pp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function cl(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function _d(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function xr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ii(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Qr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function cu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Qr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Pt){return new f(function(Bn,kr){qe.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Bn()},function(Rr,Ho){kr(Ho)})})}for(var st=[],Et=0,mn=le.storeNames.length;Et<mn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Pt){Ve(Pt)})},function(qe){Ve(qe)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Ia={_driver:"webSQLStorage",_initStorage:zo,_support:Ue(),iterate:Mi,getItem:In,setItem:gs,removeItem:pp,clear:cl,length:_d,key:xr,keys:Ii,dropInstance:cu};function ka(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Te(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],Oe=0;Oe<ye;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ye,Z),ye}function Ir(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ce,_support:ka(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Te,length:jn,key:Ht,keys:On,dropInstance:Ir},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(sr(se[ye],Z))return!0;ye++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},ki={},Hs={},Jr={INDEXEDDB:Ke,WEBSQL:Ia,LOCALSTORAGE:Vt},mo=[Jr.INDEXEDDB._driver,Jr.WEBSQL._driver,Jr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),Vo={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ra(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var tc=function(){function Y(se){o(this,Y);for(var Z in Jr)if(Jr.hasOwnProperty(Z)){var fe=Jr[Z],ye=fe._driver;this[Z]=ye,ki[ye]||this.defineDriver(fe)}this._defaultConfig=qs({},Vo),this._config=qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Fi.concat("_initStorage"),Et=0,mn=st.length;Et<mn;Et++){var Pt=st[Et],Bn=!Hr(Li,Pt);if((Bn||Z[Pt])&&typeof Z[Pt]!="function"){Ve(Ge);return}}var kr=function(){for(var Ed=function(nc){return function(){var fu=new Error("Method "+nc+" is not implemented by the current driver"),gp=f.reject(fu);return d(gp,arguments[arguments.length-1]),gp}},mp=0,dT=Li.length;mp<dT;mp++){var o1=Li[mp];Z[o1]||(Z[o1]=Ed(o1))}};kr();var Rr=function(Ed){ki[qe]&&console.info("Redefining LocalForage driver: "+qe),ki[qe]=Z,Hs[qe]=Ed,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Rr,Ve):Rr(!!Z._support):Rr(!0)}catch(Ho){Ve(Ho)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=ki[Z]?f.resolve(ki[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var mn=0;function Pt(){for(;mn<Et.length;){var Bn=Et[mn];return mn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Pt)}Ve();var kr=new Error("No available storage method found.");return le._driverSet=f.reject(kr),le._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(mn){le._driver=mn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Hs[Z]},Y.prototype._extend=function(Z){qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var Oe=Z[ye];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Ra(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),wd=new tc;r.exports=wd},{3:3}]},{},[4])(4)})})(wOe);var g4t=wOe.exports;const pw=Kl(g4t);var _o=[];for(var QB=0;QB<256;++QB)_o.push((QB+256).toString(16).slice(1));function y4t(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}var CP,v4t=new Uint8Array(16);function b4t(){if(!CP&&(CP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!CP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return CP(v4t)}var _4t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ape={randomUUID:_4t};function lM(e,t,n){if(Ape.randomUUID&&!t&&!e)return Ape.randomUUID();e=e||{};var r=e.random||(e.rng||b4t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,y4t(r)}class EOe{constructor(t){hu(this,"engine");hu(this,"connected",!1);hu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function cM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function XT(e){return e.participantId!==void 0}class vc extends EOe{constructor(){super("firebase");hu(this,"RECAPTCHAV3TOKEN","6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2");hu(this,"firestore");hu(this,"collectionPrefix","prod-");hu(this,"studyCollection");hu(this,"storage");hu(this,"studyId","");hu(this,"localForage",pw.createInstance({name:"currentParticipantId"}));hu(this,"participantData",null);const n=eJ.parse(`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`),r=BNe(n);this.firestore=d6t(r,{}),this.storage=w$t();try{d4t(r,{provider:new WZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await h6t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=nM();if(!i.currentUser&&(await BDt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await cM(JSON.stringify(r));if(this.studyCollection=rf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(XT(a))return this.participantData=a,a;const l=await cM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=oc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=lM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ys(this.studyCollection,"sequenceAssignment");await gu(i,{});const s=rf(i,"sequenceAssignment"),o=ys(s,this.currentParticipantId),a=ype(s,w6t("participantId","==","")),u=await KT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await A6t(m.ref),await gu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await gu(o,{participantId:this.currentParticipantId,timestamp:R6t()});const l=ype(s,E6t("timestamp","asc")),d=(await KT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=oc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await GT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");XT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return XT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=lM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=rf(this.firestore,"user-management"),i=await KT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await gu(ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=oc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await GT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");XT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=rf(this.firestore,`${this.collectionPrefix}${n}`),s=oc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!XT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=ys(i,"sequenceAssignment"),u=rf(a,"sequenceAssignment"),l=ys(u,r);await C6t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await gu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await YB(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await gu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ys(this.firestore,"metadata","collections"),i=await YB(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ys(this.firestore,"metadata","collections");await gu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ys(this.firestore,"metadata","collections");return await gu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ys(this.firestore,"metadata","collections"),i=await YB(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await gu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=oc(this.storage,n),s=(await GT(r)).items.map(o=>Ohe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=oc(this.storage,n),o=(await GT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=oc(this.storage,n),s=oc(this.storage,r),o=await VB(i),u=await(await fetch(o)).blob();await zB(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=rf(this.firestore,n),s=ys(i,"sequenceAssignment"),o=rf(s,"sequenceAssignment"),a=rf(this.firestore,r),u=ys(a,"sequenceAssignment");await gu(u,{});const l=rf(u,"sequenceAssignment"),c=await KT(o),f=_pe(this.firestore);c.docs.forEach(d=>{const h=ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=rf(this.firestore,n),i=ys(r,"sequenceAssignment"),s=rf(i,"sequenceAssignment"),o=await KT(s),a=_pe(this.firestore);o.forEach(u=>{const l=ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=oc(this.storage,n);return(await GT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await VB(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await VB(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await zB(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await zB(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Ohe(i)}}const xOe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),i_=()=>I.useContext(xOe);function w4t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=async()=>{const h=nM();try{await GDt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof vc)try{h=nM()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof vc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=WDt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return b.jsx(xOe.Provider,{value:d,children:i.determiningStatus?b.jsx(Ll,{visible:!0}):e})}function ZC({studyIds:e}){const t=Yh(),{studyId:n}=Em(),r=Oy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Cs(),{user:o,logout:a}=i_(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:b.jsx(NQe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(EQe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(qwe,{}),href:"settings",needAdmin:!0}];return b.jsx(pi.Header,{p:"md",children:b.jsxs(Ha,{mt:-7,align:"center",children:[b.jsx(Ha.Col,{span:6,children:b.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Dy,{w:40,src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(Nl,{w:"md"}),b.jsx(ui,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(Ha.Col,{span:6,children:b.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&b.jsx(vk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),b.jsx(YG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),b.jsx(Wh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:b.jsxs(Nt,{direction:"column",mt:20,children:[b.jsx(Xe,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?b.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Vu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:b.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Vu}${d.href}`,children:d.name},`menu-item-${d.name}`)),b.jsxs(pe,{ml:10,children:[b.jsx(BE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function GZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=CL(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;VJ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return b.jsxs(b.Fragment,{children:[b.jsxs(ls,{style:{gap:n},children:[b.jsx(ai,{label:"Download all participants data as JSON",children:b.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:b.jsx(AQe,{})})}),b.jsx(ai,{label:"Download all participants data as a tidy CSV",children:b.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:b.jsx(Wwe,{})})})]}),i&&a.length>0&&b.jsx(iNt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function E4t({cellData:e}){return b.jsx(qt.Td,{children:b.jsx(Nf,{miw:100,children:Object.entries(e.answer).map(([t,n])=>b.jsxs(pe,{children:[b.jsxs(Xe,{fw:700,span:!0,children:[" ",`${t}: `]}),b.jsx(Xe,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Ipe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return b.jsxs(qt.Td,{children:[t.toFixed(1)," ","s"]})}function x4t(e){const{metaData:t}=e;return b.jsx(qt.Td,{children:b.jsx(xY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(Nf,{gap:"xs",children:[b.jsxs(pe,{children:["IP:"," ",t.ip]}),b.jsxs(pe,{children:["Language:"," ",t.language]}),b.jsxs(pe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(pe,{children:["User Agent:"," ",t.userAgent]})]})})})}function S4t({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Cs(),{studyId:o}=Em(),{user:a}=i_(),u=async _=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,_),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>m7({title:"Confirm rejecting participants",children:b.jsxs(Xe,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",b.jsx(Xe,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const _=l.map(async w=>await u(w));await Promise.all(_),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(_){_==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(_)?c(l.filter(w=>w!==_)):c([...l,_])}const g=Hxe(r.sequence),y=[b.jsx(qt.Th,{children:b.jsx(Nt,{justify:"center",children:b.jsx(Sl,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),b.jsx(qt.Th,{children:"ID"},"ID"),b.jsx(qt.Th,{children:"Status"},"status"),b.jsx(qt.Th,{children:"Meta"},"meta"),...g.flatMap(_=>[b.jsx(qt.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),b.jsxs(qt.Th,{children:[b.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),b.jsx(qt.Th,{children:"Total Duration"},"total-duration")],v=p.map(_=>b.jsxs(qt.Tr,{children:[b.jsx(qt.Td,{children:b.jsx(Nt,{justify:"center",children:b.jsx(Sl,{mb:-4,checked:l.includes(_.participantId),onChange:()=>m(_.participantId)})})}),b.jsx(qt.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),b.jsx(qt.Td,{children:b.jsxs(Nt,{direction:"row",align:"center",children:[_.rejected?b.jsx(ai,{label:"Rejected",children:b.jsx(jY,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?b.jsx(ai,{label:"Completed",children:b.jsx(zwe,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(ai,{label:"In Progress",children:b.jsx(Hwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&b.jsxs(Xe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([w,E])=>E.endTime!==void 0).length/(Tm(_.sequence).length-1)*100).toFixed(2),"%"]})]})}),_.metadata?b.jsx(x4t,{metaData:_.metadata}):b.jsx(qt.Td,{children:"N/A"}),g.map(w=>{const E=zxe(_.sequence,w.orderPath),x=E&&Object.entries(_.answers).sort((S,C)=>{const A=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10);return A-k}).filter(([S])=>{const C=S.slice(0,S.lastIndexOf("_")),A=parseInt(S.slice(S.lastIndexOf("_")+1),10);return C===w.componentName&&A<=E[0].lastIndex&&A>=E[0].firstIndex});return x!==null&&x.length>=w.timesSeenInBlock+1?b.jsxs(_r.Fragment,{children:[b.jsx(E4t,{cellData:x[w.timesSeenInBlock][1]}),b.jsx(Ipe,{cellData:x[w.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`):b.jsxs(_r.Fragment,{children:[b.jsx(qt.Td,{children:"N/A"}),b.jsx(qt.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),b.jsx(Ipe,{cellData:{startTime:Math.min(...Object.values(_.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(_.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${_.participantId}-total-duration`)]},_.participantId));return p.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Ll,{visible:f,overlayProps:{blur:2}}),b.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[b.jsx(ls,{children:b.jsx(vk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(_=>({value:_.participantId,label:_.participantId})),searchable:!0,value:null,leftSection:b.jsx(UQe,{size:14}),onChange:_=>_&&m(_)})}),b.jsxs(ls,{children:[b.jsx(GZ,{allParticipants:[...e,...t],studyId:o||""}),b.jsx(fn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),b.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(qt,{striped:!0,withTableBorder:!0,children:[b.jsx(qt.Thead,{children:b.jsx(qt.Tr,{children:y})}),b.jsx(qt.Tbody,{children:v})]})})]}):b.jsxs(b.Fragment,{children:[b.jsx(Nl,{h:"xl"}),b.jsx(Nt,{justify:"center",align:"center",children:b.jsx(Xe,{children:"No data available"})})]})}const T4t="_root_1spq0_1",C4t="_description_1spq0_9",A4t="_title_1spq0_10",I4t="_closeButton_1spq0_14",k4t={root:T4t,description:C4t,title:A4t,closeButton:I4t},fM=e=>{const{title:t,message:n,color:r}=e;zb.show({title:t,message:n,position:"top-center",classNames:k4t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function R4t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,_]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:x}=Cs(),S=x,C=I.useCallback(async()=>{E(!0);const P=await S.getSnapshots(e);h(P),E(!1)},[S,e]);I.useEffect(()=>{C()},[C]);const A=async(P,...z)=>{_(!0);const W=await P(...z);W.status==="SUCCESS"?(C(),_(!1),await t(),W.notifications&&W.notifications.forEach(j=>{fM(j)})):(_(!1),fM({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await A(S.createSnapshot.bind(S),e,!1)},N=async()=>{m(""),r(!1),await A(S.createSnapshot.bind(S),e,!0)},O=async()=>{a(!1),await A(S.renameSnapshot.bind(S),c,g)},D=async P=>{await A(S.restoreSnapshot.bind(S),e,P)},$=async()=>{m(""),s(!1),await A(S.removeSnapshotOrLive.bind(S),c,!0)},F=async()=>{m(""),l(!1),await A(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>m7({title:"Create a Snapshot",children:b.jsx(Xe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=P=>m7({title:"Restore Snapshot",children:b.jsx(Xe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(P)}),U=P=>{const z=/-snapshot-(.+)$/,W=P.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const z=P.slice(P.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return b.jsxs(b.Fragment,{children:[b.jsx(Ll,{visible:v}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(ui,{order:5,children:"Create a Snapshot"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(Xe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(ai,{label:"Create a snapshot",children:b.jsx(fn,{onClick:M,children:"Snapshot"})})]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(ui,{order:5,children:"Archive Data"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(ai,{label:"Snapshot and Delete Data",children:b.jsx(fn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(ui,{order:5,children:"Delete Data"}),b.jsxs(Xe,{children:["This will delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(ai,{label:"Delete Data",children:b.jsx(fn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),b.jsx(Nl,{h:"xl"}),b.jsxs(Nt,{direction:"column",children:[b.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(ui,{order:5,children:"Snapshots"})}),b.jsxs(pe,{style:{position:"relative"},children:[b.jsx(Ll,{visible:w}),d.length>0?b.jsxs(qt,{children:[b.jsx(qt.Thead,{children:b.jsxs(qt.Tr,{children:[b.jsx(qt.Th,{children:"Snapshot Name"}),b.jsx(qt.Th,{children:"Date Created"}),b.jsx(qt.Th,{children:"Actions"})]})}),b.jsx(qt.Tbody,{children:d.map(P=>b.jsxs(qt.Tr,{children:[b.jsx(qt.Td,{children:P.alternateName}),b.jsx(qt.Td,{children:U(P.originalName)}),b.jsx(qt.Td,{children:b.jsxs(Nt,{children:[b.jsx(ai,{label:"Rename",children:b.jsx(fn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:b.jsx(MQe,{})})}),b.jsx(ai,{label:"Restore Snapshot",children:b.jsx(fn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:b.jsx(jQe,{})})}),b.jsx(ai,{label:"Delete Snapshot",children:b.jsx(fn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(P.originalName)},children:b.jsx(Gwe,{})})}),b.jsx(GZ,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):b.jsx(Xe,{children:"No snapshots."})]})]}),b.jsxs(Yi,{opened:n,onClose:()=>{r(!1),m("")},title:b.jsx(Xe,{children:"Archive Data"}),children:[b.jsx(Xe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(Jg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),b.jsxs(Yi,{opened:i,onClose:()=>{s(!1),m("")},title:b.jsx(Xe,{children:"Delete Snapshot"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(Jg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),b.jsxs(Yi,{opened:o,onClose:()=>{a(!1),y("")},title:b.jsx(Xe,{children:"Rename Snapshot"}),children:[b.jsx(Jg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),b.jsx(fn,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),b.jsxs(Yi,{opened:u,onClose:()=>{l(!1),m("")},title:b.jsx(Xe,{children:"Delete Live Data"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(Jg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function N4t({studyId:e}){const{storageEngine:t}=Cs(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&b.jsxs(Nf,{children:[b.jsx(Jw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),b.jsx(Jw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),b.jsx(Jw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function P4t({studyId:e,refresh:t}){const{storageEngine:n}=Cs();return b.jsx(Oc,{children:b.jsxs(wu,{multiple:!0,variant:"contained",children:[b.jsxs(wu.Item,{value:"ReVISit Modes",children:[b.jsx(wu.Control,{children:b.jsx(ui,{order:5,children:"ReVISit Modes"})}),b.jsx(wu.Panel,{children:b.jsx(N4t,{studyId:e})})]},"modes"),b.jsxs(wu.Item,{value:"Data Management",children:[b.jsx(wu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(ui,{order:5,children:"Data Management"})}),b.jsx(wu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(R4t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const V_=14;function SOe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(Nt,{ml:4,gap:4,children:[b.jsx(ai,{label:"Completed",children:b.jsx(_0,{variant:"light",color:"green",leftSection:b.jsx(zwe,{width:V_,height:V_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(ai,{label:"In Progress",children:b.jsx(_0,{variant:"light",color:"orange",leftSection:b.jsx(Hwe,{width:V_,height:V_,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(ai,{label:"Rejected",children:b.jsx(_0,{variant:"light",color:"red",leftSection:b.jsx(jY,{width:V_,height:V_,style:{paddingTop:1}}),pb:1,children:n})})]})}const kpe={};function lH(e,t){e===void 0&&(e=kpe),t===void 0&&(t=kpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var D4t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),O4t=Object.prototype.hasOwnProperty;function cH(e,t){return O4t.call(e,t)}function fH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)cH(e,i)&&r.push(i);return r}function Il(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function dH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function B1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function TOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function hH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(hH(e[t]))return!0}else if(typeof e=="object"){for(var r=fH(e),i=r.length,s=0;s<i;s++)if(hH(e[r[s]]))return!0}}return!1}function Rpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var COe=function(e){D4t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Rpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Rpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=COe,$4t=Il,Lw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=dM(n,this.path);r&&(r=Il(r));var i=Nv(n,{op:"remove",path:this.from}).removed;return Nv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=dM(n,this.from);return Nv(n,{op:"add",path:this.path,value:Il(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:OI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},M4t={add:function(e,t,n){return dH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lw.move,copy:Lw.copy,test:Lw.test,_get:Lw._get};function dM(e,t){if(t=="")return e;var n={op:"_get",path:t};return Nv(e,n),n.value}function Nv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):hM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=dM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=OI(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Il(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=hM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=TOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!dH(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);dH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=M4t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Lw[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Z4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Il(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Nv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function L4t(e,t,n){var r=Nv(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function hM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lw[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&hH(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=AOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function AOe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Z4(Il(t),Il(e),n||!0);else{n=n||hM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function OI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!OI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!OI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const F4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:OI,applyOperation:Nv,applyPatch:Z4,applyReducer:L4t,deepClone:$4t,getValueByPointer:dM,validate:AOe,validator:hM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var YZ=new WeakMap,j4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),B4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function U4t(e){return YZ.get(e)}function z4t(e,t){return e.observers.get(t)}function V4t(e,t){e.observers.delete(t.callback)}function H4t(e,t){t.unobserve()}function q4t(e,t){var n=[],r,i=U4t(e);if(!i)i=new j4t(e),YZ.set(e,i);else{var s=z4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Il(e),t){r.callback=t,r.next=null;var o=function(){pH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){pH(r),clearTimeout(r.next),V4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new B4t(t,r)),r}function pH(e,t){t===void 0&&(t=!1);var n=YZ.get(e.object);KZ(n.value,e.object,e.patches,"",t),e.patches.length&&Z4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function KZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=fH(t),o=fH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(cH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?KZ(c,f,n,r+"/"+B1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+B1(l),value:Il(c)}),n.push({op:"replace",path:r+"/"+B1(l),value:Il(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+B1(l),value:Il(c)}),n.push({op:"remove",path:r+"/"+B1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!cH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+B1(l),value:Il(t[l])})}}}function W4t(e,t,n){n===void 0&&(n=!1);var r=[];return KZ(e,t,r,"",n),r}const G4t=Object.freeze(Object.defineProperty({__proto__:null,compare:W4t,generate:pH,observe:q4t,unobserve:H4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},F4t,G4t,{JsonPatchError:COe,deepClone:Il,escapePathComponent:B1,unescapePathComponent:TOe});var Y4t=/("(?:[^\\"]|\\.)*")|[:,]/g,K4t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(Y4t,function(x,S){return S||x+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const JB=Kl(K4t);function ul(e,t,n){return e.fields=t||[],e.fname=n,e}function Ki(e){return e==null?null:e.fname}function ga(e){return e==null?null:e.fields}function IOe(e){return e.length===1?X4t(e[0]):Q4t(e)}const X4t=e=>function(t){return t[e]},Q4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function ip(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Lc(e,t,n){const r=ip(e);return e=r.length===1?r[0]:e,ul((n&&n.get||IOe)(r),[e],t||e)}const mR=Lc("id"),xa=ul(e=>e,[],"identity"),Kg=ul(()=>0,[],"zero"),qS=ul(()=>1,[],"one"),Fc=ul(()=>!0,[],"true"),Ag=ul(()=>!1,[],"false");function J4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const kOe=0,XZ=1,QZ=2,ROe=3,NOe=4;function JZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J4t,r=e||kOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=XZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=QZ&&n(t||"warn","WARN",arguments),this},info(){return r>=ROe&&n(t||"log","INFO",arguments),this},debug(){return r>=NOe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const Npe=e=>e!=="__proto__";function WS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Z4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;GS(r,s,i[s],o)}return r},{})}function GS(e,t,n,r){if(!Npe(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?GS(s,i,n[i]):Npe(i)&&(s[i]=n[i])}else e[t]=n}function Z4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ha(e){return e==null||e===""?null:+e}const POe=e=>t=>e*Math.exp(t),DOe=e=>t=>Math.log(e*t),OOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),$Oe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,pM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function eF(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function MOe(e,t){return eF(e,t,ha,xa)}function LOe(e,t){var n=Math.sign(e[0]);return eF(e,t,DOe(n),POe(n))}function FOe(e,t,n){return eF(e,t,pM(n),pM(1/n))}function jOe(e,t,n){return eF(e,t,OOe(n),$Oe(n))}function tF(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function ZZ(e,t,n){return tF(e,t,n,ha,xa)}function eee(e,t,n){const r=Math.sign(e[0]);return tF(e,t,n,DOe(r),POe(r))}function mM(e,t,n,r){return tF(e,t,n,pM(r),pM(1/r))}function tee(e,t,n,r){return tF(e,t,n,OOe(r),$Oe(r))}function BOe(e){return 1+~~(new Date(e).getMonth()/3)}function UOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function zOe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const eFt="descending";function nee(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||tFt;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===eFt?-1:1),i.push(a=_n(a)?a:Lc(a,null,n)),(ga(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ul(o(i,r),Object.keys(s))}const nF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),tFt=(e,t)=>e.length===1?nFt(e[0],t[0]):rFt(e,t,e.length),nFt=(e,t)=>function(n,r){return nF(e(n),e(r))*t},rFt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=nF(s(r),s(i));return o*t[a]});function Sa(e){return _n(e)?e:()=>e}function ree(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Fh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function VOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const iFt=Object.prototype.hasOwnProperty;function jt(e,t){return iFt.call(e,t)}const AP={};function YS(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==AP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===AP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=AP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==AP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function HOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function Fw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Yy(e){return typeof e=="boolean"}function P0(e){return Object.prototype.toString.call(e)==="[object Date]"}function qOe(e){return e&&_n(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function WOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function iee(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||IOe,s=a=>i(t?[a]:ip(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ul(o,e,"key")}function GOe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const sFt=1e4;function YOe(e){e=+e||sFt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function KOe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function Y2(e,t){let n="";for(;--t>=0;)n+=e;return n}function XOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?Y2(i,o)+s:r==="center"?Y2(i,~~(o/2))+s+Y2(i,Math.ceil(o/2)):s+Y2(i,o)}function gR(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function see(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const oFt=e=>lr(e)||P0(e)?e:Date.parse(e);function oee(e,t){return t=t||oFt,e==null||e===""?null:t(e)}function aee(e){return e==null||e===""?null:e+""}function td(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function QOe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Mg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function aFt(e){return e}function uFt(e){if(e==null)return aFt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function lFt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function cFt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Ppe(e,n)})}:Ppe(e,t)}function Ppe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=JOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function JOe(e,t){var n=uFt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&lFt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function fFt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function dFt(e){return JOe(e,hFt.apply(this,arguments))}function hFt(e,t,n){var r,i,s;if(arguments.length>1)r=pFt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:fFt(e,r)}}function pFt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const $o="year",nl="quarter",ya="month",$s="week",rl="date",da="day",jh="dayofyear",Hl="hours",ql="minutes",jc="seconds",nd="milliseconds",uee=[$o,nl,ya,$s,rl,da,jh,Hl,ql,jc,nd],ZB=uee.reduce((e,t,n)=>(e[t]=1+n,e),{});function lee(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(ZB,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[$s]||n[da]?1:0)+(n[nl]||n[ya]||n[rl]?1:0)+(n[jh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>ZB[i]-ZB[s]),t}const mFt={[$o]:"%Y ",[nl]:"Q%q ",[ya]:"%b ",[rl]:"%d ",[$s]:"W%U ",[da]:"%a ",[jh]:"%j ",[Hl]:"%H:00",[ql]:"00:%M",[jc]:":%S",[nd]:".%L",[`${$o}-${ya}`]:"%Y-%m ",[`${$o}-${ya}-${rl}`]:"%Y-%m-%d ",[`${Hl}-${ql}`]:"%H:%M"};function ZOe(e,t){const n=bn({},mFt,t),r=lee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const X1=new Date;function cee(e){return X1.setFullYear(e),X1.setMonth(0),X1.setDate(1),X1.setHours(0,0,0,0),X1}function e3e(e){return n3e(new Date(e))}function t3e(e){return mH(new Date(e))}function n3e(e){return am.count(cee(e.getFullYear())-1,e)}function mH(e){return _S.count(cee(e.getFullYear())-1,e)}function gH(e){return cee(e).getDay()}function gFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function r3e(e){return s3e(new Date(e))}function i3e(e){return yH(new Date(e))}function s3e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return S0.count(t-1,e)}function yH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return wS.count(t-1,e)}function vH(e){return X1.setTime(Date.UTC(e,0,1)),X1.getUTCDay()}function yFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function o3e(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,_)=>(_=_||y,vFt(n[_],r[_],y===o&&s,v)),u=new Date,l=td(e),c=l[$o]?a($o):Sa(2012),f=l[ya]?a(ya):l[nl]?a(nl):Kg,d=l[$s]&&l[da]?a(da,1,$s+da):l[$s]?a($s,1):l[da]?a(da,1):l[rl]?a(rl,1):l[jh]?a(jh,1):qS,h=l[Hl]?a(Hl):Kg,p=l[ql]?a(ql):Kg,m=l[jc]?a(jc):Kg,g=l[nd]?a(nd):Kg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function vFt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function xx(e,t,n){return t+e*7-(n+6)%7}const bFt={[$o]:e=>e.getFullYear(),[nl]:e=>Math.floor(e.getMonth()/3),[ya]:e=>e.getMonth(),[rl]:e=>e.getDate(),[Hl]:e=>e.getHours(),[ql]:e=>e.getMinutes(),[jc]:e=>e.getSeconds(),[nd]:e=>e.getMilliseconds(),[jh]:e=>n3e(e),[$s]:e=>mH(e),[$s+da]:(e,t)=>xx(mH(e),e.getDay(),gH(t)),[da]:(e,t)=>xx(1,e.getDay(),gH(t))},_Ft={[nl]:e=>3*e,[$s]:(e,t)=>xx(e,0,gH(t))};function a3e(e,t){return o3e(e,t||1,bFt,_Ft,gFt)}const wFt={[$o]:e=>e.getUTCFullYear(),[nl]:e=>Math.floor(e.getUTCMonth()/3),[ya]:e=>e.getUTCMonth(),[rl]:e=>e.getUTCDate(),[Hl]:e=>e.getUTCHours(),[ql]:e=>e.getUTCMinutes(),[jc]:e=>e.getUTCSeconds(),[nd]:e=>e.getUTCMilliseconds(),[jh]:e=>s3e(e),[$s]:e=>yH(e),[da]:(e,t)=>xx(1,e.getUTCDay(),vH(t)),[$s+da]:(e,t)=>xx(yH(e),e.getUTCDay(),vH(t))},EFt={[nl]:e=>3*e,[$s]:(e,t)=>xx(e,0,vH(t))};function u3e(e,t){return o3e(e,t||1,wFt,EFt,yFt)}const xFt={[$o]:Ah,[nl]:ZA.every(3),[ya]:ZA,[$s]:_S,[rl]:am,[da]:am,[jh]:am,[Hl]:U6,[ql]:j6,[jc]:Qp,[nd]:JE},SFt={[$o]:Ih,[nl]:eI.every(3),[ya]:eI,[$s]:wS,[rl]:S0,[da]:S0,[jh]:S0,[Hl]:z6,[ql]:B6,[jc]:Qp,[nd]:JE};function KS(e){return xFt[e]}function XS(e){return SFt[e]}function l3e(e,t,n){return e?e.offset(t,n):void 0}function c3e(e,t,n){return l3e(KS(e),t,n)}function f3e(e,t,n){return l3e(XS(e),t,n)}function d3e(e,t,n,r){return e?e.range(t,n,r):void 0}function h3e(e,t,n,r){return d3e(KS(e),t,n,r)}function p3e(e,t,n,r){return d3e(XS(e),t,n,r)}const K2=1e3,X2=K2*60,Q2=X2*60,rF=Q2*24,TFt=rF*7,Dpe=rF*30,bH=rF*365,m3e=[$o,ya,rl,Hl,ql,jc,nd],J2=m3e.slice(0,-1),Z2=J2.slice(0,-1),eC=Z2.slice(0,-1),CFt=eC.slice(0,-1),AFt=[$o,$s],Ope=[$o,ya],g3e=[$o],QT=[[J2,1,K2],[J2,5,5*K2],[J2,15,15*K2],[J2,30,30*K2],[Z2,1,X2],[Z2,5,5*X2],[Z2,15,15*X2],[Z2,30,30*X2],[eC,1,Q2],[eC,3,3*Q2],[eC,6,6*Q2],[eC,12,12*Q2],[CFt,1,rF],[AFt,1,TFt],[Ope,1,Dpe],[Ope,3,3*Dpe],[g3e,1,bH]];function y3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(gR(t))/n;let i=gS(a=>a[2]).right(QT,r),s,o;return i===QT.length?(s=g3e,o=W0(t[0]/bH,t[1]/bH,n)):i?(i=QT[r/QT[i-1][2]<QT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=m3e,o=Math.max(W0(t[0],t[1],n),1)),{units:s,step:o}}function tC(e){const t={};return n=>t[n]||(t[n]=e(n))}function IFt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=kFt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function kFt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function v3e(e){const t=tC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Xv(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return IFt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Xv(o??",f");const a=W0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=lTe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=cTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=uTe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let _H;b3e();function b3e(){return _H=v3e({format:jy,formatPrefix:LK})}function _3e(e){return v3e(aTe(e))}function gM(e){return arguments.length?_H=_3e(e):_H}function $pe(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(jc),i=t(ql),s=t(Hl),o=t(rl),a=t($s),u=t(ya),l=t(nl),c=t($o),f=e(n[nd]||".%L"),d=e(n[jc]||":%S"),h=e(n[ql]||"%I:%M"),p=e(n[Hl]||"%I %p"),m=e(n[rl]||n[da]||"%a %d"),g=e(n[$s]||"%b %d"),y=e(n[ya]||"%B"),v=e(n[nl]||"%B"),_=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function w3e(e){const t=tC(e.format),n=tC(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):$pe(t,KS,r),utcFormat:r=>mt(r)?n(r):$pe(n,XS,r),timeParse:tC(e.parse),utcParse:tC(e.utcParse)}}let wH;E3e();function E3e(){return wH=w3e({format:XK,parse:QK,utcFormat:Jb,utcParse:x2e})}function x3e(e){return w3e(v2e(e))}function $I(e){return arguments.length?wH=x3e(e):wH}const EH=(e,t)=>bn({},e,t);function S3e(e,t){const n=e?_3e(e):gM(),r=t?x3e(t):$I();return EH(n,r)}function fee(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?EH(gM(e),$I(t)):EH(gM(),$I())}function RFt(){return b3e(),E3e(),fee()}const NFt=/^(data:|([A-Za-z]+:)?\/\/)/,PFt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,DFt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Mpe="file://";function OFt(e,t){return n=>({options:n||{},sanitize:MFt,load:$Ft,fileAccess:!!t,file:LFt(t),http:jFt(e)})}async function $Ft(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function MFt(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=PFt.test(e.replace(DFt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=NFt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Mpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Mpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function LFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):FFt}async function FFt(){Le("No file system access.")}function jFt(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:BFt}async function BFt(){Le("No HTTP fetch method available.")}const UFt=e=>e!=null&&e===e,zFt=e=>e==="true"||e==="false"||e===!0||e===!1,VFt=e=>!Number.isNaN(Date.parse(e)),T3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),HFt=e=>T3e(e)&&Number.isInteger(+e),xH={boolean:see,integer:ha,number:ha,date:oee,string:aee,unknown:xa},IP=[zFt,HFt,T3e,VFt],qFt=["boolean","integer","number","date"];function C3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=IP.length,i=IP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&UFt(u)&&!IP[a](u)&&(i[a]=0,++o,o===IP.length))return"string";return qFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function A3e(e,t){return t.reduce((n,r)=>(n[r]=C3e(e,r),n),{})}function Lpe(e){const t=function(n,r){const i={delimiter:e};return dee(n,r?bn(r,i):i)};return t.responseType="text",t}function dee(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),iTe(t.delimiter).parse(e+"")}dee.responseType="text";function WFt(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function hee(e,t){const n=t&&t.property?Lc(t.property):xa;return gt(e)&&!WFt(e)?GFt(n(e),t):n(JSON.parse(e))}hee.responseType="json";function GFt(e,t){return!je(e)&&qOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const YFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function I3e(e,t){let n,r,i,s;return e=hee(e,t),t&&t.feature?(n=cFt,i=t.feature):t&&t.mesh?(n=dFt,i=t.mesh,s=YFt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}I3e.responseType="json";const QD={dsv:dee,csv:Lpe(","),tsv:Lpe("	"),json:hee,topojson:I3e};function pee(e,t){return arguments.length>1?(QD[e]=t,this):jt(QD,e)?QD[e]:null}function k3e(e){const t=pee(e);return t&&t.responseType||"text"}function R3e(e,t,n,r){t=t||{};const i=pee(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&KFt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function KFt(e,t,n,r){if(!e.length)return;const i=$I();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=A3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!xH[p])throw Error("Illegal format pattern: "+h+":"+p);return xH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const iF=OFt(typeof fetch<"u"&&fetch,null);function sF(e){const t=e||xa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function JD(e,t){try{await t(e)}catch(n){e.error(n)}}const N3e=Symbol("vega_id");let XFt=1;function oF(e){return!!(e&&Lt(e))}function Lt(e){return e[N3e]}function P3e(e,t){return e[N3e]=t,e}function Er(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:P3e(t,XFt++)}function mee(e){return aF(e,Er({}))}function aF(e,t){for(const n in e)t[n]=e[n];return t}function D3e(e,t){return P3e(t,Lt(e))}function s_(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function O3e(e){return e&&e.constructor===o_}function o_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:o_,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(Er(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const ZD="_:mod:_";function uF(){Object.defineProperty(this,ZD,{writable:!0,value:{}})}uF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[ZD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[ZD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[ZD]={},this}};let QFt=0;const JFt="pulse",ZFt=new uF,e5t=1,t5t=2;function Kr(e,t,n,r){this.id=++QFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Fpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Kr.prototype={targets(){return this._targets||(this._targets=sF(mR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Fpe(e5t),modified:Fpe(t5t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new uF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Kr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===JFt)pt(a).forEach(f=>{f instanceof Kr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||ZFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function n5t(e,t,n,r){let i=1,s;return e instanceof Kr?s=e:e&&e.prototype instanceof Kr?s=new e:_n(e)?s=new Kr(null,e):(i=0,s=new Kr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function r5t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let i5t=0;function lF(e,t,n){this.id=++i5t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ig(e,t,n){return new lF(e,t,n)}lF.prototype={_filter:Fc,_apply:xa,targets(){return this._targets||(this._targets=sF(mR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ig(e);return this.targets().add(t),t},apply(e){const t=Ig(null,e);return this.targets().add(t),t},merge(){const e=Ig();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ig();return this.targets().add(Ig(null,null,ree(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ig(null,null,()=>n=!0)),t.targets().add(Ig(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fc,this._targets=null}};function s5t(e,t,n,r){const i=this,s=Ig(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function o5t(e,t){const n=this.locale();return R3e(e,t,n.timeParse,n.utcParse)}function a5t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function u5t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:k3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function l5t(e,t,n){const r=this,i=r._pending||c5t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Fc).insert(s.data||[])),i.done(),s}function c5t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const f5t={skip:!0};function d5t(e,t,n,r,i){return(e instanceof Kr?p5t:h5t)(this,e,t,n,r,i),this}function h5t(e,t,n,r,i,s){const o=bn({},s,f5t);let a,u;_n(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Kr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;O3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function p5t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Kr(null,m5t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function m5t(e,t){return t=_n(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function g5t(e){e.rank=++this._rank}function y5t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const yM={},Ld=1,Lg=2,Np=4,v5t=Ld|Lg,jpe=Ld|Np,H_=Ld|Lg|Np,Bpe=8,JT=16,Upe=32,zpe=64;function D0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function e9(e,t){const n=[];return Mg(e,t,r=>n.push(r)),n}function Vpe(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function kP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}D0.prototype={StopPropagation:yM,ADD:Ld,REM:Lg,MOD:Np,ADD_REM:v5t,ADD_MOD:jpe,ALL:H_,REFLOW:Bpe,SOURCE:JT,NO_SOURCE:Upe,NO_FIELDS:zpe,fork(e){return new D0(this.dataflow).init(this,e)},clone(){const e=this.fork(H_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(H_|JT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new D0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&zpe)&&(n.fields=e.fields),t&Ld?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Lg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Np?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Upe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||H_;return t&Ld&&this.add.length||t&Lg&&this.rem.length||t&Np&&this.mod.length},reflow(e){if(e)return this.fork(H_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Np,Vpe(this,Ld))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ld&&(n.addF=kP(n.addF,t)),e&Lg&&(n.remF=kP(n.remF,t)),e&Np&&(n.modF=kP(n.modF,t)),e&JT&&(n.srcF=kP(n.srcF,t)),n},materialize(e){e=e||H_;const t=this;return e&Ld&&t.addF&&(t.add=e9(t.add,t.addF),t.addF=null),e&Lg&&t.remF&&(t.rem=e9(t.rem,t.remF),t.remF=null),e&Np&&t.modF&&(t.mod=e9(t.mod,t.modF),t.modF=null),e&JT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&JT)return Mg(n.source,n.srcF,r),n;e&Ld&&Mg(n.add,n.addF,r),e&Lg&&Mg(n.rem,n.remF,r),e&Np&&Mg(n.mod,n.modF,r);const i=n.source;if(e&Bpe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Mg(i,Vpe(n,jpe),r):Mg(i,n.srcF,r))}return n}};function gee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(gee,D0,{fork(e){const t=new D0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function b5t(e,t,n){const r=this,i=[];if(r._pulse)return $3e(r);if(r._pending&&await r._pending,t&&await JD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new D0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=sF(mR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=yM),u!==yM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await JD(r,c[f].callback)}return n&&await JD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function _5t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function w5t(e,t,n){return this._pulse?$3e(this):(this.evaluate(e,t,n),this)}function E5t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function $3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function x5t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function S5t(e,t){const n=e.source,r=this._clock;return n&&je(n)?new gee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||T5t(this._pulse,n&&n.pulse)}function T5t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==yM&&(e.source=t.source),e)}const yee={skip:!1,force:!1};function C5t(e,t){const n=t||yee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function A5t(e,t,n){const r=n||yee;return(e.set(t)||r.force)&&this.touch(e,r),this}function I5t(e,t,n){this.touch(e,n||yee);const r=new D0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function k5t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),M3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,R5t(t,0,e)):r=n,r}}}function M3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function R5t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,M3e(e,r,t,n)}function _E(){this.logger(JZ()),this.logLevel(XZ),this._clock=0,this._rank=0,this._locale=fee();try{this._loader=iF()}catch{}this._touched=sF(mR),this._input={},this._pulse=null,this._heap=k5t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function ZT(e){return function(){return this._log[e].apply(this,arguments)}}_E.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:ZT("error"),warn:ZT("warn"),info:ZT("info"),debug:ZT("debug"),logLevel:ZT("level"),cleanThreshold:1e4,add:n5t,connect:r5t,rank:g5t,rerank:y5t,pulse:I5t,touch:C5t,update:A5t,changeset:o_,ingest:a5t,parse:o5t,preload:l5t,request:u5t,events:s5t,on:d5t,evaluate:b5t,run:w5t,runAsync:_5t,runAfter:E5t,_enqueue:x5t,_getPulse:S5t};function Pe(e,t){Kr.call(this,e,null,t)}lt(Pe,Kr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Sx={};function L3e(e){const t=F3e(e);return t&&t.Definition||null}function F3e(e){return e=e&&e.toLowerCase(),jt(Sx,e)?Sx[e]:null}function*j3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function vee(e,t,n){const r=Float64Array.from(j3e(e,n));return r.sort(sm),t.map(i=>oSe(r,i))}function bee(e,t){return vee(e,[.25,.5,.75],t)}function _ee(e,t){const n=e.length,r=Yat(e,t),i=bee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function B3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Bc=Math.random;function N5t(e){Bc=e}function U3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(j3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Bc()*s)];c[l]=a/s}return c.sort(sm),[VA(c,n/2),VA(c,1-n/2)]}function z3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?P5t(s,t+t/4):s}function P5t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function D5t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function O5t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Bc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const V3e=Math.sqrt(2*Math.PI),$5t=Math.SQRT2;let e2=NaN;function cF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(e2===e2)n=e2,e2=NaN;else{do n=Bc()*2-1,r=Bc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,e2=r*s}return e+n*t}function wee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*V3e)}function fF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function dF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*$5t*M5t(2*e-1)}function M5t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Eee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>cF(n,r),pdf:s=>wee(s,n,r),cdf:s=>fF(s,n,r),icdf:s=>dF(s,n,r)};return i.mean(e).stdev(t)}function xee(e,t){const n=Eee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=_ee(e)),i):t},sample(){return e[~~(Bc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function See(e,t){return e=e||0,t=t??1,Math.exp(e+cF()*t)}function Tee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*V3e*e)}function Cee(e,t,n){return fF(Math.log(e),t,n)}function Aee(e,t,n){return Math.exp(dF(e,t,n))}function H3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>See(n,r),pdf:s=>Tee(s,n,r),cdf:s=>Cee(s,n,r),icdf:s=>Aee(s,n,r)};return i.mean(e).stdev(t)}function q3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Bc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Iee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Bc()}function kee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Ree(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Nee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function W3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Iee(n,r),pdf:s=>kee(s,n,r),cdf:s=>Ree(s,n,r),icdf:s=>Nee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Pee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function yR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function hF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function vR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function QS(e,t,n,r,i){let s=0,o=0;return vR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Dee(e,t,n){let r=0,i=0,s=0,o=0,a=0;vR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=yR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:QS(e,t,n,i,l)}}function G3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;vR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=yR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:QS(e,t,n,i,l)}}function Y3e(e,t,n){const[r,i,s,o]=hF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;vR(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=yR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:QS(e,t,n,o,y)}}function K3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;vR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=yR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:QS(e,t,n,a,c)}}function Oee(e,t,n){const[r,i,s,o]=hF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-_*u,x=S=>(S=S-s,_*S*S+w*S+E+o);return{coef:[E-w*s+_*s*s+o,w-2*_*s,_],predict:x,rSquared:QS(e,t,n,o,x)}}function X3e(e,t,n,r){if(r===0)return Pee(e,t,n);if(r===1)return Dee(e,t,n);if(r===2)return Oee(e,t,n);const[i,s,o,a]=hF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=F5t(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:L5t(f,y,-o,a),predict:v,rSquared:QS(e,t,n,a,v)}}function L5t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function F5t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Hpe=2,qpe=1e-12;function Q3e(e,t,n,r){const[i,s,o,a]=hF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Hpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let E=0,x=0,S=0,C=0,A=0;const k=1/Math.abs(i[w]-y||1);for(let D=v;D<=_;++D){const $=i[D],F=s[D],M=j5t(Math.abs(y-$)*k)*d[D],B=$*M;E+=M,x+=B,S+=F*M,C+=F*B,A+=$*B}const[N,O]=yR(x/E,S/E,C/E,A/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),B5t(i,g+1,p)}if(h===Hpe)break;const m=uSe(f);if(Math.abs(m)<qpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?qpe:(v=1-y*y)*v}return U5t(i,c,o,a)}function j5t(e){return(e=1-e*e*e)*e*e}function B5t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function U5t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const z5t=.5*Math.PI/180;function pF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=V5t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&H5t(f,m,d,h,p)>z5t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function V5t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function H5t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function q5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function SH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:q5t(e)}function J3e(e,t,n){return n||e+(t?"_"+t:"")}const t9=()=>{},W5t={init:t9,add:t9,rem:t9,idx:0},MI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},bR=Object.keys(MI).filter(e=>e!=="__count__");function G5t(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},W5t,t)}[...bR,"__count__"].forEach(e=>{MI[e]=G5t(e,MI[e])});function Z3e(e,t,n){return MI[e](n,t)}function e$e(e,t){return e.idx-t.idx}function Y5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=MI[i]())})};return e.forEach(n),Object.values(t).sort(e$e)}function K5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function X5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Q5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function J5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function t$e(e,t){const n=t||xa,r=Y5t(e),i=e.slice().sort(e$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=K5t,s.prototype.add=X5t,s.prototype.rem=Q5t,s.prototype.set=J5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function $ee(e){this._key=e?Lc(e):Lt,this.reset()}const Uo=$ee.prototype;Uo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Uo.add=function(e){this._add.push(e)};Uo.rem=function(e){this._rem.push(e)};Uo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Uo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Uo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=VOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Uo.argmin=function(e){return this.extent(e)[0]||{}};Uo.argmax=function(e){return this.extent(e)[1]||{}};Uo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Uo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Uo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=bee(this.values(),e),this._get=e),this._q};Uo.q1=function(e){return this.quartile(e)[0]};Uo.q2=function(e){return this.quartile(e)[1]};Uo.q3=function(e){return this.quartile(e)[2]};Uo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=U3e(this.values(),1e3,.05,e),this._get=e),this._ci};Uo.ci0=function(e){return this.ci(e)[0]};Uo.ci1=function(e){return this.ci(e)[1]};function dy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}dy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(dy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=pt(ga(v)),w=_.length;let E=0,x;for(;E<w;++E)r[x=_[E]]||(r[x]=1,t.push(x))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ki(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:SH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ki(f),g=J3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(Z3e(d,h,g))}return this._measures=this._measures.map(v=>t$e(v,v.field)),Object.create(null)},cellkey:SH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new $ee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?D3e(t.tuple,s):Er(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Z5t=1e-14;function Mee(e){Pe.call(this,null,e)}Mee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Mee,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ga(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=B3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ha(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Z5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ul(u,ga(t),e.name||"bin_"+Ki(t))}});function n$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?KOe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Lee(e){Pe.call(this,[],e)}Lee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(Lee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=n$e(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(s_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function r$e(e){Kr.call(this,null,ejt,e)}lt(r$e,Kr);function ejt(e){return this.value&&!e.modified()?this.value:nee(e.fields,e.orders)}function Fee(e){Pe.call(this,null,e)}Fee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function tjt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(Fee,Pe,{transform(e,t){const n=f=>d=>{for(var h=tjt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Er({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function jee(e){Pe.call(this,null,e)}jee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(jee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=njt(a,i,s,e.filter||Fc)):n.mod=a,n.source=this.value,n.modifies(r)}});function njt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Er(s)),s={},s[t]=l);return i}const Wpe={kde:xee,mixture:q3e,normal:Eee,lognormal:H3e,uniform:W3e},rjt="distributions",Gpe="function",ijt="field";function i$e(e,t){const n=e[Gpe];jt(Wpe,n)||Le("Unknown distribution function: "+n);const r=Wpe[n]();for(const i in e)i===ijt?r.data((e.from||t()).map(e[i])):i===rjt?r[i](e[i].map(s=>i$e(s,t))):typeof r[i]===Gpe&&r[i](e[i]);return r}function Bee(e){Pe.call(this,null,e)}const s$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],sjt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:s$e},{name:"weights",type:"number",array:!0}]};Bee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:s$e.concat(sjt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Bee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=i$e(e.distribution,ojt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Fh(r.data()),l=pF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Er(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function ojt(e){return()=>e.materialize(e.SOURCE).source}function o$e(e,t){return e?e.map((n,r)=>t[r]||Ki(n)):null}function Uee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const a$e="bin";function zee(e){Pe.call(this,null,e)}zee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:a$e}]};const ajt=(e,t)=>gR(Fh(e,t))/30;lt(zee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Uee(t.source,e.groupby,xa),i=e.smooth||!1,s=e.field,o=e.step||ajt(n,s),a=s_((p,m)=>s(p)-s(m)),u=e.as||a$e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of z3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function u$e(e){Kr.call(this,null,ujt,e),this.modified(!0)}lt(u$e,Kr);function ujt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ul(n=>t(n,e),ga(t),Ki(t))}function Vee(e){Pe.call(this,[void 0,void 0],e)}Vee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(Vee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ha(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ki(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Hee(e,t){Kr.call(this,e),this.parent=t,this.count=0}lt(Hee,Kr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function mF(e){Pe.call(this,{},e),this._keys=YS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(mF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Hee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function l$e(e){Kr.call(this,null,ljt,e)}lt(l$e,Kr);function ljt(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>Lc(t)):Lc(e.name,e.as)}function qee(e){Pe.call(this,YS(),e)}qee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(qee,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Wee(e){Pe.call(this,[],e)}Wee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Wee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=o$e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=mee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Gee(e){Pe.call(this,[],e)}Gee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(Gee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ki),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=mee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Yee(e){Pe.call(this,null,e)}Yee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(Yee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function c$e(e){Pe.call(this,[],e)}lt(c$e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Er(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const RP={value:"value",median:uSe,mean:aSe,min:g3,max:ch},cjt=[];function Kee(e){Pe.call(this,[],e)}Kee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function fjt(e){var t=e.method||RP.value,n;if(RP[t]==null)Le("Unrecognized imputation method: "+t);else return t===RP.value?(n=e.value!==void 0?e.value:0,()=>n):RP[t]}function djt(e){const t=e.field;return n=>n?t(n):NaN}lt(Kee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=fjt(e),i=djt(e),s=Ki(e.field),o=Ki(e.key),a=(e.groupby||[]).map(Ki),u=hjt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Er(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function hjt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):cjt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Xee(e){dy.call(this,e)}Xee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Xee,dy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Qee(e){Pe.call(this,null,e)}Qee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Qee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Uee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ki),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Fh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=xee(h,o)[a],m=e.counts?h.length:1,g=c||Fh(h);pF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Er(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function f$e(e){Kr.call(this,null,pjt,e)}lt(f$e,Kr);function pjt(e){return this.value&&!e.modified()?this.value:iee(e.fields,e.flat)}function d$e(e){Pe.call(this,[],e),this._pending=null}lt(d$e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?n9(this,t,this._pending):mjt(e)?t.StopPropagation:e.values?n9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>n9(this,t,pt(r.data)))}});function mjt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function n9(e,t,n){n.forEach(Er);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Jee(e){Pe.call(this,{},e)}Jee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Jee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ki),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function h$e(e){Kr.call(this,null,gjt,e)}lt(h$e,Kr);function gjt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function p$e(e){Kr.call(this,null,yjt,e)}lt(p$e,Kr);function yjt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function m$e(e){Pe.call(this,null,e)}lt(m$e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Zee(e){dy.call(this,e)}Zee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(Zee,dy,{_transform:dy.prototype.transform,transform(e,t){return this._transform(vjt(e,t),t)}});function vjt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ga(n).concat(ga(r)),o=_jt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>bjt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function bjt(e,t,n,r){return ul(i=>t(i)===e?n(i):NaN,r,e+"")}function _jt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(nF),t?i.slice(0,t):i}function g$e(e){mF.call(this,e)}lt(g$e,mF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(ga(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Er(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ete(e){Pe.call(this,null,e)}ete.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(ete,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=o$e(e.fields,e.as||[]),s=r?(a,u)=>wjt(a,u,r,i):aF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Er({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function wjt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function y$e(e){Pe.call(this,null,e)}lt(y$e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function tte(e){Pe.call(this,null,e)}tte.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Ejt=1e-14;lt(tte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Uee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ki),a=[],u=e.step||.01,l=e.probs||$u(u/2,1-Ejt,u),c=l.length;return s.forEach(f=>{const d=vee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Er(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function v$e(e){Pe.call(this,null,e)}lt(v$e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=mee(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function nte(e){Pe.call(this,[],e),this.count=0}nte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(nte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Bc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function rte(e){Pe.call(this,null,e)}rte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(rte,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=$u(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Er(s)}),n.add=t.add.concat(this.value),n}});function b$e(e){Pe.call(this,null,e),this.modified(!0)}lt(b$e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ite(e){Pe.call(this,null,e)}const _$e=["unit0","unit1"];ite.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:uee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:_$e}]};lt(ite,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?XS:KS)(s.unit).offset,a=e.as||_$e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ga(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:y3e({extent:e.extent||Fh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=lee(r),o=this.value||{},a=(n?u3e:a3e)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function w$e(e){Pe.call(this,YS(),e)}lt(w$e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function E$e(e){Pe.call(this,null,e)}lt(E$e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(s_(e.sort)):t.source).map(e.field))}});function xjt(e,t,n,r){const i=LI[e](t,n);return{init:i.init||Kg,update:function(s,o){o[r]=i.next(s)}}}const LI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=LI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=LI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Sjt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Sjt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Tjt=Object.keys(LI);function x$e(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(ga(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ki(g),w=J3e(p,_,s[m]);if(h(g),o.push(w),jt(LI,p))a.push(xjt(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(Z3e(p,v,w))}}),(c.length||f.length)&&(this.cell=Cjt(f,c,d)),this.inputs=Object.keys(u)}const S$e=x$e.prototype;S$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};S$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Cjt(e,t,n){e=e.map(u=>t$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new $ee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function ste(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}ste.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Tjt.concat(bR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(ste,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=s_(e.sort),i=SH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new x$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Ajt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=n$e(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ajt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?gS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)Ijt(c,o,f,u),s&&kjt(c,l),t.update(c,a[f])}function Ijt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function kjt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Rjt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:dy,bin:Mee,collect:Lee,compare:r$e,countpattern:Fee,cross:jee,density:Bee,dotbin:zee,expression:u$e,extent:Vee,facet:mF,field:l$e,filter:qee,flatten:Wee,fold:Gee,formula:Yee,generate:c$e,impute:Kee,joinaggregate:Xee,kde:Qee,key:f$e,load:d$e,lookup:Jee,multiextent:h$e,multivalues:p$e,params:m$e,pivot:Zee,prefacet:g$e,project:ete,proxy:y$e,quantile:tte,relay:v$e,sample:nte,sequence:rte,sieve:b$e,subflow:Hee,timeunit:ite,tupleindex:w$e,values:E$e,window:ste},Symbol.toStringTag,{value:"Module"}));function O0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Njt=()=>typeof Image<"u"?Image:null;function ote(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Pjt="identity",Tx="linear",Bm="log",_R="pow",wR="sqrt",gF="symlog",db="time",hb="utc",wh="sequential",JS="diverging",Cx="quantile",yF="quantize",vF="threshold",ate="ordinal",TH="point",T$e="band",ute="bin-ordinal",Vs="continuous",ER="discrete",xR="discretizing",Qc="interpolating",lte="temporal";function Djt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Ojt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function cte(){const e=Yb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ote(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=$u(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,q0(h,m)-1),v=m===g?y:q0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return cte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function C$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return C$e(t())},e}function $jt(){return C$e(cte().paddingInner(1))}var Mjt=Array.prototype.map;function Ljt(e){return Mjt.call(e,ha)}const Fjt=Array.prototype.slice;function A$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(q0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Ljt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Fjt.call(r),n):t.slice()},n.tickFormat=function(r,i){return u2e(e[0],Qn(e),r??10,i)},n.copy=function(){return A$e().domain(n.domain()).range(n.range())},n}const vM=new Map,I$e=Symbol("vega_scale");function k$e(e){return e[I$e]=!0,e}function jjt(e){return e&&e[I$e]===!0}function Bjt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Djt(s):s.invertExtent?Ojt(s):void 0),s.type=e,k$e(s)};return r.metadata=td(pt(n)),r}function gr(e,t,n){return arguments.length>1?(vM.set(e,Bjt(e,t,n)),this):R$e(e)?vM.get(e):void 0}gr(Pjt,l2e);gr(Tx,Kf,Vs);gr(Bm,f2e,[Vs,Bm]);gr(_R,YK,Vs);gr(wR,Umt,Vs);gr(gF,d2e,Vs);gr(db,tI,[Vs,lte]);gr(hb,n0t,[Vs,lte]);gr(wh,ZK,[Vs,Qc]);gr(`${wh}-${Tx}`,ZK,[Vs,Qc]);gr(`${wh}-${Bm}`,S2e,[Vs,Qc,Bm]);gr(`${wh}-${_R}`,eX,[Vs,Qc]);gr(`${wh}-${wR}`,r0t,[Vs,Qc]);gr(`${wh}-${gF}`,T2e,[Vs,Qc]);gr(`${JS}-${Tx}`,C2e,[Vs,Qc]);gr(`${JS}-${Bm}`,A2e,[Vs,Qc,Bm]);gr(`${JS}-${_R}`,tX,[Vs,Qc]);gr(`${JS}-${wR}`,i0t,[Vs,Qc]);gr(`${JS}-${gF}`,I2e,[Vs,Qc]);gr(Cx,h2e,[xR,Cx]);gr(yF,p2e,xR);gr(vF,m2e,xR);gr(ute,A$e,[ER,xR]);gr(ate,Yb,ER);gr(T$e,cte,ER);gr(TH,$jt,ER);function R$e(e){return vM.has(e)}function a_(e,t){const n=vM.get(e);return n&&n.metadata[t]}function fte(e){return a_(e,Vs)}function Ax(e){return a_(e,ER)}function CH(e){return a_(e,xR)}function N$e(e){return a_(e,Bm)}function Ujt(e){return a_(e,lte)}function P$e(e){return a_(e,Qc)}function D$e(e){return a_(e,Cx)}const zjt=["clamp","base","constant","exponent"];function O$e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function bF(e,t,n){return CK(dte(t||"rgb",n),e)}function $$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function M$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),zjt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function dte(e,t){const n=$ct[Vjt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Vjt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Hjt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},qjt={accent:o0t,category10:s0t,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:a0t,observable10:u0t,paired:l0t,pastel1:c0t,pastel2:f0t,set1:d0t,set2:h0t,set3:p0t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function L$e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function F$e(e,t){for(const n in e)hte(n,t(e[n]))}const Ype={};F$e(qjt,L$e);F$e(Hjt,e=>bF(L$e(e)));function hte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Ype[e]=t,this):Ype[e]}const eO="symbol",Wjt="discrete",Gjt="gradient",Yjt=e=>je(e)?e.map(t=>String(t)):String(e),Kjt=(e,t)=>e[1]-t[1],Xjt=(e,t)=>t[1]-e[1];function pte(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(gR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===db?KS(t):e.type==hb?XS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function j$e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Kjt;if(i>s&&(r=s,s=i,i=r,o=Xjt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function mte(e,t){return e.bins?j$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function B$e(e,t,n,r,i,s){const o=t.type;let a=Yjt;if(o===db||i===db)a=e.timeFormat(r);else if(o===hb||i===hb)a=e.utcFormat(r);else if(N$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=U$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function U$e(e,t,n){const r=mte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const AH={[Cx]:"quantiles",[yF]:"thresholds",[vF]:"domain"},z$e={[Cx]:"quantiles",[yF]:"domain"};function V$e(e,t){return e.bins?Zjt(e.bins):e.type===Bm?U$e(e,t,!0):AH[e.type]?Jjt(e[AH[e.type]]()):mte(e,t)}function Qjt(e,t,n){const r=t[z$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Jjt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Zjt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const e8t=e=>AH[e.type]||e.bins;function H$e(e,t,n,r,i,s,o){const a=z$e[t.type]&&s!==db&&s!==hb?Qjt(e,t,i):B$e(e,t,n,i,s,o);return r===eO&&e8t(t)?t8t(a):r===Wjt?n8t(a):r8t(a)}const t8t=e=>(t,n,r)=>{const i=Kpe(r[n+1],Kpe(r.max,1/0)),s=Xpe(t,e),o=Xpe(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},Kpe=(e,t)=>e??t,n8t=e=>(t,n)=>n?e(t):null,r8t=e=>t=>e(t),Xpe=(e,t)=>Number.isFinite(e)?t(e):null;function i8t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===vF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function s8t(e,t,n,r){const i=r||t.type;return mt(n)&&Ujt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===db?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===hb?e.utcFormat("%A, %d %B %Y, %X UTC"):H$e(e,t,5,null,n,r,!0)}function q$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=s8t(e,t,n.format,n.formatType);if(CH(t.type)){const s=V$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ax(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let W$e=0;function o8t(){W$e=0}const bM="p_";function gte(e){return e&&e.gradient}function G$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?bM:"";return i||(i=e.id="gradient_"+W$e++,r==="radial"?(e.x1=Cd(e.x1,.5),e.y1=Cd(e.y1,.5),e.r1=Cd(e.r1,0),e.x2=Cd(e.x2,.5),e.y2=Cd(e.y2,.5),e.r2=Cd(e.r2,.5),s=bM):(e.x1=Cd(e.x1,0),e.y1=Cd(e.y1,0),e.x2=Cd(e.x2,1),e.y2=Cd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Cd(e,t){return e??t}function Y$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Qpe={basis:{curve:$2e},"basis-closed":{curve:A0t},"basis-open":{curve:I0t},bundle:{curve:k0t,tension:"beta",value:.85},cardinal:{curve:R0t,tension:"tension",value:0},"cardinal-open":{curve:P0t,tension:"tension",value:0},"cardinal-closed":{curve:N0t,tension:"tension",value:0},"catmull-rom":{curve:D0t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:O0t,tension:"alpha",value:.5},"catmull-rom-open":{curve:$0t,tension:"alpha",value:.5},linear:{curve:nX},"linear-closed":{curve:M0t},monotone:{horizontal:F0t,vertical:L0t},natural:{curve:j0t},step:{curve:B0t},"step-after":{curve:z0t},"step-before":{curve:U0t}};function yte(e,t,n){var r=jt(Qpe,e)&&Qpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const a8t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},u8t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,l8t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,c8t=/^((\s+,?\s*)|(,\s*))/,f8t=/^[01]/;function Ix(e){const t=[];return(e.match(u8t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=a8t[s],a=d8t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function d8t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?f8t:l8t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(c8t);u!==null&&(i+=u[0].length)}return r}const hy=Math.PI/180,h8t=1e-14,Q1=Math.PI/2,Zd=Math.PI*2,q_=Math.sqrt(3)/2;var r9={},i9={},K$e=[].join;function p8t(e,t,n,r,i,s,o,a,u){const l=K$e.call(arguments);if(r9[l])return r9[l];const c=o*hy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,E=v*a+_*u,x=g*e+y*t,S=v*e+_*t;let A=1/((x-w)*(x-w)+(S-E)*(S-E))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const N=.5*(w+x)-k*(S-E),O=.5*(E+S)+k*(x-w),D=Math.atan2(E-O,w-N);let F=Math.atan2(S-O,x-N)-D;F<0&&s===1?F+=Zd:F>0&&s===0&&(F-=Zd);const M=Math.ceil(Math.abs(F/(Q1+.001))),B=[];for(let U=0;U<M;++U){const H=D+U*F/M,P=D+(U+1)*F/M;B[U]=[N,O,H,P,n,r,f,d]}return r9[l]=B}function m8t(e){const t=K$e.call(e);if(i9[t])return i9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),E=n+p-w*m,x=r+m+w*p,S=n+g,C=r+y,A=S+w*y,k=C-w*g;return i9[t]=[c*E+f*x,d*E+h*x,c*A+f*k,d*A+h*k,c*S+f*C,d*S+h*C]}const ac=["l",0,0,0,0,0,0,0];function g8t(e,t,n){const r=ac[0]=e[0];if(r==="a"||r==="A")ac[1]=t*e[1],ac[2]=n*e[2],ac[3]=e[3],ac[4]=e[4],ac[5]=e[5],ac[6]=t*e[6],ac[7]=n*e[7];else if(r==="h"||r==="H")ac[1]=t*e[1];else if(r==="v"||r==="V")ac[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ac[i]=(i%2==1?t:n)*e[i];return ac}function FI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=g8t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Jpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Jpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Jpe(e,t,n,r){const i=p8t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=m8t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Zpe=.5773502691896257,eme={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Zd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n,i=r-n*Zpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n,i=r-n*Zpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function X$e(e){return jt(eme,e)?eme[e]:y8t(e)}var s9={};function y8t(e){if(!jt(s9,e)){const t=Ix(e);s9[e]={draw:function(n,r){FI(n,t,0,0,Math.sqrt(r)/2)}}}return s9[e]}const xg=.448084975506;function v8t(e){return e.x}function b8t(e){return e.y}function _8t(e){return e.width}function w8t(e){return e.height}function Ep(e){return typeof e=="function"?e:()=>+e}function NP(e,t,n){return Math.max(t,Math.min(e,n))}function Q$e(){var e=v8t,t=b8t,n=_8t,r=w8t,i=Ep(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=NP(+i.call(this,c),0,v),w=NP(+s.call(this,c),0,v),E=NP(+o.call(this,c),0,v),x=NP(+a.call(this,c),0,v);if(u||(u=h=P6()),_<=0&&w<=0&&E<=0&&x<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+_,m),u.lineTo(S-w,m),u.bezierCurveTo(S-xg*w,m,S,m+xg*w,S,m+w),u.lineTo(S,C-x),u.bezierCurveTo(S,C-xg*x,S-xg*x,C,S-x,C),u.lineTo(p+E,C),u.bezierCurveTo(p+xg*E,C,p,C-xg*E,p,C-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+xg*_,p+xg*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ep(c),l):e},l.y=function(c){return arguments.length?(t=Ep(c),l):t},l.width=function(c){return arguments.length?(n=Ep(c),l):n},l.height=function(c){return arguments.length?(r=Ep(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ep(c),s=f!=null?Ep(f):i,a=d!=null?Ep(d):i,o=h!=null?Ep(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function J$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Zd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=P6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function SR(e,t){return e??t}const TR=e=>e.x||0,CR=e=>e.y||0,E8t=e=>e.width||0,x8t=e=>e.height||0,S8t=e=>(e.x||0)+(e.width||0),T8t=e=>(e.y||0)+(e.height||0),C8t=e=>e.startAngle||0,A8t=e=>e.endAngle||0,I8t=e=>e.padAngle||0,k8t=e=>e.innerRadius||0,R8t=e=>e.outerRadius||0,N8t=e=>e.cornerRadius||0,P8t=e=>SR(e.cornerRadiusTopLeft,e.cornerRadius)||0,D8t=e=>SR(e.cornerRadiusTopRight,e.cornerRadius)||0,O8t=e=>SR(e.cornerRadiusBottomRight,e.cornerRadius)||0,$8t=e=>SR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,M8t=e=>SR(e.size,64),L8t=e=>e.size||1,_F=e=>e.defined!==!1,F8t=e=>X$e(e.shape||"circle"),j8t=e$().startAngle(C8t).endAngle(A8t).padAngle(I8t).innerRadius(k8t).outerRadius(R8t).cornerRadius(N8t),B8t=D2e().x(TR).y1(CR).y0(T8t).defined(_F),U8t=D2e().y(CR).x1(TR).x0(S8t).defined(_F),z8t=rX().x(TR).y(CR).defined(_F),V8t=Q$e().x(TR).y(CR).width(E8t).height(x8t).cornerRadius(P8t,D8t,O8t,$8t),H8t=C0t().type(F8t).size(M8t),q8t=J$e().x(TR).y(CR).defined(_F).size(L8t);function vte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function W8t(e,t){return j8t.context(e)(t)}function G8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?U8t:B8t).curve(yte(r,n.orient,n.tension)).context(e)(t)}function Y8t(e,t){const n=t[0],r=n.interpolate||"linear";return z8t.curve(yte(r,n.orient,n.tension)).context(e)(t)}function ZS(e,t,n,r){return V8t.context(e)(t,n,r)}function K8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function X8t(e,t){return H8t.context(e)(t)}function Q8t(e,t){return q8t.context(e)(t)}var Z$e=1;function eMe(){Z$e=1}function bte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+Z$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):vte(n)?o.path=ZS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function wF(e){this.mark=e,this.bounds=this.bounds||new Ts}function EF(e){wF.call(this,e),this.items=this.items||[]}lt(EF,wF);class tMe{constructor(t){this._pending=0,this._loader=t||iF()}pending(){return this._pending}sanitizeURL(t){const n=this;return tme(n),n._loader.sanitize(t,{context:"href"}).then(r=>(t2(n),r)).catch(()=>(t2(n),null))}loadImage(t){const n=this,r=Njt();return tme(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>t2(n),o.onerror=()=>t2(n),o.src=s,o}).catch(i=>(t2(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function tme(e){e._pending+=1}function t2(e){e._pending-=1}function ag(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?J8t(t,r):0))}return e}function J8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Z8t=Zd-1e-8;let xF,tO,nO,_v,IH,rO,kH,RH;const i0=(e,t)=>xF.add(e,t),iO=(e,t)=>i0(tO=e,nO=t),nme=e=>i0(e,xF.y1),rme=e=>i0(xF.x1,e),J1=(e,t)=>IH*e+kH*t,Z1=(e,t)=>rO*e+RH*t,o9=(e,t)=>i0(J1(e,t),Z1(e,t)),a9=(e,t)=>iO(J1(e,t),Z1(e,t));function AR(e,t){return xF=e,t?(_v=t*hy,IH=RH=Math.cos(_v),rO=Math.sin(_v),kH=-rO):(IH=RH=1,_v=rO=kH=0),eBt}const eBt={beginPath(){},closePath(){},moveTo:a9,lineTo:a9,rect(e,t,n,r){_v?(o9(e+n,t),o9(e+n,t+r),o9(e,t+r),a9(e,t)):(i0(e+n,t+r),iO(e,t))},quadraticCurveTo(e,t,n,r){const i=J1(e,t),s=Z1(e,t),o=J1(n,r),a=Z1(n,r);ime(tO,i,o,nme),ime(nO,s,a,rme),iO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=J1(e,t),a=Z1(e,t),u=J1(n,r),l=Z1(n,r),c=J1(i,s),f=Z1(i,s);sme(tO,o,u,c,nme),sme(nO,a,l,f,rme),iO(c,f)},arc(e,t,n,r,i,s){if(r+=_v,i+=_v,tO=n*Math.cos(i)+e,nO=n*Math.sin(i)+t,Math.abs(i-r)>Z8t)i0(e-n,t-n),i0(e+n,t+n);else{const o=l=>i0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Zd,r<0&&(r+=Zd),i=i%Zd,i<0&&(i+=Zd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Zd,a=r-r%Q1,u=0;u<4&&a>i;++u,a-=Q1)o(a);else for(a=r-r%Q1+Q1,u=0;u<4&&a<i;++u,a=a+Q1)o(a)}}};function ime(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function sme(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>h8t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(ome(u,e,t,n,r)),0<l&&l<1&&i(ome(l,e,t,n,r))}function ome(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var $0=($0=O0(1,1))?$0.getContext("2d"):null;const NH=new Ts;function _te(e){return function(t,n){if(!$0)return!0;e($0,t),NH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=NH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if($0.isPointInPath(u,a))return!0;return!1}}function wte(e,t){return t.contains(e.x||0,e.y||0)}function nMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(NH.set(n,r,n+i,r+s))}function rMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return jw(t,n,r,i,s)}function jw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function kx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function cf(e,t){return e??t}function ame(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function tBt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+cf(t.x1,.5)*r,n.y1+cf(t.y1,.5)*i,Math.max(r,i)*cf(t.r1,0),n.x1+cf(t.x2,.5)*r,n.y1+cf(t.y2,.5)*i,Math.max(r,i)*cf(t.r2,.5));else{const o=cf(t.x1,0),a=cf(t.y1,0),u=cf(t.x2,1),l=cf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=O0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=ame(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return ame(s,t.stops)}function iMe(e,t,n){return gte(n)?tBt(e,n,t.bounds):n}function _M(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=iMe(e,t,t.fill),!0):!1}var nBt=[];function Rx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=iMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||nBt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function rBt(e,t){return e.zindex-t.zindex||e.index-t.index}function Ete(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(rBt)}function rd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Ete(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function wM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Ete(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function xte(e){return function(t,n,r){rd(n,i=>{(!r||r.intersects(i.bounds))&&sMe(e,t,i,i)})}}function iBt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&sMe(e,t,n.items[0],n.items)}}function sMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(kx(t,n),n.fill&&_M(t,n,i)&&t.fill(),n.stroke&&Rx(t,n,i)&&t.stroke()))}function SF(e){return e=e||Fc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,wM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function IR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Ste(e){return SF(IR(e))}function Pv(e,t){return"translate("+e+","+t+")"}function Tte(e){return"rotate("+e+")"}function sBt(e,t){return"scale("+e+","+t+")"}function oMe(e){return Pv(e.x||0,e.y||0)}function oBt(e){return Pv(e.x||0,e.y||0)+(e.angle?" "+Tte(e.angle):"")}function aBt(e){return Pv(e.x||0,e.y||0)+(e.angle?" "+Tte(e.angle):"")+(e.scaleX||e.scaleY?" "+sBt(e.scaleX||1,e.scaleY||1):"")}function Cte(e,t,n){function r(o,a){o("transform",oBt(a)),o("d",t(null,a))}function i(o,a){return t(AR(o,a.angle),a),ag(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=hy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:xte(s),pick:Ste(s),isect:n||_te(s)}}var uBt=Cte("arc",W8t);function lBt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function cBt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function fBt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Ate(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(AR(u),c),ag(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=IR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:iBt(s),pick:a,isect:wte,tip:n}}var dBt=Ate("area",G8t,lBt);function hBt(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):aMe(e,t.group)}function aMe(e,t){e.beginPath(),vte(t)?ZS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function uMe(e){const t=cf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function pBt(e,t){e("transform",oMe(t))}function lMe(e,t){const n=uMe(t);e("d",ZS(null,t,n,n))}function mBt(e,t){e("class","background"),e("aria-hidden",!0),lMe(e,t)}function gBt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?lMe(e,t):e("d","")}function yBt(e,t,n){const r=t.clip?bte(n,t,t):null;e("clip-path",r)}function vBt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ag(e,t),e.translate(t.x||0,t.y||0)}function jI(e,t,n,r){const i=uMe(t);e.beginPath(),ZS(e,t,(n||0)+i,(r||0)+i)}const bBt=IR(jI),_Bt=IR(jI,!1),wBt=IR(jI,!0);function EBt(e,t,n,r){rd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(jI(e,i,s,o),kx(e,i),i.fill&&_M(e,i,u)&&e.fill(),i.stroke&&!a&&Rx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&aMe(e,i),n&&n.translate(-s,-o),rd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(jI(e,i,s,o),kx(e,i),Rx(e,i,u)&&e.stroke())})}function xBt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return wM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&vte(u)&&!wBt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&_Bt(e,u,o,a)?(e.restore(),u):(l=wM(u,v=>SBt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&bBt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function SBt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var TBt={type:"group",tag:"g",nested:!1,attr:pBt,bound:vBt,draw:EBt,pick:xBt,isect:nMe,content:yBt,background:mBt,foreground:gBt},BI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ite(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function kte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Rte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function TF(e,t){return e==="center"?t/2:e==="right"?t:0}function CF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function CBt(e,t,n){const r=Ite(t,n),i=kte(t,r),s=Rte(t,r),o=(t.x||0)-TF(t.align,i),a=(t.y||0)-CF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,BI["xmlns:xlink"],"xlink:href"),e("transform",Pv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function ABt(e,t){const n=t.image,r=kte(t,n),i=Rte(t,n),s=(t.x||0)-TF(t.align,r),o=(t.y||0)-CF(t.baseline,i);return e.set(s,o,s+r,o+i)}function IBt(e,t,n){rd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ite(r,this);let s=kte(r,i),o=Rte(r,i);if(s===0||o===0)return;let a=(r.x||0)-TF(r.align,s),u=(r.y||0)-CF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(kx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var kBt={type:"image",tag:"image",nested:!1,attr:CBt,bound:ABt,draw:IBt,pick:SF(),isect:Fc,get:Ite,xOffset:TF,yOffset:CF},RBt=Ate("line",Y8t,cBt);function NBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",aBt(t)),e("d",t.path)}function sO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*hy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Ix(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),FI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):FI(e,u,r,i,s,o)}function PBt(e,t){return sO(AR(e,t.angle),t)?e.set(0,0,0,0):ag(e,t,!0)}var DBt={type:"path",tag:"path",nested:!1,attr:NBt,bound:PBt,draw:xte(sO),pick:Ste(sO),isect:_te(sO)};function OBt(e,t){e("d",ZS(null,t))}function $Bt(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function ume(e,t){e.beginPath(),ZS(e,t)}var MBt={type:"rect",tag:"path",nested:!1,attr:OBt,bound:$Bt,draw:xte(ume),pick:Ste(ume),isect:nMe};function LBt(e,t){e("transform",oMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function FBt(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function cMe(e,t,n){var r,i,s,o;return t.stroke&&Rx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function jBt(e,t,n){rd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&cMe(e,r,i)&&(kx(e,r),e.stroke())}})}function BBt(e,t,n,r){return e.isPointInStroke?cMe(e,t,1)&&e.isPointInStroke(n,r):!1}var UBt={type:"rule",tag:"line",nested:!1,attr:LBt,bound:FBt,draw:jBt,pick:SF(BBt),isect:rMe},zBt=Cte("shape",K8t),VBt=Cte("symbol",X8t,wte);const lme=YOe();var Pl={height:sp,measureWidth:Nte,estimateWidth:EM,width:EM,canvas:fMe};fMe(!0);function fMe(e){Pl.width=e&&$0?Nte:EM}function EM(e,t){return dMe(my(e,t),sp(e))}function dMe(e,t){return~~(.8*e.length*t)}function Nte(e,t){return sp(e)<=0||!(t=my(e,t))?0:hMe(t,AF(e))}function hMe(e,t){const n=`(${t}) ${e}`;let r=lme.get(n);return r===void 0&&($0.font=t,r=$0.measureText(e).width,lme.set(n,r)),r}function sp(e){return e.fontSize!=null?+e.fontSize||0:11}function py(e){return e.lineHeight!=null?e.lineHeight:sp(e)+2}function HBt(e){return je(e)?e.length>1?e:e[0]:e}function kR(e){return HBt(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Pte(e){const t=kR(e);return(je(t)?t.length-1:0)*py(e)}function my(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?WBt(e,n):n}function qBt(e){if(Pl.width===Nte){const t=AF(e);return n=>hMe(n,t)}else if(Pl.width===EM){const t=sp(e);return n=>dMe(n,t)}else return t=>Pl.width(e,t)}function WBt(e,t){var n=+e.limit,r=qBt(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function RR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function AF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+sp(e)+"px "+RR(e,t)}function Dte(e){var t=e.baseline,n=sp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*py(e):t==="line-bottom"?.29*n-.5*py(e):0)}const GBt={left:"start",center:"middle",right:"end"},eA=new Ts;function IF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Q1,t+=r*Math.cos(i),n+=r*Math.sin(i)),eA.x1=t,eA.y1=n,eA}function YBt(e,t){var n=t.dx||0,r=(t.dy||0)+Dte(t),i=IF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",GBt[t.align]||"start"),a?(u=Pv(s,o)+" "+Tte(a),(n||r)&&(u+=" "+Pv(n,r))):u=Pv(s+n,o+r),e("transform",u)}function Ote(e,t,n){var r=Pl.height(t),i=t.align,s=IF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Dte(t)-Math.round(.8*r),c=kR(t),f;if(je(c)?(r+=py(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Pl.width(t,h)),0)):f=Pl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*hy,o,a);else if(n===2)return e.rotatedPoints(t.angle*hy,o,a);return e}function KBt(e,t,n){rd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=AF(r),e.textAlign=r.align||"left",s=IF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*hy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Dte(r),c=kR(r),kx(e,r),je(c))for(l=py(r),u=0;u<c.length;++u)f=my(r,c[u]),r.fill&&_M(e,r,i)&&e.fillText(f,o,a),r.stroke&&Rx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=my(r,c),r.fill&&_M(e,r,i)&&e.fillText(f,o,a),r.stroke&&Rx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function XBt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=IF(t),a=o.x1,u=o.y1,l=Ote(eA,t,1),c=-t.angle*hy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function QBt(e,t){const n=Ote(eA,e,2);return jw(t,n[0],n[1],n[2],n[3])||jw(t,n[0],n[1],n[4],n[5])||jw(t,n[4],n[5],n[6],n[7])||jw(t,n[2],n[3],n[6],n[7])}var JBt={type:"text",tag:"text",nested:!1,attr:YBt,bound:Ote,draw:KBt,pick:SF(XBt),isect:QBt},ZBt=Ate("trail",Q8t,fBt),Wl={arc:uBt,area:dBt,group:TBt,image:kBt,line:RBt,path:DBt,rect:MBt,rule:UBt,shape:zBt,symbol:VBt,text:JBt,trail:ZBt};function PH(e,t,n){var r=Wl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var cme={mark:null};function pMe(e,t,n){var r=Wl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(cme.mark=e,l=cme),c=PH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(PH(s[a],i,n));return e.bounds=t}const e9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mMe(e,t){return JSON.stringify(e,e9t,t)}function gMe(e){const t=typeof e=="string"?JSON.parse(e):e;return yMe(t)}function yMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&yMe(n[i]);return t&&pMe(e),e}class vMe{constructor(t){arguments.length?this.root=gMe(t):(this.root=fme({marktype:"group",name:"root",role:"frame"}),this.root.items=[new EF(this.root)])}toJSON(t){return mMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=fme(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function fme(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function s0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function $te(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ds(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=s0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function bc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function bMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function kF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function t9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Wl[i.marktype]).tip){for(o=kF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Mte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||iF(),this._tooltip=n||n9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=s0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=t9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function n9t(e,t,n,r){e.element().setAttribute("title",r||"")}class NR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new tMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const r9t="keydown",i9t="keypress",s9t="keyup",_Me="dragenter",oO="dragleave",wMe="dragover",DH="pointerdown",o9t="pointerup",xM="pointermove",aO="pointerout",EMe="pointerover",OH="mousedown",a9t="mouseup",xMe="mousemove",SM="mouseout",SMe="mouseover",TM="click",u9t="dblclick",l9t="wheel",TMe="mousewheel",CM="touchstart",AM="touchmove",IM="touchend",c9t=[r9t,i9t,s9t,_Me,oO,wMe,DH,o9t,xM,aO,EMe,OH,a9t,xMe,SM,SMe,TM,u9t,l9t,TMe,CM,AM,IM],$H=xM,tA=SM,MH=TM;class PR extends Mte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=c9t,this.pointermove=hme([xM,xMe],[EMe,SMe],[aO,SM]),this.dragover=hme([wMe],[_Me],[oO]),this.pointerout=pme([aO,SM]),this.dragleave=pme([oO])}initialize(t,n,r){return this._canvas=t&&$te(t,"canvas"),[TM,OH,DH,xM,aO,oO].forEach(i=>dme(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(TMe,t)}pointerdown(t){this._down=this._active,this.fire(DH,t)}mousedown(t){this._down=this._active,this.fire(OH,t)}click(t){this._down===this._active&&(this.fire(TM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(CM,t,!0)}touchmove(t){this.fire(AM,t,!0)}touchend(t){this.fire(IM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===MH&&i&&i.href?this.handleHref(n,i,i.href):(t===$H||t===tA)&&this.handleTooltip(n,i,t!==tA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(dme(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=kF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Wl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const f9t=e=>e===CM||e===AM||e===IM?[CM,AM,IM]:[e];function dme(e,t){f9t(t).forEach(n=>d9t(e,n))}function d9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function nC(e,t,n){t.forEach(r=>e.fire(r,n))}function hme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?nC(this,e,r):((!i||!i.exit)&&nC(this,n,r),this._active=s,nC(this,t,r),nC(this,e,r))}}function pme(e){return function(t){nC(this,e,t),this._active=null}}function h9t(){return typeof window<"u"&&window.devicePixelRatio||1}function p9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?h9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class kM extends NR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:O0(1,1,this._options.type),t&&this._canvas&&(bc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)p9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=m9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):g9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Wl[n.marktype];n.clip&&hBt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const m9t=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function g9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class CMe extends Mte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=u9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=u9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==tA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(MH,this._hrefHandler),i.removeEventListener($H,this._tooltipHandler),i.removeEventListener(tA,this._tooltipHandler)),this._svg=i=t&&$te(t,"svg"),i&&(i.addEventListener(MH,this._hrefHandler),i.addEventListener($H,this._tooltipHandler),i.addEventListener(tA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:u9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const u9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},AMe="aria-hidden",Lte="aria-label",Fte="role",jte="aria-roledescription",IMe="graphics-object",Bte="graphics-symbol",kMe=(e,t,n)=>({[Fte]:e,[jte]:t,[Lte]:n||void 0}),y9t=td(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),mme={axis:{desc:"axis",caption:_9t},legend:{desc:"legend",caption:w9t},"title-text":{desc:"title",caption:e=>`Title text '${yme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${yme(e)}'`}},gme={ariaRole:Fte,ariaRoleDescription:jte,description:Lte};function RMe(e,t){const n=t.aria===!1;if(e(AMe,n||void 0),n||t.description==null)for(const r in gme)e(gme[r],void 0);else{const r=t.mark.marktype;e(Lte,t.description),e(Fte,t.ariaRole||(r==="group"?IMe:Bte)),e(jte,t.ariaRoleDescription||`${r} mark`)}}function NMe(e){return e.aria===!1?{[AMe]:!0}:y9t[e.role]?null:mme[e.role]?b9t(e,mme[e.role]):v9t(e)}function v9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return kMe(n?IMe:Bte,`${t} mark container`,e.description)}function b9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return kMe(t.role||Bte,t.desc,n.description||r(n))}catch{return null}}function yme(e){return pt(e.text).join(" ")}function _9t(e){const t=e.datum,n=e.orient,r=t.title?PMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ax(a)?"discrete":a} scale with ${q$e(o,s,e)}`}function w9t(e){const t=e.datum,n=t.title?PMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return x9t(r)+(n?` titled '${n}'`:"")+` for ${E9t(s)} with ${q$e(u,a,e)}`}function PMe(e){try{return pt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function E9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function x9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const DMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),S9t=e=>DMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Ute(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${S9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=DMe(u),a),toString:()=>e};return a}const OMe=e=>$Me(Ute(),e)+"";function $Me(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):$Me(e,r)}return e.close()}const RM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},NM={blend:"mix-blend-mode"},MMe={fill:"none","stroke-miterlimit":10},n2=0,vme="http://www.w3.org/2000/xmlns/",Ns=BI.xmlns;class zte extends NR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ds(t,0,"svg",Ns),this._svg.setAttributeNS(vme,"xmlns",Ns),this._svg.setAttributeNS(vme,"xmlns:xlink",BI["xmlns:xlink"]),this._svg.setAttribute("version",BI.version),this._svg.setAttribute("class","marks"),bc(t,1),this._root=Ds(this._svg,n2,"g",Ns),o0(this._root,MMe),bc(this._svg,n2+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(o0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ds(t,n2,"rect",Ns),o0(r,{width:this._width,height:this._height,fill:n}));const i=OMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),bc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Wl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,bme(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,bme(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Wl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=_me(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return bc(c,0),n._svg;c.setAttribute("class",bMe(n));const f=NMe(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?bte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=_me(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&A9t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):rd(n,p),bc(c,h),c}_update(t,n,r){tm=n,oa=n.__values__,RMe(nA,r),t.attr(nA,r,this);const i=k9t[t.type];i&&i.call(this,t,n,r),tm&&this.style(tm,r)}style(t,n){if(n!=null){for(const r in RM){let i=r==="font"?RR(n):n[r];if(i===oa[r])continue;const s=RM[r];i==null?t.removeAttribute(s):(gte(i)&&(i=G$e(i,this._defs.gradient,LMe())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in NM)uO(t,NM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ds(t,n2+1,"defs",Ns)),i=T9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ds(t,n2+1,"defs",Ns)),i=C9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):bc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function bme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function T9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ds(e,n++,"pattern",Ns);o0(o,{id:bM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ds(o,0,"rect",Ns),o0(o,{width:1,height:1,fill:`url(${LMe()}#${t.id})`}),e=Ds(e,n++,"radialGradient",Ns),o0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ds(e,n++,"linearGradient",Ns),o0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ds(e,r,"stop",Ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return bc(e,r),n}function C9t(e,t,n){let r;return e=Ds(e,n,"clipPath",Ns),e.setAttribute("id",t.id),t.path?(r=Ds(e,0,"path",Ns),r.setAttribute("d",t.path)):(r=Ds(e,0,"rect",Ns),o0(r,{x:0,y:0,width:t.width,height:t.height})),bc(e,1),n+1}function A9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;rd(n,o=>{i=e.mark(t,o,i,r),++s}),bc(t,1+s)}function _me(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=s0(o,r,Ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=s0(o,"path",Ns);s.appendChild(a),a.__data__=e;const u=s0(o,"g",Ns);s.appendChild(u),u.__data__=e;const l=s0(o,"path",Ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||I9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function I9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let tm=null,oa=null;const k9t={group(e,t,n){const r=tm=t.childNodes[2];oa=r.__values__,e.foreground(nA,n,this),oa=t.__values__,tm=t.childNodes[1],e.content(nA,n,this);const i=tm=t.childNodes[0];e.background(nA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),tm=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(uO(t,"image-rendering","optimizeSpeed"),uO(t,"image-rendering","pixelated")):uO(t,"image-rendering",null)},text(e,t,n){const r=kR(n);let i,s,o,a;je(r)?(s=r.map(u=>my(n,u)),i=s.join(`
`),i!==oa.text&&(bc(t,0),o=t.ownerDocument,a=py(n),s.forEach((u,l)=>{const c=s0(o,"tspan",Ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=my(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),$a(t,"font-family",RR(n)),$a(t,"font-size",sp(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function nA(e,t,n){t!==oa[e]&&(n?R9t(tm,e,t,n):$a(tm,e,t),oa[e]=t)}function uO(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function o0(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function R9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function LMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class FMe extends NR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Ute();n.open("svg",bn({},BI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",MMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Wl[n.marktype],i=r.tag,s=[RMe,r.attr];t.open("g",{class:bMe(n),"clip-path":n.clip?bte(this,n,n.group):null},NMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=kR(a);if(je(l)){const c={x:0,dy:py(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(my(a,l[f])).close()}else t.text(my(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),rd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):rd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&N9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:bM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function N9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=RR(t),e["font-size"]=sp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in RM){let a=t[o];const u=RM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(gte(a)&&(a=G$e(a,i.gradient,"")),e[u]=a)}for(const o in NM){const a=t[o];a!=null&&(s=s||[],s.push(`${NM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const vf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function P9t(e){vf.svgMarkTypes=e.svgMarkTypes??["text"],vf.svgOnTop=e.svgOnTop??!0,vf.debug=e.debug??!1}class LH extends NR{constructor(t){super(t),this._svgRenderer=new zte(t),this._canvasRenderer=new kM(t)}initialize(t,n,r,i,s){this._root_el=Ds(t,0,"div");const o=Ds(this._root_el,0,"div"),a=Ds(this._root_el,1,"div");return this._root_el.style.position="relative",vf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=vf.svgOnTop?a:o,this._canvasEl=vf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return vf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!vf.svgMarkTypes.includes(s));this._svgRenderer.render(t,vf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return vf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class jMe extends PR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ds(Ds(t,0,"div"),vf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const BMe="canvas",UMe="hybrid",zMe="png",VMe="svg",HMe="none",a0={Canvas:BMe,PNG:zMe,SVG:VMe,Hybrid:UMe,None:HMe},pb={};pb[BMe]=pb[zMe]={renderer:kM,headless:kM,handler:PR};pb[VMe]={renderer:zte,headless:FMe,handler:CMe};pb[UMe]={renderer:LH,headless:LH,handler:jMe};pb[HMe]={};function RF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(pb[e]=t,this):pb[e]}function qMe(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?WMe(e,i,n,r):s==="group"?GMe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function WMe(e,t,n,r){if(D9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)GMe(i[a],t,n,r);else for(const u=Wl[s].isect;a<o;++a){const l=i[a];YMe(l,t,u)&&r.push(l)}}return r}function D9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function GMe(e,t,n,r){n&&n(e.mark)&&YMe(e,t,Wl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)WMe(i[u],t,n,r);t.translate(o,a)}return r}function YMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const l9=new Ts;function KMe(e){const t=e.clip;if(_n(t))t(AR(l9.clear()));else if(t)l9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(l9)}const O9t=1e-9;function Vte(e,t,n){return e===t?!0:n==="path"?XMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=O9t:!e||!t||!gt(e)&&!gt(t)?e==t:$9t(e,t)}function XMe(e,t){return Vte(Ix(e),Ix(t))}function $9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Vte(e[i],t[i],i))return!1;return typeof e==typeof t}function M9t(){eMe(),o8t()}const Nx="top",If="left",Of="right",gy="bottom",L9t="top-left",F9t="top-right",j9t="bottom-left",B9t="bottom-right",Hte="start",FH="middle",Fa="end",U9t="x",z9t="y",NF="group",qte="axis",Wte="title",V9t="frame",H9t="scope",Gte="legend",QMe="row-header",JMe="row-footer",ZMe="row-title",eLe="column-header",tLe="column-footer",nLe="column-title",q9t="padding",W9t="symbol",rLe="fit",iLe="fit-x",sLe="fit-y",G9t="pad",Yte="none",PP="all",jH="each",Kte="flush",u0="column",l0="row";function oLe(e){Pe.call(this,null,e)}lt(oLe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Wl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=DP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===NF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(DP(l,o))),r.role){case qte:case Gte:case Wte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(DP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(DP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return KMe(r),t.modifies("bounds")}});function DP(e,t,n){return t(e.bounds.clear(),e,n)}const wme=":vega_identifier:";function Xte(e){Pe.call(this,0,e)}Xte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Xte,Pe,{transform(e,t){const n=Y9t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Y9t(e){return e._signals[wme]||(e._signals[wme]=e.add(0))}function aLe(e){Pe.call(this,null,e)}lt(aLe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,K9t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===NF?EF:wF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function K9t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function uLe(e){Pe.call(this,null,e)}const Eme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!lLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},lLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),xme=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(lLe(i,s=e[n].bounds,t))return!0},X9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Q9t=(e,t,n)=>{var r=e.range(),i=new Ts;return t===Nx||t===gy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Sme=e=>(e.forEach(t=>t.opacity=1),e),Tme=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(uLe,Pe,{transform(e,t){const n=Eme[e.method]||Eme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Sme(i),t=Tme(t,e)),t;if(i=i.filter(X9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Sme(i),t=Tme(t,e),s.length>=3&&xme(s,r)){do s=n(s,r);while(s.length>=3&&xme(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Q9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function cLe(e){Pe.call(this,null,e)}lt(cLe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new Ts;function Bw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function J9t(e){var t=e.items[0].orient;return t===If||t===Of}function Z9t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function eUt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Z9t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Pte(p),v=0,_=0,w,E;switch(ia.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case Nx:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&OP(e,p,E,m,y,0,-1,g);break;case If:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&OP(e,p,E,m,y,1,-1,g);break;case Of:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&OP(e,p,E,m,y,1,1,g);break;case gy:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&OP(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return ag(g.translate(v,_),i),Bw(i,"x",v+o)|Bw(i,"y",_+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function OP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Cme=(e,t)=>Math.floor(Math.min(e,t)),Ame=(e,t)=>Math.ceil(Math.max(e,t));function tUt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===NF)switch(i.role){case qte:case Gte:case Wte:break;case QMe:o.rowheaders.push(...s);break;case JMe:o.rowfooters.push(...s);break;case eLe:o.colheaders.push(...s);break;case tLe:o.colfooters.push(...s);break;case ZMe:o.rowtitle=s[0];break;case nLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function nUt(e){return new Ts().set(0,0,e.width||0,e.height||0)}function rUt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _i(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Ime(e){return e<0?Math.ceil(-e):0}function fLe(e,t,n){var r=!n.nodirty,i=n.bounds===Kte?nUt:rUt,s=ia.set(0,0,0,0),o=_i(n.align,u0),a=_i(n.align,l0),u=_i(n.padding,u0),l=_i(n.padding,l0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),E=Array(d),x,S,C,A,k,N,O,D,$,F,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],k=E[S]=i(N),N.x=N.x||0,_[S]=0,N.y=N.y||0,w[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,D=Math.ceil(k.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[S]=u+Ime(k.x1),g[S]=l+Ime(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===jH)for(C=1;C<c;++C){for(M=0,S=C;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=C;S<d;S+=c)h[S]=M+p[C-1]}else if(o===PP){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===jH)for(A=1;A<f;++A){for(M=0,S=A*c,x=S+c;S<x;++S)M<g[S]&&(M=g[S]);for(S=A*c;S<x;++S)g[S]=M+y[A-1]}else if(a===PP){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,A=1;A<f;++A)for(S=A*c,x=S+c;S<x;++S)g[S]+=y[A-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),_[S]+=$-t[S].x;for(C=0;C<c;++C)for(F=0,S=C;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&_i(n.center,u0)&&f>1)for(S=0;S<d;++S)k=o===PP?m:p[S%c],$=k-E[S].x2-t[S].x-_[S],$>0&&(_[S]+=$/2);if(a&&_i(n.center,l0)&&c!==1)for(S=0;S<d;++S)k=a===PP?v:y[~~(S/c)],F=k-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(_[S],w[S]));switch($=_i(n.anchor,U9t),F=_i(n.anchor,z9t),_i(n.anchor,u0)){case Fa:$-=s.width();break;case FH:$-=s.width()/2}switch(_i(n.anchor,l0)){case Fa:F-=s.height();break;case FH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=_[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(_[S],w[S]))),r&&e.dirty(N);return s}function iUt(e,t,n){var r=tUt(t),i=r.marks,s=n.bounds===Kte?sUt:oUt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=fLe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=_i(n.headerBand,l0,null),c=$P(e,r.rowheaders,i,a,u,-_i(o,"rowHeader"),Cme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=_i(n.headerBand,u0,null),f=$P(e,r.colheaders,i,a,a,-_i(o,"columnHeader"),Cme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=_i(n.footerBand,l0,null),d=$P(e,r.rowfooters,i,a,u,_i(o,"rowFooter"),Ame,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=_i(n.footerBand,u0,null),h=$P(e,r.colfooters,i,a,a,_i(o,"columnFooter"),Ame,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=_i(n.titleAnchor,l0),g=_i(o,"rowTitle"),g=p===Fa?d+g:c-g,m=_i(n.titleBand,l0,.5),kme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=_i(n.titleAnchor,u0),g=_i(o,"columnTitle"),g=p===Fa?h+g:f-g,m=_i(n.titleBand,u0,.5),kme(e,r.coltitle,g,1,y,m))}function sUt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function oUt(e,t){return e.bounds[t]}function $P(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,E,x,S,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(x=t[v],E=x.mark.bounds,_=y;_>=0&&(S=n[_])==null;_-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(x.bounds.translate(C-(x.x||0),A-(x.y||0))),x.x=C,x.y=A,e.dirty(x),g=o(g,E[l])}return g}function kme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function aUt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function uUt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function lUt(e,t,n,r,i,s,o){const a=aUt(n,t),u=uUt(e,a("offset",0)),l=a("anchor",Hte),c=l===Fa?1:l===FH?.5:0,f={align:jH,bounds:a("bounds",Kte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case If:f.anchor={x:Math.floor(r.x1)-u,column:Fa,y:c*(o||r.height()+2*r.y1),row:l};break;case Of:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Nx:f.anchor={y:Math.floor(i.y1)-u,row:Fa,x:c*(s||i.width()+2*i.x1),column:l};break;case gy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case L9t:f.anchor={x:u,y:u};break;case F9t:f.anchor={x:s-u,y:u,column:Fa};break;case j9t:f.anchor={x:u,y:o-u,row:Fa};break;case B9t:f.anchor={x:s-u,y:o-u,column:Fa,row:Fa};break}return f}function cUt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),dUt(e,n,n.items[0].items[0]),s=fUt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===W9t&&hUt(n.items[0].items[0].items[0].items),i!==Yte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,ag(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function fUt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function dUt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&r2(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case If:i+=Math.ceil(o.bounds.width())+u;break;case Of:case gy:break;default:s+=o.bounds.height()+u}switch((i||s)&&r2(e,n,i,s),o.orient){case If:c+=W_(t,n,o,a,1,1);break;case Of:l+=W_(t,n,o,Fa,0,0)+u,c+=W_(t,n,o,a,1,1);break;case gy:l+=W_(t,n,o,a,0,0),c+=W_(t,n,o,Fa,-1,0,1)+u;break;default:l+=W_(t,n,o,a,0,0)}(l||c)&&r2(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(r2(e,n,-l,0),r2(e,o,-l,0))}}function W_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Pte(n);return Math.round(r===Hte?f:r===Fa?d-h:.5*(c-h))}function r2(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function hUt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function pUt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===If||a===Of?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==NF?a===If?(p=i.y2,h=i.y1):a===Of?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===If&&(p=r,h=0),_=u===Hte?p:u===Fa?h:(p+h)/2,d&&d.text){switch(a){case Nx:case gy:v=f.bounds.height()+c;break;case If:y=f.bounds.width()+c;break;case Of:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),Bw(d,"x",y)|Bw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case Nx:m=_,g=i.y1-ia.height()-l;break;case If:m=i.x1-ia.width()-l,g=_;break;case Of:m=i.x2+ia.width()+l,g=_;break;case gy:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return Bw(s,"x",m)|Bw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function dLe(e){Pe.call(this,null,e)}lt(dLe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&iUt(n,r,e.layout),gUt(n,r,e)}),mUt(e.mark.group)?t.reflow():t}});function mUt(e){return e&&e.mark.role!=="legend-entry"}function gUt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case qte:h=J9t(f)?a:u,h.union(eUt(e,f,i,s));break;case Wte:c=f;break;case Gte:l.push(cUt(e,f));break;case V9t:case H9t:case QMe:case JMe:case ZMe:case eLe:case tLe:case nLe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Of,d!==Yte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];fLe(e,v,lUt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===rLe||n.autosize.type===iLe||n.autosize.type===sLe))switch(y.orient){case If:case Of:o.add(v.x1,0).add(v.x2,0);break;case Nx:case gy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(pUt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),yUt(e,t,o,n)}function yUt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===q9t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Yte?(l=0,f=0,u=o,c=a):s===rLe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===iLe?(u=Math.max(0,o-l-d),a=c+f+h):s===sLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===G9t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const vUt=Object.freeze(Object.defineProperty({__proto__:null,bound:oLe,identifier:Xte,mark:aLe,overlap:uLe,render:cLe,viewlayout:dLe},Symbol.toStringTag,{value:"Module"}));function hLe(e){Pe.call(this,null,e)}lt(hLe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=pte(s,o,e.minstep),u=e.format||B$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?j$e(s,e.values,a):mte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Er({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Er({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function pLe(e){Pe.call(this,null,e)}function bUt(){return Er({})}function _Ut(e){const t=YS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(pLe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||bUt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=_Ut(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function mLe(e){Pe.call(this,null,e)}lt(mLe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Ag,u=i.enter||Ag,l=i.exit||Ag,c=(s&&!o?i[s]:a)||Ag;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ag&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ag&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Ag){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function gLe(e){Pe.call(this,[],e)}lt(gLe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||eO,o=e.scale,a=+e.limit,u=pte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===eO,c=e.format||H$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||V$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===eO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>Er({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Er({index:i.length,label:`…${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Gjt?(d=o.domain(),h=M$e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=i8t(o),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const wUt=e=>e.source.x,EUt=e=>e.source.y,xUt=e=>e.target.x,SUt=e=>e.target.y;function Qte(e){Pe.call(this,{},e)}Qte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Qte,Pe,{transform(e,t){var n=e.sourceX||wUt,r=e.sourceY||EUt,i=e.targetX||xUt,s=e.targetY||SUt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Rme.get(u+"-"+a)||Rme.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const yLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,TUt=(e,t,n,r)=>yLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),vLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},CUt=(e,t,n,r)=>vLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),bLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},AUt=(e,t,n,r)=>bLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),IUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,kUt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,RUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},NUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},PUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},DUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Rme=YS({line:yLe,"line-radial":TUt,arc:vLe,"arc-radial":CUt,curve:bLe,"curve-radial":AUt,"orthogonal-horizontal":IUt,"orthogonal-vertical":kUt,"orthogonal-radial":RUt,"diagonal-horizontal":NUt,"diagonal-vertical":PUt,"diagonal-radial":DUt});function Jte(e){Pe.call(this,null,e)}Jte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Jte,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||qS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/yK(l),h=$u(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const OUt=5;function $Ut(e){const t=e.type;return!e.bins&&(t===Tx||t===_R||t===wR)}function _Le(e){return fte(e)&&e!==wh}const MUt=td(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function wLe(e){Pe.call(this,null,e),this.modified(!0)}lt(wLe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=LUt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!MUt[i]){if(i==="padding"&&_Le(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return VUt(r,e,zUt(r,e,jUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function LUt(e){var t=e.type,n="",r;return t===wh?wh+"-"+Tx:(FUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?wh+"-":r===3?JS+"-":""),(n+t||Tx).toLowerCase())}function FUt(e){const t=e.type;return fte(t)&&t!==db&&t!==hb&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function jUt(e,t,n){const r=BUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&$Ut(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return _Le(s)&&t.padding&&i[0]!==Qn(i)&&(i=UUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(ELe(s,i,n)),s===ate&&e.unknown(t.domainImplicit?Iz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&pte(e,t.nice)||null),i.length}function BUt(e,t,n){return t?(e.domain(ELe(e.type,t,n)),t.length):-1}function UUt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Bm?eee(t,null,a):e===wR?mM(t,null,a,.5):e===_R?mM(t,null,a,i||1):e===gF?tee(t,null,a,s||1):ZZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function ELe(e,t,n){if(N$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function zUt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=$u(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ute&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function VUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=HUt(r,t,n);else if(t.scheme&&(s=qUt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&P$e(r))return e.interpolator(bF(BH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(dte(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?kk:eg),s&&e.range(BH(s,t.reverse))}function HUt(e,t,n){e!==T$e&&e!==TH&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===TH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ote(n,i,r)]}function qUt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=bF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=hte(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===vF?n+1:e===ute?n-1:e===Cx||e===yF?+t.schemeCount||OUt:n,P$e(e)?Nme(s,r,t.reverse):_n(s)?$$e(Nme(s,r),n):e===ate?s:s.slice(0,n)}function Nme(e,t,n){return _n(e)&&(t||n)?O$e(e,BH(t||[0,1],n)):e}function BH(e,t){return t?e.slice().reverse():e}function xLe(e){Pe.call(this,null,e)}lt(xLe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(s_(e.sort)),this.modified(n),t}});const Pme="zero",SLe="center",TLe="normalize",CLe=["y0","y1"];function Zte(e){Pe.call(this,null,e)}Zte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Pme,values:[Pme,SLe,TLe]},{name:"as",type:"string",array:!0,length:2,default:CLe}]};lt(Zte,Pe,{transform(e,t){var n=e.as||CLe,r=n[0],i=n[1],s=s_(e.sort),o=e.field||qS,a=e.offset===SLe?WUt:e.offset===TLe?GUt:YUt,u,l,c,f;for(u=KUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function WUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function GUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function YUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function KUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const XUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:hLe,datajoin:pLe,encode:mLe,legendentries:gLe,linkpath:Qte,pie:Jte,scale:wLe,sortitems:xLe,stack:Zte},Symbol.toStringTag,{value:"Module"}));var QUt=Math.abs,UH=Math.cos,PM=Math.sin,JUt=1e-6,ALe=Math.PI,zH=ALe/2,Dme=ZUt(2);function Ome(e){return e>1?zH:e<-1?-zH:Math.asin(e)}function ZUt(e){return e>0?Math.sqrt(e):0}function e7t(e,t){var n=e*PM(t),r=30,i;do t-=i=(t+PM(t)-n)/(1+UH(t));while(QUt(i)>JUt&&--r>0);return t/2}function t7t(e,t,n){function r(i,s){return[e*i*UH(s=e7t(n,s)),t*PM(s)]}return r.invert=function(i,s){return s=Ome(s/t),[i/(e*UH(s)),Ome((2*s+PM(2*s))/n)]},r}var n7t=t7t(Dme/zH,Dme,ALe);function r7t(){return Zh(n7t).scale(169.529)}const i7t=jTe(),VH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function s7t(e,t){return function n(){const r=t();return r.type=e,r.path=jTe().projection(r),r.copy=r.copy||function(){const i=n();return VH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},k$e(r)}}function ene(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(DM[e]=s7t(e,t),this):DM[e]||null}function ILe(e){return e&&e.path||i7t}const DM={albers:UTe,albersusa:ppt,azimuthalequalarea:mpt,azimuthalequidistant:gpt,conicconformal:bpt,conicequalarea:Y3,conicequidistant:Ept,equalEarth:Spt,equirectangular:_pt,gnomonic:Tpt,identity:Cpt,mercator:ypt,mollweide:r7t,naturalEarth1:Apt,orthographic:Ipt,stereographic:kpt,transversemercator:Rpt};for(const e in DM)ene(e,DM[e]);function o7t(){}const xp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function kLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),a7t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(u7t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,xp[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,xp[m|g<<1].forEach(_);for(xp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,xp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,xp[m|g<<1|y<<2|v<<3].forEach(_);xp[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,xp[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,xp[y<<2|v<<3].forEach(_);xp[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],x=[w[1][0]+h,w[1][1]+p],S=o(E),C=o(x),A,k;(A=d[S])?(k=f[C])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(x),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(x),d[A.end=C]=A):(A=f[C])?(k=d[S])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(x),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=S]=A):f[S]=d[C]={start:S,end:C,ring:[E,x]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:o7t,r):n===a},r}function a7t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function u7t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=l7t(e,t[n]))return i;return 0}function l7t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(c7t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function c7t(e,t,n){var r;return f7t(e,t,n)&&d7t(e[r=+(e[0]===t[0])],n[r],t[r])}function f7t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function d7t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function RLe(e,t,n){return function(r){var i=Fh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?W0(s,o,e):a/(e+1);return $u(s+u,o,u)}}function tne(e){Pe.call(this,null,e)}tne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(tne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||xa,s=kLe().smooth(e.smooth!==!1),o=e.thresholds||h7t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));p7t(f,c,l,e),f.forEach(d=>{u.push(aF(l,Er(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function h7t(e,t,n){const r=RLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ch(t(i).values)))}function p7t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(NLe(t,o,a,u,l))}function NLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function $me(e,t,n){const r=e>=0?e:_ee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function c9(e){return _n(e)?e:Sa(+e)}function PLe(){var e=u=>u[0],t=u=>u[1],n=qS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=$me(r[0],u,e)>>o,f=$me(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),x=h+(+t(w)>>o);E>=0&&E<p&&x>=0&&x<m&&(g[E+x*p]+=+n(w))}),c>0&&f>0?(G_(p,m,g,y,c),Y_(p,m,y,g,f),G_(p,m,g,y,c),Y_(p,m,y,g,f),G_(p,m,g,y,c),Y_(p,m,y,g,f)):c>0?(G_(p,m,g,y,c),G_(p,m,y,g,c),G_(p,m,g,y,c),v=y):f>0&&(Y_(p,m,g,y,f),Y_(p,m,y,g,f),Y_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/yK(v);for(let w=0,E=p*m;w<E;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=c9(u),a):e},a.y=function(u){return arguments.length?(t=c9(u),a):t},a.weight=function(u){return arguments.length?(n=c9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function G_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function Y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function nne(e){Pe.call(this,null,e)}nne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const m7t=["x","y","weight","size","cellSize","bandwidth"];function DLe(e,t){return m7t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(nne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=g7t(r,e.groupby),s=(e.groupby||[]).map(Ki),o=DLe(PLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Er(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function g7t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function rne(e){Pe.call(this,null,e)}rne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(rne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=kLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||RLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=DLe(PLe(),e)(i,!0),u=NLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Er),n}});const HH="Feature",ine="FeatureCollection",y7t="MultiPoint";function sne(e){Pe.call(this,null,e)}sne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(sne,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&xa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ga(a))||s&&t.modified(ga(s))||o&&t.modified(ga(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:HH,geometry:{type:y7t,coordinates:r}})),this.value={type:ine,features:n}}});function one(e){Pe.call(this,null,e)}one.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(one,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||xa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=ILe(e.projection),n.materialize().reflow()):o=i===xa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=v7t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function v7t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ane(e){Pe.call(this,null,e)}ane.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(ane,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function une(e){Pe.call(this,null,e)}une.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(une,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=b7t(ILe(e.projection),e.field||Lc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function b7t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function lne(e){Pe.call(this,[],e),this.generator=Ght()}lne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(lne,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(D3e(n[0],i)):t.add.push(Er(i)),n[0]=i,t}});function cne(e){Pe.call(this,null,e)}cne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(cne,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||xa,s=w7t(e.opacity,e),o=_7t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?ch(n.map(l=>ch(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=ch(c.values||[])),l[a]=E7t(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function _7t(e,t){let n;return _n(e)?(n=r=>G0(e(r,t)),n.dep=OLe(e)):n=Sa(G0(e||"#888")),n}function w7t(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=OLe(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function OLe(e){if(!_n(e))return!1;const t=td(ga(e));return t.$x||t.$y||t.$value||t.$max}function E7t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Kg,d=O0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function $Le(e){Pe.call(this,null,e),this.modified(!0)}lt($Le,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=S7t(e.type),VH.forEach(r=>{e[r]!=null&&Mme(n,r,e[r])})):VH.forEach(r=>{e.modified(r)&&Mme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&x7t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function x7t(e,t){const n=T7t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function S7t(e){const t=ene((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function Mme(e,t,n){_n(e[t])&&e[t](n)}function T7t(e){return e=pt(e),e.length===1?e[0]:{type:ine,features:e.reduce((t,n)=>t.concat(C7t(n)),[])}}function C7t(e){return e.type===ine?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===HH?t:{type:HH,geometry:t})}const A7t=Object.freeze(Object.defineProperty({__proto__:null,contour:rne,geojson:sne,geopath:one,geopoint:ane,geoshape:une,graticule:lne,heatmap:cne,isocontour:tne,kde2d:nne,projection:$Le},Symbol.toStringTag,{value:"Module"})),Lme={center:Ldt,collide:nht,nbody:hht,link:iht,x:pht,y:mht},rC="forces",qH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],I7t=["static","iterations"],MLe=["x","y","vx","vy"];function fne(e){Pe.call(this,null,e)}fne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:MLe}]};lt(fne,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(qH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&LLe(n,e,0,t)):(this.value=n=R7t(t.source,e),n.on("tick",k7t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(I7t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==rC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(MLe)}});function k7t(e,t){return()=>e.touch(t).run()}function R7t(e,t){const n=dht(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),LLe(n,t,!0).on("end",()=>s=!0)}function LLe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=qH.length;s<o;++s)a=qH[s],a!==rC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=rC+s,a=n||t.modified(rC,s)?P7t(i[s]):r&&N7t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(rC+s,null);return e.numForces=i.length,e}function N7t(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(ga(r)))return 1;return 0}function P7t(e){var t,n;jt(Lme,e.force)||Le("Unrecognized force: "+e.force),t=Lme[e.force]();for(n in e)_n(t[n])&&D7t(t[n],e[n],e);return t}function D7t(e,t,n){e(_n(t)?r=>t(r,n):t)}const O7t=Object.freeze(Object.defineProperty({__proto__:null,force:fne},Symbol.toStringTag,{value:"Module"}));function WH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function dne(e){Pe.call(this,null,e)}dne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const $7t=e=>e.values;lt(dne,Pe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&oF(o.data)&&i.rem.push(o.data)}),this.value=s=M6({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),M7t()).entries(i.source)},$7t),n&&s.each(o=>{o.children&&(o=Er(o.data),i.add.push(o),i.source.push(o))}),WH(s,Lt,Lt)),i.source.root=s,i}});function M7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ug(e){Pe.call(this,null,e)}const L7t=(e,t)=>e.parent===t.parent?1:2;lt(ug,Pe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(s_(e.sort,o=>o.data)),F7t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?L7t:qS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>j7t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function F7t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function j7t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const GH=["x","y","r","depth","children"];function hne(e){ug.call(this,e)}hne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GH.length,default:GH}]};lt(hne,ug,{layout:n2e,params:["radius","size","padding"],fields:GH});const YH=["x0","y0","x1","y1","depth","children"];function pne(e){ug.call(this,e)}pne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:YH.length,default:YH}]};lt(pne,ug,{layout:mmt,params:["size","round","padding"],fields:YH});function mne(e){Pe.call(this,null,e)}mne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(mne,Pe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?WH(mce().id(e.key).parentId(e.parentKey)(i.source),e.key,Fc):WH(mce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Fme={tidy:Tmt,cluster:Fpt},KH=["x","y","depth","children"];function gne(e){ug.call(this,e)}gne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:KH.length,default:KH}]};lt(gne,ug,{layout(e){const t=e||"tidy";if(jt(Fme,t))return Fme[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:KH});function yne(e){Pe.call(this,[],e)}yne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(yne,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(Er({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const jme={binary:Amt,dice:Dk,slice:L6,slicedice:Imt,squarify:o2e,resquarify:kmt},XH=["x0","y0","x1","y1","depth","children"];function vne(e){ug.call(this,e)}vne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XH.length,default:XH}]};lt(vne,ug,{layout(){const e=Cmt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(jme,t)?e.tile(jme[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:XH});const B7t=Object.freeze(Object.defineProperty({__proto__:null,nest:dne,pack:hne,partition:pne,stratify:mne,tree:gne,treelinks:yne,treemap:vne},Symbol.toStringTag,{value:"Module"})),f9=4278190080;function U7t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function z7t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=O0(s,o).getContext("2d"),l=O0(s,o).getContext("2d"),c=a&&O0(s,o).getContext("2d");n.forEach(C=>lO(u,C,!1)),lO(l,t,!1),a&&lO(c,t,!0);const f=d9(u,s,o),d=d9(l,s,o),h=a&&d9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,E,x,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&f9,S=d[w]&f9,x=a&&h[w]&f9,(E||x||S)&&(v=e(g),_=e(y),!i&&(E||S)&&p.set(v,_),a&&(E||x)&&m.set(v,_));return[p,m]}function d9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function lO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>lO(e,s.items,n))}):Wl[r].draw(e,{items:n?t.map(V7t):t})}function V7t(e){const t=aF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Sp=5,Oa=31,UI=32,Fg=new Uint32Array(UI+1),Ef=new Uint32Array(UI+1);Ef[0]=0;Fg[0]=~Ef[0];for(let e=1;e<=UI;++e)Ef[e]=Ef[e-1]<<1|1,Fg[e]=~Ef[e];function H7t(e,t){const n=new Uint32Array(~~((e*t+UI)/UI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Sp]&1<<(a&Oa)},set:(s,o)=>{const a=o*e+s;r(a>>>Sp,1<<(a&Oa))},clear:(s,o)=>{const a=o*e+s;i(a>>>Sp,~(1<<(a&Oa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Sp,h=f>>>Sp,d===h){if(n[d]&Fg[c&Oa]&Ef[(f&Oa)+1])return!0}else{if(n[d]&Fg[c&Oa]||n[h]&Ef[(f&Oa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)r(f,Fg[l&Oa]&Ef[(c&Oa)+1]);else for(r(f,Fg[l&Oa]),r(d,Ef[(c&Oa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)i(f,Ef[l&Oa]|Fg[(c&Oa)+1]);else for(i(f,Ef[l&Oa]),i(d,Fg[(c&Oa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function q7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>H7t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function W7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Pl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function OM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function c0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function G7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!OM(p,m,d,h,i,s)&&!c0(e,p,m,h,d,g,o,a)&&!c0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,c0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,E,x,S,C,A,k,N,O,D,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,_=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>_&&(U=v,v=_,_=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(_),N=~~((k+O)/2),D=e(w),F=e(E),$=~~((D+F)/2),C=N;C>=k;--C)for(A=$;A>=D;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=N;C<=O;++C)for(A=$;A<=F;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(_-v+E-w),x=(v+_)/2,S=(w+E)/2,M>=y&&!OM(x,S,h,d,i,s)&&!c0(e,x,S,d,h,d,o,null)&&(y=M,l.x=x,l.y=S,g=!0))}return m||g?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const Y7t=[-1,-1,1,1],K7t=[-1,1,-1,1];function X7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,E,x,S,C,A,k,N,O,D,$;for(let F=0;F<f;++F){for(_=c[F].x,E=c[F].y,w=c[F].x2===void 0?_:c[F].x2,x=c[F].y2===void 0?E:c[F].y2,p.push([e((_+w)/2),e((E+x)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let M=0;M<4;++M)S=A+Y7t[M],C=k+K7t[M],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(k),N=m,O=s,!OM(S,C,h,d,i,s)&&!c0(e,S,C,d,h,N,o,a)&&!c0(e,S,C,d,h,d,o,null)){for(;O-N>=1;)D=(N+O)/2,c0(e,S,C,d,h,D,o,a)?O=D:N=D;N>m&&(l.x=S,l.y=C,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-_+x-E),S=(_+w)/2,C=(E+x)/2,$>=v&&!OM(S,C,h,d,i,s)&&!c0(e,S,C,d,h,d,o,null)&&(v=$,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const Q7t=["right","center","left"],J7t=["bottom","middle","top"];function Z7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,E,x,S,C,A,k,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,C=e(v),k=e(w),N=e(E),!d)if(Bme(C,C,k,N,o,a,v,v,w,E,c,m))d=Pl.width(l.datum,l.datum.text);else continue;if(x=v+y*d*h/2,v=x-d/2,_=x+d/2,C=e(v),A=e(_),Bme(C,A,k,N,o,a,v,_,w,E,c,m))return l.x=h?h*y<0?_:v:x,l.y=p?p*y<0?E:w:S,l.align=Q7t[h*y+1],l.baseline=J7t[p*y+1],o.setRange(C,k,A,N),!0}return!1}}function Bme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const h9=0,p9=4,m9=8,g9=0,y9=1,v9=2,ezt={"top-left":h9+g9,top:h9+y9,"top-right":h9+v9,left:p9+g9,middle:p9+y9,right:p9+v9,"bottom-left":m9+g9,bottom:m9+y9,"bottom-right":m9+v9},tzt={naive:W7t,"reduced-search":G7t,floodfill:X7t};function nzt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=rzt(r,f),h=izt(i,f),p=szt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=ozt(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,E=-1;const x=e.map(k=>{const N=v?Pl.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=q7t(t[0],t[1],l);let C;if(!_){n&&x.sort((O,D)=>n(O.datum,D.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);C=s.length||N?z7t(S,N||[],s,k,g):U7t(S,o&&x)}const A=g?tzt[c](S,C,o,u):Z7t(S,C,h,d);return x.forEach(k=>k.opacity=+A(k)),x}function rzt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function izt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ezt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function szt(e){return e&&e.mark&&e.mark.marktype}function ozt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const QH=["x","y","opacity","align","baseline"],FLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bne(e){Pe.call(this,null,e)}bne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:FLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:QH.length,default:QH}]};lt(bne,Pe,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||QH;return nzt(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||FLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const azt=Object.freeze(Object.defineProperty({__proto__:null,label:bne},Symbol.toStringTag,{value:"Module"}));function jLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function _ne(e){Pe.call(this,null,e)}_ne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(_ne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=jLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=s.length,a=e.as||[Ki(e.x),Ki(e.y)],u=[];i.forEach(l=>{Q3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Er(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const JH={constant:Pee,linear:Dee,log:G3e,exp:Y3e,pow:K3e,quad:Oee,poly:X3e},uzt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function wne(e){Pe.call(this,null,e)}wne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(JH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(wne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=jLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=e.method||"linear",a=e.order==null?3:e.order,u=uzt(o,a),l=e.as||[Ki(e.x),Ki(e.y)],c=JH[o],f=[];let d=e.extent;jt(JH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Er({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Fh(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Er(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):pF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const lzt=Object.freeze(Object.defineProperty({__proto__:null,loess:_ne,regression:wne},Symbol.toStringTag,{value:"Module"}));function Ene(e){Pe.call(this,null,e)}Ene.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const czt=[-1e5,-1e5,1e5,1e5];lt(Ene,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:czt;const s=this.value=PK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!dzt(u)?fzt(u):null}return t.reflow(e.modified()).modifies(n)}});function fzt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function dzt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const hzt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Ene},Symbol.toStringTag,{value:"Module"}));var b9=Math.PI/180,iC=64,cO=2048;function pzt(){var e=[256,256],t,n,r,i,s,o,a,u=BLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(O0()),m=_zt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,S)=>S.size-x.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,mzt(p,E,w,v),E.hasText&&h(m,E,g)&&(_.push(E),g?yzt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(iC<<5)/m,p.height=cO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,x=-E,S,C,A;(S=w(x+=E))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=_));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!gzt(m,p,e[0]))&&(!g||vzt(m,g))){for(var k=m.sprite,N=m.width>>5,O=e[0]>>5,D=m.x-(N<<4),$=D&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),U,H=0;H<M;H++){U=0;for(var P=0;P<=N;P++)p[B+P]|=U<<F|(P<N?(U=k[H*N+P])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=p1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=p1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=p1(p),f):s},f.rotate=function(p){return arguments.length?(o=p1(p),f):o},f.text=function(p){return arguments.length?(t=p1(p),f):t},f.spiral=function(p){return arguments.length?(u=wzt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=p1(p),f):r},f.padding=function(p){return arguments.length?(a=p1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function mzt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(iC<<5)/s,cO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*b9),g=Math.cos(t.rotate*b9),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=iC<<5&&(o=0,a+=u,u=0),a+d>=cO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*b9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(iC<<5)/s,cO/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=E[(a+p)*(iC<<5)+(o+h)<<2]?1<<31-h%32:0;x[A]|=k,S|=k}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=x.slice(0,(t.y1-t.y0)*f)}}}function gzt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function yzt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function vzt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function BLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function bzt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function _zt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function p1(e){return typeof e=="function"?e:function(){return e}}var wzt={archimedean:BLe,rectangular:bzt};const ULe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Ezt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function xne(e){Pe.call(this,pzt(),e)}xne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ULe}]};lt(xne,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Ezt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||ULe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=gr("sqrt")().domain(Fh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Bc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const xzt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:xne},Symbol.toStringTag,{value:"Module"})),Szt=e=>new Uint8Array(e),Tzt=e=>new Uint16Array(e),rA=e=>new Uint32Array(e);function Czt(){let e=8,t=[],n=rA(0),r=MP(0,e),i=MP(0,e);return{data:()=>t,seen:()=>n=Azt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=MP(s,e,r),i=MP(s,e))}}}function Azt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function MP(e,t,n){const r=(t<257?Szt:t<65537?Tzt:rA)(e);return n&&r.set(n),r}function Ume(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function zme(){let e=rA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=rA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Izt(h,d),c)p=t,m=e,t=Array(c+f),e=rA(c+f),kzt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Wat(u,a[0],0,l),q0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Izt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Jat(e,t)}function kzt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Sne(e){Pe.call(this,Czt(),e),this._indices=null,this._dims=null}Sne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Sne,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=zme()),s.push(Ume(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,E,x,S;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,x=v.length;E<x;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=zme(),p[y]=m=g.insert(S,t.source,0)),o[E]=Ume(g,E,i[E]).onAdd(m,u));for(E=0,x=a.data().length;E<x;++E)_[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Tne(e){Pe.call(this,null,e)}Tne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(Tne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Rzt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Sne,resolvefilter:Tne},Symbol.toStringTag,{value:"Module"})),Nzt="RawCode",mb="Literal",Pzt="Property",Dzt="Identifier",Ozt="ArrayExpression",$zt="BinaryExpression",zLe="CallExpression",Mzt="ConditionalExpression",Lzt="LogicalExpression",Fzt="MemberExpression",jzt="ObjectExpression",Bzt="UnaryExpression";function dd(e){this.type=e}dd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Uzt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Uzt(e){switch(e.type){case Ozt:return e.elements;case $zt:case Lzt:return[e.left,e.right];case zLe:return[e.callee].concat(e.arguments);case Mzt:return[e.test,e.consequent,e.alternate];case Fzt:return[e.object,e.property];case jzt:return e.properties;case Pzt:return[e.key,e.value];case Bzt:return[e.argument];case Dzt:case mb:case Nzt:default:return[]}}var op,kt,$e,va,Dr,PF=1,DR=2,gb=3,Ky=4,DF=5,u_=6,Su=7,OR=8,zzt=9;op={};op[PF]="Boolean";op[DR]="<end>";op[gb]="Identifier";op[Ky]="Keyword";op[DF]="Null";op[u_]="Numeric";op[Su]="Punctuator";op[OR]="String";op[zzt]="RegularExpression";var Vzt="ArrayExpression",Hzt="BinaryExpression",qzt="CallExpression",Wzt="ConditionalExpression",VLe="Identifier",Gzt="Literal",Yzt="LogicalExpression",Kzt="MemberExpression",Xzt="ObjectExpression",Qzt="Property",Jzt="UnaryExpression",io="Unexpected token %0",Zzt="Unexpected number",eVt="Unexpected string",tVt="Unexpected identifier",nVt="Unexpected reserved word",rVt="Unexpected end of input",ZH="Invalid regular expression",_9="Invalid regular expression: missing /",HLe="Octal literals are not allowed in strict mode.",iVt="Duplicate data property in object literal not allowed in strict mode",Ro="ILLEGAL",zI="Disabled.",sVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),oVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function OF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Mp(e){return e>=48&&e<=57}function Cne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function iA(e){return"01234567".indexOf(e)>=0}function aVt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function VI(e){return e===10||e===13||e===8232||e===8233}function $R(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&sVt.test(String.fromCharCode(e))}function $M(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&oVt.test(String.fromCharCode(e))}const uVt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function qLe(){for(;$e<va;){const e=kt.charCodeAt($e);if(aVt(e)||VI(e))++$e;else break}}function eq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<va&&Cne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},io,Ro);return String.fromCharCode(i)}function lVt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},io,Ro);$e<va&&(e=kt[$e++],!!Cne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},io,Ro),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function WLe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=eq("u"),(!e||e==="\\"||!$R(e.charCodeAt(0)))&&pr({},io,Ro),t=e);$e<va&&(e=kt.charCodeAt($e),!!$M(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=eq("u"),(!e||e==="\\"||!$M(e.charCodeAt(0)))&&pr({},io,Ro),t+=e);return t}function cVt(){var e,t;for(e=$e++;$e<va;){if(t=kt.charCodeAt($e),t===92)return $e=e,WLe();if($M(t))++$e;else break}return kt.slice(e,$e)}function fVt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?WLe():cVt(),t.length===1?n=gb:uVt.hasOwnProperty(t)?n=Ky:t==="null"?n=DF:t==="true"||t==="false"?n=PF:n=gb,{type:n,value:t,start:e,end:$e}}function w9(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Su,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Su,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Su,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Su,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Su,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Su,value:i,start:e,end:$e};if(i==="//"&&pr({},io,Ro),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Su,value:r,start:e,end:$e};pr({},io,Ro)}function dVt(e){let t="";for(;$e<va&&Cne(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},io,Ro),$R(kt.charCodeAt($e))&&pr({},io,Ro),{type:u_,value:parseInt("0x"+t,16),start:e,end:$e}}function hVt(e){let t="0"+kt[$e++];for(;$e<va&&iA(kt[$e]);)t+=kt[$e++];return($R(kt.charCodeAt($e))||Mp(kt.charCodeAt($e)))&&pr({},io,Ro),{type:u_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Vme(){var e,t,n;if(n=kt[$e],OF(Mp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,dVt(t);if(iA(n))return hVt(t);n&&Mp(n.charCodeAt(0))&&pr({},io,Ro)}for(;Mp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Mp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Mp(kt.charCodeAt($e)))for(;Mp(kt.charCodeAt($e));)e+=kt[$e++];else pr({},io,Ro);return $R(kt.charCodeAt($e))&&pr({},io,Ro),{type:u_,value:parseFloat(e),start:t,end:$e}}function pVt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],OF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<va;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!VI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=lVt()):e+=eq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:iA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<va&&iA(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<va&&iA(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(VI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},io,Ro),{type:OR,value:e,octal:s,start:n,end:$e}}function mVt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},ZH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},ZH)}try{return new RegExp(e,t)}catch{return null}}function gVt(){var e,t,n,r,i;for(e=kt[$e],OF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<va;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],VI(e.charCodeAt(0))&&pr({},_9),t+=e;else if(VI(e.charCodeAt(0)))pr({},_9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},_9),i=t.substr(1,t.length-2),{value:i,literal:t}}function yVt(){var e,t,n;for(t="",n="";$e<va&&(e=kt[$e],!!$M(e.charCodeAt(0)));)++$e,e==="\\"&&$e<va?pr({},io,Ro):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},ZH,n),{value:n,literal:t}}function vVt(){var e,t,n,r;return Dr=null,qLe(),e=$e,t=gVt(),n=yVt(),r=mVt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function bVt(e){return e.type===gb||e.type===Ky||e.type===PF||e.type===DF}function GLe(){if(qLe(),$e>=va)return{type:DR,start:$e,end:$e};const e=kt.charCodeAt($e);return $R(e)?fVt():e===40||e===41||e===59?w9():e===39||e===34?pVt():e===46?Mp(kt.charCodeAt($e+1))?Vme():w9():Mp(e)?Vme():w9()}function Pu(){const e=Dr;return $e=e.end,Dr=GLe(),$e=e.end,e}function YLe(){const e=$e;Dr=GLe(),$e=e}function _Vt(e){const t=new dd(Vzt);return t.elements=e,t}function Hme(e,t,n){const r=new dd(e==="||"||e==="&&"?Yzt:Hzt);return r.operator=e,r.left=t,r.right=n,r}function wVt(e,t){const n=new dd(qzt);return n.callee=e,n.arguments=t,n}function EVt(e,t,n){const r=new dd(Wzt);return r.test=e,r.consequent=t,r.alternate=n,r}function Ane(e){const t=new dd(VLe);return t.name=e,t}function sC(e){const t=new dd(Gzt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function qme(e,t,n){const r=new dd(Kzt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function xVt(e){const t=new dd(Xzt);return t.properties=e,t}function Wme(e,t,n){const r=new dd(Qzt);return r.key=t,r.value=n,r.kind=e,r}function SVt(e,t){const n=new dd(Jzt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(OF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function $F(e){e.type===DR&&pr(e,rVt),e.type===u_&&pr(e,Zzt),e.type===OR&&pr(e,eVt),e.type===gb&&pr(e,tVt),e.type===Ky&&pr(e,nVt),pr(e,io,e.value)}function ba(e){const t=Pu();(t.type!==Su||t.value!==e)&&$F(t)}function fi(e){return Dr.type===Su&&Dr.value===e}function E9(e){return Dr.type===Ky&&Dr.value===e}function TVt(){const e=[];for($e=Dr.start,ba("[");!fi("]");)fi(",")?(Pu(),e.push(null)):(e.push(yb()),fi("]")||ba(","));return Pu(),_Vt(e)}function Gme(){$e=Dr.start;const e=Pu();return e.type===OR||e.type===u_?(e.octal&&pr(e,HLe),sC(e)):Ane(e.value)}function CVt(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===gb)return n=Gme(),ba(":"),r=yb(),Wme("init",n,r);if(e.type===DR||e.type===Su)$F(e);else return t=Gme(),ba(":"),r=yb(),Wme("init",t,r)}function AVt(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,ba("{");!fi("}");)t=CVt(),t.key.type===VLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},iVt):i[r]=!0,e.push(t),fi("}")||ba(",");return ba("}"),xVt(e)}function IVt(){ba("(");const e=Ine();return ba(")"),e}const kVt={if:1};function RVt(){var e,t,n;if(fi("("))return IVt();if(fi("["))return TVt();if(fi("{"))return AVt();if(e=Dr.type,$e=Dr.start,e===gb||kVt[Dr.value])n=Ane(Pu().value);else if(e===OR||e===u_)Dr.octal&&pr(Dr,HLe),n=sC(Pu());else{if(e===Ky)throw new Error(zI);e===PF?(t=Pu(),t.value=t.value==="true",n=sC(t)):e===DF?(t=Pu(),t.value=null,n=sC(t)):fi("/")||fi("/=")?(n=sC(vVt()),YLe()):$F(Pu())}return n}function NVt(){const e=[];if(ba("("),!fi(")"))for(;$e<va&&(e.push(yb()),!fi(")"));)ba(",");return ba(")"),e}function PVt(){$e=Dr.start;const e=Pu();return bVt(e)||$F(e),Ane(e.value)}function DVt(){return ba("."),PVt()}function OVt(){ba("[");const e=Ine();return ba("]"),e}function $Vt(){var e,t,n;for(e=RVt();;)if(fi("."))n=DVt(),e=qme(".",e,n);else if(fi("("))t=NVt(),e=wVt(e,t);else if(fi("["))n=OVt(),e=qme("[",e,n);else break;return e}function Yme(){const e=$Vt();if(Dr.type===Su&&(fi("++")||fi("--")))throw new Error(zI);return e}function fO(){var e,t;if(Dr.type!==Su&&Dr.type!==Ky)t=Yme();else{if(fi("++")||fi("--"))throw new Error(zI);if(fi("+")||fi("-")||fi("~")||fi("!"))e=Pu(),t=fO(),t=SVt(e.value,t);else{if(E9("delete")||E9("void")||E9("typeof"))throw new Error(zI);t=Yme()}}return t}function Kme(e){let t=0;if(e.type!==Su&&e.type!==Ky)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function MVt(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=fO(),r=Dr,i=Kme(r),i===0)return u;for(r.prec=i,Pu(),t=[e,Dr],o=fO(),s=[u,r,o];(i=Kme(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Hme(a,u,o),s.push(n);r=Pu(),r.prec=i,s.push(r),t.push(Dr),n=fO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Hme(s[l-1].value,s[l-2],n),l-=2;return n}function yb(){var e,t,n;return e=MVt(),fi("?")&&(Pu(),t=yb(),ba(":"),n=yb(),e=EVt(e,t,n)),e}function Ine(){const e=yb();if(fi(","))throw new Error(zI);return e}function kne(e){kt=e,$e=0,va=kt.length,Dr=null,YLe();const t=Ine();if(Dr.type!==DR)throw new Error("Unexpect token after expression.");return t}var KLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function XLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function LVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function QLe(e){e=e||{};const t=e.allowed?td(e.allowed):{},n=e.forbidden?td(e.forbidden):{},r=e.constants||KLe,i=(e.functions||XLe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[LVt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Xme=Symbol("vega_selection_getter");function JLe(e){return(!e.getter||!e.getter[Xme])&&(e.getter=Lc(e.field),e.getter[Xme]=!0),e.getter}const Rne="intersect",Qme="union",FVt="vlMulti",jVt="vlPoint",Jme="or",BVt="and",jd="_vgsid_",HI=Lc(jd),UVt="E",zVt="R",VVt="R-E",HVt="R-LE",qVt="R-RE",MM="index:unit";function Zme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=JLe(a)(e),P0(o)&&(o=ha(o)),P0(r[s])&&(r[s]=ha(r[s])),je(r[s])&&P0(r[s][0])&&(r[s]=r[s].map(ha)),a.type===UVt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===zVt){if(!Fw(o,r[s]))return!1}else if(a.type===qVt){if(!Fw(o,r[s],!0,!1))return!1}else if(a.type===VVt){if(!Fw(o,r[s],!1,!1))return!1}else if(a.type===HVt&&!Fw(o,r[s],!1,!0))return!1;return!0}function WVt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[MM]&&r[MM].value:void 0,o=n===Rne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Zme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Zme(t,l),o^h)return h;return a&&o}const ZLe=gS(HI),GVt=ZLe.left,YVt=ZLe.right;function KVt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[MM]&&r[MM].value:void 0,o=n===Rne,a=HI(t),u=GVt(i,a);if(u===i.length||HI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(YVt(i,a)-u<s.size)return!1}return!0}function XVt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>JLe(r)(n.datum))}:{[jd]:HI(n.datum)},t))}function QVt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,E,x;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,x=c.length;E<x;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=x9[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=jd,p=HI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[jd]:p}));if(t=t||Qme,o[jd]?o[jd]=x9[`${jd}_${t}`](...Object.values(o[jd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:x9[`${u[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?jVt:FVt;o[S]=t===Qme?{[Jme]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[BVt]:s.map(C=>({[Jme]:a[C]}))}}return o}var x9={[`${jd}_union`]:out,[`${jd}_intersect`]:iut,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const JVt=":",ZVt="@";function Nne(e,t,n,r){t[0].type!==mb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=ZVt+o,u=JVt+i;s===Rne&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function e6e(e){const t=this.context.data[e];return t?t.values.value:[]}function eHt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function tHt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Fc).insert(t)),1}function nHt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const MR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},rHt=MR("format"),t6e=MR("timeFormat"),iHt=MR("utcFormat"),sHt=MR("timeParse"),oHt=MR("utcParse"),LP=new Date(2e3,0,1);function MF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(LP.setYear(2e3),LP.setMonth(e),LP.setDate(t),t6e.call(this,LP,n))}function aHt(e){return MF.call(this,e,1,"%B")}function uHt(e){return MF.call(this,e,1,"%b")}function lHt(e){return MF.call(this,0,2+e,"%A")}function cHt(e){return MF.call(this,0,2+e,"%a")}const fHt=":",dHt="@",tq="%",n6e="$";function Pne(e,t,n,r){t[0].type!==mb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=fHt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function hHt(e,t,n,r){t[0].type!==mb&&Le("First argument to indata must be a string literal."),t[1].type!==mb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=dHt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Xa(e,t,n,r){if(t[0].type===mb)ege(n,r,t[0].value);else for(e in n.scales)ege(n,r,e)}function ege(e,t,n){const r=tq+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ap(e,t){if(_n(e))return e;if(mt(e)){const n=t.scales[e];return n&&jjt(n.value)?n.value:void 0}}function pHt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Xa,n._range=Xa,n._scale=Xa;const r=i=>"_["+(i.type===mb?rt(tq+i.value):rt(tq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Dne(e,t){return function(n,r,i){if(n){const s=ap(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const mHt=Dne("area",Cht),gHt=Dne("bounds",Rht),yHt=Dne("centroid",Mht);function vHt(e,t){const n=ap(e,(t||this).context);return n&&n.scale()}function bHt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function One(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function _Ht(){return One(this.context.dataflow,"warn",arguments)}function wHt(){return One(this.context.dataflow,"info",arguments)}function EHt(){return One(this.context.dataflow,"debug",arguments)}function S9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nq(e){const t=G0(e),n=S9(t.r),r=S9(t.g),i=S9(t.b);return .2126*n+.7152*r+.0722*i}function xHt(e,t){const n=nq(e),r=nq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function SHt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function r6e(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?THt(e,t):!1:gt(e)&&gt(t)?i6e(e,t):!1}function THt(e,t){for(let n=0,r=e.length;n<r;++n)if(!r6e(e[n],t[n]))return!1;return!0}function i6e(e,t){for(const n in e)if(!r6e(e[n],t[n]))return!1;return!0}function tge(e){return t=>i6e(e,t)}function CHt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Fc:je(n)||oF(n)?n:tge(n),c.remove(f)),t&&c.insert(t),r&&(f=tge(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function AHt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function IHt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const nge={};function kHt(e,t){const n=nge[t]||(nge[t]=Lc(t));return je(e)?e.map(n):n(e)}function $ne(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Mne(e){return $ne(e)||(mt(e)?e:null)}function RHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $ne(e).join(...n)}function NHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).indexOf(...n)}function PHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).lastIndexOf(...n)}function DHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).slice(...n)}function OHt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function $Ht(e){return $ne(e).slice().reverse()}function MHt(e,t,n){return ote(e||0,t||0,n||0)}function LHt(e,t){const n=ap(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function FHt(e,t){const n=ap(e,(t||this).context);return n?n.copy():void 0}function jHt(e,t){const n=ap(e,(t||this).context);return n?n.domain():[]}function BHt(e,t,n){const r=ap(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function UHt(e,t){const n=ap(e,(t||this).context);return n&&n.range?n.range():[]}function zHt(e,t,n){const r=ap(e,(n||this).context);return r?r(t):void 0}function VHt(e,t,n,r,i){e=ap(e,(i||this).context);const s=Y$e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=xa;return u-a?l=M$e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function HHt(e,t,n){const r=ap(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function qHt(e){let t=null;return function(n){return n?FI(n,t=t||Ix(e)):e}}const s6e=e=>e.data;function o6e(e,t){const n=e6e.call(t,e);return n.root&&n.root.lookup||{}}function WHt(e,t,n){const r=o6e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(s6e):void 0}function GHt(e,t){const n=o6e(e,this)[t];return n?n.ancestors().map(s6e):void 0}const a6e=()=>typeof window<"u"&&window||null;function YHt(){const e=a6e();return e?e.screen:{}}function KHt(){const e=a6e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function XHt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function u6e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return qMe(o,s,QHt(t))}function QHt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function JHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function ZHt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function eqt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),u6e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>tqt(u.x,u.y,t))}function tqt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const qI={random(){return Bc()},cumulativeNormal:fF,cumulativeLogNormal:Cee,cumulativeUniform:Ree,densityNormal:wee,densityLogNormal:Tee,densityUniform:kee,quantileNormal:dF,quantileLogNormal:Aee,quantileUniform:Nee,sampleNormal:cF,sampleLogNormal:See,sampleUniform:Iee,isArray:je,isBoolean:Yy,isDate:P0,isDefined(e){return e!==void 0},isNumber:lr,isObject:gt,isRegExp:WOe,isString:mt,isTuple:oF,isValid(e){return e!=null&&e===e},toBoolean:see,toDate(e){return oee(e)},toNumber:ha,toString:aee,indexof:NHt,join:RHt,lastindexof:PHt,replace:OHt,reverse:$Ht,slice:DHt,flush:HOe,lerp:GOe,merge:SHt,pad:XOe,peek:Qn,pluck:kHt,span:gR,inrange:Fw,truncate:QOe,rgb:G0,lab:w3,hcl:E3,hsl:b3,luminance:nq,contrast:xHt,sequence:$u,format:rHt,utcFormat:iHt,utcParse:oHt,utcOffset:f3e,utcSequence:p3e,timeFormat:t6e,timeParse:sHt,timeOffset:c3e,timeSequence:h3e,timeUnitSpecifier:ZOe,monthFormat:aHt,monthAbbrevFormat:uHt,dayFormat:lHt,dayAbbrevFormat:cHt,quarter:BOe,utcquarter:UOe,week:t3e,utcweek:i3e,dayofyear:e3e,utcdayofyear:r3e,warn:_Ht,info:wHt,debug:EHt,extent(e){return Fh(e)},inScope:bHt,intersect:u6e,clampRange:zOe,pinchDistance:AHt,pinchAngle:IHt,screen:YHt,containerSize:XHt,windowSize:KHt,bandspace:MHt,setdata:tHt,pathShape:qHt,panLinear:MOe,panLog:LOe,panPow:FOe,panSymlog:jOe,zoomLinear:ZZ,zoomLog:eee,zoomPow:mM,zoomSymlog:tee,encode:nHt,modify:CHt,lassoAppend:JHt,lassoPath:ZHt,intersectLasso:eqt},nqt=["view","item","group","xy","x","y"],rqt="event.vega.",l6e="this.",Lne={},c6e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(n6e+e)}]`,functions:iqt,constants:KLe,visitors:Lne},rq=QLe(c6e);function iqt(e){const t=XLe(e);nqt.forEach(n=>t[n]=rqt+n);for(const n in qI)t[n]=l6e+n;return bn(t,pHt(e,qI,Lne)),t}function ms(e,t,n){return arguments.length===1?qI[e]:(qI[e]=t,n&&(Lne[e]=n),rq&&(rq.functions[e]=l6e+e),this)}ms("bandwidth",LHt,Xa);ms("copy",FHt,Xa);ms("domain",jHt,Xa);ms("range",UHt,Xa);ms("invert",BHt,Xa);ms("scale",zHt,Xa);ms("gradient",VHt,Xa);ms("geoArea",mHt,Xa);ms("geoBounds",gHt,Xa);ms("geoCentroid",yHt,Xa);ms("geoShape",HHt,Xa);ms("geoScale",vHt,Xa);ms("indata",eHt,hHt);ms("data",e6e,Pne);ms("treePath",WHt,Pne);ms("treeAncestors",GHt,Pne);ms("vlSelectionTest",WVt,Nne);ms("vlSelectionIdTest",KVt,Nne);ms("vlSelectionResolve",QVt,Nne);ms("vlSelectionTuples",XVt);function Bh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=kne(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==zLe)return;const o=s.callee.name,a=c6e.visitors[o];a&&a(o,s.arguments,t,n)});const i=rq(r);return i.globals.forEach(s=>{const o=n6e+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function sqt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const oqt=td(["rule"]),rge=td(["group","image","rect"]);function aqt(e,t){let n="";return oqt[t]||(e.x2&&(e.x?(rge[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(rge[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Fne(e){return(e+"").toLowerCase()}function uqt(e){return Fne(e)==="operator"}function lqt(e){return Fne(e)==="collect"}function i2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function cqt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var fqt={operator:(e,t)=>i2(e,["_"],t.code),parameter:(e,t)=>i2(e,["datum","_"],t.code),event:(e,t)=>i2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return i2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=aqt(r,n),i+="return m;",i2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),cqt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function dqt(e){const t=this;uqt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function hqt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function pqt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>ige(s,n,t)):ige(i,n,t)}return t}function ige(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=sge.length,s;r<i;++r)if(s=sge[r],jt(e,s.key))return s.parse(e,t,n);return e}var sge=[{key:"$ref",parse:mqt},{key:"$key",parse:yqt},{key:"$expr",parse:gqt},{key:"$field",parse:vqt},{key:"$encode",parse:_qt},{key:"$compare",parse:bqt},{key:"$context",parse:wqt},{key:"$subflow",parse:Eqt},{key:"$tupleid",parse:xqt}];function mqt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function gqt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ul(t.parameterExpression(e.$expr),e.$fields))}function yqt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=iee(e.$key,e.$flat,t.expr.codegen))}function vqt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Lc(e.$field,e.$name,t.expr.codegen))}function bqt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=nee(r,e.$order,t.expr.codegen))}function _qt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ul(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function wqt(e,t){return t}function Eqt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function xqt(){return Lt}function Sqt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Tqt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Cqt={skip:!0};function Aqt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Iqt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Cqt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Fc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function f6e(e,t,n,r){return new d6e(e,t,n,r)}function d6e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||fqt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function oge(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}d6e.prototype=oge.prototype={fork(){const e=new oge(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),lqt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Fne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:sqt,parseOperator:dqt,parseOperatorParameters:hqt,parseParameters:pqt,parseStream:Sqt,parseUpdate:Tqt,getState:Aqt,setState:Iqt};function kqt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),h6e(t,e.description()))}function h6e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Rqt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const T9="default";function Nqt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:T9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:T9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),iq(e,r&&r!==T9?r:i||r),i},{cursor:t})}function iq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function LM(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function Pqt(e,t){return arguments.length<2?LM(this,e).values.value:LF.call(this,e,o_().remove(Fc).insert(t))}function LF(e,t){O3e(t)||Le("Second argument to changes must be a changeset.");const n=LM(this,e);return n.modified=!0,this.pulse(n.input,t)}function Dqt(e,t){return LF.call(this,e,o_().insert(t))}function Oqt(e,t){return LF.call(this,e,o_().remove(t))}function p6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function m6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function FF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function $qt(e){var t=FF(e),n=p6e(e),r=m6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Mqt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=FF(e),o=t.changedTouches?t.changedTouches[0]:t,s=kF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Lqt(e,n,s),t}function Lqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const age="view",Fqt="timer",jqt="window",Bqt={trap:!1};function Uqt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=td(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function g6e(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function zqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function FP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Vqt(e,t,n){var r=this,i=new lF(n),s=function(l,c){r.runAsync(null,()=>{e===age&&zqt(r,t)&&l.preventDefault(),i.receive(Mqt(r,l,c))})},o;if(e===Fqt)FP(r,"timer",t)&&r.timer(s,t);else if(e===age)FP(r,"view",t)&&r.addEventListener(t,s,Bqt);else if(e===jqt?FP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&FP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);g6e(r,o,t,s)}return i}function uge(e){return e.item}function lge(e){return e.item.mark.source}function cge(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Hqt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",uge),lge,cge(e)),this.on(this.events("view","pointerout",uge),lge,cge(t)),this}function qqt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Dl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Wqt="vega-bind",Gqt="vega-bind-name",Yqt="vega-bind-radio";function Kqt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=ree(r.debounce,i.update))),(r.input==null&&r.element?Xqt:Jqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Xqt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),g6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Qqt(i))}}function Qqt(e){return typeof Event<"u"?new Event(e):{type:e}}function Jqt(e,t,n,r){const i=r.signal(n.signal),s=Dl("div",{class:Wqt}),o=n.input==="radio"?s:s.appendChild(Dl("label"));o.appendChild(Dl("span",{class:Gqt},n.name||n.signal)),t.appendChild(s);let a=Zqt;switch(n.input){case"checkbox":a=eWt;break;case"select":a=tWt;break;case"radio":a=nWt;break;case"range":a=rWt;break}a(e,o,n,i)}function Zqt(e,t,n,r){const i=Dl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function eWt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Dl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function tWt(e,t,n,r){const i=Dl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};FM(o,r)&&(u.selected=!0),i.appendChild(Dl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(FM(n.options[a],o)){i.selectedIndex=a;return}}}function nWt(e,t,n,r){const i=Dl("span",{class:Yqt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};FM(o,r)&&(u.checked=!0);const l=Dl("input",u);l.addEventListener("change",()=>e.update(o));const c=Dl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)FM(a[l].value,o)&&(a[l].checked=!0)}}function rWt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||W0(s,i,100),a=Dl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Dl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function FM(e,t){return e===t||e+""==t+""}function y6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,p6e(e),m6e(e),FF(e),i,s).background(e.background())}function jne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function iWt(e,t,n,r){const i=new r(e.loader(),jne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,FF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function sWt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=RF(r);e=n._el=e?C9(n,e,!0):null,kqt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||PR,a=e?s.renderer:s.headless;return n._renderer=a?y6e(n,n._renderer,e,a):null,n._handler=iWt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=C9(n,t,!0):e.appendChild(Dl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=C9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Kqt(n,u.element||t,u)})),n}function C9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const s2=e=>+e||0,oWt=e=>({top:e,bottom:e,left:e,right:e});function fge(e){return gt(e)?{top:s2(e.top),bottom:s2(e.bottom),left:s2(e.left),right:s2(e.right)}:oWt(s2(e))}async function Bne(e,t,n,r){const i=RF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),y6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function aWt(e,t){e!==a0.Canvas&&e!==a0.SVG&&e!==a0.PNG&&Le("Unrecognized image type: "+e);const n=await Bne(this,e,t);return e===a0.SVG?uWt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function uWt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function lWt(e,t){return(await Bne(this,a0.Canvas,e,t)).canvas()}async function cWt(e){return(await Bne(this,a0.SVG,e)).svg()}function fWt(e,t,n){return f6e(e,Sx,qI,n).parse(t)}function dWt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var v6e="width",b6e="height",Une="padding",dge={skip:!0};function _6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Une?r.left+r.right:0)}function w6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Une?r.top+r.bottom:0)}function hWt(e){var t=e._signals,n=t[v6e],r=t[b6e],i=t[Une];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=_6e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=w6e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function pWt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(v6e,n,dge),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(b6e,r,dge),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function mWt(e){return this._runtime.getState(e||{data:gWt,signals:yWt,recurse:!0})}function gWt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function yWt(e,t){return!(e==="parent"||t instanceof Sx.proxy)}function vWt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function bWt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Bct(n,t))}function _Wt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",wWt(r))}function wWt(e){return e==null?"":je(e)?E6e(e):gt(e)&&!P0(e)?EWt(e):e+""}function EWt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?E6e(n):x6e(n))}).join(`
`)}function E6e(e){return"["+e.map(x6e).join(", ")+"]"}function x6e(e){return je(e)?"[…]":gt(e)&&!P0(e)?"{…}":e}function xWt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function S6e(e,t){const n=this;if(t=t||{},_E.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(S3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||a0.Canvas,n._scenegraph=new vMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||_Wt,n._redraw=!0,n._handler=new PR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Uqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=fWt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=_6e(n,n._width),n._viewHeight=w6e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,hWt(n),Rqt(n),Nqt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function jP(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function T6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function hge(e,t,n,r){let i=T6e(n,r);return i||(i=jne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function pge(e,t,n){const r=T6e(t,n);return r&&t._targets.remove(r),e}lt(S6e,_E,{async evaluate(e,t,n){if(await _E.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,$qt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&JD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&h6e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=jP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",fge(e)):fge(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(RF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(_E.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(jP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:pWt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=jne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return hge(this,e,jP(this,e),t)},removeSignalListener(e,t){return pge(this,jP(this,e),t)},addDataListener(e,t){return hge(this,e,LM(this,e).values,t)},removeDataListener(e,t){return pge(this,LM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=iq(this,null);this._globalCursor=!!e,t&&iq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:bWt,events:Vqt,finalize:qqt,hover:Hqt,data:Pqt,change:LF,insert:Dqt,remove:Oqt,scale:dWt,initialize:sWt,toImageURL:aWt,toCanvas:lWt,toSVG:cWt,getState:mWt,setState:vWt,_watchPixelRatio:xWt});const SWt="view",jM="[",BM="]",C6e="{",A6e="}",TWt=":",I6e=",",CWt="@",AWt=">",IWt=/[[\]{}]/,kWt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let k6e,R6e;function Xy(e,t,n){return k6e=t||SWt,R6e=n||kWt,N6e(e.trim()).map(sq)}function RWt(e){return R6e[e]}function sA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function N6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=sA(e,i,I6e,jM+C6e,BM+A6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function sq(e){return e[0]==="["?NWt(e):PWt(e)}function NWt(e){const t=e.length;let n=1,r;if(n=sA(e,n,BM,jM,BM),n===t)throw"Empty between selector: "+e;if(r=N6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==AWt)throw"Expected '>' after between selector: "+e;r=r.map(sq);const i=sq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function PWt(e){const t={source:k6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===A6e){if(a=e.lastIndexOf(C6e),a>=0){try{r=DWt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===CWt&&(i=++a),u=sA(e,a,TWt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=sA(e,a,jM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=sA(e,a,BM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==jM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||IWt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):RWt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function DWt(e){const t=e.split(I6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function OWt(e){return gt(e)?e:{type:e||"pad"}}const o2=e=>+e||0,$Wt=e=>({top:e,bottom:e,left:e,right:e});function MWt(e){return gt(e)?e.signal?e:{top:o2(e.top),bottom:o2(e.bottom),left:o2(e.left),right:o2(e.right)}:$Wt(o2(e))}const so=e=>gt(e)&&!je(e)?bn({},e):{value:e};function mge(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function jo(e,t,n){for(const r in t)mge(e,r,t[r]);for(const r in n)mge(e,r,n[r],"update")}function eT(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function mw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const zne="mark",Vne="frame",Hne="scope",LWt="axis",FWt="axis-domain",jWt="axis-grid",BWt="axis-label",UWt="axis-tick",zWt="axis-title",VWt="legend",HWt="legend-band",qWt="legend-entry",WWt="legend-gradient",P6e="legend-label",GWt="legend-symbol",YWt="legend-title",KWt="title",XWt="title-text",QWt="title-subtitle";function JWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!mw(u,e)&&A9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Vne?i.group:n===zne?bn({},i.mark,i[t]):null;for(u in c)l=mw(u,e)||(u==="fill"||u==="stroke")&&(mw("fill",e)||mw("stroke",e)),l||A9(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)mw(h,e)||A9(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function A9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const D6e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:O6e(e);function jF(e){if(e.gradient!=null)return eGt(e);let t=e.signal?`(${e.signal})`:e.color?ZWt(e.color):e.field!=null?O6e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=tGt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${dO(e.exponent)})`),e.mult!=null&&(t+=`*${dO(e.mult)}`),e.offset!=null&&(t+=`+${dO(e.offset)}`),e.round&&(t=`round(${t})`),t}const BP=(e,t,n,r)=>`(${e}(${[t,n,r].map(jF).join(",")})+'')`;function ZWt(e){return e.c?BP("hcl",e.h,e.c,e.l):e.h||e.s?BP("hsl",e.h,e.s,e.l):e.l||e.a?BP("lab",e.l,e.a,e.b):e.r||e.g||e.b?BP("rgb",e.r,e.g,e.b):null}function eGt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(D6e(e.gradient)),`gradient(${t.join(",")})`}function dO(e){return gt(e)?"("+jF(e)+")":e}function O6e(e){return $6e(gt(e)?e:{datum:e})}function $6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?ip(r).map(rt).join("]["):$6e(r)),t+"["+r+"]"}function tGt(e,t){const n=D6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+dO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function nGt(e){let t="";return e.forEach(n=>{const r=jF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function M6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=JWt(e,t,n,r,i.config);for(const a in e)o[a]=rGt(e[a],t,s,i);return s}function rGt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=sGt(iGt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function iGt(e){return je(e)?nGt(e):jF(e)}function sGt(e,t,n,r){const i=Bh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const oGt="outer",aGt=["value","update","init","react","bind"];function gge(e,t){Le(e+' for "outer" push: '+rt(t))}function L6e(e,t){const n=e.name;if(e.push===oGt)t.signals[n]||gge("No prior signal definition",n),aGt.forEach(r=>{e[r]!==void 0&&gge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function oq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function BF(e,t,n,r){return new oq(e,t,n,r)}function UM(e,t){return BF("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function WI(e,t){return t?{$field:e,$name:t}:{$field:e}}const aq=WI("key");function yge(e,t){return{$compare:e,$order:t}}function uGt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const lGt="ascending",cGt="descending";function fGt(e){return gt(e)?(e.order===cGt?"-":"+")+UF(e.op,e.field):""}function UF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const qne="scope",uq="view";function js(e){return e&&e.signal}function dGt(e){return e&&e.expr}function hO(e){if(js(e))return!0;if(gt(e)){for(const t in e)if(hO(e[t]))return!0}return!1}function bf(e,t){return e??t}function Dv(e){return e&&e.signal||e}const vge="timer";function GI(e,t){return(e.merge?pGt:e.stream?mGt:e.type?gGt:Le("Invalid stream specification: "+rt(e)))(e,t)}function hGt(e){return e===qne?uq:e||uq}function pGt(e,t){const n=e.merge.map(i=>GI(i,t)),r=Wne({merge:n},e,t);return t.addStream(r).id}function mGt(e,t){const n=GI(e.stream,t),r=Wne({stream:n},e,t);return t.addStream(r).id}function gGt(e,t){let n;e.type===vge?(n=t.event(vge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(hGt(e.source),e.type);const r=Wne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Wne(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[GI(r[0],n),GI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(yGt(t.marktype,t.markname,t.markrole)),t.source===qne&&r.push("inScope(event.item)"),r.length&&(e.filter=Bh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function yGt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const vGt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function bGt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=Xy(s,t.isSubscope()?qne:uq)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[wGt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?Bh(o,t):o.expr!=null?Bh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:vGt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(_Gt(u,t),i)))}function _Gt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):GI(e,t)}}function wGt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function EGt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Bh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>bGt(i,t,n.id))}const Vr=e=>(t,n,r)=>BF(e,n,t||void 0,r),F6e=Vr("aggregate"),xGt=Vr("axisticks"),j6e=Vr("bound"),hd=Vr("collect"),bge=Vr("compare"),SGt=Vr("datajoin"),B6e=Vr("encode"),TGt=Vr("expression"),CGt=Vr("facet"),AGt=Vr("field"),IGt=Vr("key"),kGt=Vr("legendentries"),RGt=Vr("load"),NGt=Vr("mark"),PGt=Vr("multiextent"),DGt=Vr("multivalues"),OGt=Vr("overlap"),$Gt=Vr("params"),U6e=Vr("prefacet"),MGt=Vr("projection"),LGt=Vr("proxy"),FGt=Vr("relay"),z6e=Vr("render"),jGt=Vr("scale"),l_=Vr("sieve"),BGt=Vr("sortitems"),V6e=Vr("viewlayout"),UGt=Vr("values");let zGt=0;const H6e={min:"min",max:"max",count:"sum"};function VGt(e,t){const n=e.type||"linear";R$e(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function HGt(e,t){const n=t.getScale(e.name).params;let r;n.domain=q6e(e.domain,e,t),e.range!=null&&(n.range=G6e(e,t,n)),e.interpolate!=null&&eYt(e.interpolate,n),e.nice!=null&&(n.nice=ZGt(e.nice,t)),e.bins!=null&&(n.bins=JGt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Tc(e[r],t))}function Tc(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function pO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Tc(n,t))}function zF(e){Le("Can not find data set: "+rt(e))}function q6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?qGt:e.fields?GGt:WGt)(e,t,n)}function qGt(e,t,n){return e.map(r=>Tc(r,n))}function WGt(e,t,n){const r=n.getData(e.data);return r||zF(e.data),Ax(t.type)?r.valuesRef(n,e.field,W6e(e.sort,!1)):D$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function GGt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?YGt(o,n):o,s.push(o),s),[]);return(Ax(t.type)?KGt:D$e(t.type)?XGt:QGt)(e,n,i)}function YGt(e,t){const n="_:vega:_"+zGt++,r=hd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,l_({})]),{data:n,field:"data"}}function KGt(e,t,n){const r=W6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||zF(l.data),c.countsRef(t,l.field,r)}),a={groupby:aq,pulse:o};r&&(i=r.op||"count",s=r.field?UF(i,r.field):"count",a.ops=[H6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(F6e(a));const u=t.add(hd({pulse:Mt(i)}));return s=t.add(UGt({field:aq,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function W6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!H6e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function XGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||zF(i.data),s.domainRef(t,i.field)});return Mt(t.add(DGt({values:r})))}function QGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||zF(i.data),s.extentRef(t,i.field)});return Mt(t.add(PGt({extents:r})))}function JGt(e,t){return e.signal||je(e)?pO(e,t):t.objectProperty(e)}function ZGt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Tc(e.interval),step:Tc(e.step)}:Tc(e)}function eYt(e,t){t.interpolate=Tc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Tc(e.gamma))}function G6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=bn({},e,{range:r[i]}),G6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Ax(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?pO(i.scheme,t):Tc(i.scheme,t),i.extent&&(n.schemeExtent=pO(i.extent,t)),i.count&&(n.schemeCount=Tc(i.count,t));return}else if(i.step){n.rangeStep=Tc(i.step,t);return}else{if(Ax(e.type)&&!je(i))return q6e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?pO:Tc)(s,t))}function tYt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=lq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=lq(n[i],i,t));t.addProjection(e.name,r)}function lq(e,t,n){return je(e)?e.map(r=>lq(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const pd="top",tT="left",nT="right",yy="bottom",Y6e="center",nYt="vertical",rYt="start",iYt="middle",sYt="end",cq="index",Gne="label",oYt="offset",Px="perc",aYt="perc2",Ic="value",LR="guide-label",Yne="guide-title",uYt="group-title",lYt="group-subtitle",_ge="symbol",mO="gradient",fq="discrete",dq="size",cYt="shape",fYt="fill",dYt="stroke",hYt="strokeWidth",pYt="strokeDash",mYt="opacity",Kne=[dq,cYt,fYt,dYt,hYt,pYt,mYt],FR={name:1,style:1,interactive:1},tr={value:0},kc={value:1},VF="group",K6e="rect",Xne="rule",gYt="symbol",c_="text";function YI(e){return e.type=VF,e.interactive=e.interactive||!1,e}function ll(e,t){const n=(r,i)=>bf(e[r],bf(t[r],i));return n.isVertical=r=>nYt===bf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>bf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>bf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>bf(e.columns,bf(t.columns,+n.isVertical(!0))),n}function X6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function yYt(e,t,n){const r=t.config.style[n];return r&&r[e]}function HF(e,t,n){return`item.anchor === '${rYt}' ? ${e} : item.anchor === '${sYt}' ? ${t} : ${n}`}const Qne=HF(rt(tT),rt(nT),rt(Y6e));function vYt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Q6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:Q6e(e.offset,t)}):{value:e,offset:t}:t:e}function Gl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=eT(e.encode,t,FR)):e.interactive=!1,e}function bYt(e,t,n,r){const i=ll(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:so(f),height:so(d)},update:bn({},u,{opacity:kc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return jo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Gl({type:K6e,role:WWt,encode:h},r)}function _Yt(e,t,n,r,i){const s=ll(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:Ic}};p[l]={signal:h+"datum."+Px,mult:u},p[c]=tr,p[f]={signal:h+"datum."+aYt,mult:u},p[d]=so(a);const m={enter:p,update:bn({},p,{opacity:kc}),exit:{opacity:tr}};return jo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Gl({type:K6e,role:HWt,key:Ic,from:i,encode:m},r)}const wYt=`datum.${Px}<=0?"${tT}":datum.${Px}>=1?"${nT}":"${Y6e}"`,EYt=`datum.${Px}<=0?"${yy}":datum.${Px}>=1?"${pd}":"${iYt}"`;function wge(e,t,n,r){const i=ll(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:kc,text:{field:Gne}},exit:{opacity:tr}};return jo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:bf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:EYt},f="y",d="x",h="1-"):(l.align=c.align={signal:wYt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Px,mult:a},l[d]=c[d]=o,o.offset=bf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+cq}:void 0,Gl({type:c_,role:P6e,style:LR,key:Ic,from:r,encode:p,overlap:u},n)}function xYt(e,t,n,r,i){const s=ll(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${oYt} : datum.${dq}`,h=l?so(l):{field:dq},p=`datum.${cq}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:kc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,x=null;e.fill||(E=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),jo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Kne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Ic})});const S=Gl({type:gYt,role:GWt,key:Ic,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=so(c);C.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:C},y:h},update:v={opacity:kc,text:{field:Gne},x:y.x,y:y.y},exit:{opacity:tr}},jo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Gl({type:c_,role:P6e,style:LR,key:Ic,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?so(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:kc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:cq}},YI({role:Hne,from:r,encode:eT(g,o,FR),marks:[S,A],name:u,interactive:a,sort:w})}function SYt(e,t){const n=ll(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Jne='item.orient === "left"',Zne='item.orient === "right"',qF=`(${Jne} || ${Zne})`,TYt=`datum.vgrad && ${qF}`,CYt=HF('"top"','"bottom"','"middle"'),AYt=HF('"right"','"left"','"center"'),IYt=`datum.vgrad && ${Zne} ? (${AYt}) : (${qF} && !(datum.vgrad && ${Jne})) ? "left" : ${Qne}`,kYt=`item._anchor || (${qF} ? "middle" : "start")`,RYt=`${TYt} ? (${Jne} ? -90 : 90) : 0`,NYt=`${qF} ? (datum.vgrad ? (${Zne} ? "bottom" : "top") : ${CYt}) : "top"`;function PYt(e,t,n,r){const i=ll(e,t),s={enter:{opacity:tr},update:{opacity:kc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return jo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:kYt},angle:{signal:RYt},align:{signal:IYt},baseline:{signal:NYt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Gl({type:c_,role:YWt,style:Yne,from:r,encode:s},n)}function DYt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ege(e.path)+")":e.sphere&&(n="geoShape("+Ege(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ege(e){return gt(e)&&e.signal?e.signal:rt(e)}function J6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===VF?Hne:t||zne}function OYt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||J6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function $Yt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ere(e,t){const n=L3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=BF(n.type.toLowerCase(),null,Z6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Z6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=MYt(o,t,n)}return r}function MYt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return LYt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return FYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!js(i)?i.map(s=>xge(e,s,n)):xge(e,i,n)}function xge(e,t,n){const r=e.type;if(js(t))return Tge(r)?Le("Expression references can not be signals."):I9(r)?n.fieldRef(t):Cge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||I9(r);return i&&jYt(t)?n.exprRef(t.expr,t.as):i&&BYt(t)?WI(t.field,t.as):Tge(r)?Bh(t,n):UYt(r)?Mt(n.getData(t).values):I9(r)?WI(t):Cge(r)?n.compareRef(t):t}}function LYt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function FYt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>Sge(e,i,n))):Sge(e,r,n)}function Sge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=bn(Z6e(i,t,n),i.key);return Mt(n.add($Gt(s)))}const jYt=e=>e&&e.expr,BYt=e=>e&&e.field,UYt=e=>e==="data",Tge=e=>e==="expr",I9=e=>e==="field",Cge=e=>e==="compare";function zYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=gO(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=ere(bn({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=gO(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(hd(null,[{}]))),o||(o=gO(e,n)),{key:i,pulse:o,parent:a}}function gO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function vb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}vb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new vb(e,s,i,r,o)};function e4e(e){return mt(e)?e:null}function Age(e,t,n){const r=UF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function a2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=fGt(s);let l=e4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:aq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(BF(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}vb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=e4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Age(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&Age(e,u,n),a=e.add(F6e(u)),o=e.add(hd({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return a2(e,this,"extent","extent",t,!1)},domainRef(e,t){return a2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return a2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return a2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return a2(e,this,"indata","tupleindex",t,!0,!0)}};function VYt(e,t,n){const r=e.from.facet,i=r.name,s=gO(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(U6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(CGt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(hd()),l=a.add(l_({pulse:Mt(u)}));a.addData(i,new vb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function HYt(e,t,n){const r=t.add(U6e({pulse:n.pulse})),i=t.fork();i.add(l_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function t4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(UM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Bh(l,t);u.update=c.$expr,u.params=c.$params}function WF(e,t){const n=J6e(e),r=e.type===VF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Hne||n===Vne,a,u,l,c,f,d,h;const p=n===zne||o||i,m=zYt(e.from,r,t);u=t.add(SGt({key:m.key||(e.key?WI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(hd({pulse:g})),u=t.add(NGt({markdef:OYt(e),interactive:$Yt(e.interactive,t),clip:DYt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(B6e(M6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const S=ere(x,t),C=S.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=Mt(u),t.add(u=S)}),e.sort&&(u=t.add(BGt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(V6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const _=t.add(j6e({mark:y,pulse:d||v}));h=Mt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?VYt(e,t,m):p?HYt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=qYt(s,h,t));const w=t.add(z6e({pulse:h})),E=t.add(l_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new vb(t,l,w,E)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&Le("Marks only support modify triggers."),t4e(x,t,f)}))}function qYt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:js(s)?n.signalRef(s.signal):s,method:js(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=js(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(OGt(o)))}function WYt(e,t){const n=t.config.legend,r=e.encode||{},i=ll(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Kne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Le("Missing valid scale for legend.");const p=GYt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(hd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(kGt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===mO?(h=[bYt(e,c,n,r.gradient),wge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Dv(i.gradientLength())})/100))`)):p===fq?h=[_Yt(e,c,n,r.gradient,v),wge(e,n,r.labels,v)]:(f=SYt(e,n),h=[xYt(e,n,r,v,Dv(f.columns))],d.size=XYt(e,t,h[0].marks)),h=[YI({role:qWt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(PYt(e,n,r.title,g)),WF(YI({role:VWt,from:g,encode:eT(KYt(i,e,n),s,FR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function GYt(e,t){let n=e.type||_ge;return!e.type&&YYt(e)===1&&(e.fill||e.stroke)&&(n=fte(t)?mO:CH(t)?fq:_ge),n!==mO?n:CH(t)?fq:mO}function YYt(e){return Kne.reduce((t,n)=>t+(e[n]?1:0),0)}function KYt(e,t,n){const r={enter:{},update:{}};return jo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function XYt(e,t,n){const r=Dv(Ige("size",e,n)),i=Dv(Ige("strokeWidth",e,n)),s=Dv(QYt(n[1].encode,t,LR));return Bh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Ige(e,t,n){return t[e]?`scale("${t[e]}",datum)`:X6e(e,n[0].encode)}function QYt(e,t,n){return X6e("fontSize",e)||yYt("fontSize",t,n)}const JYt=`item.orient==="${tT}"?-90:item.orient==="${nT}"?90:0`;function ZYt(e,t){e=mt(e)?{text:e}:e;const n=ll(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(hd(null,[l])));return u.push(nKt(e,n,eKt(e),c)),e.subtitle&&u.push(rKt(e,n,r.subtitle,c)),WF(YI({role:KWt,from:c,encode:tKt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function eKt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function tKt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Qne},angle:{signal:JYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),eT(n,t,FR)}function nKt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gl({type:c_,role:XWt,style:uYt,from:r,encode:o},n)}function rKt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gl({type:c_,role:QWt,style:lYt,from:r,encode:o},n)}function iKt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ere(r,t))}),e.on&&e.on.forEach(r=>{t4e(r,t,e.name)}),t.addDataPipeline(e.name,sKt(e,t,n))}function sKt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?js(e.values)||hO(e.format)?(r.push(kge(t,e)),r.push(i=m1())):r.push(i=m1({$ingest:e.values,$format:e.format})):e.url?hO(e.url)||hO(e.format)?(r.push(kge(t,e)),r.push(i=m1())):r.push(i=m1({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=m1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=FGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,m1())),i||r.push(m1()),r.push(l_({})),r}function m1(e){const t=hd({},e);return t.metadata={source:!0},t}function kge(e,t){return RGt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const n4e=e=>e===yy||e===pd,GF=(e,t,n)=>js(e)?lKt(e.signal,t,n):e===tT||e===pd?t:n,oo=(e,t,n)=>js(e)?aKt(e.signal,t,n):n4e(e)?t:n,qf=(e,t,n)=>js(e)?uKt(e.signal,t,n):n4e(e)?n:t,r4e=(e,t,n)=>js(e)?cKt(e.signal,t,n):e===pd?{value:t}:{value:n},oKt=(e,t,n)=>js(e)?fKt(e.signal,t,n):e===nT?{value:t}:{value:n},aKt=(e,t,n)=>i4e(`${e} === '${pd}' || ${e} === '${yy}'`,t,n),uKt=(e,t,n)=>i4e(`${e} !== '${pd}' && ${e} !== '${yy}'`,t,n),lKt=(e,t,n)=>tre(`${e} === '${tT}' || ${e} === '${pd}'`,t,n),cKt=(e,t,n)=>tre(`${e} === '${pd}'`,t,n),fKt=(e,t,n)=>tre(`${e} === '${nT}'`,t,n),i4e=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,Rge(t)&&Rge(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),Rge=e=>e==null||Object.keys(e).length===1,tre=(e,t,n)=>({signal:`${e} ? (${Uw(t)}) : (${Uw(n)})`}),dKt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${tT}' ? (${Uw(r)}) : `:"")+(n!=null?`${e} === '${yy}' ? (${Uw(n)}) : `:"")+(i!=null?`${e} === '${nT}' ? (${Uw(i)}) : `:"")+(t!=null?`${e} === '${pd}' ? (${Uw(t)}) : `:"")+"(null)"}),Uw=e=>js(e)?e.signal:e==null?null:rt(e),hKt=(e,t)=>t===0?0:js(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},wE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function K_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Yne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[LR][i]}return null}function Nge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function pKt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(js(o)){const f=Nge([n.axisX,n.axisY]),d=Nge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,K_(l,n.axisX,i,r),K_(l,n.axisY,i,r));u={};for(l of d)u[l]=dKt(o.signal,K_(l,n.axisTop,i,r),K_(l,n.axisBottom,i,r),K_(l,n.axisLeft,i,r),K_(l,n.axisRight,i,r))}else a=o===pd||o===yy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function mKt(e,t,n,r){const i=ll(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:kc},exit:{opacity:tr}};jo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Pge(e,0),c=Pge(e,1);return o.x=a.x=oo(s,l,tr),o.x2=a.x2=oo(s,c),o.y=a.y=qf(s,l,tr),o.y2=a.y2=qf(s,c),Gl({type:Xne,role:FWt,from:r,encode:u},n)}function Pge(e,t){return{scale:e.scale,range:t}}function gKt(e,t,n,r,i){const s=ll(e,t),o=e.orient,a=e.gridScale,u=GF(o,1,-1),l=yKt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:kc},exit:f={opacity:tr}};jo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ic,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=qf(o,p,g),c.x2=d.x2=qf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=qf(o,p),Gl({type:Xne,role:jWt,key:Ic,from:r,encode:h},n)}function yKt(e,t){if(t!==1)if(!gt(e))e=js(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=js(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function vKt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=GF(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:kc},exit:c={opacity:tr}};jo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:Ic,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,tr,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=qf(a,tr,p),f.x2=l.x2=qf(a,h),c.y=qf(a,p),Gl({type:Xne,role:UWt,key:Ic,from:r,encode:d},n)}function k9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function bKt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=e.scale,l=GF(a,-1,1),c=Dv(o("labelFlush")),f=Dv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Ic,band:.5,offset:Q6e(s.offset,o("labelOffset"))},v=oo(a,p?k9(u,c,'"left"','"right"','"center"'):{value:"center"},oKt(a,"left","right")),_=oo(a,r4e(a,"bottom","top"),p?k9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=k9(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:oo(a,y,g),y:qf(a,y,g)},x={enter:E,update:m={opacity:kc,text:{field:Gne},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:tr,x:E.x,y:E.y}};jo(x,{dx:!d&&p?oo(a,w):null,dy:!h&&p?qf(a,w):null}),jo(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=wE(m.align,v)),m.baseline!==_&&(m.baseline=wE(m.baseline,_)),Gl({type:c_,role:BWt,style:LR,key:Ic,from:r,encode:x,overlap:C},n)}function _Kt(e,t,n,r){const i=ll(e,t),s=e.orient,o=GF(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:so(i("titleAnchor",null)),align:{signal:Qne}},update:u=bn({},a,{opacity:kc,text:so(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${HF(0,1,.5)})`};return u.x=oo(s,c),u.y=qf(s,c),a.angle=oo(s,tr,hKt(o,90)),a.baseline=oo(s,r4e(s,yy,pd),{value:yy}),u.angle=a.angle,u.baseline=a.baseline,jo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),wKt(i,s,l,n),l.update.align=wE(l.update.align,a.align),l.update.angle=wE(l.update.angle,a.angle),l.update.baseline=wE(l.update.baseline,a.baseline),Gl({type:c_,role:zWt,style:Yne,from:r,encode:l},n)}function wKt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=wE(so(a),n.update[u]),!1):!mw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function EKt(e,t){const n=pKt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ll(e,n),l=vYt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(hd({},[c]))),d=Mt(t.add(xGt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(gKt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(vKt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(bKt(e,n,r.labels,d,p,l))),c.domain&&h.push(mKt(e,n,r.domain,f)),c.title&&h.push(_Kt(e,n,r.title,f)),WF(YI({role:LWt,from:f,encode:eT(xKt(u,e),i,FR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function xKt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),offset:e("offset")||0,position:bf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function s4e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>L6e(s,t)),pt(e.projections).forEach(s=>tYt(s,t)),i.forEach(s=>VGt(s,t)),pt(e.data).forEach(s=>iKt(s,t)),i.forEach(s=>HGt(s,t)),(n||r).forEach(s=>EGt(s,t)),pt(e.axes).forEach(s=>EKt(s,t)),pt(e.marks).forEach(s=>WF(s,t)),pt(e.legends).forEach(s=>WYt(s,t)),e.title&&ZYt(e.title,t),t.parseLambdas(),t}const SKt=e=>eT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function TKt(e,t){const n=t.config,r=Mt(t.root=t.add(UM())),i=CKt(e,n);i.forEach(l=>L6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(hd()),o=t.add(B6e(M6e(SKt(e.encode),VF,Vne,e.style,t,{pulse:Mt(s)}))),a=t.add(V6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),s4e(e,t,i),t.operators.push(a);let u=t.add(j6e({mark:r,pulse:Mt(a)}));return u=t.add(z6e({pulse:Mt(u)})),u=t.add(l_({pulse:Mt(u)})),t.addData("root",new vb(t,s,s,u)),t}function u2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function CKt(e,t){const n=o=>bf(e[o],t[o]),r=[u2("background",n("background")),u2("autosize",OWt(n("autosize"))),u2("padding",MWt(n("padding"))),u2("width",n("width")||0),u2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function o4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Dge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}o4e.prototype=Dge.prototype={parse(e){return s4e(e,this)},fork(){return new Dge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof oq?Mt(e):e;return this.add(LGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(l_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return WI(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(AGt(i)))}return r},compareRef(e){let t=!1;const n=s=>js(s)?(t=!0,this.signalRef(s.signal)):dGt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(bge({fields:r,orders:i}))):yge(r,i)},keyRef(e,t){let n=!1;const r=s=>js(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(IGt({fields:e,flat:t}))):uGt(e,t)},sortRef(e){if(!e)return e;const t=UF(e.op,e.field),n=e.order||lGt;return n.signal?Mt(this.add(bge({fields:t,orders:this.signalRef(n.signal)}))):yge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof oq?t:this.add(UM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(UM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Bh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||nre(e))},exprRef(e,t){const n={expr:Bh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(TGt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,jGt(t))},addProjection(e,t){this.addScaleProj(e,MGt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,vb.fromEntries(this,t))}};function nre(e){return(je(e)?AKt:IKt)(e)}function AKt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||nre(i):rt(i))}return n+"]"}function IKt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||nre(i):rt(i));return t+"}"}function kKt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function RKt(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=WS(kKt(),t,e.config),TKt(e,new o4e(t,n)).toRuntime()}var NKt="5.29.0";bn(Sx,Rjt,vUt,XUt,A7t,O7t,azt,B7t,lzt,hzt,xzt,Rzt);const PKt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:PR,CanvasRenderer:kM,DATE:rl,DAY:da,DAYOFYEAR:jh,Dataflow:_E,Debug:NOe,Error:XZ,EventStream:lF,Gradient:Y$e,GroupItem:EF,HOURS:Hl,Handler:Mte,HybridHandler:jMe,HybridRenderer:LH,Info:ROe,Item:wF,MILLISECONDS:nd,MINUTES:ql,MONTH:ya,Marks:Wl,MultiPulse:gee,None:kOe,Operator:Kr,Parameters:uF,Pulse:D0,QUARTER:nl,RenderType:a0,Renderer:NR,ResourceLoader:tMe,SECONDS:jc,SVGHandler:CMe,SVGRenderer:zte,SVGStringRenderer:FMe,Scenegraph:vMe,TIME_UNITS:uee,Transform:Pe,View:S6e,WEEK:$s,Warn:QZ,YEAR:$o,accessor:ul,accessorFields:ga,accessorName:Ki,array:pt,ascending:nF,bandwidthNRD:_ee,bin:B3e,bootstrapCI:U3e,boundClip:KMe,boundContext:AR,boundItem:PH,boundMark:pMe,boundStroke:ag,changeset:o_,clampRange:zOe,codegenExpression:QLe,compare:nee,constant:Sa,cumulativeLogNormal:Cee,cumulativeNormal:fF,cumulativeUniform:Ree,dayofyear:e3e,debounce:ree,defaultLocale:fee,definition:L3e,densityLogNormal:Tee,densityNormal:wee,densityUniform:kee,domChild:Ds,domClear:bc,domCreate:s0,domFind:$te,dotbin:z3e,error:Le,expressionFunction:ms,extend:bn,extent:Fh,extentIndex:VOe,falsy:Ag,fastmap:YS,field:Lc,flush:HOe,font:AF,fontFamily:RR,fontSize:sp,format:QD,formatLocale:gM,formats:pee,hasOwnProperty:jt,id:mR,identity:xa,inferType:C3e,inferTypes:A3e,ingest:Er,inherits:lt,inrange:Fw,interpolate:dte,interpolateColors:bF,interpolateRange:O$e,intersect:qMe,intersectBoxLine:jw,intersectPath:_te,intersectPoint:wte,intersectRule:rMe,isArray:je,isBoolean:Yy,isDate:P0,isFunction:_n,isIterable:qOe,isNumber:lr,isObject:gt,isRegExp:WOe,isString:mt,isTuple:oF,key:iee,lerp:GOe,lineHeight:py,loader:iF,locale:S3e,logger:JZ,lruCache:YOe,markup:Ute,merge:KOe,mergeConfig:WS,multiLineOffset:Pte,one:qS,pad:XOe,panLinear:MOe,panLog:LOe,panPow:FOe,panSymlog:jOe,parse:RKt,parseExpression:kne,parseSelector:Xy,path:P6,pathCurves:yte,pathEqual:XMe,pathParse:Ix,pathRectangle:Q$e,pathRender:FI,pathSymbols:X$e,pathTrail:J$e,peek:Qn,point:kF,projection:ene,quantileLogNormal:Aee,quantileNormal:dF,quantileUniform:Nee,quantiles:vee,quantizeInterpolator:$$e,quarter:BOe,quartiles:bee,get random(){return Bc},randomInteger:O5t,randomKDE:xee,randomLCG:D5t,randomLogNormal:H3e,randomMixture:q3e,randomNormal:Eee,randomUniform:W3e,read:R3e,regressionConstant:Pee,regressionExp:Y3e,regressionLinear:Dee,regressionLoess:Q3e,regressionLog:G3e,regressionPoly:X3e,regressionPow:K3e,regressionQuad:Oee,renderModule:RF,repeat:Y2,resetDefaultLocale:RFt,resetSVGClipId:eMe,resetSVGDefIds:M9t,responseType:k3e,runtimeContext:f6e,sampleCurve:pF,sampleLogNormal:See,sampleNormal:cF,sampleUniform:Iee,scale:gr,sceneEqual:Vte,sceneFromJSON:gMe,scenePickVisit:wM,sceneToJSON:mMe,sceneVisit:rd,sceneZOrder:Ete,scheme:hte,serializeXML:OMe,setHybridRendererOptions:P9t,setRandom:N5t,span:gR,splitAccessPath:ip,stringValue:rt,textMetrics:Pl,timeBin:y3e,timeFloor:a3e,timeFormatLocale:$I,timeInterval:KS,timeOffset:c3e,timeSequence:h3e,timeUnitSpecifier:ZOe,timeUnits:lee,toBoolean:see,toDate:oee,toNumber:ha,toSet:td,toString:aee,transform:F3e,transforms:Sx,truncate:QOe,truthy:Fc,tupleid:Lt,typeParsers:xH,utcFloor:u3e,utcInterval:XS,utcOffset:f3e,utcSequence:p3e,utcdayofyear:r3e,utcquarter:UOe,utcweek:i3e,version:NKt,visitArray:Mg,week:t3e,writeConfig:GS,zero:Kg,zoomLinear:ZZ,zoomLog:eee,zoomPow:mM,zoomSymlog:tee},Symbol.toStringTag,{value:"Module"}));function DKt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var OKt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},$Kt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},MKt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const LKt=Array.prototype.slice,g1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,LKt.call(t,1))},FKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var jKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:FKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return g1("join",arguments)},indexof:function(){return g1("indexOf",arguments)},lastindexof:function(){return g1("lastIndexOf",arguments)},slice:function(){return g1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return g1("substring",arguments,String)},split:function(){return g1("split",arguments,String)},replace:function(){return g1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const BKt=["view","item","group","xy","x","y"],hq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&hq.add(setImmediate);const UKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:OKt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),hq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||jKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>$Kt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>MKt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,hq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function l2(e,t,n,r,i,s){const o=a=>UKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,BKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var zKt={operator(e,t){const n=t.ast,r=e.functions;return i=>l2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>l2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>l2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return l2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=l2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&DKt(o,r,s),l}}};const VKt="vega-lite",HKt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',qKt="5.18.1",WKt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],GKt="https://vega.github.io/vega-lite/",YKt="Vega-Lite is a concise high-level language for interactive visualization.",KKt=["vega","chart","visualization"],XKt="build/vega-lite.js",QKt="build/vega-lite.min.js",JKt="build/vega-lite.min.js",ZKt="build/src/index",eXt="build/src/index.d.ts",tXt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},nXt=["bin","build","src","vega-lite*","tsconfig.json"],rXt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},iXt={type:"git",url:"https://github.com/vega/vega-lite.git"},sXt="BSD-3-Clause",oXt={url:"https://github.com/vega/vega-lite/issues"},aXt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},uXt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},lXt={vega:"^5.24.0"},cXt={node:">=18"},fXt="yarn@1.22.19",dXt={name:VKt,author:HKt,version:qKt,collaborators:WKt,homepage:GKt,description:YKt,keywords:KKt,main:XKt,unpkg:QKt,jsdelivr:JKt,module:ZKt,types:eXt,bin:tXt,files:nXt,scripts:rXt,repository:iXt,license:sXt,bugs:oXt,devDependencies:aXt,dependencies:uXt,peerDependencies:lXt,engines:cXt,packageManager:fXt};function rre(e){return!!e.or}function ire(e){return!!e.and}function sre(e){return!!e.not}function yO(e,t){if(sre(e))yO(e.not,t);else if(ire(e))for(const n of e.and)yO(n,t);else if(rre(e))for(const n of e.or)yO(n,t);else t(e)}function EE(e,t){return sre(e)?{not:EE(e.not,t)}:ire(e)?{and:e.and.map(n=>EE(n,t))}:rre(e)?{or:e.or.map(n=>EE(n,t))}:t(e)}const nn=structuredClone;function a4e(e){throw new Error(e)}function Dx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Gu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Br(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=mt(e)?e:Br(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function pq(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function bb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function ore(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function u4e(e,...t){for(const n of t)hXt(e,n??{});return e}function hXt(e,t){for(const n of Ye(t))GS(e,n,t[n],!0)}function oh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function pXt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function l4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function are(e,t){for(const n of e)if(t.has(n))return!0;return!1}function mq(e){const t=new Set;for(const n of e){const i=ip(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ure(e,t){return e===void 0||t===void 0?!0:are(mq(e),mq(t))}function jr(e){return Ye(e).length===0}const Ye=Object.keys,Mo=Object.values,vy=Object.entries;function KI(e){return e===!0||e===!1}function Ci(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function oA(e,t){return sre(e)?`!(${oA(e.not,t)})`:ire(e)?`(${e.and.map(n=>oA(n,t)).join(") && (")})`:rre(e)?`(${e.or.map(n=>oA(n,t)).join(") || (")})`:t(e)}function zM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&zM(e[n],t)&&delete e[n],jr(e)}function jR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function lre(e,t="datum"){const n=ip(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function c4e(e,t="datum"){return`${t}[${rt(ip(e).join("."))}]`}function mXt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Uc(e){return`${ip(e).map(mXt).join("\\.")}`}function _b(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function rT(e){return`${ip(e).join(".")}`}function Ox(e){return e?ip(e).length:0}function fs(...e){for(const t of e)if(t!==void 0)return t}let f4e=42;function d4e(e){const t=++f4e;return e?String(e)+t:t}function gXt(){f4e=42}function h4e(e){return p4e(e)?e:`__${e}`}function p4e(e){return e.startsWith("__")}function XI(e){if(e!==void 0)return(e%360+360)%360}function YF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Oge=Object.getPrototypeOf(structuredClone({}));function kl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Oge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Oge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!kl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Br(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const fm="row",dm="column",KF="facet",Ai="x",po="y",md="x2",up="y2",Qy="xOffset",iT="yOffset",gd="radius",lg="radius2",Jc="theta",cg="theta2",yd="latitude",vd="longitude",bd="latitude2",zc="longitude2",il="color",lp="fill",cp="stroke",sl="shape",fg="size",f_="angle",dg="opacity",Jy="fillOpacity",Zy="strokeOpacity",e1="strokeWidth",t1="strokeDash",BR="text",$x="order",UR="detail",XF="key",wb="tooltip",QF="href",JF="url",ZF="description",yXt={x:1,y:1,x2:1,y2:1},m4e={theta:1,theta2:1,radius:1,radius2:1};function g4e(e){return e in m4e}const cre={longitude:1,longitude2:1,latitude:1,latitude2:1};function y4e(e){switch(e){case yd:return"y";case bd:return"y2";case vd:return"x";case zc:return"x2"}}function v4e(e){return e in cre}const vXt=Ye(cre),fre={...yXt,...m4e,...cre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function xE(e){return e===il||e===lp||e===cp}const b4e={row:1,column:1,facet:1},Cc=Ye(b4e),dre={...fre,...b4e},bXt=Ye(dre),{order:Xun,detail:Qun,tooltip:Jun,..._Xt}=dre,{row:Zun,column:eln,facet:tln,...wXt}=_Xt;function EXt(e){return!!wXt[e]}function _4e(e){return!!dre[e]}const xXt=[md,up,bd,zc,cg,lg];function w4e(e){return d_(e)!==e}function d_(e){switch(e){case md:return Ai;case up:return po;case bd:return yd;case zc:return vd;case cg:return Jc;case lg:return gd}return e}function by(e){if(g4e(e))switch(e){case Jc:return"startAngle";case cg:return"endAngle";case gd:return"outerRadius";case lg:return"innerRadius"}return e}function fp(e){switch(e){case Ai:return md;case po:return up;case yd:return bd;case vd:return zc;case Jc:return cg;case gd:return lg}}function ol(e){switch(e){case Ai:case md:return"width";case po:case up:return"height"}}function E4e(e){switch(e){case Ai:return"xOffset";case po:return"yOffset";case md:return"x2Offset";case up:return"y2Offset";case Jc:return"thetaOffset";case gd:return"radiusOffset";case cg:return"theta2Offset";case lg:return"radius2Offset"}}function hre(e){switch(e){case Ai:return"xOffset";case po:return"yOffset"}}function SXt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const TXt=Ye(fre),{x:nln,y:rln,x2:iln,y2:sln,xOffset:oln,yOffset:aln,latitude:uln,longitude:lln,latitude2:cln,longitude2:fln,theta:dln,theta2:hln,radius:pln,radius2:mln,...pre}=fre,CXt=Ye(pre),mre={x:1,y:1},dp=Ye(mre);function ds(e){return e in mre}const gre={theta:1,radius:1},AXt=Ye(gre);function e5(e){return e==="width"?Ai:po}const x4e={xOffset:1,yOffset:1};function zR(e){return e in x4e}const{text:gln,tooltip:yln,href:vln,url:bln,description:_ln,detail:wln,key:Eln,order:xln,...S4e}=pre,IXt=Ye(S4e);function kXt(e){return!!pre[e]}function RXt(e){switch(e){case il:case lp:case cp:case fg:case sl:case dg:case e1:case t1:return!0;case Jy:case Zy:case f_:return!1}}const T4e={...mre,...gre,...x4e,...S4e},t5=Ye(T4e);function hg(e){return!!T4e[e]}function NXt(e,t){return DXt(e)[t]}const C4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Sln,...PXt}=C4e;function DXt(e){switch(e){case il:case lp:case cp:case ZF:case UR:case XF:case wb:case QF:case $x:case dg:case Jy:case Zy:case e1:case KF:case fm:case dm:return C4e;case Ai:case po:case Qy:case iT:case yd:case vd:return PXt;case md:case up:case bd:case zc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case fg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case t1:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case sl:return{point:"always",geoshape:"always"};case BR:return{text:"always"};case f_:return{point:"always",square:"always",text:"always"};case JF:return{image:"always"};case Jc:return{text:"always",arc:"always"};case gd:return{text:"always",arc:"always"};case cg:case lg:return{arc:"always"}}}function R9(e){switch(e){case Ai:case po:case Jc:case gd:case Qy:case iT:case fg:case f_:case e1:case dg:case Jy:case Zy:case md:case up:case cg:case lg:return;case KF:case fm:case dm:case sl:case t1:case BR:case wb:case QF:case JF:case ZF:return"discrete";case il:case lp:case cp:return"flexible";case yd:case vd:case bd:case zc:case UR:case XF:case $x:return}}const OXt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$Xt={count:1,min:1,max:1};function Um(e){return!!e&&!!e.argmin}function n1(e){return!!e&&!!e.argmax}function yre(e){return mt(e)&&!!OXt[e]}const MXt=new Set(["count","valid","missing","distinct"]);function A4e(e){return mt(e)&&MXt.has(e)}function LXt(e){return mt(e)&&Hn(["min","max"],e)}const FXt=new Set(["count","sum","distinct","valid","missing"]),jXt=new Set(["mean","average","median","q1","q3","min","max"]);function I4e(e){return Yy(e)&&(e=h5(e,void 0)),"bin"+Ye(e).map(t=>n5(e[t])?Ci(`_${t}_${vy(e[t])}`):Ci(`_${t}_${e[t]}`)).join("")}function si(e){return e===!0||h_(e)&&!e.binned}function Co(e){return e==="binned"||h_(e)&&e.binned===!0}function h_(e){return gt(e)}function n5(e){return e==null?void 0:e.param}function $ge(e){switch(e){case fm:case dm:case fg:case il:case lp:case cp:case e1:case dg:case Jy:case Zy:case sl:return 6;case t1:return 4;default:return 10}}function VR(e){return!!(e!=null&&e.expr)}function ku(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=wl(e[r]);return n}function k4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Dx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function jg(e){return mt(e)||je(e)&&mt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function r1(e){return!!e.step}function BXt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function UXt(e){return je(e)?!1:"fields"in e&&"data"in e}function nm(e){return je(e)?!1:"field"in e&&"data"in e}const zXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},VXt=Ye(zXt),HXt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},gq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function R4e(e){const t=je(e.condition)?e.condition.map(Mge):Mge(e.condition);return{...wl(e),condition:t}}function wl(e){if(VR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mge(e){if(VR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function di(e){if(VR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function qXt(e){return Rt(e)?e.signal:rt(e)}function Lge(e){return Rt(e)?e.signal:rt(e.value)}function $f(e){return Rt(e)?e.signal:e==null?null:rt(e)}function WXt(e,t,n){for(const r of n){const i=zm(r,t.markDef,t.config);i!==void 0&&(e[r]=di(i))}return e}function N4e(e){return[].concat(e.type,e.style??[])}function wr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:zm(e,t,n,r)}function zm(e,t,n,{vgChannel:r}={}){return fs(r?VM(e,t,n.style):void 0,VM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function VM(e,t,n){return P4e(e,N4e(t),n)}function P4e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function D4e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function O4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(kl(i,r))return;n.push(r)}),n}function $4e(e,t){return kl(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function M4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jg(n)||Rt(n))&&(jg(r)||Rt(r)))return{explicit:e.explicit,value:$4e(n,r)};if(jg(n)||Rt(n))return{explicit:e.explicit,value:n};if(jg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!jg(n)&&!Rt(n)&&!jg(r)&&!Rt(r))return{explicit:e.explicit,value:O4e(n,r)};throw new Error("It should never reach here")}function vre(e){return`Invalid specification ${Br(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const GXt='Autosize "fit" only works for single views and layered views.';function Fge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function jge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Bge(e){return e?`Dropping "fit-${e}" because spec has discrete ${ol(e)}.`:'Dropping "fit" because spec has discrete size.'}function bre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Uge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function YXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function KXt(e){return`The "nearest" transform is not supported for ${e} marks.`}function L4e(e){return`Selection not supported for ${e} yet.`}function XXt(e){return`Cannot find a selection named "${e}".`}const QXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",JXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",ZXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function eQt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function tQt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const nQt="The same selection must be used to override scale domains in a layered view.",rQt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function iQt(e){return`Unknown repeated value "${e}".`}function zge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const sQt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function oQt(e){return`Unrecognized parse "${e}".`}function Vge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const aQt="Attempt to add the same child twice.";function uQt(e){return`Ignoring an invalid transform: ${Br(e)}.`}const lQt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Hge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function cQt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Br(t)} is overridden by a child projection ${Br(n)}.`}const fQt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function dQt(e){return`${e}Offset dropped because ${e} is continuous`}function hQt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Br(n)}}.`}function F4e(e){return`Invalid field type "${e}".`}function pQt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function mQt(e){return`Invalid aggregation operator "${e}".`}function j4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function gQt(e){return`Position range does not support relative band size for ${e}.`}function yq(e,t){return`Dropping ${Br(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const yQt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function r5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function vQt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function bQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function _Qt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function wQt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function N9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function EQt(e){return`The ${e} for range marks cannot be an expression`}function xQt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function SQt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function TQt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function CQt(e){return`Cannot use the relative band size with ${e} scale.`}function AQt(e){return`Using unaggregated domain with raw field has no effect (${Br(e)}).`}function IQt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function kQt(e){return`Unaggregated domain is currently unsupported for log scale (${Br(e)}).`}function RQt(e){return`Cannot apply size to non-oriented mark "${e}".`}function NQt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function PQt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function B4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function U4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function DQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using ${Br(n)}.`}function OQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using the union of the two domains.`}function $Qt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function MQt(e){return`Dropping sort property ${Br(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const qge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",LQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",FQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",jQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function BQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function UQt(e){return`Stack is applied to a non-linear scale (${e}).`}function zQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function HM(e,t){return`Invalid ${e}: ${Br(t)}.`}function VQt(e){return`Dropping day from datetime ${Br(e)} as day cannot be combined with other units.`}function HQt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function qQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function WQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Wge(e){return`1D error band does not support ${e}.`}function z4e(e){return`Channel ${e} is required for "binned" bin.`}function GQt(e){return`Channel ${e} should not be used with "binned" bin.`}function YQt(e){return`Domain for ${e} is required for threshold scale.`}const V4e=JZ(QZ);let Mx=V4e;function KQt(e){return Mx=e,Mx}function XQt(){return Mx=V4e,Mx}function Ze(...e){Mx.warn(...e)}function QQt(...e){Mx.debug(...e)}function p_(e){if(e&&gt(e)){for(const t of wre)if(t in e)return!0}return!1}const H4e=["january","february","march","april","may","june","july","august","september","october","november","december"],JQt=H4e.map(e=>e.substr(0,3)),q4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ZQt=q4e.map(e=>e.substr(0,3));function eJt(e){if(YF(e)&&(e=+e),lr(e))return e>4&&Ze(HM("quarter",e)),e-1;throw new Error(HM("quarter",e))}function tJt(e){if(YF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=H4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=JQt.indexOf(r);if(i!==-1)return i;throw new Error(HM("month",e))}}function nJt(e){if(YF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=q4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=ZQt.indexOf(r);if(i!==-1)return i;throw new Error(HM("day",e))}}function _re(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Ze(VQt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?tJt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?eJt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?nJt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Eb(e){const n=_re(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function rJt(e){const n=_re(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function iJt(e){const t=_re(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const W4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},wre=Ye(W4e);function sJt(e){return!!W4e[e]}function m_(e){return gt(e)?e.binned:G4e(e)}function G4e(e){return e&&e.startsWith("binned")}function Ere(e){return e.startsWith("utc")}function oJt(e){return e.substring(3)}const aJt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function i5(e){return wre.filter(t=>K4e(e,t))}function Y4e(e){const t=i5(e);return t[t.length-1]}function K4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function uJt(e,t,{end:n}={end:!1}){const r=lre(t),i=Ere(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of wre)K4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),rJt(a)}function X4e(e){if(!e)return;const t=i5(e);return`timeUnitSpecifier(${Br(t)}, ${Br(aJt)})`}function lJt(e,t,n){if(!e)return;const r=X4e(e);return`${n||Ere(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return mt(e)?G4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Ere(t.unit)&&(t.utc=!0,t.unit=oJt(t.unit)),t}function cJt(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ci(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ci(`_${r}_${n[r]}`)).join("")}function Q4e(e,t=n=>n){const n=lo(e),r=Y4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=J4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Eb(a))} - ${t(Eb(i))}`}}const fJt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function dJt(e){return!!fJt[e]}function J4e(e,t=1){if(dJt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function hJt(e){return e==null?void 0:e.param}function xre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Sre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Tre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Cre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Are(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Ire(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function kre(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function pJt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Z4e(e){return kre(e)||xre(e)||Ire(e)||Sre(e)||Cre(e)||Tre(e)||Are(e)}function Id(e,t){return p5(e,{timeUnit:t,wrapTime:!0})}function mJt(e,t){return e.map(n=>Id(n,t))}function eFe(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:uJt(i,n)})`:o;if(xre(e))return`${a}===${Id(e.equal,i)}`;if(Sre(e)){const u=e.lt;return`${a}<${Id(u,i)}`}else if(Cre(e)){const u=e.gt;return`${a}>${Id(u,i)}`}else if(Tre(e)){const u=e.lte;return`${a}<=${Id(u,i)}`}else if(Are(e)){const u=e.gte;return`${a}>=${Id(u,i)}`}else{if(kre(e))return`indexof([${mJt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(pJt(e))return Rre(a,e.valid);if(Ire(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Id(l,i)+", "+Id(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Id(l,i)}`),c!==null&&f.push(`${a} <= ${Id(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Br(e)}`)}function Rre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function gJt(e){return Z4e(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const HR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function yJt(e){return e==="quantitative"||e==="temporal"}function tFe(e){return e==="ordinal"||e==="nominal"}const xb=HR.quantitative,Nre=HR.ordinal,Lx=HR.temporal,Pre=HR.nominal,sT=HR.geojson;function vJt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case xb:return"quantitative";case"t":case Lx:return"temporal";case"o":case Nre:return"ordinal";case"n":case Pre:return"nominal";case sT:return"geojson"}}const Yu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},vq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function bJt(e,t){const n=vq[e],r=vq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const _Jt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Gge(e){return _Jt[e]}const nFe=new Set(["linear","log","pow","sqrt","symlog"]),rFe=new Set([...nFe,"time","utc"]);function iFe(e){return nFe.has(e)}const sFe=new Set(["quantile","quantize","threshold"]),wJt=new Set([...rFe,...sFe,"sequential","identity"]),EJt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return EJt.has(e)}function Yl(e){return wJt.has(e)}function Mf(e){return rFe.has(e)}function Fx(e){return sFe.has(e)}const xJt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function SJt(e){return!mt(e)&&!!e.name}function oFe(e){return e==null?void 0:e.param}function TJt(e){return e==null?void 0:e.unionWith}function CJt(e){return gt(e)&&"field"in e}const AJt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Tln,domain:Cln,range:Aln,rangeMax:Iln,rangeMin:kln,scheme:Rln,...IJt}=AJt,kJt=Ye(IJt);function bq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Mf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Mf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Mf(e);case"nice":return Mf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Yl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function aFe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return xE(e)?void 0:TQt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function RJt(e,t){return Hn([Nre,Pre],t)?e===void 0||co(e):t===Lx?Hn([Yu.TIME,Yu.UTC,void 0],e):t===xb?iFe(e)||Fx(e)||e===void 0:!0}function NJt(e,t,n=!1){if(!hg(e))return!1;switch(e){case Ai:case po:case Qy:case iT:case Jc:case gd:return Mf(t)||t==="band"?!0:t==="point"?!n:!1;case fg:case e1:case dg:case Jy:case Zy:case f_:return Mf(t)||Fx(t)||Hn(["band","point","ordinal"],t);case il:case lp:case cp:return t!=="band";case t1:case sl:return t==="ordinal"||Fx(t)}}function Dre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=$re(e);return et(n)&&!A4e(n.aggregate)&&i&&Mf(i.get("type"))?PJt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function PJt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return wr("invalid",n,i)===null?[DJt(e,t),r]:r}function DJt(e,t){const n=Ore(e,!0),i=d_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Ore(e,t=!0){return Rre(mt(e)?e:at(e,{expr:"datum"}),!t)}function OJt(e){const{datum:t}=e;return p_(t)?Eb(t):`${Br(t)}`}function Ov(e,t,n,r){const i={};if(t&&(i.scale=t),hp(e)){const{datum:s}=e;p_(s)?i.signal=Eb(s):Rt(s)?i.signal=s.signal:VR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function qM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function $Jt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function $re({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(ru(t)){c??(c=_y({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(si(d)||c&&h&&p===Lx)return a!=null&&a.impute?Ov(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?qM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Ov(t,s,YR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Co(d)){if(et(n))return qM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze(z4e(e===Ai?md:up))}}return Ov(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(id(t)){const f=t.value,d=u?{offset:u}:{};return{...aA(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function aA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:di(t)}function Sb(e){return e&&e!=="number"&&e!=="time"}function uFe(e,t,n){return`${e}(${t}${n?`, ${Br(n)}`:""})`}const MJt=" – ";function Mre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Sb(n))return Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=lFe(e,r,i),a=jx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Lf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Lf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Lf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Ux(e)){const c=FJt({field:o,timeUnit:et(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:y_(e)&&((l=e.scale)==null?void 0:l.type)===Yu.UTC});return c?{signal:c}:void 0}if(t=_q({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&si(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:qR(o,c,t,n,s)}}else return t||jx(e)==="quantitative"?{signal:`${dFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function lFe(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):OJt(e)}function Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=lFe(e,r,i)),o!=="datum.value"&&et(e)&&si(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:qR(o,a,t,n,s)}}return{signal:uFe(n,o,t)}}function cFe(e,t,n,r,i,s){var o;if(!(mt(r)&&Sb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&jx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Bx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Bx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return _q({type:"quantitative",config:i,normalizeStack:!0});if(Ux(e)){const a=et(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:LJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return _q({type:t,specifiedFormat:n,config:i})}}function fFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(Ux(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function _q({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===xb)return r?n.normalizedNumberFormat:n.numberFormat}function LJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:X4e(t)}:r?void 0:n.timeFormat)}function dFe(e,t){return`format(${e}, "${t||""}")`}function Yge(e,t,n,r){return Sb(n)?uFe(n,e,t):dFe(e,(mt(t)?t:void 0)??r.numberFormat)}function qR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return qR(e,t,i.numberFormat,i.numberFormatType,i);const s=Yge(e,n,r,i),o=Yge(t,n,r,i);return`${Rre(e,!1)} ? "null" : ${s} + "${MJt}" + ${o}`}function FJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):lJt(t,e,s)}const lu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},hFe=lu.arc,s5=lu.area,o5=lu.bar,jJt=lu.image,a5=lu.line,u5=lu.point,BJt=lu.rect,WM=lu.rule,pFe=lu.text,Lre=lu.tick,UJt=lu.trail,Fre=lu.circle,jre=lu.square,mFe=lu.geoshape;function g_(e){return["line","area","trail"].includes(e)}function QI(e){return["rect","bar","image","arc"].includes(e)}const zJt=new Set(Ye(lu));function Uh(e){return e.type}const VJt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],HJt=["fill","fillOpacity"],qJt=[...VJt,...HJt],WJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Kge=Ye(WJt),GJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},YJt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},KJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},gFe=Ye(KJt);function Tb(e){return e&&e.band!=null}const XJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},yFe=5,QJt={binSpacing:1,continuousBandSize:yFe,minBandSize:.25,timeUnitBandPosition:.5},JJt={binSpacing:0,continuousBandSize:yFe,minBandSize:.25,timeUnitBandPosition:.5},ZJt={thickness:1};function eZt(e){return Uh(e)?e.type:e}const l5="min",tZt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Xge(e){return e in tZt}function vFe(e){return!!(e!=null&&e.encoding)}function Eh(e){return e&&(e.op==="count"||!!e.field)}function bFe(e){return e&&je(e)}function WR(e){return"row"in e||"column"in e}function Bre(e){return!!e&&"header"in e}function c5(e){return"facet"in e}function nZt(e){return e.param}function rZt(e){return e&&!mt(e)&&"repeat"in e}function Qge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Ure(e){return"sort"in e}function _y({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return zm("timeUnitBandPosition",n,r);if(si(s))return .5}}function _Fe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=ol(e),u=wr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:zm("timeUnitBandSize",r,i)};if(si(h)&&!co(s))return{band:1}}if(QI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function wFe(e,t,n,r){return si(e.bin)||e.timeUnit&&ru(e)&&e.type==="temporal"?_y({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function EFe(e){return e&&!!e.sort&&!e.field}function f5(e){return e&&"condition"in e}function d5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&et(t)}function GR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&ln(t)}function iZt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||id(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function jx(e){return e==null?void 0:e.type}function hp(e){return e&&"datum"in e}function f0(e){return ru(e)&&!YM(e)||GM(e)}function Jge(e){return ru(e)&&e.type==="quantitative"&&!e.bin||GM(e)}function GM(e){return hp(e)&&lr(e.datum)}function ln(e){return et(e)||hp(e)}function ru(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function id(e){return e&&"value"in e&&"value"in e}function y_(e){return e&&("scale"in e||"sort"in e)}function Bx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function xFe(e){return e&&"legend"in e}function SFe(e){return e&&("format"in e||"formatType"in e)}function sZt(e){return Gu(e,["legend","axis","header","scale"])}function oZt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(uZt(e))n=h4e("count");else{let o;if(!t.nofn)if(oZt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;si(a)?(o=I4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?n1(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Um(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!m_(l)&&(o=cJt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?rT(n):t.expr?c4e(n,t.expr)+s:Uc(n)+s}function YM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(F4e(e.type))}function aZt(e){var t;return y_(e)&&Fx((t=e.scale)==null?void 0:t.type)}function uZt(e){return e.aggregate==="count"}function lZt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(si(r))return`${n} (binned)`;if(i&&!m_(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${i5(a).join("-")})`}else if(s)return n1(s)?`${n} for max ${s.argmax}`:Um(s)?`${n} for min ${s.argmin}`:`${jR(s)} of ${n}`;return n}function cZt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(n1(t))return`${i} for argmax(${t.argmax})`;if(Um(t))return`${i} for argmin(${t.argmin})`;const s=r&&!m_(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||si(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const TFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return cZt(e);default:return lZt(e,t)}};let CFe=TFe;function AFe(e){CFe=e}function fZt(){AFe(TFe)}function SE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=zre(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?Vre(s,t):void 0;return n?fs(i,s.title,o):i??s.title??o}function zre(e){if(Bx(e)&&e.axis)return e.axis;if(xFe(e)&&e.legend)return e.legend;if(Bre(e)&&e.header)return e.header}function Vre(e,t){return CFe(e,t)}function KM(e){if(SFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=zre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function dZt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Ure(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!n1(n)&&!Um(n))return"quantitative";if(y_(e)&&((s=e.scale)!=null&&s.type))switch(vq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function zh(e){if(et(e))return e;if(d5(e))return e.condition}function Ms(e){if(ln(e))return e;if(GR(e))return e.condition}function IFe(e,t,n,r={}){if(mt(e)||lr(e)||Yy(e)){const i=mt(e)?"string":lr(e)?"number":"boolean";return Ze(hQt(t,i,e)),{value:e}}return ln(e)?XM(e,t,n,r):GR(e)?{...e,condition:XM(e.condition,t,n,r)}:e}function XM(e,t,n,r){if(SFe(e)){const{format:i,formatType:s,...o}=e;if(Sb(s)&&!n.customFormatTypes)return Ze(Hge(t)),XM(o,t,n,r)}else{const i=Bx(e)?"axis":xFe(e)?"legend":Bre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Sb(o)&&!n.customFormatTypes)return Ze(Hge(t)),XM({...e,[i]:a},t,n,r)}}return et(e)?Hre(e,t,r):hZt(e)}function hZt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":mt(n)?"nominal":p_(n)?"temporal":void 0,{...e,type:t}}function Hre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!yre(r)&&!n1(r)&&!Um(r)&&(Ze(mQt(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),si(s)&&(a.bin=h5(s,t)),Co(s)&&!ds(t)&&Ze(GQt(t)),ru(a)){const{type:u}=a,l=vJt(u);u!==l&&(a.type=l),u!=="quantitative"&&A4e(r)&&(Ze(pQt(u,r)),a.type="quantitative")}else if(!w4e(t)){const u=dZt(a,t);a.type=u}if(ru(a)){const{compatible:u,warning:l}=pZt(a,t)||{};u===!1&&Ze(l)}if(Ure(a)&&mt(a.sort)){const{sort:u}=a;if(Xge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Xge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Bre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function h5(e,t){return Yy(e)?{maxbins:$ge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:$ge(t)}:e}const X_={compatible:!0};function pZt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case fm:case dm:case KF:return YM(e)?X_:{compatible:!1,warning:bQt(t)};case Ai:case po:case Qy:case iT:case il:case lp:case cp:case BR:case UR:case XF:case wb:case QF:case JF:case f_:case Jc:case gd:case ZF:return X_;case vd:case zc:case yd:case bd:return n!==xb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:X_;case dg:case Jy:case Zy:case e1:case fg:case cg:case lg:case md:case up:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:X_;case sl:case t1:return!YM(e)&&!aZt(e)?{compatible:!1,warning:_Qt(t)}:X_;case $x:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:X_}}function Ux(e){const{formatType:t}=KM(e);return t==="time"||!t&&mZt(e)}function mZt(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function p5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return VR(e)?a=e.expr:Rt(e)?a=e.signal:p_(e)?(o=!0,a=Eb(e)):(mt(e)||lr(e))&&o&&(a=`datetime(${Br(e)})`,sJt(s)&&(lr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=Eb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Br(e)}function kFe(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!m_(e.timeUnit)?e.timeUnit:void 0,s=p5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function YR(e,t){return si(e.bin)?hg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Zge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function KR(e){return e==null?void 0:e.condition}const RFe=["domain","grid","labels","ticks","title"],gZt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},NFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},yZt={...NFe,style:1,labelExpr:1,encoding:1};function e0e(e){return!!yZt[e]}const vZt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},PFe=Ye(vZt);function pg(e){return"mark"in e}class m5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return pg(t)?eZt(t.mark)===this.name:!1}}function $v(e,t){const n=e&&e[t];return n?je(n)?bb(n,r=>!!r.field):et(n)||d5(n):!1}function DFe(e,t){const n=e&&e[t];return n?je(n)?bb(n,r=>!!r.field):et(n)||hp(n)||GR(n):!1}function OFe(e,t){if(ds(t)){const n=e[t];if((et(n)||hp(n))&&(tFe(n.type)||et(n)&&n.timeUnit)){const r=hre(t);return DFe(e,r)}}return!1}function qre(e){return bb(bXt,t=>{if($v(e,t)){const n=e[t];if(je(n))return bb(n,r=>!!r.aggregate);{const r=zh(n);return r&&!!r.aggregate}}return!1})}function $Fe(e,t){const n=[],r=[],i=[],s=[],o={};return Wre(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=zre(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:SE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(n1(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Um(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),ru(a)&&si(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),YR(a,u)&&n.push(at(a,{binSuffix:"range"})),ds(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",w4e(u)||(y.type=xb)}else if(d&&!m_(d)){i.push({timeUnit:d,field:l,as:g});const v=ru(a)&&a.type!==Lx&&"time";v&&(u===BR||u===wb?y.formatType=v:kXt(u)?y.legend={formatType:v,...y.legend}:ds(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function bZt(e,t,n){const r=NXt(t,n);if(r){if(r==="binned"){const i=e[t===md?Ai:po];return!!(et(i)&&et(e[t])&&Co(i.bin))}}else return!1;return!0}function _Zt(e,t,n,r){const i={};for(const s of Ye(e))_4e(s)||Ze(vQt(s));for(let s of TXt){if(!e[s])continue;const o=e[s];if(zR(s)){const a=SXt(s),u=i[a];if(et(u)&&yJt(u.type)&&et(o)&&!u.timeUnit){Ze(dQt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(fQt),s=Jc),!bZt(e,s,t)){Ze(r5(s,t));continue}if(s===fg&&t==="line"){const a=zh(e[s]);if(a!=null&&a.aggregate){Ze(yQt);continue}}if(s===il&&(n?"fill"in e:"stroke"in e)){Ze(j4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===UR||s===$x&&!je(o)&&!id(o)||s===wb&&je(o)){if(o){if(s===$x){const a=e[s];if(EFe(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(et(u)?a.push(Hre(u,s)):Ze(yq(u,s)),a),[])}}else{if(s===wb&&o===null)i[s]=null;else if(!et(o)&&!hp(o)&&!id(o)&&!f5(o)&&!Rt(o)){Ze(yq(o,s));continue}i[s]=IFe(o,s,r)}}return i}function g5(e,t){const n={};for(const r of Ye(e)){const i=IFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function wZt(e){const t=[];for(const n of Ye(e))if($v(e,n)){const r=e[n],i=pt(r);for(const s of i)et(s)?t.push(s):d5(s)&&t.push(s.condition)}return t}function Wre(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function EZt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function MFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ai:case po:case QF:case ZF:case JF:case md:case up:case Qy:case iT:case Jc:case cg:case gd:case lg:case yd:case vd:case bd:case zc:case BR:case sl:case f_:case wb:return n;case $x:if(e==="line"||e==="trail")return n;case UR:case XF:{const i=t[r];if(je(i)||et(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case fg:if(e==="trail")return n;case il:case lp:case cp:case dg:case Jy:case Zy:case t1:case e1:{const i=zh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function xZt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function wq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Gre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=wZt(n).map(sZt);return{tooltip:[...i,...oh(s,Vn)]}}function Gre(e){const{title:t,field:n}=e;return fs(t,n)}function Yre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Gre(n);return LFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function LFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Uh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Yy(e[t])?{}:e[t]}}]:[]}function FFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:UP(s,n),continuousAxisChannelDef2:UP(o,n),continuousAxisChannelDefError:UP(a,n),continuousAxisChannelDefError2:UP(u,n),continuousAxis:i}}function UP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(WQt(n,t)),r}else return e}function jFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Uh(n)&&n.orient)return n.orient;if(f0(i)){if(f0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Ux(s)&&!Ux(i)?"horizontal":"vertical"}return"horizontal"}else{if(f0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const QM="boxplot",SZt=["box","median","outliers","rule","ticks"],TZt=new m5(QM,UFe);function BFe(e){return lr(e)?"tukey":e}function UFe(e,{config:t}){e={...e,encoding:g5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Uh(n)?n:{type:n};i&&Ze(L4e("boxplot"));const u=a.extent??t.boxplot.extent,l=wr("size",a,t),c=a.invalid,f=BFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:x}=CZt(e,u,t),S=rT(m.field),{color:C,size:A,...k}=_,N=ke=>Yre(a,g,m,ke,t.boxplot),O=N(k),D=N(_),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=wq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:wq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?H:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:zFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=k,{scale:Ie,axis:be}=m,Ke=Gre(m),Ue=Gu(be,["title"]),yt=LFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...jr(Ue)?{}:{axis:Ue}},...ve,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:P}]}}function zFe(e){const t=rT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function CZt(e,t,n){const r=jFe(e,QM),{continuousAxisChannelDef:i,continuousAxis:s}=FFe(e,r,QM),o=i.field,a=rT(o),u=BFe(t),l=[...zFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=xZt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=$Fe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,x=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Kre="errorbar",AZt=["ticks","rule"],IZt=new m5(Kre,VFe);function VFe(e,{config:t}){e={...e,encoding:g5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=HFe(e,Kre,t);delete s.size;const c=Yre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function kZt(e,t){const{encoding:n}=e;if(RZt(n))return{orient:jFe(e,t),inputType:"raw"};const r=NZt(n),i=PZt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(f0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(f0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(f0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(f0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function RZt(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function NZt(e){return ln(e.x2)||ln(e.y2)}function PZt(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function HFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Uh(r)?r:{type:r};s&&Ze(L4e(t));const{orient:l,inputType:c}=kZt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=FFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=DZt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:k,aggregate:N,groupby:O,encoding:D}=$Fe(C,n),$=[...N,...g],F=c!=="raw"?[]:O,M=wq(v,f,D,_);return{transform:[...a.transform??[],...A,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function DZt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(qQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:jR(h)},{fieldPrefix:"upper_",titlePrefix:t0e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:t0e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:SE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:SE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:SE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze(HQt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:_b(_b(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function t0e(e,t,n){return`${jR(e)} ${n} ${t}`}const Xre="errorband",OZt=["band","borders"],$Zt=new m5(Xre,qFe);function qFe(e,{config:t}){e={...e,encoding:g5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=HFe(e,Xre,t),l=o,c=Yre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze(Wge("interpolate")):l.tension&&Ze(Wge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const WFe={};function Qre(e,t,n){const r=new m5(e,t);WFe[e]={normalizer:r,parts:n}}function MZt(){return Ye(WFe)}Qre(QM,UFe,SZt);Qre(Kre,VFe,AZt);Qre(Xre,qFe,OZt);const LZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],GFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},YFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},FZt=Ye(GFe),jZt=Ye(YFe),BZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},KFe=Ye(BZt),XFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],UZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},zZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},sd="_vgsid_",VZt={point:{on:"click",fields:[sd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Jre(e){return e==="legend"||!!(e!=null&&e.legend)}function P9(e){return Jre(e)&&gt(e)}function Zre(e){return!!(e!=null&&e.select)}function QFe(e){const t=[];for(const n of e||[]){if(Zre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function HZt(e){return y5(e)||tie(e)||eie(e)}function eie(e){return"concat"in e}function y5(e){return"vconcat"in e}function tie(e){return"hconcat"in e}function JFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Vh(e){return gt(e)&&e.step!==void 0}function n0e(e){return e.view||e.width||e.height}const r0e=20,qZt={align:1,bounds:1,center:1,columns:1,spacing:1},WZt=Ye(qZt);function GZt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(c5(e)&&!WR(e.facet)||eie(e))&&(i.columns=o),y5(e)&&(i.columns=1);for(const a of WZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function Eq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function JM(e,t){const n=ZM(e,t);return Vh(n)?n.step:ZFe}function ZM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return fs(n,{step:e.step})}const ZFe=20,YZt={continuousWidth:200,continuousHeight:200,step:ZFe},KZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:YZt,mark:YJt,arc:{},area:{},bar:QJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:JJt,rule:{color:"black"},square:{},text:{color:"black"},tick:ZJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:xJt,projection:{},legend:UZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:VZt,style:{},title:{},facet:{spacing:r0e},concat:{spacing:r0e},normalizedNumberFormat:".0%"},Tp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],i0e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},s0e={blue:Tp[0],orange:Tp[1],red:Tp[2],teal:Tp[3],green:Tp[4],yellow:Tp[5],purple:Tp[6],pink:Tp[7],brown:Tp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function XZt(e={}){return{signals:[{name:"color",value:gt(e)?{...s0e,...e}:s0e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function QZt(e){return{signals:[{name:"fontSize",value:gt(e)?{...i0e,...e}:i0e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function JZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function e5e(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=KR(i)?R4e(i):wl(i)}return n}function ZZt(e){const t=Ye(e),n={};for(const r of t)n[r]=e5e(e[r]);return n}const een=[...gFe,...PFe,...KFe,"background","padding","legend","lineBreak","scale","style","title","view"];function t5e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=WS({},nn(KZt),n?JZt(n):{},t?XZt(t):{},r?QZt(r):{},s||{});i&&GS(o,"selection",i,!0);const a=Gu(o,een);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=wl(o[u]));for(const u of gFe)o[u]&&(a[u]=ku(o[u]));for(const u of PFe)o[u]&&(a[u]=e5e(o[u]));for(const u of KFe)o[u]&&(a[u]=ku(o[u]));return o.legend&&(a.legend=ku(o.legend)),o.scale&&(a.scale=ku(o.scale)),o.style&&(a.style=ZZt(o.style)),o.title&&(a.title=ku(o.title)),o.view&&(a.view=ku(o.view)),a}const ten=new Set(["view",...zJt]),nen=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ren={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...GJt};function ien(e){e=nn(e);for(const t of nen)delete e[t];if(e.axis)for(const t in e.axis)KR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of LZt)delete e.legend[t];if(e.mark){for(const t of Kge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(QFe(e.params)),delete e.params);for(const t of ten){for(const r of Kge)delete e[t][r];const n=ren[t];if(n)for(const r of n)delete e[t][r];oen(e,t)}for(const t of MZt())delete e[t];sen(e);for(const t in e)gt(e[t])&&jr(e[t])&&delete e[t];return jr(e)?void 0:e}function sen(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=k4e(e.title);jr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),jr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),jr(r)?delete e.title:e.title=r}function oen(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};jr(s)||(e.style[n??t]=s),delete e[t]}function v5(e){return"layer"in e}function aen(e){return"repeat"in e}function uen(e){return!je(e.repeat)&&e.repeat.layer}class nie{map(t,n){return c5(t)?this.mapFacet(t,n):aen(t)?this.mapRepeat(t,n):tie(t)?this.mapHConcat(t,n):y5(t)?this.mapVConcat(t,n):eie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(v5(t))return this.mapLayer(t,n);if(pg(t))return this.mapUnit(t,n);throw new Error(vre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const len={zero:1,center:1,normalize:1};function cen(e){return e in len}const fen=new Set([hFe,o5,s5,WM,u5,Fre,jre,a5,pFe,Lre]),den=new Set([o5,s5,hFe]);function Q_(e){return et(e)&&jx(e)==="quantitative"&&!e.bin}function o0e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(Q_(o)&&Q_(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Q_(o))return t;if(Q_(a))return i}else{if(Q_(o))return s&&n==="vertical"?void 0:t;if(Q_(a))return s&&n==="horizontal"?void 0:i}}function hen(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function n5e(e,t){var m,g;const n=Uh(e)?e:{type:e},r=n.type;if(!fen.has(r))return null;const i=o0e(t,"x",n)||o0e(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=hen(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=CXt.reduce((y,v)=>{if(v!=="tooltip"&&$v(t,v)){const _=t[v];for(const w of pt(_)){const E=zh(w);if(E.aggregate)continue;const x=at(E,{});(!x||!l.has(x))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Yy(s.stack)?p=s.stack?"zero":null:p=s.stack:den.has(r)&&(p="zero"),!p||!cen(p)||qre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Yu.LINEAR&&s!=null&&s.stack&&Ze(UQt(s.scale.type)),ln(t[fp(i)])?(s.stack!==void 0&&Ze(BQt(i)),null):(et(s)&&s.aggregate&&!FXt.has(s.aggregate)&&Ze(zQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:g_(r),stackBy:h,offset:p}))}function r5e(e,t,n){const r=ku(e),i=wr("orient",r,n);if(r.orient=yen(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(SQt(r.orient,i)),r.type==="bar"&&r.orient){const u=wr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:XJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=wr("opacity",r,n),o=wr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=men(r.type,t)),wr("cursor",r,n)===void 0&&(r.cursor=pen(r,t,n)),r}function pen(e,t,n){return t.href||e.href||wr("href",e,n)?"pointer":e.cursor}function men(e,t){if(Hn([u5,Lre,Fre,jre],e)&&!qre(t))return .7}function gen(e,t,{graticule:n}){if(n)return!1;const r=zm("filled",e,t),i=e.type;return fs(r,i!==u5&&i!==a5&&i!==WM)}function yen(e,t,n){switch(e){case u5:case Fre:case jre:case pFe:case BJt:case jJt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case o5:if(et(r)&&(Co(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&(Co(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===xb&&!si(r.bin)||GM(r))&&et(i)&&Co(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===xb&&!si(i.bin)||GM(i))&&et(r)&&Co(r.bin)?"vertical":"horizontal"}case WM:if(s&&!(et(r)&&Co(r.bin))&&o&&!(et(i)&&Co(i.bin)))return;case s5:if(o)return et(i)&&Co(i.bin)?"horizontal":"vertical";if(s)return et(r)&&Co(r.bin)?"vertical":"horizontal";if(e===WM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case a5:case Lre:{const a=Jge(r),u=Jge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ru(r)&&r.type===Lx,c=ru(i)&&i.type===Lx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function ven(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function ben(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Gu(e[t],["point","line"])});return e}function D9(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function a0e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class _en{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(pg(t)){const{mark:r,encoding:i}=t,s=Uh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!D9(s,n[s.type],i);case"area":return!!D9(s,n[s.type],i)||!!a0e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=g5(l,i),d=Uh(a)?a:{type:a},h=D9(d,i[d.type],f),p=d.type==="area"&&a0e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:ven({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Gu(f,["shape"])}],g=n5e(r5e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Gu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Dx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Dx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:ben(i)})}}function wen(e,t){return t?WR(e)?s5e(e,t):i5e(e,t):e}function O9(e,t){return t?s5e(e,t):e}function xq(e,t,n){const r=t[e];if(rZt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze(iQt(r.repeat));return}return t}function i5e(e,t){if(e=xq("field",e,t),e!==void 0){if(e===null)return null;if(Ure(e)&&Eh(e.sort)){const n=xq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function u0e(e,t){if(et(e))return i5e(e,t);{const n=xq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function l0e(e,t){if(ln(e)){const n=u0e(e,t);if(n)return n;if(f5(e))return{condition:e.condition}}else{if(GR(e)){const n=u0e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function s5e(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>l0e(s,t)).filter(s=>s);else{const s=l0e(i,t);s!==void 0&&(n[r]=s)}}return n}class Een{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(pg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Uh(r)&&r.type==="line")for(const i of xXt){const s=d_(i),o=n[s];if(n[i]&&(et(o)&&!Co(o.bin)||hp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(xQt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class xen extends nie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[TZt,IZt,$Zt,new _en,new Een]}map(t,n){if(pg(t)){const r=$v(t.encoding,fm),i=$v(t.encoding,dm),s=$v(t.encoding,KF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=O9(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return uen(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ci(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Gu(t,["columns"]),Ze(zge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ci(p)}`:(r.row?`row_${Ci(m)}`:"")+(r.column?`column_${Ci(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Gu(_,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return WR(r)&&t.columns&&(t=Gu(t,["columns"]),Ze(zge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=f0e({parentProjection:o,projection:i}),l=c0e({parentEncoding:s,encoding:O9(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=O9(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(wQt([...r?[fm]:[],...i?[dm]:[]]));const o={},a={};for(const u of[fm,dm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:wen(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:c0e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:f0e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function c0e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else GR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||id(a)||Rt(a)||ln(a)||je(a))&&(r[s]=a)}}else r=t;return!r||jr(r)?void 0:r}function f0e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(cQt({parentProjection:t,projection:n})),n??t}function rie(e){return"filter"in e}function Sen(e){return(e==null?void 0:e.stop)!==void 0}function o5e(e){return"lookup"in e}function Ten(e){return"data"in e}function Cen(e){return"param"in e}function Aen(e){return"pivot"in e}function Ien(e){return"density"in e}function ken(e){return"quantile"in e}function Ren(e){return"regression"in e}function Nen(e){return"loess"in e}function Pen(e){return"sample"in e}function Den(e){return"window"in e}function Oen(e){return"joinaggregate"in e}function $en(e){return"flatten"in e}function Men(e){return"calculate"in e}function a5e(e){return"bin"in e}function Len(e){return"impute"in e}function Fen(e){return"timeUnit"in e}function jen(e){return"aggregate"in e}function Ben(e){return"stack"in e}function Uen(e){return"fold"in e}function zen(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Ven(e){return e.map(t=>rie(t)?{filter:EE(t.filter,gJt)}:t)}class Hen extends nie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=d0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=d0e(t,n),t.encoding){const r={};for(const[i,s]of vy(t.encoding))r[i]=u5e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:vy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function d0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(rie(s))return{filter:Sq(s,t)};if(a5e(s)&&h_(s.bin))return{...s,bin:l5e(s.bin)};if(o5e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function u5e(e,t){var r,i;const n=nn(e);if(et(n)&&h_(n.bin)&&(n.bin=l5e(n.bin)),y_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(f5(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:Sq(s,t)}});else{const{selection:s,param:o,test:a,...u}=u5e(n.condition,t);n.condition=o?n.condition:{...u,test:Sq(n.condition,t)}}return n}function l5e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Sq(e,t){const n=r=>EE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):EE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Tq extends nie{map(t,n){const r=n.selections??[];if(t.params&&!pg(t)){const i=[];for(const s of t.params)Zre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Tq.prototype[e];Tq.prototype[e]=function(n,r){return t.call(this,n,qen(n,r))}}function qen(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function c5e(e,t){t===void 0&&(t=t5e(e.config));const n=Ken(e,t),{width:r,height:i}=e,s=Xen(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Wen=new xen,Gen=new Hen,Yen=new Tq;function Ken(e,t={}){const n={config:t};return Yen.map(Wen.map(Gen.map(e,n),n),n)}function h0e(e){return mt(e)?{type:e}:e??{}}function Xen(e,t,n){let{width:r,height:i}=t;const s=pg(e)||v5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(Fge("width")),r=void 0),i=="container"&&(Ze(Fge("height")),i=void 0));const a={type:"pad",...o,...n?h0e(n.autosize):{},...h0e(e.autosize)};if(a.type==="fit"&&!s&&(Ze(GXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(jge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(jge("height")),!kl(a,{type:"pad"}))return a}function Qen(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Jen(e){return e?`fit-${e5(e)}`:"fit"}const Zen=["background","padding"];function p0e(e,t){const n={};for(const r of Zen)e&&e[r]!==void 0&&(n[r]=wl(e[r]));return t&&(n.params=e.params),n}class mg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new mg(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return fs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Fd(e){return{explicit:!0,value:e}}function hl(e){return{explicit:!1,value:e}}function f5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:b5(t,n,r,i)}}function b5(e,t,n,r){return e.explicit&&t.explicit&&Ze(DQt(n,r,e.value,t.value)),e}function wy(e,t,n,r,i=b5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kl(e.value,t.value)?e:i(e,t,n,r)}class etn extends mg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function zx(e){return"url"in e}function JI(e){return"values"in e}function d5e(e){return"name"in e&&!zx(e)&&!JI(e)&&!M0(e)}function M0(e){return e&&(h5e(e)||p5e(e)||iie(e))}function h5e(e){return"sequence"in e}function p5e(e){return"sphere"in e}function iie(e){return"graticule"in e}var Ei;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ei||(Ei={}));function m5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Uc(i.field),i}function Cb(e,t=!0,n=xa){if(je(e)){const r=e.map(i=>Cb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(p_(e))return n(t?Eb(e):iJt(e));return t?n(Br(e)):e}function ttn(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${xy}, ${n.resolve==="global"?"true":`{unit: ${Mv(e)}}`}`;for(const s of x5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Dtn,on:[{events:{signal:n.name+xy},update:`modify(${rt(n.name+Ab)}, ${i})`}]})}return sie(t)}function ntn(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Xy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return sie(t)}function rtn(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=rt(i+Ab);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${D5e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of x5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),sie(t)}function itn(e,t){const n=[...t],r=Mv(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+Ab};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:sd}}]),i.init){const a=i.project.items.map(m5e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[sd]:Cb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Cb(u,!1)}))}n.filter(a=>a.name===i.name+Ab).length||n.push(s)}return n}function g5e(e,t){for(const n of Mo(e.component.selection??{}))for(const r of x5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function stn(e,t){for(const n of e.children)Wi(n)&&(t=g5e(n,t));return t}function otn(e,t,n,r){const i=F5e(e,t.param,t);return{signal:Yl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function sie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(aQt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ku extends Mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${d4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function $9(e){return e.as!==void 0}function m0e(e){return`${e}_end`}class xh extends Mr{clone(){return new xh(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(m_(u)){if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=_y({fieldDef:s,markDef:f,config:d});(QI(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=_y({fieldDef:s,markDef:f,config:d});QI(c)&&ds(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return jr(r)?null:new xh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new xh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of vy(this.timeUnits)){const s=$9(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>$9(t)?t.as:m0e(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if($9(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Uc(s),type:"timeunit",...a?{units:i5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...g0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=y5e({timeUnit:i,field:o}),u=m0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...g0e([o,u],r,i))}}return t}}const _5="offsetted_rect_start",w5="offsetted_rect_end";function y5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Y4e(r),{part:o,step:a}=J4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function g0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:y0e([y5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${_5}`},{type:"formula",expr:y0e([i,s],n+.5),as:`${e}_${w5}`}]}return[]}function y0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const XR="_tuple_fields";class atn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const utn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new atn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ci(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ci(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ye(p))EXt(m)?(h||(h=[])).push(m):l==="interval"?(Ze(rQt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(YXt(p,m.aggregate));continue}else if(!g){Ze(Uge(p));continue}if(m.timeUnit&&!m_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&hg(p)&&Yl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===sd,v4e(p)?(v.geoChannel=p,v.channel=y4e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(Uge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===sd}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),jr(o)||(i.timeUnit=new xh(null,o))},signals:(e,t,n)=>{const r=t.name+XR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(m5e)})}},hm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!hg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(JXt),!s||!Yl(o)){Ze(QXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||v0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(D5e)>=0)i.update=`{${r.map(o=>`${rt(Uc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Uc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!v0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function Cq(e,t){return`domain(${rt(e.scaleName(t))})`}function v0e(e){return e.parent&&cT(e.parent)&&!e.parent.parent}const TE="_brush",v5e="_scale_trigger",c2="geo_interval_init_tick",b5e="_init",ltn="_center",ctn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[sd],i.encodings||(i.encodings=n.value?Ye(n.value):[vd,yd]),n.select={type:"interval",...i}}if(t.translate&&!hm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+TE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+xy,s=Mo(t.project.hasChannel).filter(a=>a.channel===Ai||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(ftn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+ltn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+b5e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(x=>x.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Mv(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:c2}]:[]],update:_}]})}else{if(!hm.defined(t)){const l=r+v5e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Yl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Mv(e)}, fields: ${r+XR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Cb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===c2).length||n.unshift({name:c2,value:null,on:[{events:"timer{1}",update:`${c2} === null ? {} : ${c2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Ab)})`;if(hm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Mv(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+TE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+TE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function ftn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ai?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=hm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Cb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+v5e},update:Yl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Cb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ai?0:1,h=t.name+b5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const dtn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+XR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+TE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Mv(e)}, `;if(t.project.hasSelectionId)l+=`${sd}: ${o}[${rt(sd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+xy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function oT(e,t,n,r){const i=f5(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(nZt(u)){const{param:c,empty:f}=u;return{test:L5e(e,{param:c,empty:f}),...l}}else return{test:nL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function oie(e,t="text"){const n=e.encoding[t];return oT(e,n,t,r=>E5(r,e.config))}function E5(e,t,n="datum"){if(e){if(id(e))return di(e.value);if(ln(e)){const{format:r,formatType:i}=KM(e);return Mre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function _5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:b0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return oT(e,o,"tooltip",u=>{const l=E5(u,i,a);if(l)return l;if(u===null)return;let c=wr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Rt(c)?c:c.content==="encoding"?b0e(n,s,i,t):{signal:a}})}}function w5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=d_(f),h=ru(c)?c:{...c,type:e[d].type},p=h.title||Vre(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ds(f)){const y=f==="x"?"x2":"y2",v=zh(e[y]);if(Co(h.bin)&&v){const _=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:x}=KM(h);g=qR(_,w,E,x,i),s[y]=!0}}if((ds(f)||f===Jc||f===gd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=KM(h);g=Mre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=E5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Wre(e,(c,f)=>{et(c)?u(c,f):d5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function b0e(e,t,n,{reactiveGeom:r}={}){const i=w5e(e,t,n,{reactiveGeom:r}),s=vy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function htn(e){const{markDef:t,config:n}=e,r=wr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...ptn(e),...mtn(e)}}function ptn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=wr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in HXt?{}:{ariaRoleDescription:{value:t}}}function mtn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return oT(e,s,"description",u=>E5(u,e.config));const o=wr("description",n,r);if(o!=null)return{description:di(o)};if(r.aria===!1)return{};const a=w5e(t,i,r);if(!jr(a))return{description:{signal:vy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function eo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=wr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=di(u)));const l=i[e];return oT(t,l,o??e,c=>$re({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function E5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??wr("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=wr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=wr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:di(u)}:{},...l?{stroke:di(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(j4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eo("color",e,{vgChannel:c,defaultValue:o?u:l}),...eo("fill",e,{defaultValue:r.fill?u:void 0}),...eo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function gtn(e){const{encoding:t,mark:n}=e,r=t.order;return!g_(n)&&id(r)?oT(e,r,"zindex",i=>di(i.value)):{}}function Vx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:$re({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:di(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function pa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[fp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Vx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=aie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ds(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ytn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function ytn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return qM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Ov(n,r,{suffix:"end"},{offset:s})}return Dre(e)}function aie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=d_(n),u=by(n),l=wr(n,s,o,{vgChannel:u});if(l!==void 0)return aA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Yu.LOG,Yu.TIME,Yu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[ol(n)],mult:.5}}}}const vtn={left:"x",center:"xc",right:"x2"},btn={top:"y",middle:"yc",bottom:"y2"};function x5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return by(e);const i=e==="x"?"align":"baseline",s=wr(i,t,n);let o;return Rt(s)?(Ze(EQt(i)),o=void 0):o=s,e==="x"?vtn[o||(r==="top"?"left":"center")]:btn[o||r]}function eL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?S5e(e,t,{defaultPos:n,defaultPos2:r}):pa(e,t,{defaultPos:n})}function S5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=fp(e),a=ol(e),u=_tn(t,r,o),l=u[a]?x5e(e,i,s):by(e);return{...pa(e,t,{defaultPos:n,vgChannel:l}),...u}}function _tn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=d_(n),l=ol(n),c=by(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Vx({channel:n,markDef:s,encoding:r,model:e}):Vx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ol(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=wtn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:zP(n,s)||zP(n,{[n]:VM(n,s,a.style),[l]:VM(l,s,a.style)})||zP(n,a[i])||zP(n,a.mark)||{[c]:aie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function wtn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Ov(t,s,{suffix:"start"},{offset:u}):Dre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function zP(e,t){const n=ol(e),r=by(e);if(t[r]!==void 0)return{[r]:aA(e,t[r])};if(t[e]!==void 0)return{[r]:aA(e,t[e])};if(t[n]){const i=t[n];if(Tb(i))Ze(gQt(n));else return{[n]:aA(e,i)}}}function Ey(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=fp(t),a=ol(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??wr("size",i,n,{vgChannel:a}),p=E4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(si(u.bin)||Co(u.bin)||u.timeUnit&&!l)&&!(h&&!Tb(h))&&!r[p]&&!co(f)?Stn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&co(f)||m)&&!l?xtn(u,t,e):S5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Etn(e,t,n,r,i,s,o){if(Tb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=zm("minBandSize",{type:o},r);return{signal:c?`max(${$f(c)}, ${l})`:l}}else i.band!==1&&(Ze(CQt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(r1(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=fs(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:JM(r.view,e)-2}}function xtn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ol(t),f=fp(t),d=E4e(t),h=n.scaleName(d),p=n.getScaleComponent(hre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=eo("size",n,{vgChannel:c,defaultRef:di(r.size)}):Ze(RQt(r.type)));const y=!!g,v=_Fe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Etn(c,h||u,p||l,s,v,!!e,r.type)};const _=((k=l||p)==null?void 0:k.get("type"))==="band"&&Tb(v)&&!y?"top":"middle",w=x5e(t,r,s,_),E=w==="xc"||w==="yc",{offset:x,offsetType:S}=Vx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=Dre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:x,defaultRef:aie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:Tb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const N=by(f),O=g[c],D=x?{...O,offset:x}:O;return{[w]:C,[N]:je(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function _0e(e,t,n,r,i,s,o){if(g4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=$f(n),c=$f(i),f=$f(r),d=$f(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Stn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=_Fe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ds(n)?wr("binSpacing",s,i)??0:0,m=fp(n),g=by(n),y=by(m),v=zm("minBandSize",s,i),{offset:_}=Vx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Vx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=$Jt({fieldDef:e,scaleName:u}),x=_0e(n,p,c,h,_,v,E),S=_0e(m,p,c,h,w??_,v,E),C=Rt(f)?{signal:`(1-${f.signal})/2`}:Tb(f)?(1-f.band)/2:.5,A=_y({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(si(e.bin)||e.timeUnit){const N=e.timeUnit&&A!==.5;return{[y]:w0e({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:N}),[g]:w0e({fieldDef:e,scaleName:u,bandPosition:Rt(C)?{signal:`1-${C.signal}`}:1-C,offset:x,useRectOffsetField:N})}}else if(Co(e.bin)){const N=Ov(e,u,{},{offset:S});if(et(t))return{[y]:N,[g]:Ov(t,u,{},{offset:x})};if(h_(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}Ze(z4e(m))}function w0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return qM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:_5,endSuffix:w5}:{}})}const Ttn=new Set(["aria","width","height"]);function Zc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?E5e(e):{};return{...Ctn(e.markDef,t),...E0e(e,"fill",n),...E0e(e,"stroke",r),...eo("opacity",e),...eo("fillOpacity",e),...eo("strokeOpacity",e),...eo("strokeWidth",e),...eo("strokeDash",e),...gtn(e),..._5e(e),...oie(e,"href"),...htn(e)}}function E0e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(wr("invalid",s,r)==="hide"&&n&&!g_(i)){const a=Atn(e,{invalid:!0,channels:t5});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function Ctn(e,t){return VXt.reduce((n,r)=>(!Ttn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=di(e[r])),n),{})}function Atn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Yl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ore(o,t)).join(` ${s} `)}}function uie(e){const{config:t,markDef:n}=e;if(wr("invalid",n,t)){const i=Itn(e,{channels:dp});if(i)return{defined:{signal:i}}}return{}}function Itn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Yl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ore(o,t)).join(` ${s} `)}}function x0e(e,t){if(t!==void 0)return{[e]:di(t)}}const M9="voronoi",T5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(M9)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(g_(s))return Ze(KXt(s)),n;const o={name:e.getName(M9),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},..._5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(M9)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},C5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Jre(e.bind),parse:(e,t,n)=>O5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=T5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ci(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Cb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+xy)[0],o=r+XR,a=i.items.map(l=>Ci(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},tL="_toggle",A5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+tL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+xy,r=t.name+tL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Mv(e)}}, `)+`${r} ? ${n} : null`}},ktn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?Xy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(C5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ci(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+xy);r(i,"null"),A5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+tL),r(i,"false"))}return n}},I5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Jre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==sd;return t&&!n&&Ze(ZXt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},O5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=P9(t.bind)?t.bind.legend:"click",s=mt(i)?Xy(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=P9(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ci(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+xy),o=r+XR,a=i.items.filter(d=>d.hasLegend).map(d=>Ci(`${r}_${Ci(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+tL),f=P9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Rtn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&I5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const k5e="_translate_anchor",R5e="_translate_delta",Ntn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+k5e,{x:o,y:a}=t.project.hasChannel;let u=Xy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+TE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?Cq(e,Ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?Cq(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+R5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&S0e(e,t,o,"width",n),a!==void 0&&S0e(e,t,a,"height",n),n}};function S0e(e,t,n,r,i){const s=t.name,o=s+k5e,a=s+R5e,u=n.channel,l=hm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const N5e="_zoom_anchor",P5e="_zoom_delta",Ptn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+P5e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ai)),l=rt(e.scaleName(po));let c=Xy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+TE,f))),n.push({name:r+N5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&T0e(e,t,o,"width",n),a!==void 0&&T0e(e,t,a,"height",n),n}};function T0e(e,t,n,r,i){const s=t.name,o=n.channel,a=hm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?Cq(e,o):u.name,h=s+P5e,p=`${s}${N5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Ab="_store",xy="_tuple",Dtn="_modify",D5e="vlSelectionResolve",x5=[dtn,ctn,utn,A5e,C5e,hm,I5e,ktn,Ntn,Ptn,T5e];function Otn(e){let t=e.parent;for(;t&&!Ol(t);)t=t.parent;return t}function Mv(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Otn(e);if(r){const{facet:i}=r;for(const s of Cc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function lie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function O5e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function Aq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Aq(e.object)),t.push(...Aq(e.property))),t)}function $5e(e){return e.object.type==="MemberExpression"?$5e(e.object):e.object.name==="datum"}function M5e(e){const t=kne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&$5e(r)&&n.add(Aq(r).slice(1).join("."))}),n}class aT extends Mr{clone(){return new aT(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=nL(this.model,this.filter,this),this._dependentFields=M5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function $tn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ci(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?Xy(u.on,"scope"):pt(nn(u.on))},f=nn(i);for(const d of x5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function L5e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=Ci(i),o=rt(s+Ab);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function F5e(e,t,n){const r=Ci(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Uc(s))}]`}function Mtn(e,t){for(const[n,r]of vy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ku(new aT(t,e,{param:n}),i,Ei.Lookup,e.component.data.outputNodeRefCounts)}}function nL(e,t,n){return oA(t,r=>mt(r)?r:hJt(r)?L5e(e,r,n):eFe(r))}function Ltn(e,t){if(e)return je(e)&&!jg(e)?e.map(n=>Vre(n,t)).join(", "):e}function L9(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function oC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=gZt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(KR(m)){const{condition:g,...y}=m,v=pt(g),_=Zge[h];if(_){const{vgProp:w,part:E}=_,x=[...v.map(S=>{const{test:C,...A}=S;return{test:nL(null,C),...A}}),y];L9(c,E,w,x),delete c[h]}else if(_===null){const w={signal:v.map(E=>{const{test:x,...S}=E;return`${nL(null,x)} ? ${Lge(S)} : `}).join("")+Lge(y)};c[h]=w}}else if(Rt(m)){const g=Zge[h];if(g){const{vgProp:y,part:v}=g;L9(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},jr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=_b(a,"datum.label",c.encode.labels.update.text.signal)),L9(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of RFe)e.hasAxisPart(p)||delete c.encode[p];jr(c.encode)&&delete c.encode}const h=Ltn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:fs(l,0)}}}}function j5e(e){const{axes:t}=e.component,n=[];for(const r of dp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Ftn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>oC(i,"grid",t)),...r.map(i=>oC(i,"grid",t)),...n.map(i=>oC(i,"main",t)),...r.map(i=>oC(i,"main",t))].filter(i=>i)}function C0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${$f(o[c])} : ${$f(a[c])}`};return l}return t[i]})])}function jtn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:iFe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${jR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:C0e(a,r,e,n),vgAxisConfig:C0e(u,r,e,n),axisConfigStyle:Btn([...u,...a],r)}}function Btn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Iq(e,t,n,r={}){var s;const i=P4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const A0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Utn(n,e),gridScale:({model:e,channel:t})=>ztn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||U5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||B5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Htn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??qtn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Gtn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Ytn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=z5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return O4e(i?[Qge(i)]:[],et(o)?[Qge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Ktn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Xtn(n,t)};function Utn(e,t){return!co(e)&&et(t)&&!si(t==null?void 0:t.bin)&&!Co(t==null?void 0:t.bin)}function ztn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Vtn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:XI(s);{const{configValue:o}=Iq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?XI(o):n===Ai&&Hn([Pre,Nre],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function kq(e){return`(((${e.signal} % 360) + 360) % 360)`}function B5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=kq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=kq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function U5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=kq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Htn(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function qtn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Wtn(e){return e==="x"?"bottom":"left"}function Gtn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(et(e)){if(si(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Ytn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=Q4e(n);if(r)return{signal:r}}}}function z5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return $4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Ktn(e,t){const n=e.values;if(je(n))return kFe(t,n);if(Rt(n))return n}function Xtn(e,t){return e==="rect"&&YM(t)?1:0}class Hx extends Mr{clone(){return new Hx(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=M5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(y_(r)&&bFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${eFe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Hx(t,{calculate:u,as:qx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function qx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function S5(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Wx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return fs((t||{})[e],i[e],n.header[e])}function T5(e,t,n,r){const i={};for(const s of e){const o=Wx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const cie=["row","column"],fie=["header","footer"];function Qtn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=T5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=S5(t,a),l=XI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...H5e(l,u),...V5e(u,l,s),...q5e(r,i,t,FZt,GFe)}}}function V5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=U5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function H5e(e,t){const n=B5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Jtn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of fie)if(n[i])for(const s of n[i]){const o=enn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Ztn(e,t){const{sort:n}=e;return Eh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:qx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function Rq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=T5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Mre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=S5(t,a);return{text:{signal:u?_b(_b(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...H5e(s,c),...V5e(c,s,o),...q5e(n,e,t,jZt,YFe)}}function enn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=T5(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=Rq(o,t,a))}const u=Ol(e)&&!WR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Ztn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const tnn={column:{start:0,end:1},row:{start:1,end:0}};function nnn(e,t){return tnn[t][e]}function rnn(e,t){const n={};for(const r of Cc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=T5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=S5(r,o),u=nnn(s,a);u!==void 0&&(n[a]=u)}}return jr(n)?void 0:n}function q5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Wx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function die(e){return[...VP(e,"width"),...VP(e,"height"),...VP(e,"childWidth"),...VP(e,"childHeight")]}function VP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&r1(a)){const u=e.scaleName(n);return Ol(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[I0e(u,a)]:[I0e(u,a),{name:i,update:W5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=Eq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function I0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function W5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=fs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${$f(o)}, ${$f(s)}) * ${e}_step`}function G5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Y5e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...oT(t,i,r,s=>di(s.value))}},{})}function K5e(e,t){if(Ol(t))return e==="theta"?"independent":"shared";if(cT(t))return"shared";if(bie(t))return ds(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function hie(e,t){const n=e.scale[t],r=ds(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze($Qt(t)),"independent"):e[r][t]||"shared"}const inn={...zZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},X5e=Ye(inn);class snn extends mg{}const k0e={symbols:onn,gradient:ann,labels:unn,entries:lnn};function onn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...WXt({},n,qJt),...E5e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?Q5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===il)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=di(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=di(m??1));else if(je(f.fill)){const g=Nq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=di(g))}}if(f.stroke){if(r==="stroke"||!c&&r===il)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=fs(Nq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==dg){const g=et(t)&&Z5e(n,i,t);g?f.opacity=[{test:g,...di(m??1)},di(u.legend.unselectedOpacity)]:m&&(f.opacity=di(m))}return f={...f,...e},jr(f)?void 0:f}function ann(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Q5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=di(l)),a={...a,...e},jr(a)?void 0:a}function unn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?Z5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Sb(c)?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return jr(d)?void 0:d}function lnn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Q5e(e){return J5e(e,(t,n)=>Math.max(t,n.value))}function Nq(e){return J5e(e,(t,n)=>fs(t,n.value))}function J5e(e,t){if(iZt(e))return pt(e.condition).reduce(t,e.value);if(id(e))return e.value}function Z5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ci(s)+Ab)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const R0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return cFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return fFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??gnn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??ynn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??fnn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>SE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(xE(n)&&Mf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>cnn(t,e)};function cnn(e,t){const n=e.values;if(je(n))return kFe(t,n);if(Rt(n))return n}function fnn(e,t,n,r){if(t!=="shape"){const i=Nq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function dnn(e){const{legend:t}=e;return fs(t.type,hnn(e))}function hnn({channel:e,timeUnit:t,scaleType:n}){if(xE(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Mf(n))return"gradient"}return"symbol"}function pnn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??mnn(n,t)}function mnn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function gnn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Mf(i))return n==="horizontal"?r==="top"||r==="bottom"?N0e(t,"width",o,s):o:N0e(t,"height",u,a)}function N0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function ynn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function eje(e){const t=Wi(e)?vnn(e):Enn(e);return e.component.legends=t,t}function vnn(e){const{encoding:t}=e,n={};for(const r of[il,...XFe]){const i=Ms(t[r]);!i||!e.getScaleComponent(r)||r===sl&&et(i)&&i.type===sT||(n[r]=wnn(e,r))}return n}function bnn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function _nn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function wnn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new snn({},bnn(e,t));Rtn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ms(i[t]),f=et(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=dnn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=pnn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of X5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const x=E in R0e?R0e[E](m):n[E];if(x!==void 0){const S=_nn(x,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,x,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const x=Y5e(g[E]??{},e),S=E in k0e?k0e[E](x,_):x;S!==void 0&&!jr(S)&&(v[E]={...y!=null&&y.length&&et(c)?{name:`${Ci(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return jr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Enn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){eje(r);for(const i of Ye(r.component.legends))n.legend[i]=hie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=tje(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function tje(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of X5e){const c=wy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return xnn(f,d);case"title":return M4e(f,d);case"type":return i=!0,hl("symbol")}return b5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&zM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&zM(e.explicit,["encode","gradient"])),e}function xnn(e,t){return t.value==="circle"?t:e}function Snn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function nje(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Br(s.get("domains"));if(n[o])for(const a of n[o])tje(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>Tnn(i,e.config)).filter(i=>i!==void 0)}function Tnn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of XFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=_b(r,"datum.label",s.encode.labels.update.text.signal)),Snn(s,"labels","text",{signal:l})}return s}}function Cnn(e){return cT(e)||bie(e)?Ann(e):rje(e)}function Ann(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),rje(e))}function rje(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Inn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ije extends mg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function sje(e){e.component.projection=Wi(e)?knn(e):Pnn(e)}function knn(e){if(e.hasProjection){const t=ku(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Rnn(e):void 0,s=new ije(e.projectionName(!0),{...ku(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Rnn(e){const t=[],{encoding:n}=e;for(const r of[[vd,yd],[zc,bd]])(Ms(n[r[0]])||Ms(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(sl)&&e.typedFieldDef(sl).type===sT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ei.Main)),t}function Nnn(e,t){const n=ore(Inn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&kl(e.get(i),t.get(i))));if(kl(e.size,t.size)){if(n)return e;if(kl(e.explicit,{}))return t;if(kl(t.explicit,{}))return e}return null}function Pnn(e){if(e.children.length===0)return;let t;for(const r of e.children)sje(r);const n=ore(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Nnn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new ije(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Dnn(e,t,n,r){if(YR(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:qR(s,o,i.format,i.formatType,r)}}return{}}function oje(e,t){return`${I4e(e)}_${t}`}function Onn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function pie(e,t,n){const r=h5(n,void 0)??{},i=oje(r,t);return e.getName(`${i}_bins`)}function $nn(e){return"as"in e}function P0e(e,t,n){let r,i;$nn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...h5(t,void 0)},o=oje(s,e.field),{signal:a,extentSignal:u}=Onn(n,o);if(n5(s.extent)){const c=s.extent;i=F5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Sh extends Mr{clone(){return new Sh(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ru(s)&&si(s.bin)){const{key:a,binComponent:u}=P0e(s,s.bin,n);i[a]={...u,...i[a],...Dnn(n,s,o,n.config)}}return i},{});return jr(r)?null:new Sh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=P0e(n,n.bin,r);return new Sh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=oh([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Uc(t.field),as:r,signal:t.signal,...n5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Uc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Mnn(e,t,n,r){var s;const i=Wi(r)?r.encoding[fp(t)]:void 0;if(ru(n)&&Wi(r)&&wFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=_y({fieldDef:n,markDef:a,config:u});QI(o)&&l!==.5&&ds(t)&&(e.add(at(n,{suffix:_5})),e.add(at(n,{suffix:w5}))),n.bin&&YR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(v4e(t)){const o=y4e(t);e.add(r.getName(o))}else e.add(at(n));return y_(n)&&CJt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Lnn(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Wf extends Mr{clone(){return new Wf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Um(u)||n1(u)){const c=Um(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);hg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Mnn(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Wf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Wf(t,r,i)}merge(t){return l4e(this.dimensions,t.dimensions)?(Lnn(this.measures,t.measures),!0):(QQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Uc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Uc),ops:t,fields:n,as:r}}}class uT extends Mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Cc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...si(a)?[at(o,{binSuffix:"end"})]:[]],...Eh(u)?{sortField:u}:je(u)?{sortIndexField:qx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Cc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Cc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Cc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of dp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&r1(s)){const o=C5(this.childModel,n),a=vie(o);a?t[n]=a:Ze(bre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=l5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of cie){for(const c of fie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[dm,fm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function D0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Fnn(e,t){const n=lre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=D0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=D0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(oQt(t)),null}function jnn(e){const t={};return yO(e.filter,n=>{if(Z4e(n)){let r=null;xre(n)?r=wl(n.equal):Tre(n)?r=wl(n.lte):Sre(n)?r=wl(n.lt):Cre(n)?r=wl(n.gt):Are(n)?r=wl(n.gte):Ire(n)?r=n.range[0]:kre(n)&&(r=(n.oneOf??n.in)[0]),r&&(p_(r)?t[n.field]="date":lr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Bnn(e){const t={};function n(r){Ux(r)?t[r.field]="date":r.type==="quantitative"&&LXt(r.aggregate)?t[r.field]="number":Ox(r.field)>1?r.field in t||(t[r.field]="flatten"):y_(r)&&Eh(r.sort)&&Ox(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||Ol(e))&&e.forEachFieldDef((r,i)=>{if(ru(r))n(r);else{const s=d_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(g_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Unn(e){const t={};if(Wi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Ox(i.field)>1&&(t[i.field]="flatten")}return t}class ma extends Mr{clone(){return new ma(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!M0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(Vge(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(Vge(a,n[a],u)))}const s=new mg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ma(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];Ox(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?Ox(n)>1:!0).map(n=>{const r=Fnn(n,this._parse[n]);return r?{type:"formula",expr:r,as:rT(n)}:null}).filter(n=>n!==null)}}class Sy extends Mr{clone(){return new Sy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([sd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:sd}}}class QR extends Mr{clone(){return new QR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class JR extends Mr{clone(){return new JR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ib extends Mr{constructor(t){super(null),t??(t={name:"source"});let n;if(M0(t)||(n=t.format?{...Gu(t.format,["parse"])}:{}),JI(t))this._data={values:t.values};else if(zx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else p5e(t)?this._data={values:[{type:"Sphere"}]}:(d5e(t)||M0(t))&&(this._data={});this._generator=M0(t),t.name&&(this._name=t.name),n&&!jr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var O0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},znn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},aC;function mie(e){return e instanceof Ib||e instanceof QR||e instanceof JR}class gie{constructor(){aC.set(this,void 0),O0e(this,aC,!1,"f")}setModified(){O0e(this,aC,!0,"f")}get modifiedFlag(){return znn(this,aC,"f")}}aC=new WeakMap;class v_ extends gie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class yie extends gie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Vnn extends yie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Hnn extends yie{constructor(t){super(),this.requiresSelectionId=t&&lie(t)}run(t){t instanceof Sy&&(this.requiresSelectionId&&(mie(t.parent)||t.parent instanceof Wf||t.parent instanceof ma)||(this.setModified(),t.remove()))}}class qnn extends gie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof xh&&(r=t.producedFields(),are(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Wnn extends yie{constructor(){super()}run(t){t instanceof Ku&&!t.isRequired()&&(this.setModified(),t.remove())}}class Gnn extends v_{run(t){if(!mie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ma)if(t instanceof ma)this.setModified(),t.merge(n);else{if(ure(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Ynn extends v_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ma);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!jr(i)){this.setModified();const o=new ma(t,i);for(const a of n){if(a instanceof ma)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ma&&Ye(a.parse).length===0&&a.remove()}}}}}class Knn extends v_{run(t){t instanceof Ku||t.numChildren()>0||t instanceof uT||t instanceof Ib||(this.setModified(),t.remove())}}class Xnn extends v_{run(t){const n=t.children.filter(i=>i instanceof xh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Qnn extends v_{run(t){const n=t.children.filter(i=>i instanceof Wf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Jnn extends v_{constructor(t){super(),this.model=t}run(t){const n=!(mie(t)||t instanceof aT||t instanceof ma||t instanceof Sy),r=[],i=[];for(const s of t.children)s instanceof Sh&&(n&&!ure(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Sh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Znn extends v_{run(t){const n=[...t.children];if(!bb(n,o=>o instanceof Ku)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ku){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ku)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class b_ extends Mr{clone(){return new b_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function ern(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function trn(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class pm extends Mr{clone(){return new pm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(fs(f.order,"ascending"));const l={field:a,order:u};let c;return trn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new pm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return zh(p)}).filter(h=>!!h),c=ern(n),f=n.encoding.order;let d;if(je(f)||et(f))d=D4e(f);else{const h=EFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new pm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class lT extends Mr{clone(){return new lT(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>yre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function nrn(e){function t(n){if(!(n instanceof uT)){const r=n.clone();if(r instanceof Ku){const i=Dq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Wf||r instanceof pm||r instanceof lT||r instanceof b_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Pq(e){if(e instanceof uT)if(e.numChildren()===1&&!(e.children[0]instanceof Ku)){const t=e.children[0];(t instanceof Wf||t instanceof pm||t instanceof lT||t instanceof b_)&&t.addDimensions(e.fields),t.swapWithParent(),Pq(e)}else{const t=e.model.component.data.main;aje(t);const n=nrn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Pq)}function aje(e){if(e instanceof Ku&&e.type===Ei.Main&&e.numChildren()===1){const t=e.children[0];t instanceof uT||(t.swapWithParent(),aje(e))}}const Dq="scale_",HP=5;function Oq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Oq(t.children))return!1}return!0}function sf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function $0e(e,t,n){let r=e.sources,i=!1;return i=sf(new Wnn,r)||i,i=sf(new Hnn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=sf(new Knn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=sf(new Gnn,r)||i,i=sf(new Jnn(t),r)||i,i=sf(new qnn,r)||i,i=sf(new Ynn,r)||i,i=sf(new Qnn,r)||i,i=sf(new Xnn,r)||i,i=sf(new Vnn,r)||i,i=sf(new Znn,r)||i),e.sources=r,i}function rrn(e,t){Oq(e.sources);let n=0,r=0;for(let i=0;i<HP&&$0e(e,t,!0);i++)n++;e.sources.map(Pq);for(let i=0;i<HP&&$0e(e,t,!1);i++)r++;Oq(e.sources),Math.max(n,r)===HP&&Ze(`Maximum optimization runs(${HP}) reached.`)}class Js{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Js(()=>t(n))}}function uje(e){Wi(e)?irn(e):srn(e)}function irn(e){const t=e.component.scales;for(const n of Ye(t)){const r=arn(e,n);if(t[n].setWithExplicit("domains",r),lrn(e,n),e.component.data.isFaceted){let s=e;for(;!Ol(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)nm(a)&&(a.data=Dq+a.data.replace(Dq,""))}}}function srn(e){for(const n of e.children)uje(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=wy(r,o.getWithExplicit("domains"),"domains","scale",$q);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(nQt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function orn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=M0e(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=M0e(t,n);if(i)return"unaggregated"}return e}function arn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=orn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ms(r.x2)?Ms(r.x)?wy(kg(n,i,e,"x"),kg(n,i,e,"x2"),"domain","scale",$q):kg(n,i,e,"x2"):t==="y"&&Ms(r.y2)?Ms(r.y)?wy(kg(n,i,e,"y"),kg(n,i,e,"y2"),"domain","scale",$q):kg(n,i,e,"y2"):kg(n,i,e,t)}function urn(e,t,n){return e.map(r=>({signal:`{data: ${p5(r,{timeUnit:n,type:t})}}`}))}function F9(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?urn(e,t,r):[e]}function kg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ms(i[r]),{type:c}=l,f=l.timeUnit;if(TJt(t)){const p=kg(e,void 0,n,r),m=F9(t.unionWith,c,f);return Fd([...m,...p.value])}else{if(Rt(t))return Fd([t]);if(t&&t!=="unaggregated"&&!oFe(t))return Fd(F9(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return hl([[0,1]]);const p=n.requestDataName(Ei.Main);return hl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=hg(r)&&et(l)?crn(n,r,e):void 0;if(hp(l)){const p=F9([l.datum],c,f);return hl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ei.Main),{field:m}=l;return hl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(si(h.bin)){if(co(e))return hl(e==="bin-ordinal"?[]:[{data:KI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r,YR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(si(p)){const m=pie(n,h.field,p);return hl([new Js(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return hl([{data:n.requestDataName(Ei.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[fp(r)];if(wFe(h,p,s,a)){const m=n.requestDataName(Ei.Main),g=_y({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=QI(o)&&g!==.5&&ds(r);return hl([{data:m,field:n.vgField(r,y?{suffix:_5}:{})},{data:m,field:n.vgField(r,{suffix:y?w5:"end"})}])}}return hl(d?[{data:KI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ei.Main),field:n.vgField(r)}])}function j9(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":l5),...r?{field:Uc(r)}:{},...i?{order:i}:{}}}function lrn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=oFe(r)&&r,o=h_(i)&&n5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function crn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(bFe(i))return{op:"min",field:qx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Eh(i)){const a=s&&!o.has(i.field);return j9(i,a)}else if(vFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Um(c)||n1(c))return j9({field:at(l),order:u},d);if(yre(c)||!c)return j9({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function M0e(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!jXt.has(n)?{valid:!1,reason:IQt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:kQt(e)}:{valid:!0}:{valid:!1,reason:AQt(e)}}function $q(e,t,n,r){return e.explicit&&t.explicit&&Ze(OQt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function frn(e){const t=oh(e.map(o=>{if(nm(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=oh(e.map(o=>{if(nm(o)){const a=o.sort;return a!==void 0&&!KI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(nm(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(qge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=oh(n.map(o=>KI(o)||!("op"in o)||mt(o.op)&&o.op in $Xt?o:(Ze(MQt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(qge),i=!0);const s=oh(e.map(o=>nm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function vie(e){if(nm(e)&&mt(e.field))return e.field;if(BXt(e)){let t;for(const n of e.fields)if(nm(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(LQt),t}return Ze(FQt),t}else if(UXt(e)){Ze(jQt);const t=e.fields[0];return mt(t)?t:void 0}}function C5(e,t){const r=e.component.scales[t].get("domains").map(i=>(nm(i)&&(i.data=e.lookupDataSource(i.data)),i));return frn(r)}function lje(e){return cT(e)||bie(e)?e.children.reduce((t,n)=>t.concat(lje(n)),L0e(e)):L0e(e)}function L0e(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=drn(i.range,s,n,e),h=C5(e,n),p=a?otn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function drn(e,t,n,r){if(ds(n)){if(r1(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&nm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class cje extends mg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:bb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const hrn=["range","scheme"];function prn(e){const t=e.component.scales;for(const n of t5){const r=t[n];if(!r)continue;const i=mrn(n,e);r.setWithExplicit("range",i)}}function F0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ol(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new Js(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(si(r)){const a=pie(e,i,r);return new Js(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function mrn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of hrn)if(n[f]!==void 0){const d=bq(s,f),h=aFe(e,f);if(!d)Ze(B4e(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ds(e))return Fd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Js.fromName(y,g)}return m}))}else if(gt(p))return Fd({data:t.requestDataName(Ei.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Fd(p)}case"scheme":return Fd(grn(n[f]))}}const o=e===Ai||e==="xOffset"?"width":"height",a=r[o];if(Vh(a)){if(ds(e))if(co(s)){const f=dje(a,t,e);if(f)return Fd({step:f})}else Ze(U4e(o));else if(zR(e)){const f=e===Qy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=hje(a,s);if(p)return Fd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=yrn(e,t);return(u!==void 0||l!==void 0)&&bq(s,"rangeMin")&&je(c)&&c.length===2?Fd([u??c[0],l??c[1]]):hl(c)}function grn(e){return SJt(e)?{scheme:e.name,...Gu(e,["name"])}:{scheme:e}}function fje(e,t,n,{center:r}={}){const i=ol(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Yl(n)?r?[Js.fromName(a=>`${o(a)}/2`,s),Js.fromName(a=>`-${o(a)}/2`,s)]:[Js.fromName(o,s),0]:r?[Js.fromName(a=>`-${o(a)}/2`,s),Js.fromName(a=>`${o(a)}/2`,s)]:[0,Js.fromName(o,s)]}function yrn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ms(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ai:case po:{if(Hn(["point","band"],u)){const f=pje(e,n,r.view);if(Vh(f))return{step:dje(f,t,e)}}return fje(e,t,u)}case Qy:case iT:return vrn(e,t,u);case fg:{const f=t.component.scales[e].get("zero"),d=mje(i,f,r),h=wrn(i,n,t,r);return Fx(u)?_rn(d,h,brn(u,r,l,e)):[d,h]}case Jc:return[0,Math.PI*2];case f_:return[0,360];case gd:return[0,new Js(()=>{const f=t.getSignalName(Ol(t.parent)?"child_width":"width"),d=t.getSignalName(Ol(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case e1:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case t1:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case sl:return"symbol";case il:case lp:case cp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case dg:case Jy:case Zy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function dje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=hre(n),o=r[s];if(JFe({step:e,offsetIsDiscrete:ln(o)&&tFe(o.type)})==="offset"&&DFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${qXt(f)})`}}else return e.step}function hje(e,t){if(JFe({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function vrn(e,t,n){const r=e===Qy?"x":"y",i=t.getScaleComponent(r);if(!i)return fje(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=pje(r,t.size,t.config.view);if(Vh(l)){const c=hje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=Q4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=_y({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return a4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function pje(e,t,n){const r=e===Ai?"width":"height",i=t[r];return i||ZM(n,r)}function brn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ze(YQt(r)),3)}}function _rn(e,t,n){const r=()=>{const i=$f(t),s=$f(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Js(r):{signal:r()}}function mje(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${mje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(r5("size",e))}const j0e=.95;function wrn(e,t,n,r){const i={x:F0e(n,"x"),y:F0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=B0e(t,i,r.view);return lr(s)?s-1:new Js(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=B0e(t,i,r.view);return lr(s)?Math.pow(j0e*s,2):new Js(()=>`pow(${j0e} * ${s.signal}, 2)`)}}throw new Error(r5("size",e))}function B0e(e,t,n){const r=Vh(e.width)?e.width.step:JM(n,"width"),i=Vh(e.height)?e.height.step:JM(n,"height");return t.x||t.y?new Js(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function gje(e,t){Wi(e)?Ern(e,t):vje(e,t)}function Ern(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ms(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=bq(h,t),y=aFe(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(B4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":p_(u[t])||_==="temporal"||v?l.set(t,{signal:p5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in U0e?U0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:OFe(i,a),hasSecondaryRangeChannel:!!i[fp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const U0e={bins:({model:e,fieldOrDatumDef:t})=>et(t)?xrn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Srn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Trn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Crn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Arn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Irn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return krn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Rrn(e,t,n,r,i,s.scale,o)};function yje(e){Wi(e)?prn(e):vje(e,"range")}function vje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?yje(r):gje(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=wy(i,a,t,"scale",f5e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function xrn(e,t){const n=t.bin;if(si(n)){const r=pie(e,t.field,n);return new Js(()=>e.getSignalName(r))}else if(Co(n)&&h_(n)&&n.step!==void 0)return{step:n.step}}function Srn(e,t){if(Hn([il,lp,cp],e)&&t!=="nominal")return"hcl"}function Trn(e,t,n,r,i,s){var o;if(!((o=zh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Yu.TIME,Yu.UTC],e)))return ds(t)?!0:void 0}function Crn(e,t,n,r,i,s){if(ds(e)){if(Mf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Yu.POINT)return n.pointPadding}}function Arn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:fs(o,n==="bar"?a:u)}else if(zR(t)&&r===Yu.BAND)return i.offsetBandPaddingInner}}function Irn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Yu.BAND)return fs(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(zR(t)){if(n===Yu.POINT)return .5;if(n===Yu.BAND)return i.offsetBandPaddingOuter}}}function krn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Yl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Yl(e)&&t==="descending")return!0}function Rrn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Yl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Fx(i))return!0;if(!(et(t)&&t.bin)&&Hn([...dp,...AXt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Nrn(e,t,n,r,i=!1){const s=Prn(t,n,r,i),{type:o}=e;return hg(t)?o!==void 0?NJt(t,o)?et(n)&&!RJt(o,n.type)?(Ze(PQt(o,s)),s):o:(Ze(NQt(t,o,s)),s):s:null}function Prn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(xE(e)||R9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(N9(e,"ordinal")),"ordinal";if(ds(e)||zR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in gre)return"band";const s=n[ol(e)];return Tb(s)||Bx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return xE(e)?"time":R9(e)==="discrete"?(Ze(N9(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return xE(e)?et(t)&&si(t.bin)?"bin-ordinal":"linear":R9(e)==="discrete"?(Ze(N9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(F4e(t.type))}function Drn(e,{ignoreRange:t}={}){bje(e),uje(e);for(const n of kJt)gje(e,n);t||yje(e)}function bje(e){Wi(e)?e.component.scales=Orn(e):e.component.scales=Mrn(e)}function Orn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of t5){const o=Ms(t[s]);if(o&&n===mFe&&s===sl&&o.type===sT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=OFe(t,s),l=Nrn(a,s,o,r,u);i[s]=new cje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const $rn=f5e((e,t)=>Gge(e)-Gge(t));function Mrn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){bje(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=K5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?bJt(a.value,u.value)?r[o]=wy(a,u,"type","scale",$rn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new cje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class B9{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function Ol(e){return(e==null?void 0:e.type)==="facet"}function bie(e){return(e==null?void 0:e.type)==="concat"}function cT(e){return(e==null?void 0:e.type)==="layer"}class _ie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ku(a),this.name=t.name??i,this.title=jg(t.title)?{text:t.title}:t.title?ku(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new B9,this.projectionNameMap=r?r.projectionNameMap:new B9,this.signalNameMap=r?r.signalNameMap:new B9,this.data=t.data,this.description=t.description,this.transforms=Ven(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:GZt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:c5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new mg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Drn(this)}parseProjection(){sje(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){eje(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=di(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=di(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:jr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=rnn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Cc)t[r].title&&n.push(Qtn(this,r));for(const r of cie)n=n.concat(Jtn(this,r));return n}assembleAxes(){return Ftn(this.component.axes,this.config)}assembleLegends(){return nje(this)}assembleProjections(){return Cnn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...k4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),jr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Ol(this.parent)?lje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ci((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ei[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Ol(this.parent)){const n=G5e(t),r=e5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&r1(o)){const a=i.get("name"),u=C5(this,r),l=vie(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:W5e(a,i,c)}}else return Ze(bre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(_4e(t)&&hg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(XXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class _je extends _ie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return EZt(this.getMapping(),(r,i,s)=>{const o=zh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Wre(this.getMapping(),(r,i)=>{const s=zh(r);s&&t(s,i)},n)}}class A5 extends Mr{clone(){return new A5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class I5 extends Mr{clone(){return new I5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class ZI extends Mr{clone(){return new ZI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(wr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=hg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Yl(d)&&l.aggregate!=="count"&&!g_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new ZI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class k5 extends Mr{clone(){return new k5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class R5 extends Mr{clone(){return new R5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class CE extends Mr{clone(){return new CE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[vd,yd],[zc,bd]]){const s=i.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:hp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new CE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(sl)){const i=n.typedFieldDef(sl);i.type===sT&&(t=new CE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class ek extends Mr{clone(){return new ek(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[vd,yd],[zc,bd]]){const i=r.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:hp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0}),s=r[0]===zc?"2":"";(i[0]||i[1])&&(t=new ek(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Lv extends Mr{clone(){return new Lv(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Lv(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=MFe(n.mark,r);return new Lv(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Sen(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class N5 extends Mr{clone(){return new N5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class tk extends Mr{clone(){return new tk(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Ten(o)){let u=xje(o.data,s);u||(u=new Ib(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ku(u,l,Ei.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Cen(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ci(u),u)}catch{throw new Error(eQt(u))}if(a=l.materialized,!a)throw new Error(tQt(u))}return new tk(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Ze(lQt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class P5 extends Mr{clone(){return new P5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class D5 extends Mr{clone(){return new D5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class O5 extends Mr{clone(){return new O5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class $5 extends Mr{clone(){return new $5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function wje(e){let t=0;function n(r,i){if(r instanceof Ib&&!r.isGenerator&&!zx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ma&&(r.parent instanceof Ib&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof uT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof QR||r instanceof JR||r instanceof ZI||r instanceof aT||r instanceof Hx||r instanceof ek||r instanceof Wf||r instanceof tk||r instanceof lT||r instanceof b_||r instanceof R5||r instanceof k5||r instanceof A5||r instanceof N5||r instanceof P5||r instanceof D5||r instanceof Sy||r instanceof $5||r instanceof O5||r instanceof I5)&&i.transform.push(r.assemble()),(r instanceof Sh||r instanceof xh||r instanceof Lv||r instanceof pm||r instanceof CE)&&i.transform.push(...r.assemble()),r instanceof Ku&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ku?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ku&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Lrn(e){const t=[],n=wje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Frn(e,t){const n=[],r=wje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function jrn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Brn(e){for(const t of Cc)Urn(e,t);z0e(e,"x"),z0e(e,"y")}function Urn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Wx("title",null,r,t);let l=SE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Wx("labelOrient",a.header,r,t),f=a.header!==null?fs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Eje(e,t,f)]}}}function Eje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function z0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=hie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=jrn(a.get("orient"));o[u]??(o[u]=[Eje(e,s,!1)]);const l=oC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function zrn(e){wie(e),rL(e,"width"),rL(e,"height")}function Vrn(e){wie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";rL(e,t),rL(e,n)}function wie(e){for(const t of e.children)t.parseLayoutSize()}function rL(e,t){const n=G5e(t),r=e5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??K5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=wy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Hrn(e){const{size:t,component:n}=e;for(const r of dp){const i=ol(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Vh(s)?"step":s,!0)}else{const s=qrn(e,i);n.layoutSize.set(i,s,!1)}}}function qrn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=ZM(r.view,t);return r1(o)||Vh(a)?"step":a}else return Eq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Eq(r.view,t);{const s=ZM(r.view,t);return Vh(s)?s.step:s}}}function Mq(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class uA extends _je{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Cie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!WR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![fm,dm].includes(i)){Ze(r5(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(yq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Hre(t,n);return r.header?r.header=ku(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=M5(this),this.child.parseData()}parseLayoutSize(){wie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Brn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Cc)for(const r of fie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Wx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=S5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof uA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof uA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof uA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of dp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&r1(a)){const u=C5(this.child,i),l=vie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(bre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Cc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(si(d)&&u.push(at(f,{binSuffix:"end"})),Eh(h)){const{field:p,op:m=l5}=h,g=Mq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=qx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Eh(r.sort)?[Mq(r,r.sort,{expr:"datum"})]:je(r.sort)?[qx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Eh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Rq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of cie)if(t[s]){const o=Wx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Rq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Lrn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Cc.map(u=>this.facetSortFields(u)).flat(),order:Cc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ntn(this,[]))}]}getMapping(){return this.facet}}function Wrn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Eh(s.sort)){const{field:o,op:a=l5}=s.sort;e=i=new b_(e,{joinaggregate:[{op:a,field:o,as:Mq(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function xje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(JI(e)&&JI(a)){if(kl(e.values,a.values))return o}else if(zx(e)&&zx(a)){if(e.url===a.url)return o}else if(d5e(e)&&e.name===o.dataName)return o}}return null}function Grn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Ib({values:[]});return t.push(r),r}const n=xje(e.data,t);if(n)return M0(e.data)||(n.data.format=u4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Ib(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Yrn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Men(i))o=e=new Hx(e,i),s="derived";else if(rie(i)){const a=jnn(i);o=e=ma.makeWithAncestors(e,{},a,n)??e,e=new aT(e,t,i.filter)}else if(a5e(i))o=e=Sh.makeFromTransform(e,i,t),s="number";else if(Fen(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ma(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=xh.makeFromTransform(e,i);else if(jen(i))o=e=Wf.makeFromTransform(e,i),s="number",lie(t)&&(e=new Sy(e));else if(o5e(i))o=e=tk.make(e,t,i,r++),s="derived";else if(Den(i))o=e=new lT(e,i),s="number";else if(Oen(i))o=e=new b_(e,i),s="number";else if(Ben(i))o=e=pm.makeFromTransform(e,i),s="derived";else if(Uen(i))o=e=new R5(e,i),s="derived";else if(zen(i))o=e=new I5(e,i),s="derived";else if($en(i))o=e=new k5(e,i),s="derived";else if(Aen(i))o=e=new O5(e,i),s="derived";else if(Pen(i))e=new $5(e,i);else if(Len(i))o=e=Lv.makeFromTransform(e,i),s="derived";else if(Ien(i))o=e=new A5(e,i),s="derived";else if(ken(i))o=e=new P5(e,i),s="derived";else if(Ren(i))o=e=new D5(e,i),s="derived";else if(Nen(i))o=e=new N5(e,i),s="derived";else{Ze(uQt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function M5(e){var h;let t=Grn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(M0(i)||zx(i)||JI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new etn;M0(i)?(h5e(i)?t=new JR(t,i.sequence):iie(i)&&(t=new QR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ma.makeExplicit(t,e,o)??t,t=new Sy(t);const a=e.parent&&cT(e.parent);(Wi(e)||Ol(e))&&a&&(t=Sh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Yrn(t,e,o));const u=Unn(e),l=Bnn(e);t=ma.makeWithAncestors(t,{},{...u,...l},o)??t,Wi(e)&&(t=CE.parseAll(t,e),t=ek.parseAll(t,e)),(Wi(e)||Ol(e))&&(a||(t=Sh.makeFromEncoding(t,e)??t),t=xh.makeFromEncoding(t,e)??t,t=Hx.parseAllForSortIndex(t,e));const c=t=V0e(Ei.Raw,e,t);if(Wi(e)){const p=Wf.makeFromEncoding(t,e);p&&(t=p,lie(e)&&(t=new Sy(t))),t=Lv.makeFromEncoding(t,e)??t,t=pm.makeFromEncoding(t,e)??t}Wi(e)&&(t=ZI.make(t,e)??t);const f=t=V0e(Ei.Main,e,t);Wi(e)&&Mtn(e,f);let d=null;if(Ol(e)){const p=e.getName("facet");t=Wrn(t,e.facet)??t,d=new uT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function V0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Ku(n,s,e,i);return r[s]=o,o}class Krn extends _ie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(sQt),this.children=this.getChildren(t).map((l,c)=>Cie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=M5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return y5(t)?t.vconcat:tie(t)?t.hconcat:t.concat}parseLayoutSize(){Vrn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=die(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Xrn(e){return e===!1||e===null}const Qrn={disable:1,gridScale:1,scale:1,...NFe,labelExpr:1,encode:1},Sje=Ye(Qrn);class Eie extends mg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Eie(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Xrn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Jrn(e,t,n){const{encoding:r,config:i}=e,s=Ms(r[t])??Ms(r[fp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Sb(u))return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(jx(s)==="quantitative"){if(Bx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(jx(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Zrn(e){return dp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[oin(n,e)]),t),{})}const ein={bottom:"top",top:"bottom",left:"right",right:"left"};function tin(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=hie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=nin(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of dp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=ein[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function nin(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=rin(i,s)}}}else return t.map(n=>n.clone());return e}function rin(e,t){for(const n of Sje){const r=wy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return M4e(i,s);case"gridScale":return{explicit:i.explicit,value:fs(i.value,s.value)}}return b5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function iin(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:XI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===z5e(r,i))return!0}return e===n[t]}const sin=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function oin(e,t){var y,v;let n=t.axis(e);const r=new Eie,i=Ms(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Wtn(e),u=t.getScaleComponent(e).get("type"),l=jtn(e,u,a,t.config),c=n!==void 0?!n:Iq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Vtn(i,n,e,o.style,l),d=fFe(n.formatType,i,u),h=cFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of Sje){const w=_ in A0e?A0e[_](p):e0e(_)?n[_]:void 0,E=w!==void 0,x=iin(w,_,n,t,e);if(E&&x)r.set(_,w,x);else{const{configValue:S=void 0,configFrom:C=void 0}=e0e(_)&&_!=="values"?Iq(_,o.style,n.style,l):{},A=S!==void 0;E&&!A?r.set(_,w,x):(C!=="vgAxisConfig"||sin.has(_)&&A||KR(S)||Rt(S))&&r.set(_,S,!1)}}const m=n.encoding??{},g=RFe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=Y5e(m[w]??{},t),x=w==="labels"?Jrn(t,e,E):E;return x!==void 0&&!jr(x)&&(_[w]={update:x}),_},{});return jr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function ain({encoding:e,size:t}){for(const n of dp){const r=ol(n);Vh(t[r])&&f0(e[n])&&(delete t[r],Ze(U4e(r)))}return t}const uin={vgMark:"arc",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...Ey(e,"radius"),...Ey(e,"theta")})},lin={vgMark:"area",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...eL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...eL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...uie(e)})},cin={vgMark:"rect",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y")})},fin={vgMark:"shape",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===sT?{field:at(n,{expr:"datum"})}:{}}]}},din={vgMark:"image",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y"),...oie(e,"url")})},hin={vgMark:"line",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e,{vgChannel:"strokeWidth"}),...uie(e)})},pin={vgMark:"trail",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...uie(e)})};function xie(e,t){const{config:n}=e;return{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...eo("angle",e),...min(e,n,t)}}function min(e,t,n){return n?{shape:{value:n}}:eo("shape",e)}const gin={vgMark:"symbol",encodeEntry:e=>xie(e)},yin={vgMark:"symbol",encodeEntry:e=>xie(e,"circle")},vin={vgMark:"symbol",encodeEntry:e=>xie(e,"square")},bin={vgMark:"rect",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y")})},_in={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...eL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...eL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...eo("size",e,{vgChannel:"strokeWidth"})}}},win={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Zc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...oie(e),...eo("size",e,{vgChannel:"fontSize"}),...eo("angle",e),...x0e("align",Ein(e.markDef,n,t)),...x0e("baseline",xin(e.markDef,n,t)),...pa("radius",e,{defaultPos:null}),...pa("theta",e,{defaultPos:null})}}};function Ein(e,t,n){if(wr("align",e,n)===void 0)return"center"}function xin(e,t,n){if(wr("baseline",e,n)===void 0)return"middle"}const Sin={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...pa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eo("size",e,{defaultValue:Tin(e),vgChannel:i}),[s]:di(wr("thickness",n,t))}}};function Tin(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=wr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&r1(a)&&lr(a.step)?a.step*3/4:JM(t.view,i)*3/4}}const qP={arc:uin,area:lin,bar:cin,circle:yin,geoshape:fin,image:din,line:hin,point:gin,rect:bin,rule:_in,square:vin,text:win,tick:Sin,trail:pin};function Cin(e){if(Hn([a5,s5,UJt],e.mark)){const t=MFe(e.mark,e.encoding);if(t.length>0)return Ain(e,t)}else if(e.mark===o5){const t=gq.some(n=>wr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Iin(e)}return Sie(e)}const H0e="faceted_path_";function Ain(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:H0e+e.requestDataName(Ei.Main),data:e.requestDataName(Ei.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Sie(e,{fromPrefix:H0e})}]}const q0e="stack_group_";function Iin(e){var l;const[t]=Sie(e,{fromPrefix:q0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Dx(t.encode.update,["y","yc","y2","height",...gq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Gu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Dx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Gu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of gq){const f=zm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=di(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=zm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:di(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ei.Main),name:q0e+e.requestDataName(Ei.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function kin(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&id(o)&&pq(o.value)||!o&&pq(wr("order",i,s)))){if((je(o)||et(o))&&!n)return D4e(o,{expr:"datum"});if(g_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Eh(c))return{field:at({aggregate:qre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(vFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Sie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=fs(r.clip,Rin(e),Nin(e)),a=N4e(r),u=i.key,l=kin(e),c=Pin(e),f=wr("aria",r,s),d=qP[n].postEncodingTransform?qP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:qP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ei.Main)},encode:{update:qP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Rin(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Nin(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Pin(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Tje extends _je{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,n0e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Uh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=gen(o,s,{graticule:t.data&&iie(t.data)}));const u=this.encoding=_Zt(t.encoding||{},a,o.filled,s);this.markDef=r5e(o,u,s),this.size=ain({encoding:u,size:n0e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=n5e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Zre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===mFe,r=t&&vXt.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return t5.reduce((r,i)=>{const s=Ms(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ku(t);return je(n)&&(i.domain=n.map(wl)),je(r)&&(i.range=r.map(wl)),i}initAxes(t){return dp.reduce((n,r)=>{const i=t[r];if(ln(i)||r===Ai&&ln(t.x2)||r===po&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=KR(s)?R4e(s):wl(s)}return r}initLegends(t){return IXt.reduce((n,r)=>{const i=Ms(t[r]);if(i&&RXt(r)){const s=i.legend;n[r]=s&&ku(s)}return n},{})}parseData(){this.component.data=M5(this)}parseLayoutSize(){Hrn(this)}parseSelections(){this.component.selection=$tn(this,this.selection)}parseMarkGroup(){this.component.mark=Cin(this)}parseAxesAndHeaders(){this.component.axes=Zrn(this)}assembleSelectionTopLevelSignals(t){return rtn(this,t)}assembleSignals(){return[...j5e(this),...ttn(this,[])]}assembleSelectionData(t){return itn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return die(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!cT(this.parent))&&(t=g5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $v(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return zh(n)}typedFieldDef(t){const n=this.fieldDef(t);return ru(n)?n:null}}class Tie extends _ie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(v5(a))return new Tie(a,this,this.getName(`layer_${u}`),o,s);if(pg(a))return new Tje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(vre(a))})}parseData(){this.component.data=M5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){zrn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){tin(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),j5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),die(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return stn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),nje(this))}}function Cie(e,t,n,r,i){if(c5(e))return new uA(e,t,n,i);if(v5(e))return new Tie(e,t,n,r,i);if(pg(e))return new Tje(e,t,n,r,i);if(HZt(e))return new Krn(e,t,n,i);throw new Error(vre(e))}function Din(e,t={}){t.logger&&KQt(t.logger),t.fieldTitle&&AFe(t.fieldTitle);try{const n=t5e(WS(t.config,e.config)),r=c5e(e,n),i=Cie(r,null,"",void 0,n);return i.parse(),rrn(i.component.data,i),{spec:$in(i,Oin(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&XQt(),t.fieldTitle&&fZt()}}function Oin(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&Qen(t.type)){if(i==="step"&&s==="step")Ze(Bge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(Bge(e5(o)));const a=o==="width"?"height":"width";t.type=Jen(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...p0e(n,!1),...p0e(e,!0)}}function $in(e,t,n={},r){const i=e.config?ien(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Frn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...QFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Min=dXt.version,Lin=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Ox,accessPathWithDatum:lre,compile:Din,contains:Hn,deepEqual:kl,deleteNestedProperty:zM,duplicate:nn,entries:vy,every:ore,fieldIntersection:ure,flatAccessWithDatum:c4e,getFirstDefined:fs,hasIntersection:are,hash:Vn,internalField:h4e,isBoolean:KI,isEmpty:jr,isEqual:pXt,isInternalField:p4e,isNullOrFalse:pq,isNumeric:YF,keys:Ye,logicalExpr:oA,mergeDeep:u4e,never:a4e,normalize:c5e,normalizeAngle:XI,omit:Gu,pick:Dx,prefixGenerator:mq,removePathFromField:rT,replaceAll:_b,replacePathInField:Uc,resetIdCounter:gXt,setEqual:l4e,some:bb,stringify:Br,titleCase:jR,unique:oh,uniqueId:d4e,vals:Mo,varName:Ci,version:Min},Symbol.toStringTag,{value:"Module"}));function Cje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Fin="vega-themes",jin="2.15.0",Bin="Themes for stylized Vega and Vega-Lite visualizations.",Uin=["vega","vega-lite","themes","style"],zin="BSD-3-Clause",Vin={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Hin=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],qin="build/vega-themes.js",Aie="build/vega-themes.module.js",Win="build/vega-themes.min.js",Gin="build/vega-themes.min.js",Yin="build/vega-themes.module.d.ts",Kin={type:"git",url:"https://github.com/vega/vega-themes.git"},Xin=["src","build"],Qin={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Jin={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Zin={vega:"*","vega-lite":"*"},esn={},tsn={name:Fin,version:jin,description:Bin,keywords:Uin,license:zin,author:Vin,contributors:Hin,main:qin,module:Aie,unpkg:Win,jsdelivr:Gin,types:Yin,repository:Kin,files:Xin,scripts:Qin,devDependencies:Jin,peerDependencies:Zin,dependencies:esn};const J_="#fff",W0e="#888",nsn={background:"#333",view:{stroke:W0e},title:{color:J_,subtitleColor:J_},style:{"guide-label":{fill:J_},"guide-title":{fill:J_}},axis:{domainColor:J_,gridColor:W0e,tickColor:J_}},y1="#4572a7",rsn={background:"#fff",arc:{fill:y1},area:{fill:y1},line:{stroke:y1,strokeWidth:2},path:{stroke:y1},rect:{fill:y1},shape:{stroke:y1},symbol:{fill:y1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},v1="#30a2da",U9="#cbcbcb",isn="#999",ssn="#333",G0e="#f0f0f0",Y0e="#333",osn={arc:{fill:v1},area:{fill:v1},axis:{domainColor:U9,grid:!0,gridColor:U9,gridWidth:1,labelColor:isn,labelFontSize:10,titleColor:ssn,tickColor:U9,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:G0e,group:{fill:G0e},legend:{labelColor:Y0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Y0e,titleFontSize:14,titlePadding:10},line:{stroke:v1,strokeWidth:2},path:{stroke:v1,strokeWidth:.5},rect:{fill:v1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:v1},bar:{binSpacing:2,fill:v1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},b1="#000",asn={group:{fill:"#e5e5e5"},arc:{fill:b1},area:{fill:b1},line:{stroke:b1},path:{stroke:b1},rect:{fill:b1},shape:{stroke:b1},symbol:{fill:b1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},usn=22,lsn="normal",K0e="Benton Gothic, sans-serif",X0e=11.5,csn="normal",_1="#82c6df",z9="Benton Gothic Bold, sans-serif",Q0e="normal",J0e=13,f2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},fsn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:z9,fontSize:usn,fontWeight:lsn},arc:{fill:_1},area:{fill:_1},line:{stroke:_1,strokeWidth:2},path:{stroke:_1},rect:{fill:_1},shape:{stroke:_1},symbol:{fill:_1,size:30},axis:{labelFont:K0e,labelFontSize:X0e,labelFontWeight:csn,titleFont:z9,titleFontSize:J0e,titleFontWeight:Q0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:K0e,labelFontSize:X0e,symbolType:"square",titleFont:z9,titleFontSize:J0e,titleFontWeight:Q0e},range:{category:f2["category-6"],diverging:f2["fireandice-6"],heatmap:f2["fire-7"],ordinal:f2["fire-7"],ramp:f2["fire-7"]}},w1="#ab5787",WP="#979797",dsn={background:"#f9f9f9",arc:{fill:w1},area:{fill:w1},line:{stroke:w1},path:{stroke:w1},rect:{fill:w1},shape:{stroke:w1},symbol:{fill:w1,size:30},axis:{domainColor:WP,domainWidth:.5,gridWidth:.2,labelColor:WP,tickColor:WP,tickWidth:.2,titleColor:WP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},E1="#3e5c69",hsn={background:"#fff",arc:{fill:E1},area:{fill:E1},line:{stroke:E1},path:{stroke:E1},rect:{fill:E1},shape:{stroke:E1},symbol:{fill:E1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},uc="#1696d2",Z0e="#000000",psn="#FFFFFF",GP="Lato",V9="Lato",msn="Lato",gsn="#DEDDDD",ysn=18,d2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},vsn={background:psn,title:{anchor:"start",fontSize:ysn,font:GP},axisX:{domain:!0,domainColor:Z0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:V9,labelAngle:0,tickColor:Z0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:GP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:gsn,gridWidth:1,labelFontSize:12,labelFont:V9,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:GP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:V9,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:GP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:d2["six-groups-cat-1"],diverging:d2["diverging-colors"],heatmap:d2["diverging-colors"],ordinal:d2["six-groups-seq"],ramp:d2["shades-blue"]},area:{fill:uc},rect:{fill:uc},line:{color:uc,stroke:uc,strokeWidth:5},trail:{color:uc,stroke:uc,strokeWidth:0,size:1},path:{stroke:uc,strokeWidth:.5},point:{filled:!0},text:{font:msn,color:uc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:uc,stroke:null}},arc:{fill:uc},shape:{stroke:uc},symbol:{fill:uc,size:30}},x1="#3366CC",eye="#ccc",YP="Arial, sans-serif",bsn={arc:{fill:x1},area:{fill:x1},path:{stroke:x1},rect:{fill:x1},shape:{stroke:x1},symbol:{stroke:x1},circle:{fill:x1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:YP,fontSize:12},"guide-title":{font:YP,fontSize:12},"group-title":{font:YP,fontSize:12}},title:{font:YP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:eye,tickColor:eye,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Iie=e=>e*(1/3+1),tye=Iie(9),nye=Iie(10),rye=Iie(12),h2="Segoe UI",iye="wf_standard-font, helvetica, arial, sans-serif",sye="#252423",p2="#605E5C",oye="transparent",_sn="#C8C6C4",ff="#118DFF",wsn="#12239E",Esn="#E66C37",xsn="#6B007B",Ssn="#E044A7",Tsn="#744EC2",Csn="#D9B300",Asn="#D64550",Aje=ff,Ije="#DEEFFF",aye=[Ije,Aje],Isn=[Ije,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Aje],ksn={view:{stroke:oye},background:oye,font:h2,header:{titleFont:iye,titleFontSize:rye,titleColor:sye,labelFont:h2,labelFontSize:nye,labelColor:p2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:p2,labelFontSize:tye,titleFont:iye,titleColor:sye,titleFontSize:rye,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:_sn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ff},line:{stroke:ff,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:h2,fontSize:tye,fill:p2},arc:{fill:ff},area:{fill:ff,line:!0,opacity:.6},path:{stroke:ff},rect:{fill:ff},point:{fill:ff,filled:!0,size:75},shape:{stroke:ff},symbol:{fill:ff,strokeWidth:1.5,size:50},legend:{titleFont:h2,titleFontWeight:"bold",titleColor:p2,labelFont:h2,labelFontSize:nye,labelColor:p2,symbolType:"circle",symbolSize:75},range:{category:[ff,wsn,Esn,xsn,Ssn,Tsn,Csn,Asn],diverging:aye,heatmap:aye,ordinal:Isn}},H9='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Rsn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',q9=400,KP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Nsn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Psn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function L5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=KP.gridBg[e],i=KP.textPrimary[e],s=KP.textSecondary[e],o=n==="dark"?Nsn:Psn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:H9,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Rsn,labelFontWeight:q9,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:KP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:H9,fill:s,fontWeight:q9},"guide-title":{font:H9,fill:s,fontWeight:q9}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Dsn=L5({theme:"white",background:"#ffffff"}),Osn=L5({theme:"g10",background:"#f4f4f4"}),$sn=L5({theme:"g90",background:"#262626"}),Msn=L5({theme:"g100",background:"#161616"}),Lsn=tsn.version,Fsn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Osn,carbong100:Msn,carbong90:$sn,carbonwhite:Dsn,dark:nsn,excel:rsn,fivethirtyeight:osn,ggplot2:asn,googlecharts:bsn,latimes:fsn,powerbi:ksn,quartz:dsn,urbaninstitute:vsn,version:Lsn,vox:hsn},Symbol.toStringTag,{value:"Module"}));function jsn(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:uye(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=uye(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Bsn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function uye(e,t){return JSON.stringify(e,Bsn(t))}var Usn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const kje="vg-tooltip-element",zsn={offsetX:10,offsetY:10,id:kje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Vsn,maxDepth:2,formatTooltip:jsn,baseURL:""};function Vsn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Hsn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Usn.toString().replace(kje,e)}function qsn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Wsn{constructor(t){this.options={...zsn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Hsn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=qsn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var W9={};function Gsn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G9,lye;function Ysn(){return lye||(lye=1,G9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),G9}var Ksn=yr;yr.Node=kb;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Qsn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Jsn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Xsn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Xsn(e,t,n){var r=t===e.head?new kb(n,null,t,e):new kb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Qsn(e,t){e.tail=new kb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Jsn(e,t){e.head=new kb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function kb(e,t,n,r){if(!(this instanceof kb))return new kb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ysn()(yr)}catch{}const Zsn=Ksn,ev=Symbol("max"),Lp=Symbol("length"),Z_=Symbol("lengthCalculator"),lA=Symbol("allowStale"),wv=Symbol("maxAge"),Pp=Symbol("dispose"),cye=Symbol("noDisposeOnSet"),Gs=Symbol("lruList"),hf=Symbol("cache"),Rje=Symbol("updateAgeOnGet"),Y9=()=>1;class eon{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ev]=t.max||1/0;const n=t.length||Y9;if(this[Z_]=typeof n!="function"?Y9:n,this[lA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[wv]=t.maxAge||0,this[Pp]=t.dispose,this[cye]=t.noDisposeOnSet||!1,this[Rje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ev]=t||1/0,m2(this)}get max(){return this[ev]}set allowStale(t){this[lA]=!!t}get allowStale(){return this[lA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[wv]=t,m2(this)}get maxAge(){return this[wv]}set lengthCalculator(t){typeof t!="function"&&(t=Y9),t!==this[Z_]&&(this[Z_]=t,this[Lp]=0,this[Gs].forEach(n=>{n.length=this[Z_](n.value,n.key),this[Lp]+=n.length})),m2(this)}get lengthCalculator(){return this[Z_]}get length(){return this[Lp]}get itemCount(){return this[Gs].length}rforEach(t,n){n=n||this;for(let r=this[Gs].tail;r!==null;){const i=r.prev;fye(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gs].head;r!==null;){const i=r.next;fye(this,t,r,n),r=i}}keys(){return this[Gs].toArray().map(t=>t.key)}values(){return this[Gs].toArray().map(t=>t.value)}reset(){this[Pp]&&this[Gs]&&this[Gs].length&&this[Gs].forEach(t=>this[Pp](t.key,t.value)),this[hf]=new Map,this[Gs]=new Zsn,this[Lp]=0}dump(){return this[Gs].map(t=>iL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gs]}set(t,n,r){if(r=r||this[wv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[Z_](n,t);if(this[hf].has(t)){if(s>this[ev])return AE(this,this[hf].get(t)),!1;const u=this[hf].get(t).value;return this[Pp]&&(this[cye]||this[Pp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Lp]+=s-u.length,u.length=s,this.get(t),m2(this),!0}const o=new ton(t,n,s,i,r);return o.length>this[ev]?(this[Pp]&&this[Pp](t,n),!1):(this[Lp]+=o.length,this[Gs].unshift(o),this[hf].set(t,this[Gs].head),m2(this),!0)}has(t){if(!this[hf].has(t))return!1;const n=this[hf].get(t).value;return!iL(this,n)}get(t){return K9(this,t,!0)}peek(t){return K9(this,t,!1)}pop(){const t=this[Gs].tail;return t?(AE(this,t),t.value):null}del(t){AE(this,this[hf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[hf].forEach((t,n)=>K9(this,n,!1))}}const K9=(e,t,n)=>{const r=e[hf].get(t);if(r){const i=r.value;if(iL(e,i)){if(AE(e,r),!e[lA])return}else n&&(e[Rje]&&(r.value.now=Date.now()),e[Gs].unshiftNode(r));return i.value}},iL=(e,t)=>{if(!t||!t.maxAge&&!e[wv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[wv]&&n>e[wv]},m2=e=>{if(e[Lp]>e[ev])for(let t=e[Gs].tail;e[Lp]>e[ev]&&t!==null;){const n=t.prev;AE(e,t),t=n}},AE=(e,t)=>{if(t){const n=t.value;e[Pp]&&e[Pp](n.key,n.value),e[Lp]-=n.length,e[hf].delete(n.key),e[Gs].removeNode(t)}};class ton{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const fye=(e,t,n,r)=>{let i=n.value;iL(e,i)&&(AE(e,n),e[lA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var non=eon;const ron=Object.freeze({loose:!0}),ion=Object.freeze({}),son=e=>e?typeof e!="object"?ron:e:ion;var kie=son,Lq={exports:{}};const oon="2.0.0",Nje=256,aon=Number.MAX_SAFE_INTEGER||9007199254740991,uon=16,lon=Nje-6,con=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Rie={MAX_LENGTH:Nje,MAX_SAFE_COMPONENT_LENGTH:uon,MAX_SAFE_BUILD_LENGTH:lon,MAX_SAFE_INTEGER:aon,RELEASE_TYPES:con,SEMVER_SPEC_VERSION:oon,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const fon=typeof process=="object"&&W9&&W9.NODE_DEBUG&&/\bsemver\b/i.test(W9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var F5=fon;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Rie,s=F5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Lq,Lq.exports);var Nie=Lq.exports;const dye=/^[0-9]+$/,Pje=(e,t)=>{const n=dye.test(e),r=dye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},don=(e,t)=>Pje(t,e);var hon={compareIdentifiers:Pje,rcompareIdentifiers:don};const XP=F5,{MAX_LENGTH:hye,MAX_SAFE_INTEGER:QP}=Rie,{safeRe:pye,t:mye}=Nie,pon=kie,{compareIdentifiers:ew}=hon;let mon=class kd{constructor(t,n){if(n=pon(n),t instanceof kd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>hye)throw new TypeError(`version is longer than ${hye} characters`);XP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?pye[mye.LOOSE]:pye[mye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>QP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>QP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>QP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<QP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(XP("SemVer.compare",this.version,this.options,t),!(t instanceof kd)){if(typeof t=="string"&&t===this.version)return 0;t=new kd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof kd||(t=new kd(t,this.options)),ew(this.major,t.major)||ew(this.minor,t.minor)||ew(this.patch,t.patch)}comparePre(t){if(t instanceof kd||(t=new kd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(XP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ew(r,i)}while(++n)}compareBuild(t){t instanceof kd||(t=new kd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(XP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ew(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ew(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Pie=mon;const gye=Pie,gon=(e,t,n)=>new gye(e,n).compare(new gye(t,n));var fT=gon;const yon=fT,von=(e,t,n)=>yon(e,t,n)===0;var bon=von;const _on=fT,won=(e,t,n)=>_on(e,t,n)!==0;var Eon=won;const xon=fT,Son=(e,t,n)=>xon(e,t,n)>0;var Ton=Son;const Con=fT,Aon=(e,t,n)=>Con(e,t,n)>=0;var Ion=Aon;const kon=fT,Ron=(e,t,n)=>kon(e,t,n)<0;var Non=Ron;const Pon=fT,Don=(e,t,n)=>Pon(e,t,n)<=0;var Oon=Don;const $on=bon,Mon=Eon,Lon=Ton,Fon=Ion,jon=Non,Bon=Oon,Uon=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return $on(e,n,r);case"!=":return Mon(e,n,r);case">":return Lon(e,n,r);case">=":return Fon(e,n,r);case"<":return jon(e,n,r);case"<=":return Bon(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var zon=Uon,X9,yye;function Von(){if(yye)return X9;yye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}X9=t;const n=kie,{safeRe:r,t:i}=Nie,s=zon,o=F5,a=Pie,u=Dje();return X9}var Q9,vye;function Dje(){if(vye)return Q9;vye=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(P=P.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",P);const z=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}Q9=e;const t=non,n=new t({max:1e3}),r=kie,i=Von(),s=F5,o=Pie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Nie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Rie,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let F=!0;const M=D.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(D,$)=>(s("comp",D,$),D=E(D,$),s("caret",D),D=_(D,$),s("tildes",D),D=S(D,$),s("xrange",D),D=A(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",_=(D,$)=>D.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(D,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(M,B,U,H,P)=>{s("tilde",D,M,B,U,H,P);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(s("replaceTilde pr",P),z=`>=${B}.${U}.${H}-${P} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(D,$)=>D.trim().split(/\s+/).map(F=>x(F,$)).join(" "),x=(D,$)=>{s("caret",D,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return D.replace(F,(B,U,H,P,z)=>{s("caret",D,B,U,H,P,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${P}-${z} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${P}${M} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(F=>C(F,$)).join(" ")),C=(D,$)=>{D=D.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(M,B,U,H,P,z)=>{s("xRange",D,M,B,U,H,P,z);const W=v(U),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(U=+U+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${P}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},A=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),k=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=D=>($,F,M,B,U,H,P,z,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${D?"-0":""}`:v(U)?F=`>=${M}.${B}.0${D?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:D?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(D,$,F)=>{for(let M=0;M<D.length;M++)if(!D[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<D.length;M++)if(s(D[M].semver),D[M].semver!==i.ANY&&D[M].semver.prerelease.length>0){const B=D[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return Q9}const Hon=Dje(),qon=(e,t,n)=>{try{t=new Hon(t,n)}catch{return!1}return t.test(e)};var Won=qon,Oje=Gsn(Won);function Gon(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Yon=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function $je(e,...t){for(const n of t)Kon(e,n);return e}function Kon(e,t){for(const n of Object.keys(t))GS(e,n,t[n],!0)}const mf=PKt;let nk=Lin;const JP=typeof window<"u"?window:void 0;var Aye;nk===void 0&&((Aye=JP==null?void 0:JP.vl)!=null&&Aye.compile)&&(nk=JP.vl);const Xon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Qon={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},uC={vega:"Vega","vega-lite":"Vega-Lite"},sL={vega:mf.version,"vega-lite":nk?nk.version:"not available"},Jon={vega:e=>e,"vega-lite":(e,t)=>nk.compile(e,{config:t}).spec},Zon=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,ean="chart-wrapper";function tan(e){return typeof e=="function"}function bye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${uC[r]} JSON Source`}function nan(e,t){if(e.$schema){const n=Cje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${uC[n.library]}, but mode argument sets ${uC[t]??t}.`);const r=n.library;return Oje(sL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${uC[r]} ${n.version}, but the current version of ${uC[r]} is v${sL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Mje(e){return!!(e&&"load"in e)}function _ye(e){return Mje(e)?e:mf.loader(e)}function ran(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function ian(e,t,n={}){let r,i;mt(t)?(i=_ye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=ran(r),o=s.loader;(!i||o)&&(i=_ye(n.loader??o));const a=await wye(s,i),u=await wye(n,i),l={...$je(u,a),config:WS(u.config??{},a.config??{})};return await oan(e,r,l,i)}async function wye(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function san(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function oan(e,t,n={},r){const i=n.theme?WS(Fsn[n.theme],n.config??{}):n.config,s=Yy(n.actions)?n.actions:$je({},Xon,n.actions??{}),o={...Qon,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??mf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:x,rootContainer:S}=san(c);if(!x.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Yon.toString():n.defaultStyle,S.appendChild(C)}}const f=nan(t,n.mode);let d=Jon[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Cje(d.$schema);Oje(sL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${sL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(ean),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):Z4(d,p,!0,!1).newDocument),n.formatLocale&&mf.formatLocale(n.formatLocale),n.timeFormatLocale&&mf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const x=n.expressionFunctions[E];"fn"in x?mf.expressionFunction(E,x.fn,x.visitor):x instanceof Function&&mf.expressionFunction(E,x)}const{ast:m}=n,g=mf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||mf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:mf.expressionInterpreter??n.expr??zKt}:{}});if(y.addSignalListener("autosize",(E,x)=>{const{type:S}=x;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:x}=n,S=E&&!Mje(E)?E==null?void 0:E.baseURL:void 0,C=tan(x)?x:new Wsn({baseURL:S,...x===!0?{}:x}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:x}=typeof v=="boolean"?{}:v;y.hover(E,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const C=document.createElement("summary");C.innerHTML=Zon,S.append(C),_=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",_)}const x=document.createElement("div");if(E.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${S}`,A.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(S,k);this.href=O}),x.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){bye(JB(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),x.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){bye(JB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),x.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Gon(window,S,{config:i,mode:f,renderer:a,spec:JB(t)}),A.preventDefault()}),x.append(C)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function aan(e){return!!e&&{}.toString.call(e)==="[object Function]"}function uan(e,t,n){n&&(aan(n)?n(e.data(t)):e.change(t,mf.changeset().remove(()=>!0).insert(n)))}function lan(e,t){Object.keys(t).forEach(n=>{uan(e,n,t[n])})}function Lje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Fje=()=>{};function J9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function can(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Lje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!_D(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Eye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Z9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function lC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jje extends _r.PureComponent{constructor(){super(...arguments),lC(this,"containerRef",_r.createRef()),lC(this,"resultPromise",void 0),lC(this,"handleError",t=>{const{onError:n=Fje}=this.props;n(t,this.containerRef.current),console.warn(t)}),lC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Lje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=can(Z9(this.props),Z9(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!lH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Eye(a,s),i&&J9(a,i)),a.run()})}else lH(i,s)||this.modifyView(o=>{s&&Eye(o,s),i&&J9(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Z9(this.props);this.resultPromise=ian(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;J9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return _r.createElement("div",{ref:this.containerRef,className:t,style:n})}}lC(jje,"propTypes",{className:fae.string,onError:fae.func});function Fq(){return Fq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fq.apply(this,arguments)}function jq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const fan={};class Bje extends _r.PureComponent{constructor(){super(...arguments),jq(this,"vegaEmbed",_r.createRef()),jq(this,"handleNewView",t=>{this.update();const{onNewView:n=Fje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){lH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{lan(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return _r.createElement(jje,Fq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}jq(Bje,"defaultProps",{data:fan});function Bq(){return Bq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bq.apply(this,arguments)}function Uq(e){return _r.createElement(Bje,Bq({},e,{mode:"vega-lite"}))}function dan({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=CL(!0),[o,a]=Sv(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return b.jsxs($b,{p:"lg",withBorder:!0,ref:o,children:[b.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[b.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&b.jsx(CQe,{size:20}),e.type==="numerical"&&b.jsx($Qe,{size:20}),(e.type==="shortText"||e.type==="longText")&&b.jsx(wQe,{size:20}),e.type==="likert"&&b.jsx(kQe,{size:20}),e.type==="dropdown"&&b.jsx(zQe,{size:20}),e.type==="slider"&&b.jsx(gQe,{size:20}),e.type==="radio"&&b.jsx(FQe,{size:20}),e.type==="checkbox"&&b.jsx(VQe,{size:20}),e.type==="iframe"&&b.jsx(PQe,{size:20}),b.jsx(ui,{order:5,ml:4,children:e.id})]}),b.jsx(TQe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),b.jsxs(IL,{in:i,mah:400,children:[b.jsx(pe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:b.jsx(BE,{})}),b.jsxs(_Y,{cols:2,h:360,children:[b.jsx(bm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?b.jsx(Uq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):b.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&b.jsx(_C,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Response Values: "}),u.map((f,d)=>b.jsx(Nt,{align:"center",gap:"xs",children:b.jsx(Xe,{children:f[e.id]})},d))]})]})}),b.jsx(bm,{mih:200,children:e.type==="metadata"?b.jsx(Uq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Response Specification: "}),b.jsx(_C,{block:!0,children:JSON.stringify(e,null,2)}),b.jsx("br",{}),l&&b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Correct Answer: "}),b.jsx(_C,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function han({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&kNe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?b.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>b.jsx(dan,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):b.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:b.jsx(Xe,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function pan({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=x0(e.sequence);return l=fK(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=Em();return b.jsxs($b,{shadow:"sm",p:"md",withBorder:!0,children:[b.jsx(Nt,{direction:"row",justify:"space-between",children:b.jsx(Sl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:b.jsxs(ls,{children:[b.jsx(Sl,{value:"completed",label:"Completed"}),b.jsx(Sl,{value:"inprogress",label:"In Progress"}),b.jsx(Sl,{value:"rejected",label:"Rejected"})]})})}),b.jsx(BE,{my:"xs"}),i.length===0?b.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:b.jsx(Xe,{children:"No data available."})}):b.jsxs(Nt,{direction:"row",children:[b.jsx(pe,{w:340,children:b.jsx(Y$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),b.jsx(BE,{orientation:"vertical",mx:"md"}),b.jsx(han,{participantData:i,studyConfig:e,trialId:u})]})]})}function man({globalConfig:e}){const{studyId:t}=Em(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=Yh(),{tab:c}=Em(),{user:f}=i_(),d=I.useCallback(async()=>{if(a(!0),t){const g=await A4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(_=>!_.rejected&&_.completed),y=n.filter(_=>!_.rejected&&!_.completed),v=n.filter(_=>_.rejected);return[g,y,v]},[n]);return b.jsxs(b.Fragment,{children:[b.jsx(ZC,{studyIds:e.configsList}),b.jsx(pi.Main,{children:b.jsxs(Oc,{fluid:!0,style:{height:"100%",position:"relative"},children:[b.jsx(Ll,{visible:o}),b.jsxs(Nt,{direction:"row",align:"center",children:[b.jsx(ui,{order:5,children:t}),b.jsx(SOe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),b.jsx(Nl,{h:"xs"}),b.jsxs(ns,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[b.jsxs(ns.List,{children:[b.jsx(ns.Tab,{value:"table",leftSection:b.jsx(HQe,{size:16}),children:"Table View"}),b.jsx(ns.Tab,{value:"stats",leftSection:b.jsx(xQe,{size:16}),children:"Trial Stats"}),b.jsx(ai,{label:"Coming soon",position:"bottom",children:b.jsx(ns.Tab,{value:"replay",leftSection:b.jsx(LQe,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx(ns.Tab,{value:"manage",leftSection:b.jsx(qwe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx(ns.Panel,{value:"table",pt:"xs",children:i&&b.jsx(S4t,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),b.jsx(ns.Panel,{value:"stats",pt:"xs",children:i&&b.jsx(pan,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),b.jsx(ns.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx(ns.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?b.jsx(P4t,{studyId:t,refresh:d}):b.jsx(Oc,{mt:20,children:b.jsx(nS,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(Vwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function xye({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=i_(),{storageEngine:o}=Cs(),[a,u]=I.useState(!1),l=Em();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?b.jsx(Ll,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx($Y,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function Uje(e,t){if(e instanceof vc){t(!0);const n=new Hp,r=nM();try{await pOt(r,n,_Pe)}catch(i){fM({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function gan(){const{user:e}=i_(),[t,n]=I.useState(!1),{storageEngine:r}=Cs();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&fM({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx($Y,{to:"/"}):b.jsx(Oc,{children:b.jsx(jb,{padding:"lg",children:b.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[b.jsx(Dy,{maw:200,mt:50,mb:100,src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(fn,{onClick:()=>Uje(r,n),leftSection:b.jsx(qQe,{}),variant:"filled",children:"Sign In With Google"})]}),b.jsx(Ll,{visible:t})]})})})}var zje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},_=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:_,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+_(B,2,"0")+":"+_(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-P:P-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",x={};x[E]=v;var S="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[S])},A=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();x[H]&&(U=H),M&&(x[H]=M,U=H);var P=F.split("-");if(!U&&P.length>1)return $(P[0])}else{var z=F.name;x[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(C($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},N=w;N.l=A,N.i=C,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var z=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,P=N.p(M),z=function(he,ve){var Ie=N.w(U.$u?Date.UTC(U.$y,ve,he):new Date(U.$y,ve,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ve){return N.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),P="set"+(this.$u?"UTC":""),z=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[o]=P+"Seconds",U[s]=P+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var P=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(P===f)return this.set(f,this.$M+M);if(P===h)return this.set(h,this.$y+M);if(P===l)return z(1);if(P===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[P]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ve,Ie,be,Ke){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Ke)},de=function(ve){return N.s(z%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Ke=ve<12?"AM":"PM";return be?Ke.toLowerCase():Ke};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return P}return null}(ve)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,P=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(P,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return x[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=A(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return k.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=A,k.isDayjs=C,k.unix=function($){return k(1e3*$)},k.en=x[E],k.Ls=x,k.p={},k})})(zje);var yan=zje.exports;const Tt=Kl(yan);function van({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function ban({formatter:e,...t}){return(e||van)(t)}function _an({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function Vje({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=_an({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?Vje({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function wan(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Ean(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Die({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=wan(i.key);if(s){i.preventDefault();const o=Ean(e);Vje({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var Hje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",w=y+"|"+_,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,w=n[v];w>=0&&(m[w]=parseInt(_,10))}var E=m[3],x=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=v.utcOffset();v=v.add(p-_,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(x,S,C){var A=x-60*S*1e3,k=l(A,C);if(S===k)return[A,S];var N=l(A-=60*(k-S)*1e3,C);return k===N?[A,k]:[x-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),_=v[0],w=v[1],E=o(_).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(Hje);var xan=Hje.exports;const San=Kl(xan);var qje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var x=E.match(r);if(!x)return null;var S=(""+x[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+w,n)).$offset=v,_.$x.$localOffset=w}else _=this.utc();return _};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(qje);var Tan=qje.exports;const Can=Kl(Tan);Tt.extend(Can);Tt.extend(San);function Aan(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Sye=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=Aan(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function L0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Sye(i,n,e)):Sye(t,n,e)}function Ian({minDate:e,maxDate:t,timezone:n}){const r=L0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const kan={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},Ran=I.createContext(kan);function ec(){const e=I.useContext(Ran),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Nan(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()} – ${r.toISOString()}`:`${n.toISOString()} –`:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function Wje({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:Nan(e,t),name:n,form:r})}Wje.displayName="@mantine/dates/HiddenDatesInput";var Gje={day:"m_396ce5cb"};const Pan={},Dan=(e,{size:t})=>({day:{"--day-size":tn(t,"day-size")}}),Oie=Me((e,t)=>{const n=xe("Day",Pan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:w,...E}=n,x=dt({name:f||"Day",classes:Gje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dan,rootSelector:"day"}),S=ec();return b.jsx(xs,{...x("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(L0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Oie.classes=Gje;Oie.displayName="@mantine/dates/Day";function Oan({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var Yje={weekday:"m_18a3eca"};const $an={},Man=(e,{size:t})=>({weekdaysRow:{"--wr-fz":uo(t),"--wr-spacing":as(t)}}),$ie=Me((e,t)=>{const n=xe("WeekdaysRow",$an,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:Yje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Man,rootSelector:"weekdaysRow"}),g=ec(),y=Oan({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(d,{...m("weekday"),children:v},_));return b.jsx(pe,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});$ie.classes=Yje;$ie.displayName="@mantine/dates/WeekdaysRow";function Lan(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Fan(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function jan({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Lan(s,t),a=Fan(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function Kje(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Xje(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function Qje(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function Ban(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Qje(c,n)&&Xje(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||Kje(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var Jje={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Uan={withCellSpacing:!0},j5=Me((e,t)=>{const n=xe("Month",Uan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:x,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:Jje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=ec(),H=jan({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=Ban(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Hm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!Kje(ce,h),ve=(x==null?void 0:x(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(P,"date");return b.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:b.jsx(Oie,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:_,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ve,static:S,disabled:(g==null?void 0:g(ce))||!Qje(ce,v)||!Xje(ce,y),ref:Ke=>C==null?void 0:C(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),A==null||A(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),N==null||N(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),k==null||k(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return b.jsx("tr",{...B("monthRow"),children:ne},G)});return b.jsxs(pe,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&b.jsx("thead",{...B("monthThead"),children:b.jsx($ie,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),b.jsx("tbody",{...B("monthTbody"),children:j})]})});j5.classes=Jje;j5.displayName="@mantine/dates/Month";var Zje={pickerControl:"m_dc6a3c71"};const zan={},Van=(e,{size:t})=>({pickerControl:{"--dpc-fz":uo(t),"--dpc-size":tn(t,"dpc-size")}}),B5=Me((e,t)=>{const n=xe("PickerControl",zan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:Zje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Van,rootSelector:"pickerControl"});return b.jsx(xs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});B5.classes=Zje;B5.displayName="@mantine/dates/PickerControl";function e8e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function Han(e,t,n,r){const i=e.flat().filter(a=>{var u;return!e8e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function t8e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var n8e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const qan={yearsListFormat:"YYYY",withCellSpacing:!0},U5=Me((e,t)=>{const n=xe("YearsList",qan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,A=dt({name:m||"YearsList",classes:n8e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=ec(),N=t8e(l),O=Han(N,d,h,p),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),P=Tt(B).isSame(O,"year");return b.jsx("td",{...A("yearsListCell"),"data-with-spacing":x||void 0,children:b.jsx(B5,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:e8e(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return b.jsx("tr",{...A("yearsListRow"),children:M},F)});return b.jsx(pe,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:b.jsx("tbody",{children:D})})});U5.classes=n8e;U5.displayName="@mantine/dates/YearsList";function r8e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function Wan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!r8e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function Gan(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var i8e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Yan={monthsListFormat:"MMM",withCellSpacing:!0},z5=Me((e,t)=>{const n=xe("MonthsList",Yan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,A=dt({name:l||"MonthsList",classes:i8e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=ec(),N=Gan(c),O=Wan(N,h,p,m),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),P=Tt(B).isSame(O,"month");return b.jsx("td",{...A("monthsListCell"),"data-with-spacing":x||void 0,children:b.jsx(B5,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:r8e(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return b.jsx("tr",{...A("monthsListRow"),children:M},F)});return b.jsx(pe,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:b.jsx("tbody",{children:D})})});z5.classes=i8e;z5.displayName="@mantine/dates/MonthsList";var s8e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Kan={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Xan=(e,{size:t})=>({calendarHeader:{"--dch-control-size":tn(t,"dch-control-size"),"--dch-fz":uo(t)}}),i1=Me((e,t)=>{const n=xe("CalendarHeader",Kan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:w,withNext:E,withPrevious:x,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...k}=n,N=dt({name:S||"CalendarHeader",classes:s8e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xan,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return b.jsxs(pe,{...N("calendarHeader"),ref:t,...k,children:[x&&b.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||b.jsx(FE,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(xs,{component:_?"button":"div",...N("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?O:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:C||!_?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&b.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||b.jsx(FE,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});i1.classes=s8e;i1.displayName="@mantine/dates/CalendarHeader";function Qan(e){const t=t8e(e);return[t[0][0],t[3][0]]}const Jan={decadeLabelFormat:"YYYY"},V5=Me((e,t)=>{const n=xe("DecadeLevel",Jan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:E,previousDisabled:x,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:k,classNames:N,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=ec(),[H,P]=Qan(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:D,size:M},W=typeof E=="boolean"?E:o?!Tt(P).endOf("year").isBefore(o):!1,j=typeof x=="boolean"?x:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return b.jsxs(pe,{"data-decade-level":!0,size:M,ref:t,...B,children:[b.jsx(i1,{label:typeof k=="function"?k(H,P):`${q(H,k)} – ${q(P,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...z}),b.jsx(U5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});V5.classes={...U5.classes,...i1.classes};V5.displayName="@mantine/dates/DecadeLevel";const Zan={yearLabelFormat:"YYYY"},H5=Me((e,t)=>{const n=xe("YearLevel",Zan,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:x,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,P=ec(),z={__staticSelector:D||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof x=="boolean"?x:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(r).startOf("year").isAfter(s):!1;return b.jsxs(pe,{"data-year-level":!0,size:F,ref:t,...H,children:[b.jsx(i1,{label:typeof O=="function"?O(r):Tt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,...z}),b.jsx(z5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});H5.classes={...i1.classes,...z5.classes};H5.displayName="@mantine/dates/YearLevel";const eun={monthLabelFormat:"MMMM YYYY"},q5=Me((e,t)=>{const n=xe("MonthLevel",eun,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:w,__preventFocus:E,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:P,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=ec(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return b.jsxs(pe,{"data-month-level":!0,size:G,ref:t,...ce,children:[b.jsx(i1,{label:typeof P=="function"?P(r):Tt(r).locale(i||de.locale).format(P),__preventFocus:E,__stopPropagation:x,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),b.jsx(j5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:E,__stopPropagation:x,static:ne,withCellSpacing:w,...he})]})});q5.classes={...j5.classes,...i1.classes};q5.displayName="@mantine/dates/MonthLevel";var o8e={levelsGroup:"m_30b26e33"};const tun={},s1=Me((e,t)=>{const n=xe("LevelsGroup",tun,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:o8e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return b.jsx(pe,{ref:t,...f("levelsGroup"),...c})});s1.classes=o8e;s1.displayName="@mantine/dates/LevelsGroup";const nun={numberOfColumns:1},W5=Me((e,t)=>{const n=xe("DecadeLevelGroup",nun,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,classNames:E,styles:x,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:O,size:D,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const P=Tt(r).add(H*10,"years").toDate();return b.jsx(V5,{size:D,yearsListFormat:a,decade:P,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>Die({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(P):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:x,unstyled:S,withCellSpacing:f},H)});return b.jsx(s1,{classNames:E,styles:x,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:S,...F,children:B})});W5.classes={...s1.classes,...V5.classes};W5.displayName="@mantine/dates/DecadeLevelGroup";const run={numberOfColumns:1},G5=Me((e,t)=>{const n=xe("YearLevelGroup",run,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:x,classNames:S,styles:C,unstyled:A,__staticSelector:k,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(O).fill(0).map((P,z)=>{const W=Tt(r).add(z,"years").toDate();return b.jsx(H5,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>Die({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:x,getMonthControlProps:u,classNames:S,styles:C,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return b.jsx(s1,{classNames:S,styles:C,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:A,...B,children:H})});G5.classes={...H5.classes,...s1.classes};G5.displayName="@mantine/dates/YearLevelGroup";const iun={numberOfColumns:1},Y5=Me((e,t)=>{const n=xe("MonthLevelGroup",iun,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:P,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=I.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=Tt(r).add(he,"months").toDate();return b.jsx(q5,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>Die({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Ke},levelControlAriaLabel:typeof U=="function"?U(ve):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:x,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return b.jsx(s1,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});Y5.classes={...s1.classes,...q5.classes};Y5.displayName="@mantine/dates/MonthLevelGroup";var a8e={input:"m_6fa5e2aa"};const sun={},K5=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:w,readOnly:E,disabled:x,value:S,name:C,form:A,type:k,...N}=i_e("PickerInputBase",sun,e),O=_||(g&&w&&!E&&!x?b.jsx(Gm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!E&&b.jsx(Yi,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),b.jsx(mi.Wrapper,{...r,children:b.jsxs(Po,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[b.jsx(Po.Target,{children:b.jsx(mi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:x,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Xi(a8e.input,s==null?void 0:s.input)},...N,children:d||b.jsx(mi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),b.jsx(Po.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),b.jsx(Wje,{value:S,name:C,form:A,type:k})]})});K5.classes=a8e;K5.displayName="@mantine/dates/PickerInputBase";const Tye=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Mie({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=ec(),[a,u,l]=Ss({value:L0("add",t,o.getTimezone(),!i),defaultValue:L0("add",n,o.getTimezone(),!i),finalValue:Tye(e),onChange:f=>{r==null||r(L0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Tye(e),u(c))),[c,u,l]}function eU(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function oun(e){return e===0?"month":e===1?"year":"decade"}function g2(e,t,n){return oun(eh(eU(e,0),eU(t,0),eU(n,2)))}const aun={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},X5=Me((e,t)=>{const n=xe("Calendar",aun,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Ke,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:me}=Hm({classNames:ne,styles:ce,props:n}),[Ae,He]=Ss({value:a?g2(a,s,i):void 0,defaultValue:o?g2(o,s,i):void 0,finalValue:g2(void 0,s,i),onChange:u}),[ut,_t]=Mie({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Ln={__staticSelector:be||"Calendar",styles:me,classNames:vt,unstyled:de,size:Ke},Cr=ec(),Fn=h||d||1,cr=ut||L0("add",new Date,Cr.getTimezone()),gn=()=>{const In=Tt(cr).add(Fn,"month").toDate();ct==null||ct(In),_t(In)},An=()=>{const In=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(In),_t(In)},nr=()=>{const In=Tt(cr).add(Fn,"year").toDate();ke==null||ke(In),_t(In)},rr=()=>{const In=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(In),_t(In)},zo=()=>{const In=Tt(cr).add(10*Fn,"year").toDate();it==null||it(In),_t(In)},$i=()=>{const In=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(In),_t(In)};return b.jsxs(pe,{ref:t,size:Ke,"data-calendar":!0,...ht,children:[Ae==="month"&&b.jsx(Y5,{month:cr,minDate:he,maxDate:ve,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,onNext:gn,onPrevious:An,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:H,...Ln}),Ae==="year"&&b.jsx(G5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:P,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,Mi)=>{w&&_t(Mi),He(g2("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln}),Ae==="decade"&&b.jsx(W5,{decade:cr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:zo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,Mi)=>{_&&_t(Mi),He(g2("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln})]})});X5.classes={...W5.classes,...G5.classes,...Y5.classes};X5.displayName="@mantine/dates/Calendar";function uun(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function Cye(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function lun({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Mie({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=x=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(x).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[x,f];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(x).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([x,null]),p(null),d(x);return}if(e==="multiple"){l.some(S=>Tt(S).isSame(x,t))?c(l.filter(S=>!Tt(S).isSame(x,t))):c([...l,x]);return}l&&o&&Tt(x).isSame(l,t)?c(null):c(x)},g=x=>f instanceof Date&&h instanceof Date?Cye(x,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Cye(x,l):!1,y=e==="range"?x=>{a==null||a(x),p(null)}:a,v=x=>l[0]instanceof Date&&Tt(x).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,_=x=>l[1]instanceof Date?Tt(x).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(x).isSame(l[0],t),w=x=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(x,t)),inRange:g(x),firstInRange:v(x),lastInRange:_(x),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(x,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(x,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(x,t)||void 0};const S=Tt(l).isSame(x,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const cun={type:"default",defaultLevel:"month",numberOfColumns:1},Q5=Me((e,t)=>{const n=xe("DatePicker",cun,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...w}=n,{onDateChange:E,onRootMouseLeave:x,onHoveredDateChange:S,getControlProps:C}=lun({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:A,resolvedStyles:k}=Hm({classNames:r,styles:i,props:n}),N=ec();return b.jsx(X5,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:x,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{S(D),y==null||y(O,D)},__onDayClick:(O,D)=>{E(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:L0("add",w.date,N.getTimezone(),_),__timezoneApplied:!0})});Q5.classes=X5.classes;Q5.displayName="@mantine/dates/DatePicker";function fun({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ec(),[f,d]=CL(!1),[h,p]=Mie({type:e,value:t,defaultValue:n,onChange:r}),m=ban({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=_=>{o&&(e==="default"&&d.close(),e==="range"&&_[0]&&_[1]&&d.close()),p(a&&e==="multiple"?[..._].sort((w,E)=>w.getTime()-E.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const dun={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Lie=Me((e,t)=>{const n=xe("DatePickerInput",dun,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:w,defaultDate:E,valueFormatter:x,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=Hm({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=uun(S),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=fun({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:x}),H=Array.isArray(O)?O[0]||E:O||E,P=ec();return b.jsx(K5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:b.jsx(Q5,{...k,size:p,variant:m,type:r,value:O,defaultDate:H||Ian({maxDate:_,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:L0("add",k.date,P.getTimezone()),__timezoneApplied:!0})})});Lie.classes={...K5.classes,...Q5.classes};Lie.displayName="@mantine/dates/DatePickerInput";function hun(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function pun({studyId:e,allParticipants:t}){const n=Yh(),[r,i]=Sv(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>hun(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return b.jsx(Oc,{children:b.jsxs(jb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(Nt,{direction:"row",align:"center",children:[b.jsx(ui,{order:5,children:e}),b.jsx(SOe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),b.jsxs(ls,{children:[b.jsx(GZ,{allParticipants:t,studyId:e}),b.jsx(ai,{label:"Analyze and manage study data",children:b.jsx(fn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Vu}analysis/stats/${e}`,children:b.jsx(SQe,{})})})]})]}),b.jsx(Lie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mt:16,children:"Finished Participants"}),b.jsx(Uq,{spec:h,actions:!1})]}):b.jsx(pe,{h:293.4,children:b.jsx(Dc,{style:{height:"100%"},children:b.jsx(Xe,{children:"Not enough participants for chart"})})})]})})}function mun({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=Cs(),{user:u}=i_();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await A4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof vc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?b.jsx(Ha.Col,{span:{md:12,xl:6},children:b.jsx(pun,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return b.jsxs(b.Fragment,{children:[b.jsx(ZC,{studyIds:e.configsList}),b.jsx(pi.Main,{children:b.jsx(Oc,{fluid:!0,children:b.jsxs(pe,{children:[b.jsx(ui,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(Ha,{children:[l.length>0?l:b.jsx(Oc,{mt:100,children:b.jsx(Xe,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(Ll,{visible:t})]})]})})})]})}function gun(){const{user:e,triggerAuth:t}=i_(),{storageEngine:n}=Cs(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[_,w]=I.useState(null),E=Xxe({initialValues:{email:""},validate:{email:Tat("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof vc){const D=await(n==null?void 0:n.getUserManagementData("authentication"));i(D==null?void 0:D.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const x=async()=>{if(u(!0),n instanceof vc){const O=await Uje(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},S=async O=>{u(!0),n instanceof vc&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof vc){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}u(!1),c(!1),E.setValues({email:""})},A=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof vc){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof vc,[n]);return b.jsxs(b.Fragment,{children:[b.jsx(Oc,{children:b.jsxs(jb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(ui,{mb:20,order:3,children:"Authentication"}),r?b.jsx(Nt,{children:b.jsx(Xe,{children:"Authentication is enabled."})}):b.jsxs(Nt,{justify:"space-between",children:[b.jsx(pe,{children:b.jsx(Xe,{children:"Authentication is currently disabled."})}),b.jsx(ai,{label:"You can only enable auth when using Firebase",disabled:N,children:b.jsx(fn,{onClick:O=>N?x():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(Nt,{mt:40,direction:"column",children:[b.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(ui,{order:6,children:"Enabled Users"}),b.jsx(FY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var D;return b.jsxs(Nt,{justify:"space-between",mb:10,children:[b.jsx(Xe,{children:O}),O===((D=e.user)==null?void 0:D.email)?b.jsx(Xe,{color:"blue",size:"xs",children:"You"}):b.jsx(Lb,{variant:"subtle",onClick:()=>A(O),children:b.jsx(Gwe,{color:"red"})})]},O)}):null]}):null]})}),b.jsx(Yi,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(pe,{component:"form",onSubmit:E.onSubmit(()=>C()),children:[b.jsx(Jg,{leftSection:b.jsx(bQe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),b.jsxs(Nt,{mt:30,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(fn,{type:"submit",children:"Save"})]})]})}),b.jsxs(Yi,{opened:f,size:"large",onClose:()=>d(!1),title:b.jsxs(Xe,{fw:700,children:["Remove",y,"?"]}),children:[b.jsxs(Xe,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:y})," ","as an administrator?"]}),b.jsxs(Nt,{mt:40,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),b.jsx(fn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),b.jsxs(Yi,{opened:h,size:"md",onClose:()=>p(!1),title:b.jsx(Xe,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(Xe,{mt:40,children:["User"," ",b.jsx("b",{children:_==null?void 0:_.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(Nt,{mt:40,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(fn,{onClick:()=>S(_),children:"Yes, I'm sure."})]})]}),b.jsxs(Yi,{opened:m,size:"md",onClose:()=>g(!1),title:b.jsx(Xe,{fw:700,children:"An Error Occurred."}),children:[b.jsxs(Xe,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",b.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),b.jsx(Nt,{mt:40,justify:"right",children:b.jsx(fn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),b.jsx(Ll,{visible:a})]})}class yun extends EOe{constructor(){super("localStorage");hu(this,"studyDatabase");hu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await pw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await cM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await cM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await pw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=lM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=pw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=lM();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await pw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await pw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function vun(){let e,t=!1;{const n=new vc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new yun;await n.connect(),e=n}return e}function tw({title:e}){const t=Oy();return I.useEffect(()=>{document.title=e},[t,e]),null}async function bun(){const t=await(await fetch(`${Vu}global.json`)).text();return XRt(t)}function _un(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await ENt(e))}a()},[e]),I.useEffect(()=>{e||bun().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Cs();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await vun();s(u)}a()},[s,i]);const o=async a=>i instanceof vc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(uQe,{basename:Vu,children:b.jsx(w4t,{children:b.jsx(pQe,{children:b.jsx(pi,{padding:"md",header:{height:70},children:b.jsxs(iQe,{children:[b.jsx(Cp,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx(tw,{title:"ReVISit | Home"}),b.jsx(ZC,{studyIds:e.configsList}),b.jsx(Nst,{globalConfig:e,studyConfigs:n})]})}),b.jsx(Cp,{path:"/:studyId/*",element:b.jsxs(b.Fragment,{children:[b.jsx(tw,{title:"ReVISit | Study"}),b.jsx(xNt,{globalConfig:e})]})}),b.jsx(Cp,{path:"/analysis/dashboard",element:b.jsxs(b.Fragment,{children:[b.jsx(tw,{title:"ReVISit | Analysis"}),b.jsx(mun,{globalConfig:e})]})}),b.jsx(Cp,{path:"/analysis",element:b.jsx($V,{to:"/analysis/dashboard"})}),b.jsx(Cp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:b.jsxs(b.Fragment,{children:[b.jsx(tw,{title:"ReVISit | Analysis"}),b.jsx(xye,{paramToCheck:"studyId",paramCallback:o,children:b.jsx(man,{globalConfig:e})})]})}),b.jsx(Cp,{path:"/analysis/stats/:studyId",element:b.jsx($V,{to:"./table",replace:!0})}),b.jsx(Cp,{path:"/settings",element:b.jsxs(xye,{children:[b.jsx(tw,{title:"ReVISit | Settings"}),b.jsx(ZC,{studyIds:e.configsList}),b.jsx(pi.Main,{children:b.jsx(gun,{})})]})}),b.jsx(Cp,{path:"/login",element:b.jsxs(b.Fragment,{children:[b.jsx(tw,{title:"ReVISit | Login"}),b.jsx(ZC,{studyIds:e.configsList}),b.jsx(pi.Main,{children:b.jsx(gan,{})})]})})]})})})})}):null}tU.createRoot(document.getElementById("root")).render(b.jsx(_r.StrictMode,{children:b.jsx(pXe,{children:b.jsxs(ube,{children:[b.jsx(Jm,{}),b.jsx(_un,{})]})})}))});export default wun();
